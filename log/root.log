[2016-10-21 09:08:48.411] [INFO] console - AutobahnJS debug enabled
[2016-10-21 09:08:50.860] [INFO] Server - starting...
[2016-10-21 09:08:50.868] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 09:08:50.973] [INFO] console - using WAMP transport type: websocket
[2016-10-21 09:08:51.272] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 09:08:51.340] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 09:08:51.372] [INFO] Server - connection.onopen()
[2016-10-21 09:08:51.379] [INFO] console - [ 64, 128379651096576, {}, 'ru.kopa.model.create' ]
[2016-10-21 09:08:51.400] [DEBUG] Server - api:model.create registered
[2016-10-21 09:08:51.418] [INFO] console - [ 64, 3828042166173696, {}, 'ru.kopa.model.get' ]
[2016-10-21 09:08:51.428] [DEBUG] Server - api:model.get registered
[2016-10-21 09:08:51.431] [INFO] console - [ 64, 633704198176768, {}, 'ru.kopa.model.save' ]
[2016-10-21 09:08:51.438] [DEBUG] Server - api:model.save registered
[2016-10-21 09:08:51.442] [INFO] console - [ 64, 7042576712466432, {}, 'ru.kopa.pingPong' ]
[2016-10-21 09:08:51.451] [DEBUG] Server - api:pingPong registered
[2016-10-21 09:08:51.453] [INFO] console - [ 64, 1971293461151744, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 09:08:51.459] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 09:08:51.460] [INFO] console - [ 64, 5770180399464448, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 09:08:51.468] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 09:08:51.469] [INFO] console - [ 64, 3639233394769920, {}, 'ru.kopa.error' ]
[2016-10-21 09:08:51.474] [DEBUG] Server - api:error registered
[2016-10-21 09:08:51.474] [INFO] console - [ 64, 911797963980800, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 09:08:51.482] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 09:08:51.483] [INFO] console - [ 64, 8503916331270144, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 09:08:51.488] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 09:08:51.488] [INFO] console - [ 64, 7394402460762112, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 09:08:51.506] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 09:08:51.508] [INFO] console - [ 64, 5572445991862272, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 09:08:51.522] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 09:08:51.524] [INFO] console - [ 64, 168618369220608, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 09:08:51.529] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 09:08:51.531] [INFO] console - [ 64, 3155427560783872, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 09:08:51.537] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 09:08:51.540] [INFO] console - [ 64, 2510357797011456, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 09:08:51.547] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 09:08:51.548] [INFO] console - [ 64, 194441438560256, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 09:08:51.553] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 09:08:51.556] [INFO] console - [ 64, 8884096799342592, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 09:08:51.562] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 09:08:51.564] [INFO] console - [ 64,
  6588701809311744,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 09:08:51.571] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 09:08:51.572] [INFO] console - [ 64, 25055922749440, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 09:08:51.576] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 09:08:51.579] [INFO] Server - started
[2016-10-21 09:10:15.958] [INFO] console - [ 70, 3, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:10:16.009] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:10:16.016] [INFO] console - [ 70, 4, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:10:16.286] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:10:16.294] [INFO] console - [ 70, 5, {}, [ 'КОПА' ] ]
[2016-10-21 09:10:16.303] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:10:16.307] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
[2016-10-21 09:10:16.715] [INFO] console - [ 8,
  68,
  6,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)' ] } ]
[2016-10-21 09:10:16.863] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:16.908] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:10:16.916] [INFO] console - [ 8,
  68,
  8,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:10:17.002] [INFO] console - [ 70, 10, {}, [ undefined ] ]
[2016-10-21 09:10:17.010] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:10:17.017] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:10:17.050] [INFO] console - Executing (9dd5a6e4-2d2d-4e1e-9f08-3ddfb17368a7): START TRANSACTION;
[2016-10-21 09:10:17.057] [INFO] console - Executing (9dd5a6e4-2d2d-4e1e-9f08-3ddfb17368a7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:17.133] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:10:17.142] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:10:17.393] [INFO] console - Executing (9dd5a6e4-2d2d-4e1e-9f08-3ddfb17368a7): COMMIT;
[2016-10-21 09:10:17.396] [INFO] console - [ 70,
  11,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:17.417] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:10:17.422] [INFO] console - Executing (b1043ef0-1bf5-46bf-b686-dadd54b976d9): START TRANSACTION;
[2016-10-21 09:10:17.427] [INFO] console - Executing (b1043ef0-1bf5-46bf-b686-dadd54b976d9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:17.446] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:17.523] [INFO] console - Executing (b1043ef0-1bf5-46bf-b686-dadd54b976d9): COMMIT;
[2016-10-21 09:10:17.525] [INFO] console - [ 70,
  12,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 4,
      path: '/1/',
      note: 'unit test 1476955936493',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:32:27 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:17.566] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:17.578] [INFO] console - Executing (723193a5-afc8-4552-a100-0634ccef7563): START TRANSACTION;
[2016-10-21 09:10:17.580] [INFO] console - Executing (723193a5-afc8-4552-a100-0634ccef7563): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:17.613] [INFO] console - Executing (723193a5-afc8-4552-a100-0634ccef7563): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:10:17.586 +00:00','2016-10-21 04:10:17.586 +00:00',2,2) RETURNING *;
[2016-10-21 09:10:17.627] [INFO] console - Executing (723193a5-afc8-4552-a100-0634ccef7563): COMMIT;
[2016-10-21 09:10:17.631] [INFO] console - [ 70, 13, {}, [ '11' ] ]
[2016-10-21 09:10:17.647] [INFO] console - Executing (f4038c5b-0586-485c-9e0e-55398db67584): START TRANSACTION;
[2016-10-21 09:10:17.656] [INFO] console - Executing (f4038c5b-0586-485c-9e0e-55398db67584): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:17.667] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 11);
[2016-10-21 09:10:17.704] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:10:17.683 +00:00',"updated_at"='2016-10-21 04:10:17.685 +00:00' WHERE "id" = '11'
[2016-10-21 09:10:17.712] [INFO] console - Executing (f4038c5b-0586-485c-9e0e-55398db67584): COMMIT;
[2016-10-21 09:10:17.715] [INFO] console - [ 70, 14, {}, [ undefined ] ]
[2016-10-21 09:10:17.723] [INFO] console - [ 16, 8239742902599680, {}, 'ru.kopa.model.Kopa.id11.change' ]
[2016-10-21 09:10:17.726] [INFO] console - [ 16,
  3900347540045824,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 11 ] ]
[2016-10-21 09:10:17.739] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 11 }
[2016-10-21 09:10:17.746] [INFO] console - Executing (38731f81-2fe8-45b8-815d-17c58579ac0c): START TRANSACTION;
[2016-10-21 09:10:17.748] [INFO] console - Executing (38731f81-2fe8-45b8-815d-17c58579ac0c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:17.758] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 11);
[2016-10-21 09:10:17.772] [INFO] console - Executing (38731f81-2fe8-45b8-815d-17c58579ac0c): COMMIT;
[2016-10-21 09:10:17.774] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:10:17.777] [INFO] console - [ 70,
  15,
  {},
  [ { id: '11',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:10:17 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:10:17 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:17 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:17.867] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:10:17.877] [INFO] console - [ 70, 16, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:10:17.912] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:10:17.941] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:10:17.945] [INFO] console - [ 70, 17, {}, [ [ [Object] ] ] ]
[2016-10-21 09:10:18.414] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:10:18.427] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:10:18.437] [INFO] console - [ 70, 18, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:10:18.465] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:10:18.484] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:10:18.498] [INFO] console - [ 70, 19, {}, [ [ [Object] ] ] ]
[2016-10-21 09:10:18.525] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:10:18.531] [INFO] console - Executing (35363ed5-d798-4e1f-a8f5-723b6df96dc0): START TRANSACTION;
[2016-10-21 09:10:18.534] [INFO] console - Executing (35363ed5-d798-4e1f-a8f5-723b6df96dc0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:18.551] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:10:18.563] [INFO] console - Executing (35363ed5-d798-4e1f-a8f5-723b6df96dc0): COMMIT;
[2016-10-21 09:10:18.566] [INFO] console - [ 70,
  20,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 1,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:10:18.605] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:18.613] [INFO] console - Executing (0e2b3541-bfcc-4b42-bea8-2e781b02b6ad): START TRANSACTION;
[2016-10-21 09:10:18.618] [INFO] console - Executing (0e2b3541-bfcc-4b42-bea8-2e781b02b6ad): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:18.638] [INFO] console - Executing (0e2b3541-bfcc-4b42-bea8-2e781b02b6ad): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477023018587 temp','2016-10-21 04:10:18.629 +00:00','2016-10-21 04:10:18.629 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:18.653] [INFO] console - Executing (0e2b3541-bfcc-4b42-bea8-2e781b02b6ad): COMMIT;
[2016-10-21 09:10:18.656] [INFO] console - [ 70, 21, {}, [ '9' ] ]
[2016-10-21 09:10:18.668] [INFO] console - [ 16,
  3470839106240512,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '9' ] ]
[2016-10-21 09:10:18.695] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:18.701] [INFO] console - Executing (4af86e91-2e62-48aa-8320-4e60a4c0f234): START TRANSACTION;
[2016-10-21 09:10:18.704] [INFO] console - Executing (4af86e91-2e62-48aa-8320-4e60a4c0f234): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:18.716] [INFO] console - Executing (4af86e91-2e62-48aa-8320-4e60a4c0f234): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477023018677temp',0,0,'2016-10-21 04:10:18.708 +00:00','2016-10-21 04:10:18.708 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:18.724] [INFO] console - Executing (4af86e91-2e62-48aa-8320-4e60a4c0f234): COMMIT;
[2016-10-21 09:10:18.727] [INFO] console - [ 70, 22, {}, [ '8' ] ]
[2016-10-21 09:10:18.730] [INFO] console - [ 16,
  2609561477316608,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '8' ] ]
[2016-10-21 09:10:18.824] [INFO] console - [ 70, 24, {}, [ undefined ] ]
[2016-10-21 09:10:18.831] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:10:18.837] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:10:18.846] [INFO] console - Executing (b483419e-9285-4a2d-9bbe-55f8a765c85d): START TRANSACTION;
[2016-10-21 09:10:18.849] [INFO] console - Executing (b483419e-9285-4a2d-9bbe-55f8a765c85d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:18.857] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:10:18.870] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:10:18.882] [INFO] console - Executing (b483419e-9285-4a2d-9bbe-55f8a765c85d): COMMIT;
[2016-10-21 09:10:18.885] [INFO] console - [ 70,
  25,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:10:18.927] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:10:18.949] [INFO] console - [ 70, 26, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:10:18.982] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:18.990] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): START TRANSACTION;
[2016-10-21 09:10:18.997] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.034] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:10:19.017 +00:00','2016-10-21 04:10:19.017 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:10:19.047] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:19.061] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:19.066] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:10:19.072] [INFO] console - Executing (738744af-63c4-46a4-8c0a-221f17c976cf): COMMIT;
[2016-10-21 09:10:19.075] [INFO] console - [ 70, 27, {}, [ '12' ] ]
[2016-10-21 09:10:19.083] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:19.095] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:10:19.099] [INFO] console - Executing (83a70d06-6122-4d12-a94f-70af09f14bc8): START TRANSACTION;
[2016-10-21 09:10:19.111] [INFO] console - Executing (83a70d06-6122-4d12-a94f-70af09f14bc8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.119] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:19.133] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 12);
[2016-10-21 09:10:19.136] [INFO] console - [ 16,
  6149821104652288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:10:19.145] [INFO] console - [ 16,
  4822712159567872,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 12 } ]
[2016-10-21 09:10:19.155] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:10:19.165] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:19.176] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:19.181] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:19.194] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:10:19.185 +00:00' WHERE "id" = '12'
[2016-10-21 09:10:19.199] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '12'
                                    or path like '/12/'||'%'
[2016-10-21 09:10:19.209] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:10:19.216] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:10:19.235] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:19.242] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/12/'||'%'
[2016-10-21 09:10:19.246] [INFO] console - Executing (83a70d06-6122-4d12-a94f-70af09f14bc8): COMMIT;
[2016-10-21 09:10:19.249] [INFO] console - [ 70, 28, {}, [ undefined ] ]
[2016-10-21 09:10:19.253] [INFO] console - [ 16,
  344607479037952,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/12/',
       id: '12',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:10:19.273] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:19.276] [INFO] console - [ 16,
  3810680566185984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:10:19.289] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): START TRANSACTION;
[2016-10-21 09:10:19.292] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.314] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:10:19.295 +00:00','2016-10-21 04:10:19.295 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:10:19.318] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:19.346] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:19.351] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:10:19.356] [INFO] console - Executing (2c670676-7fde-45e5-b2a6-b43774fdad89): COMMIT;
[2016-10-21 09:10:19.363] [INFO] console - [ 70, 29, {}, [ '13' ] ]
[2016-10-21 09:10:19.374] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:19.379] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:10:19.389] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:19.393] [INFO] console - [ 16,
  1569846772891648,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:10:19.401] [INFO] console - [ 16,
  803710470979584,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 13 } ]
[2016-10-21 09:10:19.685] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:10:19.690] [INFO] console - Executing (923f5183-8311-43fa-aa2a-8257d64a6c7b): START TRANSACTION;
[2016-10-21 09:10:19.693] [INFO] console - Executing (8ef7779c-9458-4649-a4b7-5ac74ab48d3c): START TRANSACTION;
[2016-10-21 09:10:19.698] [INFO] console - Executing (923f5183-8311-43fa-aa2a-8257d64a6c7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.699] [INFO] console - Executing (8ef7779c-9458-4649-a4b7-5ac74ab48d3c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.720] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 13);
[2016-10-21 09:10:19.723] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:10:19.743] [INFO] console - Executing (8ef7779c-9458-4649-a4b7-5ac74ab48d3c): COMMIT;
[2016-10-21 09:10:19.750] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 12);
[2016-10-21 09:10:19.757] [INFO] console - [ 70,
  31,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:10:19.766] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:19.773] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:19.778] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:19.794] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='12',"updated_at"='2016-10-21 04:10:19.782 +00:00' WHERE "id" = '13'
[2016-10-21 09:10:19.799] [INFO] console - Executing (9e4afcd9-c9a0-4478-b52f-8efc91edf44e): START TRANSACTION;
[2016-10-21 09:10:19.804] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/12/')
                                where
                                    id = '13'
                                    or path like '/13/'||'%'
[2016-10-21 09:10:19.806] [INFO] console - Executing (9e4afcd9-c9a0-4478-b52f-8efc91edf44e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:19.813] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/12/' like path||id||'/%'
[2016-10-21 09:10:19.821] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 12);
[2016-10-21 09:10:19.827] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/12/' like k.path||k.id||'/%'
[2016-10-21 09:10:19.837] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:10:19.844] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:10:19.850] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('12', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:19.867] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/12/13/'||'%'
[2016-10-21 09:10:19.874] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:19.908] [INFO] console - Executing (923f5183-8311-43fa-aa2a-8257d64a6c7b): COMMIT;
[2016-10-21 09:10:19.910] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:10:19.916] [INFO] console - [ 70, 30, {}, [ undefined ] ]
[2016-10-21 09:10:19.921] [INFO] console - [ 16,
  1497207914102784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id12.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/12/13/',
       id: '13',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/12/',
       note: null,
       created_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '12' } } ]
[2016-10-21 09:10:19.956] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:10:19.914 +00:00' WHERE "id" = '12'
[2016-10-21 09:10:19.959] [INFO] console - [ 16,
  2984885237055488,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id12.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:10:19.971] [INFO] console - [ 16,
  7144578918383616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:10:19.982] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '12'
                                    or path like '/2/12/'||'%'
[2016-10-21 09:10:20.003] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:10:20.005] [INFO] console - Executing (2295a7dd-0df4-4361-b90a-b9bb7e27d1a6): START TRANSACTION;
[2016-10-21 09:10:20.007] [INFO] console - Executing (2295a7dd-0df4-4361-b90a-b9bb7e27d1a6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.025] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.033] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 12);
[2016-10-21 09:10:20.049] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.053] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.067] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/12/'||'%'
[2016-10-21 09:10:20.072] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.080] [INFO] console - Executing (9e4afcd9-c9a0-4478-b52f-8efc91edf44e): COMMIT;
[2016-10-21 09:10:20.083] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:10:20.085] [INFO] console - [ 70, 32, {}, [ undefined ] ]
[2016-10-21 09:10:20.090] [INFO] console - [ 16,
  4435824456237056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 12 } ]
[2016-10-21 09:10:20.100] [INFO] console - [ 16,
  5865090490302464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/12/',
       id: '12',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:10:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:10:20.118] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:10:20.098 +00:00' WHERE "id" = '12'
[2016-10-21 09:10:20.120] [INFO] console - [ 16,
  5799931350614016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:10:20.132] [INFO] console - [ 16,
  7685648288841728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:10:20.155] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '12'
                                    or path like '/4/12/'||'%'
[2016-10-21 09:10:20.163] [INFO] console - [ 16,
  364570264731648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.starshinaChange',
  [],
  {} ]
[2016-10-21 09:10:20.177] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:20.190] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:20.193] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): START TRANSACTION;
[2016-10-21 09:10:20.197] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.200] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.213] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.221] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:10:20.202 +00:00','2016-10-21 04:10:20.202 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:10:20.230] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/12/'||'%'
[2016-10-21 09:10:20.233] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:20.237] [INFO] console - Executing (2295a7dd-0df4-4361-b90a-b9bb7e27d1a6): COMMIT;
[2016-10-21 09:10:20.252] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.257] [INFO] console - [ 70, 33, {}, [ undefined ] ]
[2016-10-21 09:10:20.261] [INFO] console - [ 16,
  5588660879622144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 12 } ]
[2016-10-21 09:10:20.268] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:10:20.270] [INFO] console - [ 16,
  4227606861840384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:10:20.278] [INFO] console - Executing (a01ff834-4592-4067-95ea-117277a0ead7): COMMIT;
[2016-10-21 09:10:20.281] [INFO] console - [ 70, 34, {}, [ '14' ] ]
[2016-10-21 09:10:20.292] [INFO] console - [ 16,
  2744853504983040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.starshinaChange',
  [],
  {} ]
[2016-10-21 09:10:20.303] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.310] [INFO] console - Executing (51de0217-1bd3-4fd8-905e-32ad997e42fe): START TRANSACTION;
[2016-10-21 09:10:20.316] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:10:20.318] [INFO] console - Executing (51de0217-1bd3-4fd8-905e-32ad997e42fe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.335] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:20.337] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 14);
[2016-10-21 09:10:20.343] [INFO] console - [ 16,
  7899795314180096,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:10:20.351] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:10:20.354] [INFO] console - [ 16,
  2471070592401408,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 09:10:20.365] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.373] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.377] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:20.391] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:10:20.380 +00:00' WHERE "id" = '14'
[2016-10-21 09:10:20.399] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '14'
                                    or path like '/14/'||'%'
[2016-10-21 09:10:20.403] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:10:20.407] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.419] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.429] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/14/'||'%'
[2016-10-21 09:10:20.432] [INFO] console - Executing (51de0217-1bd3-4fd8-905e-32ad997e42fe): COMMIT;
[2016-10-21 09:10:20.434] [INFO] console - [ 70, 35, {}, [ undefined ] ]
[2016-10-21 09:10:20.437] [INFO] console - [ 16,
  67532320931840,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/14/',
       id: '14',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:10:20 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:10:20 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:10:20.462] [INFO] console - Executing (bf51440b-0257-49d5-92ef-dc8c2dc1d351): START TRANSACTION;
[2016-10-21 09:10:20.464] [INFO] console - [ 16,
  8069656157880320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:10:20.477] [INFO] console - Executing (bf51440b-0257-49d5-92ef-dc8c2dc1d351): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.484] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 14);
[2016-10-21 09:10:20.488] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.493] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.498] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:10:20.510] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:10:20.501 +00:00' WHERE "id" = '14'
[2016-10-21 09:10:20.515] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '14'
                                    or path like '/2/14/'||'%'
[2016-10-21 09:10:20.519] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:20.522] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.528] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.531] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/14/'||'%'
[2016-10-21 09:10:20.534] [INFO] console - Executing (bf51440b-0257-49d5-92ef-dc8c2dc1d351): COMMIT;
[2016-10-21 09:10:20.536] [INFO] console - [ 70, 36, {}, [ undefined ] ]
[2016-10-21 09:10:20.538] [INFO] console - [ 16,
  2723376151920640,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 14 } ]
[2016-10-21 09:10:20.544] [INFO] console - [ 16,
  6571639166730240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:10:20.553] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:10:20.556] [INFO] console - Executing (f5e516f9-83a6-4c38-90c9-ce14eb2a063b): START TRANSACTION;
[2016-10-21 09:10:20.558] [INFO] console - Executing (f5e516f9-83a6-4c38-90c9-ce14eb2a063b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.566] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:10:20.573] [INFO] console - Executing (f5e516f9-83a6-4c38-90c9-ce14eb2a063b): COMMIT;
[2016-10-21 09:10:20.579] [INFO] console - [ 70,
  37,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:20.608] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:20.612] [INFO] console - Executing (be0cbaaf-8dff-4084-aba0-2646b13d38c7): START TRANSACTION;
[2016-10-21 09:10:20.614] [INFO] console - Executing (be0cbaaf-8dff-4084-aba0-2646b13d38c7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.625] [INFO] console - Executing (be0cbaaf-8dff-4084-aba0-2646b13d38c7): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:10:20 GMT+0500 (YEKT)',0,0,'2016-10-21 04:10:20.617 +00:00','2016-10-21 04:10:20.617 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:20.642] [INFO] console - Executing (be0cbaaf-8dff-4084-aba0-2646b13d38c7): COMMIT;
[2016-10-21 09:10:20.645] [INFO] console - [ 70, 38, {}, [ '9' ] ]
[2016-10-21 09:10:20.649] [INFO] console - [ 16,
  3680482816425984,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '9' ] ]
[2016-10-21 09:10:20.667] [INFO] console - Executing (2f48e06b-8c8f-4c96-a729-b282ba077681): START TRANSACTION;
[2016-10-21 09:10:20.669] [INFO] console - Executing (2f48e06b-8c8f-4c96-a729-b282ba077681): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.673] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:20.688] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 9);
[2016-10-21 09:10:20.696] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:10:20.704] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.710] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.716] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.722] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.734] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '9' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:10:20.744] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:10:20.737 +00:00','2016-10-21 04:10:20.737 +00:00','9','2') RETURNING *;
[2016-10-21 09:10:20.752] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 9, 1, k.id, 9, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:10:20.760] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 9 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 9 and value=-1) "protiv"
[2016-10-21 09:10:20.771] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:10:20.766 +00:00' WHERE "id" = '9'
[2016-10-21 09:10:20.775] [INFO] console - Executing (2f48e06b-8c8f-4c96-a729-b282ba077681): COMMIT;
[2016-10-21 09:10:20.777] [INFO] console - [ 70, 39, {}, [ undefined ] ]
[2016-10-21 09:10:20.779] [INFO] console - [ 16,
  7350741809233920,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id9.rebalance',
  [],
  { totalZa: 3, totalProtiv: 0, GOLOS: '9', action: 'add', value: 1 } ]
[2016-10-21 09:10:20.797] [INFO] console - Executing (c0c7930c-eaeb-463d-bc62-d47e2e19e34a): START TRANSACTION;
[2016-10-21 09:10:20.799] [INFO] console - Executing (c0c7930c-eaeb-463d-bc62-d47e2e19e34a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.802] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 9 }
[2016-10-21 09:10:20.808] [INFO] console - Executing (3270a5ae-75a7-451c-aaa5-69af119bb2f8): START TRANSACTION;
[2016-10-21 09:10:20.811] [INFO] console - Executing (3270a5ae-75a7-451c-aaa5-69af119bb2f8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:20.815] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:20.831] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 9);
[2016-10-21 09:10:20.833] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 9);
[2016-10-21 09:10:20.844] [INFO] console - Executing (3270a5ae-75a7-451c-aaa5-69af119bb2f8): COMMIT;
[2016-10-21 09:10:20.848] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:10:20.852] [INFO] console - [ 70,
  41,
  {},
  [ { id: '9',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:10:20 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:20 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '9',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:10:20.864] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.872] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:20.878] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:20.886] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:20.894] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '9' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:10:20.902] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 9
                                and (
                                    id= 9
                                    or parent_id = 9
                                )
[2016-10-21 09:10:20.906] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 9 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 9 and value=-1) "protiv"
[2016-10-21 09:10:20.915] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:10:20.909 +00:00' WHERE "id" = '9'
[2016-10-21 09:10:20.924] [INFO] console - Executing (c0c7930c-eaeb-463d-bc62-d47e2e19e34a): COMMIT;
[2016-10-21 09:10:20.926] [INFO] console - [ 70, 40, {}, [ undefined ] ]
[2016-10-21 09:10:20.929] [INFO] console - [ 16,
  1853340407300096,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id9.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '9',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:10:21.028] [INFO] console - Executing (e977f795-936e-4e76-a2e3-22495f426cf5): START TRANSACTION;
[2016-10-21 09:10:21.033] [INFO] console - Executing (e977f795-936e-4e76-a2e3-22495f426cf5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.040] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:21.049] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 9);
[2016-10-21 09:10:21.057] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:10:21.064] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:21.097] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:10:21.103] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:10:21.110] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:10:21.116] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '9' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:10:21.135] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 04:10:21.121 +00:00','2016-10-21 04:10:21.121 +00:00','9','2') RETURNING *;
[2016-10-21 09:10:21.155] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 9, -1, k.id, 12, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:10:21.160] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 9 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 9 and value=-1) "protiv"
[2016-10-21 09:10:21.170] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=3,"updated_at"='2016-10-21 04:10:21.164 +00:00' WHERE "id" = '9'
[2016-10-21 09:10:21.174] [INFO] console - Executing (e977f795-936e-4e76-a2e3-22495f426cf5): COMMIT;
[2016-10-21 09:10:21.178] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:10:21.182] [INFO] console - Executing (bae5f043-3010-4d46-9d1d-dc0d7dd97e0d): START TRANSACTION;
[2016-10-21 09:10:21.184] [INFO] console - [ 70, 42, {}, [ undefined ] ]
[2016-10-21 09:10:21.187] [INFO] console - [ 16,
  8216367822012416,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id9.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 3,
    GOLOS: '12',
    action: 'add',
    value: -1 } ]
[2016-10-21 09:10:21.193] [INFO] console - Executing (bae5f043-3010-4d46-9d1d-dc0d7dd97e0d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.204] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:10:21.213] [INFO] console - Executing (bae5f043-3010-4d46-9d1d-dc0d7dd97e0d): COMMIT;
[2016-10-21 09:10:21.215] [INFO] console - [ 70,
  44,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:21.265] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:21.272] [INFO] console - Executing (2323320b-73ec-46c4-bc44-c810036a3c7b): START TRANSACTION;
[2016-10-21 09:10:21.275] [INFO] console - Executing (2323320b-73ec-46c4-bc44-c810036a3c7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.287] [INFO] console - Executing (2323320b-73ec-46c4-bc44-c810036a3c7b): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477023014993',0,0,'2016-10-21 04:10:21.277 +00:00','2016-10-21 04:10:21.277 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:21.292] [INFO] console - Executing (2323320b-73ec-46c4-bc44-c810036a3c7b): COMMIT;
[2016-10-21 09:10:21.295] [INFO] console - [ 70, 45, {}, [ '10' ] ]
[2016-10-21 09:10:21.306] [INFO] console - [ 16,
  2762974817157120,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '10' ] ]
[2016-10-21 09:10:21.319] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 09:10:21.323] [INFO] console - Executing (a8bb5710-1caa-4be8-a600-86ab40fd543e): START TRANSACTION;
[2016-10-21 09:10:21.325] [INFO] console - Executing (a8bb5710-1caa-4be8-a600-86ab40fd543e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.336] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 09:10:21.345] [INFO] console - Executing (a8bb5710-1caa-4be8-a600-86ab40fd543e): COMMIT;
[2016-10-21 09:10:21.347] [INFO] console - [ 70,
  46,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:10:21.371] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 09:10:21.373] [INFO] console - [ 70, 47, {}, [ [] ] ]
[2016-10-21 09:10:21.555] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:10:21.559] [INFO] console - Executing (1dfc548f-dfe3-4d93-8f0c-51191ab00de8): START TRANSACTION;
[2016-10-21 09:10:21.564] [INFO] console - Executing (1dfc548f-dfe3-4d93-8f0c-51191ab00de8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.572] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:10:21.580] [INFO] console - Executing (1dfc548f-dfe3-4d93-8f0c-51191ab00de8): COMMIT;
[2016-10-21 09:10:21.582] [INFO] console - [ 70,
  49,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:10:21.610] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 09:10:21.613] [INFO] console - Executing (3289f099-7533-4762-9407-4bec3561fe44): START TRANSACTION;
[2016-10-21 09:10:21.615] [INFO] console - Executing (3289f099-7533-4762-9407-4bec3561fe44): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.624] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 09:10:21.631] [INFO] console - Executing (3289f099-7533-4762-9407-4bec3561fe44): COMMIT;
[2016-10-21 09:10:21.633] [INFO] console - [ 70,
  50,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:21.663] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:21.668] [INFO] console - Executing (fd0724b6-c78e-42e1-b5cb-d9fdd3b0846f): START TRANSACTION;
[2016-10-21 09:10:21.670] [INFO] console - Executing (fd0724b6-c78e-42e1-b5cb-d9fdd3b0846f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.679] [INFO] console - Executing (fd0724b6-c78e-42e1-b5cb-d9fdd3b0846f): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 04:10:21.673 +00:00','2016-10-21 04:10:21.673 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:21.688] [INFO] console - Executing (fd0724b6-c78e-42e1-b5cb-d9fdd3b0846f): COMMIT;
[2016-10-21 09:10:21.691] [INFO] console - [ 70, 51, {}, [ '10' ] ]
[2016-10-21 09:10:21.698] [INFO] console - [ 16,
  2905057599160320,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '10' ] ]
[2016-10-21 09:10:21.732] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 10 }
[2016-10-21 09:10:21.735] [INFO] console - Executing (4811a512-0dc5-4039-92e0-39c6e80b7cf3): START TRANSACTION;
[2016-10-21 09:10:21.737] [INFO] console - Executing (4811a512-0dc5-4039-92e0-39c6e80b7cf3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.745] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 10);
[2016-10-21 09:10:21.755] [INFO] console - Executing (4811a512-0dc5-4039-92e0-39c6e80b7cf3): COMMIT;
[2016-10-21 09:10:21.757] [INFO] console - [ 70,
  52,
  {},
  [ { id: '10',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:10:21.790] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:21.803] [INFO] console - Executing (3417fa25-9b00-4c5e-98e8-b7774f55dc29): START TRANSACTION;
[2016-10-21 09:10:21.805] [INFO] console - Executing (3417fa25-9b00-4c5e-98e8-b7774f55dc29): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.814] [INFO] console - Executing (3417fa25-9b00-4c5e-98e8-b7774f55dc29): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477023021773','2016-10-21 04:10:21.808 +00:00','2016-10-21 04:10:21.808 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:21.819] [INFO] console - Executing (3417fa25-9b00-4c5e-98e8-b7774f55dc29): COMMIT;
[2016-10-21 09:10:21.821] [INFO] console - [ 70, 53, {}, [ '11' ] ]
[2016-10-21 09:10:21.831] [INFO] console - [ 16,
  4950830954315776,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '11' ] ]
[2016-10-21 09:10:21.843] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:10:21.847] [INFO] console - Executing (92897203-dd15-4a71-b385-055d5de16d86): START TRANSACTION;
[2016-10-21 09:10:21.850] [INFO] console - Executing (92897203-dd15-4a71-b385-055d5de16d86): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.860] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:21.869] [INFO] console - Executing (92897203-dd15-4a71-b385-055d5de16d86): COMMIT;
[2016-10-21 09:10:21.871] [INFO] console - [ 70,
  54,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 7,
      path: '/1/',
      note: 'unit test 1476955936493',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:32:27 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:21.899] [INFO] console - Executing (f1e1dd82-487a-49c5-a86a-f0783c2da3d3): START TRANSACTION;
[2016-10-21 09:10:21.902] [INFO] console - Executing (f1e1dd82-487a-49c5-a86a-f0783c2da3d3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.921] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:21.936] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477023015039',"updated_at"='2016-10-21 04:10:21.926 +00:00' WHERE "id" = '2'
[2016-10-21 09:10:21.943] [INFO] console - Executing (f1e1dd82-487a-49c5-a86a-f0783c2da3d3): COMMIT;
[2016-10-21 09:10:21.945] [INFO] console - [ 16,
  6888012197658624,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 09:10:21.959] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:10:21.962] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:10:21.965] [INFO] console - [ 70, 55, {}, [ undefined ] ]
[2016-10-21 09:10:21.972] [INFO] console - Executing (72ce3461-4d79-4d00-8d9c-11700e9de8d6): START TRANSACTION;
[2016-10-21 09:10:21.973] [INFO] console - Executing (e74a6987-fd76-42c0-8ffc-367ab759fbe5): START TRANSACTION;
[2016-10-21 09:10:21.978] [INFO] console - Executing (72ce3461-4d79-4d00-8d9c-11700e9de8d6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:21.979] [INFO] console - Executing (e74a6987-fd76-42c0-8ffc-367ab759fbe5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.078] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:22.080] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:22.090] [INFO] console - Executing (72ce3461-4d79-4d00-8d9c-11700e9de8d6): COMMIT;
[2016-10-21 09:10:22.094] [INFO] console - Executing (e74a6987-fd76-42c0-8ffc-367ab759fbe5): COMMIT;
[2016-10-21 09:10:22.095] [INFO] console - [ 70,
  56,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 7,
      path: '/1/',
      note: 'unit test 1477023015039',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:22.142] [INFO] console - [ 70,
  57,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 7,
      path: '/1/',
      note: 'unit test 1477023015039',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:22.230] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:10:22.233] [INFO] console - Executing (f0d0f94c-0c0c-4659-ae9b-91369bfe290c): START TRANSACTION;
[2016-10-21 09:10:22.235] [INFO] console - Executing (f0d0f94c-0c0c-4659-ae9b-91369bfe290c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.243] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:10:22.249] [INFO] console - Executing (f0d0f94c-0c0c-4659-ae9b-91369bfe290c): COMMIT;
[2016-10-21 09:10:22.251] [INFO] console - [ 70,
  59,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:22.276] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:22.282] [INFO] console - Executing (79200b37-c535-4d96-ba78-c483d7400fbb): START TRANSACTION;
[2016-10-21 09:10:22.284] [INFO] console - Executing (79200b37-c535-4d96-ba78-c483d7400fbb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.292] [INFO] console - Executing (79200b37-c535-4d96-ba78-c483d7400fbb): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 04:10:22.286 +00:00','2016-10-21 04:10:22.286 +00:00',2,3) RETURNING *;
[2016-10-21 09:10:22.297] [INFO] console - Executing (79200b37-c535-4d96-ba78-c483d7400fbb): COMMIT;
[2016-10-21 09:10:22.302] [INFO] console - [ 70, 60, {}, [ '12' ] ]
[2016-10-21 09:10:22.314] [INFO] console - [ 16,
  5670785658126336,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '12' ] ]
[2016-10-21 09:10:22.348] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 09:10:22.351] [INFO] console - Executing (245e0a82-2495-403a-af6c-23aff8ef2577): START TRANSACTION;
[2016-10-21 09:10:22.354] [INFO] console - Executing (245e0a82-2495-403a-af6c-23aff8ef2577): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.361] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 09:10:22.367] [INFO] console - Executing (245e0a82-2495-403a-af6c-23aff8ef2577): COMMIT;
[2016-10-21 09:10:22.368] [INFO] console - [ 70,
  61,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:10:22.455] [INFO] console - [ 70, 63, {}, [ undefined ] ]
[2016-10-21 09:10:22.458] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:10:22.468] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:10:22.470] [INFO] console - Executing (44a2590b-dabd-4d68-bf97-5fe9a82b3a72): START TRANSACTION;
[2016-10-21 09:10:22.472] [INFO] console - Executing (44a2590b-dabd-4d68-bf97-5fe9a82b3a72): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.477] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:22.484] [INFO] console - Executing (44a2590b-dabd-4d68-bf97-5fe9a82b3a72): COMMIT;
[2016-10-21 09:10:22.486] [INFO] console - [ 70,
  64,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 7,
      path: '/1/',
      note: 'unit test 1477023015039',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:22.504] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 09:10:22.516] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:22.519] [INFO] console - Executing (1a9bed51-7738-4aef-a7eb-6e8679be9b8d): START TRANSACTION;
[2016-10-21 09:10:22.521] [INFO] console - Executing (1a9bed51-7738-4aef-a7eb-6e8679be9b8d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.527] [INFO] console - Executing (1a9bed51-7738-4aef-a7eb-6e8679be9b8d): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 04:10:22.523 +00:00','2016-10-21 04:10:22.523 +00:00',2,2) RETURNING *;
[2016-10-21 09:10:22.531] [INFO] console - Executing (1a9bed51-7738-4aef-a7eb-6e8679be9b8d): COMMIT;
[2016-10-21 09:10:22.535] [INFO] console - [ 70, 65, {}, [ '12' ] ]
[2016-10-21 09:10:22.555] [INFO] console - Executing (ff41e137-c970-49d7-aa16-150630944780): START TRANSACTION;
[2016-10-21 09:10:22.557] [INFO] console - Executing (ff41e137-c970-49d7-aa16-150630944780): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.564] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 12);
[2016-10-21 09:10:22.572] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:10:22.566 +00:00',"updated_at"='2016-10-21 04:10:22.566 +00:00' WHERE "id" = '12'
[2016-10-21 09:10:22.574] [INFO] console - Executing (ff41e137-c970-49d7-aa16-150630944780): COMMIT;
[2016-10-21 09:10:22.576] [INFO] console - [ 70, 66, {}, [ undefined ] ]
[2016-10-21 09:10:22.582] [INFO] console - [ 16, 1506099647741952, {}, 'ru.kopa.model.Kopa.id12.change' ]
[2016-10-21 09:10:22.600] [INFO] console - [ 16,
  2077483243405312,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 12 ] ]
[2016-10-21 09:10:22.608] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 12 }
[2016-10-21 09:10:22.610] [INFO] console - Executing (657cba31-80be-4503-939a-46fe6b6cf0f9): START TRANSACTION;
[2016-10-21 09:10:22.616] [INFO] console - Executing (657cba31-80be-4503-939a-46fe6b6cf0f9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.619] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:22.628] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 12);
[2016-10-21 09:10:22.632] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): START TRANSACTION;
[2016-10-21 09:10:22.635] [INFO] console - Executing (657cba31-80be-4503-939a-46fe6b6cf0f9): COMMIT;
[2016-10-21 09:10:22.635] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.638] [INFO] console - [ 70,
  67,
  {},
  [ { id: '12',
      question: 'temp',
      invited: Fri Oct 21 2016 09:10:22 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:10:22 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:22 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:10:22.648] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:10:22.655] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:10:22.660] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 04:10:22.637 +00:00','2016-10-21 04:10:22.637 +00:00',2) RETURNING *;
[2016-10-21 09:10:22.669] [INFO] console - Executing (aafb3eee-df85-4a3e-86df-2dcd969570a9): COMMIT;
[2016-10-21 09:10:22.672] [INFO] console - [ 70, 68, {}, [ '13' ] ]
[2016-10-21 09:10:22.680] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:10:22.691] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:22.693] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:22.699] [INFO] console - [ 16,
  6793712136880128,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:10:22.710] [INFO] console - [ 16,
  7782485523955712,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 09:10:22.713] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): START TRANSACTION;
[2016-10-21 09:10:22.718] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.723] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 13);
[2016-10-21 09:10:22.726] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/13/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:10:22.731] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/13/','2016-10-21 04:10:22.719 +00:00','2016-10-21 04:10:22.719 +00:00',13) RETURNING *;
[2016-10-21 09:10:22.734] [INFO] console - Executing (f30e4afc-a652-4db0-b7ad-7b73dd5f93be): COMMIT;
[2016-10-21 09:10:22.737] [INFO] console - [ 70, 69, {}, [ '14' ] ]
[2016-10-21 09:10:22.745] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/13/' like z.path||z.id||'/%'
[2016-10-21 09:10:22.750] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '13')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:22.753] [INFO] console - [ 16,
  1653922278146048,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id13.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 09:10:22.763] [INFO] console - [ 16,
  6743885009125376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:10:22.770] [INFO] console - [ 16,
  455457296613376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 09:10:22.785] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:10:22.788] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): START TRANSACTION;
[2016-10-21 09:10:22.789] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.799] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:10:22.791 +00:00','2016-10-21 04:10:22.791 +00:00',14,NULL) RETURNING *;
[2016-10-21 09:10:22.802] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:10:22.809] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '14');
[2016-10-21 09:10:22.812] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/13/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 14
                                    )
[2016-10-21 09:10:22.814] [INFO] console - Executing (a20dc3ed-d4ba-4392-adc6-819d5fe029e8): COMMIT;
[2016-10-21 09:10:22.816] [INFO] console - [ 70, 70, {}, [ '15' ] ]
[2016-10-21 09:10:22.830] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '14');
[2016-10-21 09:10:22.834] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/13/' like z.path||z.id||'/%'
[2016-10-21 09:10:22.840] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '13')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:22.843] [INFO] console - [ 16,
  3229370374160384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id14.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:10:22.850] [INFO] console - [ 16,
  4624043703533568,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id13.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:10:22.856] [INFO] console - [ 16,
  6028944430071808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:10:22.866] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 09:10:22.869] [INFO] console - [ 16,
  2896235348361216,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 15 } ]
[2016-10-21 09:10:22.875] [INFO] console - Executing (930e49e9-c97f-46ef-9998-747622f0ba57): START TRANSACTION;
[2016-10-21 09:10:22.877] [INFO] console - Executing (930e49e9-c97f-46ef-9998-747622f0ba57): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.884] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:10:22.890] [INFO] console - Executing (930e49e9-c97f-46ef-9998-747622f0ba57): COMMIT;
[2016-10-21 09:10:22.891] [INFO] console - [ 70,
  71,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:10:22.909] [INFO] console - Executing (bbb9297c-5d50-44c0-9e48-f95a92d5da13): START TRANSACTION;
[2016-10-21 09:10:22.912] [INFO] console - Executing (bbb9297c-5d50-44c0-9e48-f95a92d5da13): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:10:22.916] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 13);
[2016-10-21 09:10:22.921] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:10:22.924] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:10:22.930] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:22.934] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 13
                                    )
[2016-10-21 09:10:22.943] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 04:10:22.937 +00:00' WHERE "id" = '13'
[2016-10-21 09:10:22.948] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '13'
                                    or path like '/1/2/13/'||'%'
[2016-10-21 09:10:22.951] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 13
                                    )
[2016-10-21 09:10:22.955] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 09:10:22.960] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:10:22.964] [INFO] console - Executing (bbb9297c-5d50-44c0-9e48-f95a92d5da13): COMMIT;
[2016-10-21 09:10:22.965] [INFO] console - [ 70, 72, {}, [ undefined ] ]
[2016-10-21 09:10:22.970] [INFO] console - [ 16,
  5382464358842368,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:10:22.977] [INFO] console - [ 16,
  8159767367254016,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 09:10:22.984] [INFO] console - [ 16,
  8937292618006528,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 09:10:22.991] [INFO] console - [ 16,
  2324095588892672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 15 } ]
[2016-10-21 09:11:21.326] [INFO] console - [ 70, 74, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:11:21.359] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:11:21.382] [INFO] console - [ 70, 75, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:11:21.433] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:11:21.436] [INFO] console - [ 70, 76, {}, [ 'КОПА' ] ]
[2016-10-21 09:11:21.445] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:11:21.484] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 09:11:21.501] [INFO] console - [ 8,
  68,
  77,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 09:11:21.682] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:21.704] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:11:21.711] [INFO] console - [ 8,
  68,
  79,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:11:21.843] [INFO] console - [ 70, 81, {}, [ undefined ] ]
[2016-10-21 09:11:21.846] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:11:21.853] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:11:21.860] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:11:21.867] [INFO] console - Executing (3978ebaa-3d98-4c20-b305-1031ec12d2e5): START TRANSACTION;
[2016-10-21 09:11:21.870] [INFO] console - Executing (3978ebaa-3d98-4c20-b305-1031ec12d2e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:21.911] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:11:21.925] [INFO] console - Executing (3978ebaa-3d98-4c20-b305-1031ec12d2e5): COMMIT;
[2016-10-21 09:11:21.927] [INFO] console - [ 70,
  82,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:21.963] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:11:21.966] [INFO] console - Executing (72722dcd-beb3-4c25-9830-b48bc2f16a70): START TRANSACTION;
[2016-10-21 09:11:21.972] [INFO] console - Executing (72722dcd-beb3-4c25-9830-b48bc2f16a70): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:21.994] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:22.005] [INFO] console - Executing (72722dcd-beb3-4c25-9830-b48bc2f16a70): COMMIT;
[2016-10-21 09:11:22.008] [INFO] console - [ 70,
  83,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023015039',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:22.043] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:22.053] [INFO] console - Executing (cc534ff1-3a90-48bc-8e76-561ba7ce3f7f): START TRANSACTION;
[2016-10-21 09:11:22.055] [INFO] console - Executing (cc534ff1-3a90-48bc-8e76-561ba7ce3f7f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:22.073] [INFO] console - Executing (cc534ff1-3a90-48bc-8e76-561ba7ce3f7f): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:11:22.064 +00:00','2016-10-21 04:11:22.064 +00:00',2,2) RETURNING *;
[2016-10-21 09:11:22.079] [INFO] console - Executing (cc534ff1-3a90-48bc-8e76-561ba7ce3f7f): COMMIT;
[2016-10-21 09:11:22.087] [INFO] console - [ 70, 84, {}, [ '13' ] ]
[2016-10-21 09:11:22.104] [INFO] console - Executing (6d89358b-7c20-4a65-a017-3adb53ee6a04): START TRANSACTION;
[2016-10-21 09:11:22.106] [INFO] console - Executing (6d89358b-7c20-4a65-a017-3adb53ee6a04): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:22.118] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 13);
[2016-10-21 09:11:22.130] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:11:22.121 +00:00',"updated_at"='2016-10-21 04:11:22.121 +00:00' WHERE "id" = '13'
[2016-10-21 09:11:22.137] [INFO] console - Executing (6d89358b-7c20-4a65-a017-3adb53ee6a04): COMMIT;
[2016-10-21 09:11:22.139] [INFO] console - [ 70, 85, {}, [ undefined ] ]
[2016-10-21 09:11:22.142] [INFO] console - [ 16, 8691351149346816, {}, 'ru.kopa.model.Kopa.id13.change' ]
[2016-10-21 09:11:22.144] [INFO] console - [ 16,
  6564217935101952,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 13 ] ]
[2016-10-21 09:11:22.154] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 13 }
[2016-10-21 09:11:22.160] [INFO] console - Executing (13a3a6d6-8538-4b78-b66a-1e1b2e57261b): START TRANSACTION;
[2016-10-21 09:11:22.162] [INFO] console - Executing (13a3a6d6-8538-4b78-b66a-1e1b2e57261b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:22.166] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:11:22.177] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 13);
[2016-10-21 09:11:22.186] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:11:22.188] [INFO] console - Executing (13a3a6d6-8538-4b78-b66a-1e1b2e57261b): COMMIT;
[2016-10-21 09:11:22.193] [INFO] console - [ 70,
  86,
  {},
  [ { id: '13',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:11:22 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:11:22 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:22 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:22.198] [INFO] console - [ 70, 87, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:11:22.259] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:11:22.276] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:11:22.290] [INFO] console - [ 70, 88, {}, [ [ [Object] ] ] ]
[2016-10-21 09:11:22.936] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:11:22.960] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:11:22.968] [INFO] console - [ 70, 89, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:11:23.000] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:11:23.025] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:11:23.028] [INFO] console - [ 70, 90, {}, [ [ [Object] ] ] ]
[2016-10-21 09:11:23.052] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:11:23.055] [INFO] console - Executing (99c8e9e5-a469-486f-ac73-a2ed08eefbda): START TRANSACTION;
[2016-10-21 09:11:23.057] [INFO] console - Executing (99c8e9e5-a469-486f-ac73-a2ed08eefbda): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.073] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:11:23.085] [INFO] console - Executing (99c8e9e5-a469-486f-ac73-a2ed08eefbda): COMMIT;
[2016-10-21 09:11:23.092] [INFO] console - [ 70,
  91,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:11:23.124] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:23.129] [INFO] console - Executing (bcbf9b5f-c304-46c2-8aed-e3a8f445aeef): START TRANSACTION;
[2016-10-21 09:11:23.134] [INFO] console - Executing (bcbf9b5f-c304-46c2-8aed-e3a8f445aeef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.145] [INFO] console - Executing (bcbf9b5f-c304-46c2-8aed-e3a8f445aeef): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477023083109 temp','2016-10-21 04:11:23.137 +00:00','2016-10-21 04:11:23.137 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:23.149] [INFO] console - Executing (bcbf9b5f-c304-46c2-8aed-e3a8f445aeef): COMMIT;
[2016-10-21 09:11:23.152] [INFO] console - [ 70, 92, {}, [ '13' ] ]
[2016-10-21 09:11:23.158] [INFO] console - [ 16,
  2578194534236160,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '13' ] ]
[2016-10-21 09:11:23.196] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:23.210] [INFO] console - Executing (b6c0b326-e3d1-496f-830f-8321b5b4ec0b): START TRANSACTION;
[2016-10-21 09:11:23.212] [INFO] console - Executing (b6c0b326-e3d1-496f-830f-8321b5b4ec0b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.221] [INFO] console - Executing (b6c0b326-e3d1-496f-830f-8321b5b4ec0b): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477023083182temp',0,0,'2016-10-21 04:11:23.214 +00:00','2016-10-21 04:11:23.214 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:23.230] [INFO] console - Executing (b6c0b326-e3d1-496f-830f-8321b5b4ec0b): COMMIT;
[2016-10-21 09:11:23.233] [INFO] console - [ 70, 93, {}, [ '11' ] ]
[2016-10-21 09:11:23.235] [INFO] console - [ 16,
  8823262664458240,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '11' ] ]
[2016-10-21 09:11:23.346] [INFO] console - [ 70, 95, {}, [ undefined ] ]
[2016-10-21 09:11:23.349] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:11:23.357] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:11:23.361] [INFO] console - Executing (1d243eaa-a336-4739-a181-4ca84989d80d): START TRANSACTION;
[2016-10-21 09:11:23.363] [INFO] console - Executing (1d243eaa-a336-4739-a181-4ca84989d80d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.368] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:11:23.380] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:11:23.393] [INFO] console - Executing (1d243eaa-a336-4739-a181-4ca84989d80d): COMMIT;
[2016-10-21 09:11:23.406] [INFO] console - [ 70,
  96,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:11:23.444] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:11:23.454] [INFO] console - [ 70, 97, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:11:23.519] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:23.525] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): START TRANSACTION;
[2016-10-21 09:11:23.527] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.539] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:11:23.533 +00:00','2016-10-21 04:11:23.533 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:11:23.571] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:23.576] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:23.597] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:11:23.601] [INFO] console - Executing (7e0d42f9-c4ea-489e-8eb4-c0b2e7c6db62): COMMIT;
[2016-10-21 09:11:23.604] [INFO] console - [ 70, 98, {}, [ '16' ] ]
[2016-10-21 09:11:23.625] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:23.630] [INFO] console - Executing (cec07c2c-c546-4e64-a5e5-f23bfd48f4e8): START TRANSACTION;
[2016-10-21 09:11:23.634] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:11:23.639] [INFO] console - Executing (cec07c2c-c546-4e64-a5e5-f23bfd48f4e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.647] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:23.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 16);
[2016-10-21 09:11:23.656] [INFO] console - [ 16,
  2478696273281024,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:11:23.663] [INFO] console - [ 16,
  5054889249996800,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 16 } ]
[2016-10-21 09:11:23.678] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:11:23.683] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:23.690] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:23.694] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:23.712] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:11:23.697 +00:00' WHERE "id" = '16'
[2016-10-21 09:11:23.716] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '16'
                                    or path like '/16/'||'%'
[2016-10-21 09:11:23.725] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:11:23.728] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:11:23.743] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:23.754] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/16/'||'%'
[2016-10-21 09:11:23.757] [INFO] console - Executing (cec07c2c-c546-4e64-a5e5-f23bfd48f4e8): COMMIT;
[2016-10-21 09:11:23.766] [INFO] console - [ 70, 99, {}, [ undefined ] ]
[2016-10-21 09:11:23.770] [INFO] console - [ 16,
  7345496622366720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/16/',
       id: '16',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:11:23 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:11:23 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:11:23.788] [INFO] console - [ 16,
  8878238055006208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:11:23.810] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:23.814] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): START TRANSACTION;
[2016-10-21 09:11:23.816] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:23.827] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:11:23.821 +00:00','2016-10-21 04:11:23.821 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:11:23.832] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:23.837] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:23.843] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:11:23.855] [INFO] console - Executing (e69d389f-2233-4c4a-8df5-7544487a7d7f): COMMIT;
[2016-10-21 09:11:23.857] [INFO] console - [ 70, 100, {}, [ '17' ] ]
[2016-10-21 09:11:23.866] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:23.870] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:11:23.878] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:23.887] [INFO] console - [ 16,
  6793108605894656,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:11:23.896] [INFO] console - [ 16,
  7523369933078528,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 17 } ]
[2016-10-21 09:11:24.337] [INFO] console - Executing (a547e9a2-b2d8-4f3c-98cc-146708dd69bc): START TRANSACTION;
[2016-10-21 09:11:24.339] [INFO] console - Executing (a547e9a2-b2d8-4f3c-98cc-146708dd69bc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.351] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 17);
[2016-10-21 09:11:24.353] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:11:24.364] [INFO] console - Executing (2785ad0a-deb5-40d5-842d-ed79948ca424): START TRANSACTION;
[2016-10-21 09:11:24.367] [INFO] console - Executing (2785ad0a-deb5-40d5-842d-ed79948ca424): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.370] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 16);
[2016-10-21 09:11:24.380] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.390] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:11:24.400] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.403] [INFO] console - Executing (2785ad0a-deb5-40d5-842d-ed79948ca424): COMMIT;
[2016-10-21 09:11:24.408] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:24.410] [INFO] console - [ 70,
  102,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:11:24.437] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='16',"updated_at"='2016-10-21 04:11:24.424 +00:00' WHERE "id" = '17'
[2016-10-21 09:11:24.445] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/16/')
                                where
                                    id = '17'
                                    or path like '/17/'||'%'
[2016-10-21 09:11:24.450] [INFO] console - Executing (f34fc8fe-d9dc-44e2-81ef-0f26a7a09a36): START TRANSACTION;
[2016-10-21 09:11:24.453] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/16/' like path||id||'/%'
[2016-10-21 09:11:24.455] [INFO] console - Executing (f34fc8fe-d9dc-44e2-81ef-0f26a7a09a36): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.461] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/16/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.467] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 16);
[2016-10-21 09:11:24.480] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('16', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.483] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:11:24.491] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/16/17/'||'%'
[2016-10-21 09:11:24.493] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.501] [INFO] console - Executing (a547e9a2-b2d8-4f3c-98cc-146708dd69bc): COMMIT;
[2016-10-21 09:11:24.505] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.510] [INFO] console - [ 70, 101, {}, [ undefined ] ]
[2016-10-21 09:11:24.515] [INFO] console - [ 16,
  8218661871419392,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id16.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/16/17/',
       id: '17',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/16/',
       note: null,
       created_at: Fri Oct 21 2016 09:11:23 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:11:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '16' } } ]
[2016-10-21 09:11:24.528] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:11:24.530] [INFO] console - [ 16,
  8963279084847104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id16.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:11:24.537] [INFO] console - [ 16,
  7239037528047616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:11:24.558] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:11:24.544 +00:00' WHERE "id" = '16'
[2016-10-21 09:11:24.563] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '16'
                                    or path like '/2/16/'||'%'
[2016-10-21 09:11:24.578] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:11:24.589] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.599] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.614] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/16/'||'%'
[2016-10-21 09:11:24.615] [INFO] console - Executing (aca78a7b-e470-4639-9c58-495835e047dc): START TRANSACTION;
[2016-10-21 09:11:24.620] [INFO] console - Executing (aca78a7b-e470-4639-9c58-495835e047dc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.626] [INFO] console - Executing (f34fc8fe-d9dc-44e2-81ef-0f26a7a09a36): COMMIT;
[2016-10-21 09:11:24.638] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 16);
[2016-10-21 09:11:24.639] [INFO] console - [ 70, 103, {}, [ undefined ] ]
[2016-10-21 09:11:24.644] [INFO] console - [ 16,
  7865765147443200,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 16 } ]
[2016-10-21 09:11:24.652] [INFO] console - [ 16,
  4507697445601280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/16/',
       id: '16',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:11:23 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:11:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:11:24.664] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.665] [INFO] console - [ 16,
  3332961738948608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:11:24.675] [INFO] console - [ 16,
  4557602484649984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:11:24.687] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.688] [INFO] console - [ 16,
  2555757417463808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.starshinaChange',
  [],
  {} ]
[2016-10-21 09:11:24.696] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:11:24.714] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:11:24.703 +00:00' WHERE "id" = '16'
[2016-10-21 09:11:24.720] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '16'
                                    or path like '/4/16/'||'%'
[2016-10-21 09:11:24.725] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:24.727] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.731] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.740] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/16/'||'%'
[2016-10-21 09:11:24.742] [INFO] console - Executing (aca78a7b-e470-4639-9c58-495835e047dc): COMMIT;
[2016-10-21 09:11:24.744] [INFO] console - [ 70, 104, {}, [ undefined ] ]
[2016-10-21 09:11:24.747] [INFO] console - [ 16,
  3615291378499584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 16 } ]
[2016-10-21 09:11:24.764] [INFO] console - [ 16,
  1347088449273856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:11:24.779] [INFO] console - [ 16,
  5737147837448192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.starshinaChange',
  [],
  {} ]
[2016-10-21 09:11:24.789] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:24.794] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): START TRANSACTION;
[2016-10-21 09:11:24.799] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.815] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:11:24.803 +00:00','2016-10-21 04:11:24.803 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:11:24.822] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:24.830] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:24.834] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:11:24.848] [INFO] console - Executing (30ea02c2-5fd0-4793-b466-cb1657143da7): COMMIT;
[2016-10-21 09:11:24.851] [INFO] console - [ 70, 105, {}, [ '18' ] ]
[2016-10-21 09:11:24.858] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:24.870] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:11:24.875] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:24.878] [INFO] console - [ 16,
  6578460633858048,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 09:11:24.894] [INFO] console - [ 16,
  2235304561868800,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 09:11:24.900] [INFO] console - Executing (599488d8-5967-4cac-b61f-a8fc9d6ff0dc): START TRANSACTION;
[2016-10-21 09:11:24.902] [INFO] console - Executing (599488d8-5967-4cac-b61f-a8fc9d6ff0dc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:24.921] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 18);
[2016-10-21 09:11:24.933] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:11:24.938] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.945] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.950] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:24.965] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:11:24.952 +00:00' WHERE "id" = '18'
[2016-10-21 09:11:24.970] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '18'
                                    or path like '/18/'||'%'
[2016-10-21 09:11:24.976] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:11:24.979] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:11:24.987] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:24.992] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/18/'||'%'
[2016-10-21 09:11:24.999] [INFO] console - Executing (599488d8-5967-4cac-b61f-a8fc9d6ff0dc): COMMIT;
[2016-10-21 09:11:25.001] [INFO] console - [ 70, 106, {}, [ undefined ] ]
[2016-10-21 09:11:25.011] [INFO] console - [ 16,
  1509595990196224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/18/',
       id: '18',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:11:24 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:11:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:11:25.025] [INFO] console - Executing (5a5073ec-59fb-404f-9e7b-dff18a8c1a9a): START TRANSACTION;
[2016-10-21 09:11:25.026] [INFO] console - [ 16,
  4089569039351808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:11:25.034] [INFO] console - Executing (5a5073ec-59fb-404f-9e7b-dff18a8c1a9a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.040] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 18);
[2016-10-21 09:11:25.046] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:11:25.055] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:25.059] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:11:25.077] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:11:25.071 +00:00' WHERE "id" = '18'
[2016-10-21 09:11:25.085] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '18'
                                    or path like '/2/18/'||'%'
[2016-10-21 09:11:25.089] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:25.092] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:25.098] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:25.100] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/18/'||'%'
[2016-10-21 09:11:25.102] [INFO] console - Executing (5a5073ec-59fb-404f-9e7b-dff18a8c1a9a): COMMIT;
[2016-10-21 09:11:25.104] [INFO] console - [ 70, 107, {}, [ undefined ] ]
[2016-10-21 09:11:25.111] [INFO] console - [ 16,
  8148431830777856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 18 } ]
[2016-10-21 09:11:25.123] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:11:25.125] [INFO] console - [ 16,
  8827833841352704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:11:25.135] [INFO] console - Executing (c3de4935-64d7-4475-93da-b96c6135277c): START TRANSACTION;
[2016-10-21 09:11:25.153] [INFO] console - Executing (c3de4935-64d7-4475-93da-b96c6135277c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.166] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:11:25.176] [INFO] console - Executing (c3de4935-64d7-4475-93da-b96c6135277c): COMMIT;
[2016-10-21 09:11:25.178] [INFO] console - [ 70,
  108,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:25.202] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:25.206] [INFO] console - Executing (5f4d095a-c4c4-48ea-b257-cc769c4b7730): START TRANSACTION;
[2016-10-21 09:11:25.215] [INFO] console - Executing (5f4d095a-c4c4-48ea-b257-cc769c4b7730): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.232] [INFO] console - Executing (5f4d095a-c4c4-48ea-b257-cc769c4b7730): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:11:25 GMT+0500 (YEKT)',0,0,'2016-10-21 04:11:25.218 +00:00','2016-10-21 04:11:25.218 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:25.238] [INFO] console - Executing (5f4d095a-c4c4-48ea-b257-cc769c4b7730): COMMIT;
[2016-10-21 09:11:25.241] [INFO] console - [ 70, 109, {}, [ '12' ] ]
[2016-10-21 09:11:25.258] [INFO] console - [ 16,
  4137641098346496,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '12' ] ]
[2016-10-21 09:11:25.264] [INFO] console - Executing (9238d941-2138-4550-b8f9-cf05afdd9c8c): START TRANSACTION;
[2016-10-21 09:11:25.266] [INFO] console - Executing (9238d941-2138-4550-b8f9-cf05afdd9c8c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.271] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:25.278] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 12);
[2016-10-21 09:11:25.286] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:11:25.294] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.300] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.306] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:25.314] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:25.322] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '12' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:11:25.338] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:11:25.325 +00:00','2016-10-21 04:11:25.325 +00:00','12','2') RETURNING *;
[2016-10-21 09:11:25.349] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 12, 1, k.id, 15, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:11:25.354] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 12 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 12 and value=-1) "protiv"
[2016-10-21 09:11:25.364] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:11:25.358 +00:00' WHERE "id" = '12'
[2016-10-21 09:11:25.369] [INFO] console - Executing (9238d941-2138-4550-b8f9-cf05afdd9c8c): COMMIT;
[2016-10-21 09:11:25.372] [INFO] console - [ 70, 110, {}, [ undefined ] ]
[2016-10-21 09:11:25.378] [INFO] console - [ 16,
  16781953466368,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id12.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '15',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:11:25.392] [INFO] console - Executing (1f5d707b-d88f-4822-9231-97627b85e503): START TRANSACTION;
[2016-10-21 09:11:25.397] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 15 }
[2016-10-21 09:11:25.401] [INFO] console - Executing (edd7fe11-fb6e-46bc-b02e-ad95d9d3fd85): START TRANSACTION;
[2016-10-21 09:11:25.402] [INFO] console - Executing (1f5d707b-d88f-4822-9231-97627b85e503): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.404] [INFO] console - Executing (edd7fe11-fb6e-46bc-b02e-ad95d9d3fd85): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.410] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:25.423] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 15);
[2016-10-21 09:11:25.433] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 12);
[2016-10-21 09:11:25.437] [INFO] console - Executing (edd7fe11-fb6e-46bc-b02e-ad95d9d3fd85): COMMIT;
[2016-10-21 09:11:25.447] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:11:25.448] [INFO] console - [ 70,
  112,
  {},
  [ { id: '15',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:11:25 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:25 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '12',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:11:25.466] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.473] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.479] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:25.485] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:25.498] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '12' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:11:25.507] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 12
                                and (
                                    id= 15
                                    or parent_id = 15
                                )
[2016-10-21 09:11:25.514] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 12 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 12 and value=-1) "protiv"
[2016-10-21 09:11:25.527] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:11:25.517 +00:00' WHERE "id" = '12'
[2016-10-21 09:11:25.536] [INFO] console - Executing (1f5d707b-d88f-4822-9231-97627b85e503): COMMIT;
[2016-10-21 09:11:25.538] [INFO] console - [ 70, 111, {}, [ undefined ] ]
[2016-10-21 09:11:25.543] [INFO] console - [ 16,
  8804659409977344,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id12.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '15',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:11:25.750] [INFO] console - Executing (f67d52ff-fd1c-4285-93fb-feebf20db7be): START TRANSACTION;
[2016-10-21 09:11:25.752] [INFO] console - Executing (f67d52ff-fd1c-4285-93fb-feebf20db7be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.762] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:25.776] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 12);
[2016-10-21 09:11:25.786] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:11:25.796] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.816] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:11:25.824] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:11:25.844] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:11:25.856] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '12' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:11:25.870] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 04:11:25.858 +00:00','2016-10-21 04:11:25.858 +00:00','12','2') RETURNING *;
[2016-10-21 09:11:25.878] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 12, -1, k.id, 18, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:11:25.883] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 12 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 12 and value=-1) "protiv"
[2016-10-21 09:11:25.908] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=3,"updated_at"='2016-10-21 04:11:25.886 +00:00' WHERE "id" = '12'
[2016-10-21 09:11:25.911] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:11:25.915] [INFO] console - Executing (4e6923db-eedd-476d-bf0b-0c54720edac0): START TRANSACTION;
[2016-10-21 09:11:25.918] [INFO] console - Executing (f67d52ff-fd1c-4285-93fb-feebf20db7be): COMMIT;
[2016-10-21 09:11:25.919] [INFO] console - Executing (4e6923db-eedd-476d-bf0b-0c54720edac0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.922] [INFO] console - [ 70, 113, {}, [ undefined ] ]
[2016-10-21 09:11:25.927] [INFO] console - [ 16,
  831701391507456,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id12.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 3,
    GOLOS: '18',
    action: 'add',
    value: -1 } ]
[2016-10-21 09:11:25.935] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:11:25.941] [INFO] console - Executing (4e6923db-eedd-476d-bf0b-0c54720edac0): COMMIT;
[2016-10-21 09:11:25.943] [INFO] console - [ 70,
  115,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:25.972] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:25.976] [INFO] console - Executing (cab93ba6-1dfb-4ad2-8057-bc98dd1b9b32): START TRANSACTION;
[2016-10-21 09:11:25.980] [INFO] console - Executing (cab93ba6-1dfb-4ad2-8057-bc98dd1b9b32): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:25.991] [INFO] console - Executing (cab93ba6-1dfb-4ad2-8057-bc98dd1b9b32): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477023080548',0,0,'2016-10-21 04:11:25.983 +00:00','2016-10-21 04:11:25.983 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:25.995] [INFO] console - Executing (cab93ba6-1dfb-4ad2-8057-bc98dd1b9b32): COMMIT;
[2016-10-21 09:11:25.997] [INFO] console - [ 70, 116, {}, [ '13' ] ]
[2016-10-21 09:11:26.021] [INFO] console - [ 16,
  1704857551503360,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '13' ] ]
[2016-10-21 09:11:26.034] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 09:11:26.037] [INFO] console - Executing (7b7114ce-630f-451e-aa54-4cc7bcc31944): START TRANSACTION;
[2016-10-21 09:11:26.039] [INFO] console - Executing (7b7114ce-630f-451e-aa54-4cc7bcc31944): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.053] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 09:11:26.059] [INFO] console - Executing (7b7114ce-630f-451e-aa54-4cc7bcc31944): COMMIT;
[2016-10-21 09:11:26.061] [INFO] console - [ 70,
  117,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:11:26.085] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 09:11:26.087] [INFO] console - [ 70, 118, {}, [ [] ] ]
[2016-10-21 09:11:26.246] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:11:26.251] [INFO] console - Executing (6abd944b-401e-44bc-b47b-e8bfe487b01b): START TRANSACTION;
[2016-10-21 09:11:26.253] [INFO] console - Executing (6abd944b-401e-44bc-b47b-e8bfe487b01b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.261] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:11:26.268] [INFO] console - Executing (6abd944b-401e-44bc-b47b-e8bfe487b01b): COMMIT;
[2016-10-21 09:11:26.270] [INFO] console - [ 70,
  120,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:11:26.316] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 09:11:26.320] [INFO] console - Executing (a1526971-a910-4796-b839-8b696b16f876): START TRANSACTION;
[2016-10-21 09:11:26.322] [INFO] console - Executing (a1526971-a910-4796-b839-8b696b16f876): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.330] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 09:11:26.336] [INFO] console - Executing (a1526971-a910-4796-b839-8b696b16f876): COMMIT;
[2016-10-21 09:11:26.337] [INFO] console - [ 70,
  121,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:26.365] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:26.370] [INFO] console - Executing (d7dff358-d28b-46c9-85da-066e6207148d): START TRANSACTION;
[2016-10-21 09:11:26.372] [INFO] console - Executing (d7dff358-d28b-46c9-85da-066e6207148d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.381] [INFO] console - Executing (d7dff358-d28b-46c9-85da-066e6207148d): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 04:11:26.374 +00:00','2016-10-21 04:11:26.374 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:26.384] [INFO] console - Executing (d7dff358-d28b-46c9-85da-066e6207148d): COMMIT;
[2016-10-21 09:11:26.387] [INFO] console - [ 70, 122, {}, [ '14' ] ]
[2016-10-21 09:11:26.399] [INFO] console - [ 16,
  5502435862773760,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '14' ] ]
[2016-10-21 09:11:26.412] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 14 }
[2016-10-21 09:11:26.415] [INFO] console - Executing (d609654d-2de1-4cc4-bdbf-e95f030425e3): START TRANSACTION;
[2016-10-21 09:11:26.417] [INFO] console - Executing (d609654d-2de1-4cc4-bdbf-e95f030425e3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.429] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 14);
[2016-10-21 09:11:26.435] [INFO] console - Executing (d609654d-2de1-4cc4-bdbf-e95f030425e3): COMMIT;
[2016-10-21 09:11:26.437] [INFO] console - [ 70,
  123,
  {},
  [ { id: '14',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:11:26.461] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:26.468] [INFO] console - Executing (bad5b5f7-fe2c-475f-808c-bf795241b981): START TRANSACTION;
[2016-10-21 09:11:26.470] [INFO] console - Executing (bad5b5f7-fe2c-475f-808c-bf795241b981): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.479] [INFO] console - Executing (bad5b5f7-fe2c-475f-808c-bf795241b981): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477023086451','2016-10-21 04:11:26.474 +00:00','2016-10-21 04:11:26.474 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:26.484] [INFO] console - Executing (bad5b5f7-fe2c-475f-808c-bf795241b981): COMMIT;
[2016-10-21 09:11:26.486] [INFO] console - [ 70, 124, {}, [ '15' ] ]
[2016-10-21 09:11:26.497] [INFO] console - [ 16,
  5512623544074240,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '15' ] ]
[2016-10-21 09:11:26.512] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:11:26.516] [INFO] console - Executing (27140a0a-8f9d-4fea-8f7a-4fea9e9838ca): START TRANSACTION;
[2016-10-21 09:11:26.518] [INFO] console - Executing (27140a0a-8f9d-4fea-8f7a-4fea9e9838ca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.525] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:26.531] [INFO] console - Executing (27140a0a-8f9d-4fea-8f7a-4fea9e9838ca): COMMIT;
[2016-10-21 09:11:26.533] [INFO] console - [ 70,
  125,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023015039',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:10:21 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:26.558] [INFO] console - Executing (f3422d85-8d69-40e8-9816-94cf9d6d93b7): START TRANSACTION;
[2016-10-21 09:11:26.561] [INFO] console - Executing (f3422d85-8d69-40e8-9816-94cf9d6d93b7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.566] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:26.582] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477023080594',"updated_at"='2016-10-21 04:11:26.571 +00:00' WHERE "id" = '2'
[2016-10-21 09:11:26.586] [INFO] console - Executing (f3422d85-8d69-40e8-9816-94cf9d6d93b7): COMMIT;
[2016-10-21 09:11:26.588] [INFO] console - [ 16,
  378987287150592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 09:11:26.605] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:11:26.607] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:11:26.609] [INFO] console - [ 70, 126, {}, [ undefined ] ]
[2016-10-21 09:11:26.614] [INFO] console - Executing (da31c3dd-1198-4b6b-9711-c57f63e5d55e): START TRANSACTION;
[2016-10-21 09:11:26.616] [INFO] console - Executing (a050facb-6360-4434-80f7-f21f494249de): START TRANSACTION;
[2016-10-21 09:11:26.619] [INFO] console - Executing (da31c3dd-1198-4b6b-9711-c57f63e5d55e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.620] [INFO] console - Executing (a050facb-6360-4434-80f7-f21f494249de): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.638] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:26.643] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:26.650] [INFO] console - Executing (da31c3dd-1198-4b6b-9711-c57f63e5d55e): COMMIT;
[2016-10-21 09:11:26.652] [INFO] console - Executing (a050facb-6360-4434-80f7-f21f494249de): COMMIT;
[2016-10-21 09:11:26.654] [INFO] console - [ 70,
  127,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:26.663] [INFO] console - [ 70,
  128,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:26.751] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:11:26.753] [INFO] console - Executing (88abdc77-4a01-4ab3-9a40-ae1e1d5e2cc3): START TRANSACTION;
[2016-10-21 09:11:26.755] [INFO] console - Executing (88abdc77-4a01-4ab3-9a40-ae1e1d5e2cc3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.763] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:11:26.768] [INFO] console - Executing (88abdc77-4a01-4ab3-9a40-ae1e1d5e2cc3): COMMIT;
[2016-10-21 09:11:26.770] [INFO] console - [ 70,
  130,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:26.798] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:26.802] [INFO] console - Executing (131d5c09-10a2-487c-90ad-079fe75924a9): START TRANSACTION;
[2016-10-21 09:11:26.804] [INFO] console - Executing (131d5c09-10a2-487c-90ad-079fe75924a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.812] [INFO] console - Executing (131d5c09-10a2-487c-90ad-079fe75924a9): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 04:11:26.806 +00:00','2016-10-21 04:11:26.806 +00:00',2,3) RETURNING *;
[2016-10-21 09:11:26.816] [INFO] console - Executing (131d5c09-10a2-487c-90ad-079fe75924a9): COMMIT;
[2016-10-21 09:11:26.818] [INFO] console - [ 70, 131, {}, [ '16' ] ]
[2016-10-21 09:11:26.828] [INFO] console - [ 16,
  4199212237455360,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '16' ] ]
[2016-10-21 09:11:26.842] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 09:11:26.849] [INFO] console - Executing (043e3dad-f677-4c55-acd9-0505c01ab2d5): START TRANSACTION;
[2016-10-21 09:11:26.851] [INFO] console - Executing (043e3dad-f677-4c55-acd9-0505c01ab2d5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:26.865] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 09:11:26.875] [INFO] console - Executing (043e3dad-f677-4c55-acd9-0505c01ab2d5): COMMIT;
[2016-10-21 09:11:26.878] [INFO] console - [ 70,
  132,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:11:27.017] [INFO] console - [ 70, 134, {}, [ undefined ] ]
[2016-10-21 09:11:27.027] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:11:27.032] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 09:11:27.044] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:11:27.047] [INFO] console - Executing (dca9b6e7-02fb-40e5-861a-c1337796fb99): START TRANSACTION;
[2016-10-21 09:11:27.050] [INFO] console - Executing (dca9b6e7-02fb-40e5-861a-c1337796fb99): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.066] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:27.076] [INFO] console - Executing (dca9b6e7-02fb-40e5-861a-c1337796fb99): COMMIT;
[2016-10-21 09:11:27.078] [INFO] console - [ 70,
  135,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:27.105] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:27.114] [INFO] console - Executing (4a7186d0-18c2-4317-9ffa-1cc1954343a0): START TRANSACTION;
[2016-10-21 09:11:27.116] [INFO] console - Executing (4a7186d0-18c2-4317-9ffa-1cc1954343a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.123] [INFO] console - Executing (4a7186d0-18c2-4317-9ffa-1cc1954343a0): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 04:11:27.118 +00:00','2016-10-21 04:11:27.118 +00:00',2,2) RETURNING *;
[2016-10-21 09:11:27.126] [INFO] console - Executing (4a7186d0-18c2-4317-9ffa-1cc1954343a0): COMMIT;
[2016-10-21 09:11:27.128] [INFO] console - [ 70, 136, {}, [ '14' ] ]
[2016-10-21 09:11:27.145] [INFO] console - Executing (1e132cc9-1c56-4062-b761-4196c3b9876b): START TRANSACTION;
[2016-10-21 09:11:27.146] [INFO] console - Executing (1e132cc9-1c56-4062-b761-4196c3b9876b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.151] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 14);
[2016-10-21 09:11:27.163] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:11:27.154 +00:00',"updated_at"='2016-10-21 04:11:27.156 +00:00' WHERE "id" = '14'
[2016-10-21 09:11:27.168] [INFO] console - Executing (1e132cc9-1c56-4062-b761-4196c3b9876b): COMMIT;
[2016-10-21 09:11:27.169] [INFO] console - [ 70, 137, {}, [ undefined ] ]
[2016-10-21 09:11:27.171] [INFO] console - [ 16, 3945562114097152, {}, 'ru.kopa.model.Kopa.id14.change' ]
[2016-10-21 09:11:27.175] [INFO] console - [ 16,
  2476432234119168,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 14 ] ]
[2016-10-21 09:11:27.193] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 14 }
[2016-10-21 09:11:27.196] [INFO] console - Executing (586f3b3b-eee2-49b8-96af-b3861ccaf861): START TRANSACTION;
[2016-10-21 09:11:27.199] [INFO] console - Executing (586f3b3b-eee2-49b8-96af-b3861ccaf861): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.212] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 14);
[2016-10-21 09:11:27.226] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:27.234] [INFO] console - Executing (586f3b3b-eee2-49b8-96af-b3861ccaf861): COMMIT;
[2016-10-21 09:11:27.239] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): START TRANSACTION;
[2016-10-21 09:11:27.240] [INFO] console - [ 70,
  138,
  {},
  [ { id: '14',
      question: 'temp',
      invited: Fri Oct 21 2016 09:11:27 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:11:27 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:27 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:11:27.401] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.421] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:11:27.425] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:11:27.431] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 04:11:27.405 +00:00','2016-10-21 04:11:27.405 +00:00',2) RETURNING *;
[2016-10-21 09:11:27.440] [INFO] console - Executing (0b91fe97-a491-46b3-9049-8b383b239e52): COMMIT;
[2016-10-21 09:11:27.442] [INFO] console - [ 70, 139, {}, [ '15' ] ]
[2016-10-21 09:11:27.450] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:11:27.456] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:27.459] [INFO] console - [ 16,
  1654370047361024,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:11:27.466] [INFO] console - [ 16,
  6974921628450816,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 09:11:27.477] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:27.482] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): START TRANSACTION;
[2016-10-21 09:11:27.484] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.490] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 15);
[2016-10-21 09:11:27.497] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/15/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:11:27.505] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/15/','2016-10-21 04:11:27.487 +00:00','2016-10-21 04:11:27.487 +00:00',15) RETURNING *;
[2016-10-21 09:11:27.508] [INFO] console - Executing (98a099ad-cbc4-4653-ac44-6d7e6dfd5171): COMMIT;
[2016-10-21 09:11:27.510] [INFO] console - [ 70, 140, {}, [ '16' ] ]
[2016-10-21 09:11:27.522] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/15/' like z.path||z.id||'/%'
[2016-10-21 09:11:27.529] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '15')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:27.535] [INFO] console - [ 16,
  5190311512899584,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id15.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 09:11:27.542] [INFO] console - [ 16,
  7908272921116672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:11:27.552] [INFO] console - [ 16,
  4487989369503744,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 09:11:27.576] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:11:27.580] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): START TRANSACTION;
[2016-10-21 09:11:27.587] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.596] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:11:27.589 +00:00','2016-10-21 04:11:27.589 +00:00',16,NULL) RETURNING *;
[2016-10-21 09:11:27.607] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:11:27.618] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '16');
[2016-10-21 09:11:27.624] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/15/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 16
                                    )
[2016-10-21 09:11:27.627] [INFO] console - Executing (a5b6c750-18ff-4ac7-92ab-f9e06fb15adf): COMMIT;
[2016-10-21 09:11:27.629] [INFO] console - [ 70, 141, {}, [ '19' ] ]
[2016-10-21 09:11:27.646] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '16');
[2016-10-21 09:11:27.650] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/15/' like z.path||z.id||'/%'
[2016-10-21 09:11:27.657] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '15')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:27.661] [INFO] console - [ 16,
  3558090448306176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id16.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:11:27.672] [INFO] console - [ 16,
  7355907499360256,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id15.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:11:27.680] [INFO] console - [ 16,
  6451424640630784,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:11:27.687] [INFO] console - [ 16,
  7997293762445312,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 19 } ]
[2016-10-21 09:11:27.695] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 09:11:27.699] [INFO] console - Executing (e5468d9d-e062-438e-8215-1bc3d4244d74): START TRANSACTION;
[2016-10-21 09:11:27.705] [INFO] console - Executing (e5468d9d-e062-438e-8215-1bc3d4244d74): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.938] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:11:27.952] [INFO] console - Executing (e5468d9d-e062-438e-8215-1bc3d4244d74): COMMIT;
[2016-10-21 09:11:27.958] [INFO] console - [ 70,
  142,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:11:27.979] [INFO] console - Executing (666dc03d-9cb5-4a0e-b867-08c40682884c): START TRANSACTION;
[2016-10-21 09:11:27.980] [INFO] console - Executing (666dc03d-9cb5-4a0e-b867-08c40682884c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:11:27.987] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 15);
[2016-10-21 09:11:27.994] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:11:27.998] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:11:28.011] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:28.017] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 15
                                    )
[2016-10-21 09:11:28.047] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 04:11:28.034 +00:00' WHERE "id" = '15'
[2016-10-21 09:11:28.051] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '15'
                                    or path like '/1/2/15/'||'%'
[2016-10-21 09:11:28.055] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 15
                                    )
[2016-10-21 09:11:28.060] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 09:11:28.066] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:11:28.069] [INFO] console - Executing (666dc03d-9cb5-4a0e-b867-08c40682884c): COMMIT;
[2016-10-21 09:11:28.075] [INFO] console - [ 70, 143, {}, [ undefined ] ]
[2016-10-21 09:11:28.078] [INFO] console - [ 16,
  3363443516112896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:11:28.089] [INFO] console - [ 16,
  5309085037625344,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 09:11:28.094] [INFO] console - [ 16,
  3295307494326272,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 09:11:28.098] [INFO] console - [ 16,
  5942345310666752,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 19 } ]
[2016-10-21 09:12:58.303] [INFO] console - [ 70, 145, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:12:58.329] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:12:58.335] [INFO] console - [ 70, 146, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:12:58.428] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:12:58.431] [INFO] console - [ 70, 147, {}, [ 'КОПА' ] ]
[2016-10-21 09:12:58.488] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:12:58.490] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 09:12:58.504] [INFO] console - [ 8,
  68,
  148,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 09:12:58.726] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:12:58.730] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:12:58.739] [INFO] console - [ 8,
  68,
  150,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:12:58.888] [INFO] console - [ 70, 152, {}, [ undefined ] ]
[2016-10-21 09:12:58.896] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:12:58.908] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:12:58.925] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:12:58.929] [INFO] console - Executing (c590154f-8461-4429-9513-9906f44f956d): START TRANSACTION;
[2016-10-21 09:12:58.931] [INFO] console - Executing (c590154f-8461-4429-9513-9906f44f956d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:12:58.984] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:12:59.005] [INFO] console - Executing (c590154f-8461-4429-9513-9906f44f956d): COMMIT;
[2016-10-21 09:12:59.007] [INFO] console - [ 70,
  153,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:12:59.054] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:12:59.057] [INFO] console - Executing (837055cb-b530-4656-a1f8-63ae4eb8c619): START TRANSACTION;
[2016-10-21 09:12:59.060] [INFO] console - Executing (837055cb-b530-4656-a1f8-63ae4eb8c619): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:12:59.071] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:12:59.083] [INFO] console - Executing (837055cb-b530-4656-a1f8-63ae4eb8c619): COMMIT;
[2016-10-21 09:12:59.085] [INFO] console - [ 70,
  154,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:12:59.136] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:12:59.141] [INFO] console - Executing (cc946866-3f20-45f6-9cd9-6033f96ae6ac): START TRANSACTION;
[2016-10-21 09:12:59.143] [INFO] console - Executing (cc946866-3f20-45f6-9cd9-6033f96ae6ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:12:59.157] [INFO] console - Executing (cc946866-3f20-45f6-9cd9-6033f96ae6ac): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:12:59.146 +00:00','2016-10-21 04:12:59.146 +00:00',2,2) RETURNING *;
[2016-10-21 09:12:59.181] [INFO] console - Executing (cc946866-3f20-45f6-9cd9-6033f96ae6ac): COMMIT;
[2016-10-21 09:12:59.186] [INFO] console - [ 70, 155, {}, [ '15' ] ]
[2016-10-21 09:12:59.205] [INFO] console - Executing (edeb5ee2-6ea5-44e4-af28-009a96e7b0ef): START TRANSACTION;
[2016-10-21 09:12:59.207] [INFO] console - Executing (edeb5ee2-6ea5-44e4-af28-009a96e7b0ef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:12:59.221] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 15);
[2016-10-21 09:12:59.231] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:12:59.224 +00:00',"updated_at"='2016-10-21 04:12:59.225 +00:00' WHERE "id" = '15'
[2016-10-21 09:12:59.235] [INFO] console - Executing (edeb5ee2-6ea5-44e4-af28-009a96e7b0ef): COMMIT;
[2016-10-21 09:12:59.237] [INFO] console - [ 70, 156, {}, [ undefined ] ]
[2016-10-21 09:12:59.245] [INFO] console - [ 16, 4707176616558592, {}, 'ru.kopa.model.Kopa.id15.change' ]
[2016-10-21 09:12:59.247] [INFO] console - [ 16,
  4898320499605504,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 15 ] ]
[2016-10-21 09:12:59.263] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 15 }
[2016-10-21 09:12:59.271] [INFO] console - Executing (3e50fdc9-75ee-411a-b702-8c8ca40821c9): START TRANSACTION;
[2016-10-21 09:12:59.276] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:12:59.277] [INFO] console - Executing (3e50fdc9-75ee-411a-b702-8c8ca40821c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:12:59.295] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:12:59.317] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 15);
[2016-10-21 09:12:59.319] [INFO] console - [ 70, 158, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:12:59.335] [INFO] console - Executing (3e50fdc9-75ee-411a-b702-8c8ca40821c9): COMMIT;
[2016-10-21 09:12:59.337] [INFO] console - [ 70,
  157,
  {},
  [ { id: '15',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:12:59 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:12:59 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:12:59 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:12:59.376] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:12:59.384] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:12:59.391] [INFO] console - [ 70, 159, {}, [ [ [Object] ] ] ]
[2016-10-21 09:15:40.824] [INFO] console - [ 70, 161, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:15:40.909] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:15:40.917] [INFO] console - [ 70, 162, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:15:40.975] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:15:40.984] [INFO] console - [ 70, 163, {}, [ 'КОПА' ] ]
[2016-10-21 09:15:41.004] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:15:41.007] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 09:15:41.023] [INFO] console - [ 8,
  68,
  164,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 09:15:41.289] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:15:41.294] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:15:41.300] [INFO] console - [ 8,
  68,
  166,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:15:41.395] [INFO] console - [ 70, 168, {}, [ undefined ] ]
[2016-10-21 09:15:41.399] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:15:41.406] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:15:41.411] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:15:41.421] [INFO] console - Executing (11d1f801-5883-4e32-99e5-f7f031b26b2e): START TRANSACTION;
[2016-10-21 09:15:41.424] [INFO] console - Executing (11d1f801-5883-4e32-99e5-f7f031b26b2e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:15:41.511] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:15:41.523] [INFO] console - Executing (11d1f801-5883-4e32-99e5-f7f031b26b2e): COMMIT;
[2016-10-21 09:15:41.526] [INFO] console - [ 70,
  169,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:15:41.556] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:15:41.562] [INFO] console - Executing (a357299e-cac4-4c4a-a36f-b9e93699cc54): START TRANSACTION;
[2016-10-21 09:15:41.566] [INFO] console - Executing (a357299e-cac4-4c4a-a36f-b9e93699cc54): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:15:41.577] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:15:41.593] [INFO] console - Executing (a357299e-cac4-4c4a-a36f-b9e93699cc54): COMMIT;
[2016-10-21 09:15:41.596] [INFO] console - [ 70,
  170,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:15:41.646] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:15:41.654] [INFO] console - Executing (6f9397b8-08ed-4bc6-bb18-a966609e75ea): START TRANSACTION;
[2016-10-21 09:15:41.656] [INFO] console - Executing (6f9397b8-08ed-4bc6-bb18-a966609e75ea): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:15:41.678] [INFO] console - Executing (6f9397b8-08ed-4bc6-bb18-a966609e75ea): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:15:41.658 +00:00','2016-10-21 04:15:41.658 +00:00',2,2) RETURNING *;
[2016-10-21 09:15:41.686] [INFO] console - Executing (6f9397b8-08ed-4bc6-bb18-a966609e75ea): COMMIT;
[2016-10-21 09:15:41.688] [INFO] console - [ 70, 171, {}, [ '16' ] ]
[2016-10-21 09:15:41.705] [INFO] console - Executing (0c0ff356-a347-430f-b009-966da70964a4): START TRANSACTION;
[2016-10-21 09:15:41.707] [INFO] console - Executing (0c0ff356-a347-430f-b009-966da70964a4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:15:41.716] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 16);
[2016-10-21 09:15:41.733] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:15:41.719 +00:00',"updated_at"='2016-10-21 04:15:41.726 +00:00' WHERE "id" = '16'
[2016-10-21 09:15:41.737] [INFO] console - Executing (0c0ff356-a347-430f-b009-966da70964a4): COMMIT;
[2016-10-21 09:15:41.740] [INFO] console - [ 70, 172, {}, [ undefined ] ]
[2016-10-21 09:15:41.755] [INFO] console - [ 16, 2406869960228864, {}, 'ru.kopa.model.Kopa.id16.change' ]
[2016-10-21 09:15:41.757] [INFO] console - [ 16,
  3199367771062272,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 16 ] ]
[2016-10-21 09:15:41.776] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 16 }
[2016-10-21 09:15:41.780] [INFO] console - Executing (9218d124-4e2b-4dd8-abc9-c2026d04cc73): START TRANSACTION;
[2016-10-21 09:15:41.781] [INFO] console - Executing (9218d124-4e2b-4dd8-abc9-c2026d04cc73): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:15:41.791] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 16);
[2016-10-21 09:15:41.806] [INFO] console - Executing (9218d124-4e2b-4dd8-abc9-c2026d04cc73): COMMIT;
[2016-10-21 09:15:41.808] [INFO] console - [ 70,
  173,
  {},
  [ { id: '16',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:15:41 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:15:41 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:15:41 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:15:41.825] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:15:41.839] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:15:41.849] [INFO] console - [ 70, 174, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:15:41.885] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:15:41.893] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:15:41.897] [INFO] console - [ 70, 175, {}, [ [ [Object] ] ] ]
[2016-10-21 09:15:41.927] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:15:41.940] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:15:41.944] [INFO] console - [ 70, 176, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:15:41.975] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:15:41.985] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:15:41.989] [INFO] console - [ 70, 177, {}, [ [ [Object] ] ] ]
[2016-10-21 09:16:35.473] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:16:35.512] [INFO] console - Executing (0088ca4e-e771-432f-b84c-aae6009d19d5): START TRANSACTION;
[2016-10-21 09:16:35.515] [INFO] console - Executing (0088ca4e-e771-432f-b84c-aae6009d19d5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:35.558] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:16:35.575] [INFO] console - Executing (0088ca4e-e771-432f-b84c-aae6009d19d5): COMMIT;
[2016-10-21 09:16:35.578] [INFO] console - [ 70,
  178,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:16:35.647] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:35.668] [INFO] console - Executing (e10bcae7-b505-4485-8057-35f2d54a95b5): START TRANSACTION;
[2016-10-21 09:16:35.685] [INFO] console - Executing (e10bcae7-b505-4485-8057-35f2d54a95b5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:35.704] [INFO] console - Executing (e10bcae7-b505-4485-8057-35f2d54a95b5): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477023395605 temp','2016-10-21 04:16:35.688 +00:00','2016-10-21 04:16:35.688 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:35.709] [INFO] console - Executing (e10bcae7-b505-4485-8057-35f2d54a95b5): COMMIT;
[2016-10-21 09:16:35.720] [INFO] console - [ 70, 179, {}, [ '17' ] ]
[2016-10-21 09:16:35.723] [INFO] console - [ 16,
  6223353220169728,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '17' ] ]
[2016-10-21 09:16:35.763] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:35.771] [INFO] console - Executing (305a1fd1-d84a-45b2-8d58-7d07400badb7): START TRANSACTION;
[2016-10-21 09:16:35.773] [INFO] console - Executing (305a1fd1-d84a-45b2-8d58-7d07400badb7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:35.783] [INFO] console - Executing (305a1fd1-d84a-45b2-8d58-7d07400badb7): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477023395752temp',0,0,'2016-10-21 04:16:35.775 +00:00','2016-10-21 04:16:35.775 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:35.788] [INFO] console - Executing (305a1fd1-d84a-45b2-8d58-7d07400badb7): COMMIT;
[2016-10-21 09:16:35.790] [INFO] console - [ 70, 180, {}, [ '14' ] ]
[2016-10-21 09:16:35.794] [INFO] console - [ 16,
  5295794682855424,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '14' ] ]
[2016-10-21 09:16:35.891] [INFO] console - [ 70, 182, {}, [ undefined ] ]
[2016-10-21 09:16:35.898] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:16:35.903] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:16:35.906] [INFO] console - Executing (dc0b4563-184b-4b25-8217-69356835d2db): START TRANSACTION;
[2016-10-21 09:16:35.908] [INFO] console - Executing (dc0b4563-184b-4b25-8217-69356835d2db): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:35.921] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:16:35.940] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:16:35.947] [INFO] console - Executing (dc0b4563-184b-4b25-8217-69356835d2db): COMMIT;
[2016-10-21 09:16:35.959] [INFO] console - [ 70,
  183,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:16:36.002] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:16:36.010] [INFO] console - [ 70, 184, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:16:36.044] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:36.059] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): START TRANSACTION;
[2016-10-21 09:16:36.061] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.082] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:16:36.065 +00:00','2016-10-21 04:16:36.065 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:16:36.095] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.103] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.111] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:16:36.115] [INFO] console - Executing (ddc80f39-eac5-4985-85e0-7f89af39bfec): COMMIT;
[2016-10-21 09:16:36.118] [INFO] console - [ 70, 185, {}, [ '20' ] ]
[2016-10-21 09:16:36.127] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.138] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:16:36.143] [INFO] console - Executing (28feaaeb-e276-4cfe-8be6-148bb67ece6a): START TRANSACTION;
[2016-10-21 09:16:36.146] [INFO] console - Executing (28feaaeb-e276-4cfe-8be6-148bb67ece6a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.150] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:36.162] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 09:16:36.164] [INFO] console - [ 16,
  7184102629310464,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:16:36.172] [INFO] console - [ 16,
  940262543065088,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 20 } ]
[2016-10-21 09:16:36.186] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:16:36.191] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.197] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.201] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.209] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:16:36.204 +00:00' WHERE "id" = '20'
[2016-10-21 09:16:36.216] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '20'
                                    or path like '/20/'||'%'
[2016-10-21 09:16:36.219] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:16:36.223] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.231] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.236] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/20/'||'%'
[2016-10-21 09:16:36.240] [INFO] console - Executing (28feaaeb-e276-4cfe-8be6-148bb67ece6a): COMMIT;
[2016-10-21 09:16:36.244] [INFO] console - [ 70, 186, {}, [ undefined ] ]
[2016-10-21 09:16:36.250] [INFO] console - [ 16,
  8055144979628032,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/20/',
       id: '20',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:16:36.277] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:36.279] [INFO] console - [ 16,
  6604241548345344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:16:36.294] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): START TRANSACTION;
[2016-10-21 09:16:36.296] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:16:36.299] [INFO] console - Executing (306aac19-5033-45b6-b571-edefb4e41204): START TRANSACTION;
[2016-10-21 09:16:36.300] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.311] [INFO] console - Executing (306aac19-5033-45b6-b571-edefb4e41204): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.333] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:16:36.346] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:16:36.314 +00:00','2016-10-21 04:16:36.314 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:16:36.357] [INFO] console - Executing (306aac19-5033-45b6-b571-edefb4e41204): COMMIT;
[2016-10-21 09:16:36.360] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.363] [INFO] console - [ 70,
  188,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:16:36.371] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.386] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:16:36.389] [INFO] console - Executing (7d98b7d8-65af-4285-9f9c-46d8887aaa9d): START TRANSACTION;
[2016-10-21 09:16:36.393] [INFO] console - Executing (7d98b7d8-65af-4285-9f9c-46d8887aaa9d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.398] [INFO] console - Executing (95799d76-d6dd-4999-8837-e0ccb986c0db): COMMIT;
[2016-10-21 09:16:36.410] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 09:16:36.415] [INFO] console - [ 70, 187, {}, [ '21' ] ]
[2016-10-21 09:16:36.428] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:16:36.431] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.444] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.448] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:16:36.451] [INFO] console - Executing (ea63c961-552c-4244-8da7-1bd2b2b49664): START TRANSACTION;
[2016-10-21 09:16:36.462] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.465] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:36.476] [INFO] console - [ 16,
  8466216584740864,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:16:36.505] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:16:36.506] [INFO] console - Executing (ea63c961-552c-4244-8da7-1bd2b2b49664): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.520] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:16:36.510 +00:00' WHERE "id" = '20'
[2016-10-21 09:16:36.530] [INFO] console - [ 16,
  2648665009160192,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 21 } ]
[2016-10-21 09:16:36.539] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 21);
[2016-10-21 09:16:36.548] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '20'
                                    or path like '/2/20/'||'%'
[2016-10-21 09:16:36.553] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 09:16:36.561] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:16:36.564] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.571] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.578] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.589] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.593] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.601] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/20/'||'%'
[2016-10-21 09:16:36.610] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='20',"updated_at"='2016-10-21 04:16:36.598 +00:00' WHERE "id" = '21'
[2016-10-21 09:16:36.616] [INFO] console - Executing (7d98b7d8-65af-4285-9f9c-46d8887aaa9d): COMMIT;
[2016-10-21 09:16:36.618] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/4/20/')
                                where
                                    id = '21'
                                    or path like '/21/'||'%'
[2016-10-21 09:16:36.621] [INFO] console - [ 70, 189, {}, [ undefined ] ]
[2016-10-21 09:16:36.627] [INFO] console - [ 16,
  1099905709899776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 20 } ]
[2016-10-21 09:16:36.636] [INFO] console - [ 16,
  6677728096944128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/20/',
       id: '20',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:16:36.645] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/20/' like path||id||'/%'
[2016-10-21 09:16:36.647] [INFO] console - [ 16,
  1039691797233664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:16:36.657] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/20/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.660] [INFO] console - [ 16,
  6246799073345536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:16:36.670] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('20', '4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.680] [INFO] console - Executing (9e506a75-6e58-4a72-9721-2516a832aa23): START TRANSACTION;
[2016-10-21 09:16:36.685] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/20/21/'||'%'
[2016-10-21 09:16:36.687] [INFO] console - Executing (9e506a75-6e58-4a72-9721-2516a832aa23): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.691] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:36.698] [INFO] console - Executing (ea63c961-552c-4244-8da7-1bd2b2b49664): COMMIT;
[2016-10-21 09:16:36.700] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): START TRANSACTION;
[2016-10-21 09:16:36.703] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 09:16:36.707] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.710] [INFO] console - [ 70, 190, {}, [ undefined ] ]
[2016-10-21 09:16:36.715] [INFO] console - [ 16,
  2637548912377856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/20/21/',
       id: '21',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/20/',
       note: null,
       created_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '20' } } ]
[2016-10-21 09:16:36.725] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.730] [INFO] console - [ 16,
  2963623353778176,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:16:36.740] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.743] [INFO] console - [ 16,
  438358723526656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:16:36.758] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:16:36.728 +00:00','2016-10-21 04:16:36.728 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:16:36.763] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:16:36.766] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.781] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:16:36.770 +00:00' WHERE "id" = '20'
[2016-10-21 09:16:36.791] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.795] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '20'
                                    or path like '/4/20/'||'%'
[2016-10-21 09:16:36.799] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:16:36.801] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.805] [INFO] console - Executing (0bb9cb07-e74d-4505-be08-b0d8747d52c1): COMMIT;
[2016-10-21 09:16:36.807] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.810] [INFO] console - [ 70, 192, {}, [ '22' ] ]
[2016-10-21 09:16:36.824] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.826] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:36.832] [INFO] console - Executing (35432035-a90d-492e-bb88-7390b9800bdc): START TRANSACTION;
[2016-10-21 09:16:36.835] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/20/'||'%'
[2016-10-21 09:16:36.837] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:16:36.839] [INFO] console - Executing (35432035-a90d-492e-bb88-7390b9800bdc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.848] [INFO] console - Executing (9e506a75-6e58-4a72-9721-2516a832aa23): COMMIT;
[2016-10-21 09:16:36.853] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:36.855] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 22);
[2016-10-21 09:16:36.861] [INFO] console - [ 16,
  7406408855191552,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 09:16:36.867] [INFO] console - [ 70, 191, {}, [ undefined ] ]
[2016-10-21 09:16:36.872] [INFO] console - [ 16,
  5785098637017088,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 09:16:36.876] [INFO] console - [ 16,
  8585954184921088,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 20 } ]
[2016-10-21 09:16:36.885] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:16:36.888] [INFO] console - [ 16,
  6848454795984896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:16:36.899] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.905] [INFO] console - [ 16,
  5176391565836288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id21.starshinaChange',
  [],
  {} ]
[2016-10-21 09:16:36.911] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.915] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:36.922] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:16:36.918 +00:00' WHERE "id" = '22'
[2016-10-21 09:16:36.928] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '22'
                                    or path like '/22/'||'%'
[2016-10-21 09:16:36.932] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:16:36.935] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.940] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.945] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/22/'||'%'
[2016-10-21 09:16:36.948] [INFO] console - Executing (35432035-a90d-492e-bb88-7390b9800bdc): COMMIT;
[2016-10-21 09:16:36.950] [INFO] console - [ 70, 193, {}, [ undefined ] ]
[2016-10-21 09:16:36.952] [INFO] console - [ 16,
  6656889150504960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/22/',
       id: '22',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:16:36 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:16:36.964] [INFO] console - Executing (80d71b91-2054-4f05-b0e5-2f9a38130c8f): START TRANSACTION;
[2016-10-21 09:16:36.968] [INFO] console - Executing (80d71b91-2054-4f05-b0e5-2f9a38130c8f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:36.969] [INFO] console - [ 16,
  3803081080832000,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:16:36.978] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 22);
[2016-10-21 09:16:36.983] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:16:36.989] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:36.993] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:16:37.002] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:16:36.995 +00:00' WHERE "id" = '22'
[2016-10-21 09:16:37.009] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '22'
                                    or path like '/2/22/'||'%'
[2016-10-21 09:16:37.012] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:37.016] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:37.020] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:37.023] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/22/'||'%'
[2016-10-21 09:16:37.025] [INFO] console - Executing (80d71b91-2054-4f05-b0e5-2f9a38130c8f): COMMIT;
[2016-10-21 09:16:37.027] [INFO] console - [ 70, 194, {}, [ undefined ] ]
[2016-10-21 09:16:37.028] [INFO] console - [ 16,
  5632092595552256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 22 } ]
[2016-10-21 09:16:37.044] [INFO] console - [ 16,
  5444911224586240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:16:37.051] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:16:37.055] [INFO] console - Executing (af021f03-7bf9-4fc8-ab56-6fa6af7f2c13): START TRANSACTION;
[2016-10-21 09:16:37.057] [INFO] console - Executing (af021f03-7bf9-4fc8-ab56-6fa6af7f2c13): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.070] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:16:37.080] [INFO] console - Executing (af021f03-7bf9-4fc8-ab56-6fa6af7f2c13): COMMIT;
[2016-10-21 09:16:37.082] [INFO] console - [ 70,
  195,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:16:37.120] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:37.123] [INFO] console - Executing (ae72c2de-1b8d-4680-81f6-bba076d1731d): START TRANSACTION;
[2016-10-21 09:16:37.125] [INFO] console - Executing (ae72c2de-1b8d-4680-81f6-bba076d1731d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.131] [INFO] console - Executing (ae72c2de-1b8d-4680-81f6-bba076d1731d): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:16:37 GMT+0500 (YEKT)',0,0,'2016-10-21 04:16:37.128 +00:00','2016-10-21 04:16:37.128 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:37.135] [INFO] console - Executing (ae72c2de-1b8d-4680-81f6-bba076d1731d): COMMIT;
[2016-10-21 09:16:37.138] [INFO] console - [ 70, 196, {}, [ '15' ] ]
[2016-10-21 09:16:37.141] [INFO] console - [ 16,
  6719257144459264,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '15' ] ]
[2016-10-21 09:16:37.159] [INFO] console - Executing (e894254a-6b79-40c5-a312-865ab8df192f): START TRANSACTION;
[2016-10-21 09:16:37.164] [INFO] console - Executing (e894254a-6b79-40c5-a312-865ab8df192f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.170] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:37.180] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 15);
[2016-10-21 09:16:37.191] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:16:37.201] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:37.206] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:37.211] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:37.216] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:37.223] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '15' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:16:37.235] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:16:37.229 +00:00','2016-10-21 04:16:37.229 +00:00','15','2') RETURNING *;
[2016-10-21 09:16:37.252] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 15, 1, k.id, 21, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:16:37.262] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 15 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 15 and value=-1) "protiv"
[2016-10-21 09:16:37.283] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:16:37.265 +00:00' WHERE "id" = '15'
[2016-10-21 09:16:37.295] [INFO] console - Executing (e894254a-6b79-40c5-a312-865ab8df192f): COMMIT;
[2016-10-21 09:16:37.297] [INFO] console - [ 70, 197, {}, [ undefined ] ]
[2016-10-21 09:16:37.300] [INFO] console - [ 16,
  4757827369304064,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id15.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '21',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:16:37.315] [INFO] console - Executing (672784d4-9b87-4168-b3be-98b03d89a78f): START TRANSACTION;
[2016-10-21 09:16:37.317] [INFO] console - Executing (672784d4-9b87-4168-b3be-98b03d89a78f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.342] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:37.345] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 21 }
[2016-10-21 09:16:37.350] [INFO] console - Executing (6edca0f8-d782-4c2f-b93c-4f1b4b10d2fb): START TRANSACTION;
[2016-10-21 09:16:37.354] [INFO] console - Executing (6edca0f8-d782-4c2f-b93c-4f1b4b10d2fb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.357] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 15);
[2016-10-21 09:16:37.371] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 21);
[2016-10-21 09:16:37.384] [INFO] console - Executing (6edca0f8-d782-4c2f-b93c-4f1b4b10d2fb): COMMIT;
[2016-10-21 09:16:37.388] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:16:37.400] [INFO] console - [ 70,
  199,
  {},
  [ { id: '21',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:16:37 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:37 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '15',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:16:37.410] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:37.428] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:16:37.435] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:16:37.442] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:16:37.448] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '15' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:16:37.461] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 15
                                and (
                                    id= 21
                                    or parent_id = 21
                                )
[2016-10-21 09:16:37.465] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 15 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 15 and value=-1) "protiv"
[2016-10-21 09:16:37.473] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:16:37.467 +00:00' WHERE "id" = '15'
[2016-10-21 09:16:37.478] [INFO] console - Executing (672784d4-9b87-4168-b3be-98b03d89a78f): COMMIT;
[2016-10-21 09:16:37.481] [INFO] console - [ 70, 198, {}, [ undefined ] ]
[2016-10-21 09:16:37.484] [INFO] console - [ 16,
  369970525503488,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id15.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '21',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:16:37.582] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:16:37.584] [INFO] console - Executing (c2f4a590-4d4f-484a-8713-e360d35bb079): START TRANSACTION;
[2016-10-21 09:16:37.588] [INFO] console - Executing (c2f4a590-4d4f-484a-8713-e360d35bb079): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.600] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:16:37.613] [INFO] console - Executing (c2f4a590-4d4f-484a-8713-e360d35bb079): COMMIT;
[2016-10-21 09:16:37.616] [INFO] console - [ 70,
  201,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:16:37.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:37.663] [INFO] console - Executing (4c78f58c-d4e1-4370-aeba-6e01a17031be): START TRANSACTION;
[2016-10-21 09:16:37.666] [INFO] console - Executing (4c78f58c-d4e1-4370-aeba-6e01a17031be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.674] [INFO] console - Executing (4c78f58c-d4e1-4370-aeba-6e01a17031be): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477023339545',0,0,'2016-10-21 04:16:37.668 +00:00','2016-10-21 04:16:37.668 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:37.680] [INFO] console - Executing (4c78f58c-d4e1-4370-aeba-6e01a17031be): COMMIT;
[2016-10-21 09:16:37.682] [INFO] console - [ 70, 202, {}, [ '16' ] ]
[2016-10-21 09:16:37.694] [INFO] console - [ 16,
  6182883312009216,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '16' ] ]
[2016-10-21 09:16:37.715] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 09:16:37.728] [INFO] console - Executing (09a2783e-64cd-4104-a5f4-95f554f586df): START TRANSACTION;
[2016-10-21 09:16:37.730] [INFO] console - Executing (09a2783e-64cd-4104-a5f4-95f554f586df): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.746] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 09:16:37.752] [INFO] console - Executing (09a2783e-64cd-4104-a5f4-95f554f586df): COMMIT;
[2016-10-21 09:16:37.754] [INFO] console - [ 70,
  203,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:16:37.771] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 09:16:37.776] [INFO] console - [ 70, 204, {}, [ [] ] ]
[2016-10-21 09:16:37.881] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:16:37.887] [INFO] console - Executing (e899361f-1767-44ed-b677-13e2873091ff): START TRANSACTION;
[2016-10-21 09:16:37.890] [INFO] console - Executing (e899361f-1767-44ed-b677-13e2873091ff): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.898] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:16:37.905] [INFO] console - Executing (e899361f-1767-44ed-b677-13e2873091ff): COMMIT;
[2016-10-21 09:16:37.907] [INFO] console - [ 70,
  206,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:16:37.935] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 09:16:37.940] [INFO] console - Executing (426ecf89-42d9-40d3-aeb3-77c96208174b): START TRANSACTION;
[2016-10-21 09:16:37.946] [INFO] console - Executing (426ecf89-42d9-40d3-aeb3-77c96208174b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:37.957] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 09:16:37.968] [INFO] console - Executing (426ecf89-42d9-40d3-aeb3-77c96208174b): COMMIT;
[2016-10-21 09:16:37.975] [INFO] console - [ 70,
  207,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:16:38.001] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:38.009] [INFO] console - Executing (c08b86fb-cd0a-4aac-97f1-468a2668164e): START TRANSACTION;
[2016-10-21 09:16:38.015] [INFO] console - Executing (c08b86fb-cd0a-4aac-97f1-468a2668164e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.044] [INFO] console - Executing (c08b86fb-cd0a-4aac-97f1-468a2668164e): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 04:16:38.017 +00:00','2016-10-21 04:16:38.017 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:38.055] [INFO] console - Executing (c08b86fb-cd0a-4aac-97f1-468a2668164e): COMMIT;
[2016-10-21 09:16:38.076] [INFO] console - [ 70, 208, {}, [ '18' ] ]
[2016-10-21 09:16:38.079] [INFO] console - [ 16,
  650187053727744,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '18' ] ]
[2016-10-21 09:16:38.097] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 18 }
[2016-10-21 09:16:38.100] [INFO] console - Executing (be1edc64-b6e8-4501-833f-ad30ad914f0a): START TRANSACTION;
[2016-10-21 09:16:38.106] [INFO] console - Executing (be1edc64-b6e8-4501-833f-ad30ad914f0a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.112] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 18);
[2016-10-21 09:16:38.128] [INFO] console - Executing (be1edc64-b6e8-4501-833f-ad30ad914f0a): COMMIT;
[2016-10-21 09:16:38.133] [INFO] console - [ 70,
  209,
  {},
  [ { id: '18',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:16:38.154] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:38.166] [INFO] console - Executing (407c4558-7393-4cfd-b807-a24b9d0a58f0): START TRANSACTION;
[2016-10-21 09:16:38.169] [INFO] console - Executing (407c4558-7393-4cfd-b807-a24b9d0a58f0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.195] [INFO] console - Executing (407c4558-7393-4cfd-b807-a24b9d0a58f0): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477023398144','2016-10-21 04:16:38.177 +00:00','2016-10-21 04:16:38.177 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:38.199] [INFO] console - Executing (407c4558-7393-4cfd-b807-a24b9d0a58f0): COMMIT;
[2016-10-21 09:16:38.201] [INFO] console - [ 70, 210, {}, [ '19' ] ]
[2016-10-21 09:16:38.204] [INFO] console - [ 16,
  995149993738240,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '19' ] ]
[2016-10-21 09:16:38.218] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:16:38.226] [INFO] console - Executing (27a80581-a001-40b9-81bd-8b81f6555e52): START TRANSACTION;
[2016-10-21 09:16:38.231] [INFO] console - Executing (27a80581-a001-40b9-81bd-8b81f6555e52): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.237] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:38.243] [INFO] console - Executing (27a80581-a001-40b9-81bd-8b81f6555e52): COMMIT;
[2016-10-21 09:16:38.245] [INFO] console - [ 70,
  211,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023080594',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:11:26 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:16:38.276] [INFO] console - Executing (1aebdaf3-3b6f-4444-9e63-878b543fff86): START TRANSACTION;
[2016-10-21 09:16:38.282] [INFO] console - Executing (1aebdaf3-3b6f-4444-9e63-878b543fff86): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.287] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:38.297] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477023339606',"updated_at"='2016-10-21 04:16:38.291 +00:00' WHERE "id" = '2'
[2016-10-21 09:16:38.300] [INFO] console - Executing (1aebdaf3-3b6f-4444-9e63-878b543fff86): COMMIT;
[2016-10-21 09:16:38.301] [INFO] console - [ 16,
  5399704969936896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 09:16:38.307] [INFO] console - [ 70, 212, {}, [ undefined ] ]
[2016-10-21 09:16:38.314] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:16:38.322] [INFO] console - Executing (3bdd72e1-c072-4dad-8e15-9936b2aa734f): START TRANSACTION;
[2016-10-21 09:16:38.323] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:16:38.326] [INFO] console - Executing (e347a8af-4258-4774-a9de-0bf5b6cd2f06): START TRANSACTION;
[2016-10-21 09:16:38.328] [INFO] console - Executing (3bdd72e1-c072-4dad-8e15-9936b2aa734f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.331] [INFO] console - Executing (e347a8af-4258-4774-a9de-0bf5b6cd2f06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.338] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:38.354] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:38.360] [INFO] console - Executing (3bdd72e1-c072-4dad-8e15-9936b2aa734f): COMMIT;
[2016-10-21 09:16:38.364] [INFO] console - Executing (e347a8af-4258-4774-a9de-0bf5b6cd2f06): COMMIT;
[2016-10-21 09:16:38.368] [INFO] console - [ 70,
  213,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023339606',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:16:38.376] [INFO] console - [ 70,
  214,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023339606',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:16:38.465] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:16:38.468] [INFO] console - Executing (79319b8a-af12-4b5a-9665-d4dc3fdbf165): START TRANSACTION;
[2016-10-21 09:16:38.470] [INFO] console - Executing (79319b8a-af12-4b5a-9665-d4dc3fdbf165): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.479] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:16:38.484] [INFO] console - Executing (79319b8a-af12-4b5a-9665-d4dc3fdbf165): COMMIT;
[2016-10-21 09:16:38.486] [INFO] console - [ 70,
  216,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:16:38.580] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:38.585] [INFO] console - Executing (51362b3b-8810-4e96-a07b-f4e655e88a33): START TRANSACTION;
[2016-10-21 09:16:38.587] [INFO] console - Executing (51362b3b-8810-4e96-a07b-f4e655e88a33): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.594] [INFO] console - Executing (51362b3b-8810-4e96-a07b-f4e655e88a33): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 04:16:38.589 +00:00','2016-10-21 04:16:38.589 +00:00',2,3) RETURNING *;
[2016-10-21 09:16:38.599] [INFO] console - Executing (51362b3b-8810-4e96-a07b-f4e655e88a33): COMMIT;
[2016-10-21 09:16:38.601] [INFO] console - [ 70, 217, {}, [ '20' ] ]
[2016-10-21 09:16:38.604] [INFO] console - [ 16,
  5602967113695232,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '20' ] ]
[2016-10-21 09:16:38.629] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 09:16:38.633] [INFO] console - Executing (d4368f51-9a94-44a8-a6ba-a909b820764c): START TRANSACTION;
[2016-10-21 09:16:38.635] [INFO] console - Executing (d4368f51-9a94-44a8-a6ba-a909b820764c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.641] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 09:16:38.653] [INFO] console - Executing (d4368f51-9a94-44a8-a6ba-a909b820764c): COMMIT;
[2016-10-21 09:16:38.655] [INFO] console - [ 70,
  218,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:16:38.752] [INFO] console - [ 70, 220, {}, [ undefined ] ]
[2016-10-21 09:16:38.754] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:16:38.763] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 09:16:38.766] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:16:38.769] [INFO] console - Executing (28cf7923-3edf-4beb-97be-5694328b410d): START TRANSACTION;
[2016-10-21 09:16:38.771] [INFO] console - Executing (28cf7923-3edf-4beb-97be-5694328b410d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.781] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:38.787] [INFO] console - Executing (28cf7923-3edf-4beb-97be-5694328b410d): COMMIT;
[2016-10-21 09:16:38.789] [INFO] console - [ 70,
  221,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023339606',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:16:38.809] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:38.813] [INFO] console - Executing (a1166481-793a-448f-9363-4766bc23d934): START TRANSACTION;
[2016-10-21 09:16:38.816] [INFO] console - Executing (a1166481-793a-448f-9363-4766bc23d934): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.825] [INFO] console - Executing (a1166481-793a-448f-9363-4766bc23d934): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 04:16:38.818 +00:00','2016-10-21 04:16:38.818 +00:00',2,2) RETURNING *;
[2016-10-21 09:16:38.830] [INFO] console - Executing (a1166481-793a-448f-9363-4766bc23d934): COMMIT;
[2016-10-21 09:16:38.833] [INFO] console - [ 70, 222, {}, [ '17' ] ]
[2016-10-21 09:16:38.855] [INFO] console - Executing (4adae2ee-de38-4a3c-927b-04c4284835b8): START TRANSACTION;
[2016-10-21 09:16:38.857] [INFO] console - Executing (4adae2ee-de38-4a3c-927b-04c4284835b8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.871] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 17);
[2016-10-21 09:16:38.878] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:16:38.873 +00:00',"updated_at"='2016-10-21 04:16:38.874 +00:00' WHERE "id" = '17'
[2016-10-21 09:16:38.883] [INFO] console - Executing (4adae2ee-de38-4a3c-927b-04c4284835b8): COMMIT;
[2016-10-21 09:16:38.887] [INFO] console - [ 70, 223, {}, [ undefined ] ]
[2016-10-21 09:16:38.890] [INFO] console - [ 16, 4145022937071616, {}, 'ru.kopa.model.Kopa.id17.change' ]
[2016-10-21 09:16:38.893] [INFO] console - [ 16,
  1930905767641088,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 17 ] ]
[2016-10-21 09:16:38.916] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 17 }
[2016-10-21 09:16:38.920] [INFO] console - Executing (ca2e54a9-d4a4-4bc6-b8b7-05cfa8ac16e6): START TRANSACTION;
[2016-10-21 09:16:38.922] [INFO] console - Executing (ca2e54a9-d4a4-4bc6-b8b7-05cfa8ac16e6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:38.935] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 17);
[2016-10-21 09:16:38.946] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:38.949] [INFO] console - Executing (ca2e54a9-d4a4-4bc6-b8b7-05cfa8ac16e6): COMMIT;
[2016-10-21 09:16:38.960] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): START TRANSACTION;
[2016-10-21 09:16:38.963] [INFO] console - [ 70,
  224,
  {},
  [ { id: '17',
      question: 'temp',
      invited: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:16:38.995] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:39.006] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:16:39.010] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:16:39.015] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 04:16:38.999 +00:00','2016-10-21 04:16:38.999 +00:00',2) RETURNING *;
[2016-10-21 09:16:39.022] [INFO] console - Executing (52119e29-e9a0-47b3-b849-cc547cf2ca11): COMMIT;
[2016-10-21 09:16:39.026] [INFO] console - [ 70, 225, {}, [ '17' ] ]
[2016-10-21 09:16:39.038] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:16:39.047] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:39.062] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:39.063] [INFO] console - [ 16,
  295358246682624,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:16:39.076] [INFO] console - [ 16,
  8921941515698176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 09:16:39.080] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): START TRANSACTION;
[2016-10-21 09:16:39.083] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:39.097] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 17);
[2016-10-21 09:16:39.103] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/17/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:16:39.113] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/17/','2016-10-21 04:16:39.087 +00:00','2016-10-21 04:16:39.087 +00:00',17) RETURNING *;
[2016-10-21 09:16:39.116] [INFO] console - Executing (26b52724-0362-4e85-a930-73c3ab4af250): COMMIT;
[2016-10-21 09:16:39.120] [INFO] console - [ 70, 226, {}, [ '18' ] ]
[2016-10-21 09:16:39.127] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/17/' like z.path||z.id||'/%'
[2016-10-21 09:16:39.134] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '17')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:39.137] [INFO] console - [ 16,
  936069711265792,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id17.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 09:16:39.181] [INFO] console - [ 16,
  2339787820236800,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:16:39.191] [INFO] console - [ 16,
  3648087222386688,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 09:16:39.212] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:16:39.217] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): START TRANSACTION;
[2016-10-21 09:16:39.219] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:39.240] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:16:39.221 +00:00','2016-10-21 04:16:39.221 +00:00',18,NULL) RETURNING *;
[2016-10-21 09:16:39.250] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:16:39.257] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '18');
[2016-10-21 09:16:39.263] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/17/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 18
                                    )
[2016-10-21 09:16:39.267] [INFO] console - Executing (ab421031-654e-4a9d-8f26-4b34909085cc): COMMIT;
[2016-10-21 09:16:39.280] [INFO] console - [ 70, 227, {}, [ '23' ] ]
[2016-10-21 09:16:39.290] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '18');
[2016-10-21 09:16:39.298] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/17/' like z.path||z.id||'/%'
[2016-10-21 09:16:39.305] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '17')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:39.308] [INFO] console - [ 16,
  3153266693111808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id18.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:16:39.314] [INFO] console - [ 16,
  1572020064092160,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id17.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:16:39.322] [INFO] console - [ 16,
  144142768275456,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:16:39.333] [INFO] console - [ 16,
  8477147100348416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 23 } ]
[2016-10-21 09:16:39.340] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 09:16:39.342] [INFO] console - Executing (ce530349-444f-49ae-a540-977813dad620): START TRANSACTION;
[2016-10-21 09:16:39.349] [INFO] console - Executing (ce530349-444f-49ae-a540-977813dad620): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:39.355] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:16:39.360] [INFO] console - Executing (ce530349-444f-49ae-a540-977813dad620): COMMIT;
[2016-10-21 09:16:39.361] [INFO] console - [ 70,
  228,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:16:39.385] [INFO] console - Executing (32f6d2e4-feee-4e96-bd72-e94472fa51e5): START TRANSACTION;
[2016-10-21 09:16:39.387] [INFO] console - Executing (32f6d2e4-feee-4e96-bd72-e94472fa51e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:16:39.394] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 17);
[2016-10-21 09:16:39.403] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:16:39.407] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:16:39.413] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:39.418] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 17
                                    )
[2016-10-21 09:16:39.426] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 04:16:39.421 +00:00' WHERE "id" = '17'
[2016-10-21 09:16:39.430] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '17'
                                    or path like '/1/2/17/'||'%'
[2016-10-21 09:16:39.434] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 17
                                    )
[2016-10-21 09:16:39.438] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 09:16:39.445] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:16:39.449] [INFO] console - Executing (32f6d2e4-feee-4e96-bd72-e94472fa51e5): COMMIT;
[2016-10-21 09:16:39.452] [INFO] console - [ 70, 229, {}, [ undefined ] ]
[2016-10-21 09:16:39.457] [INFO] console - [ 16,
  8836603533328384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:16:39.471] [INFO] console - [ 16,
  2402609786781696,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 09:16:39.479] [INFO] console - [ 16,
  2690925092405248,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 09:16:39.484] [INFO] console - [ 16,
  2127480928337920,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 23 } ]
[2016-10-21 09:18:08.696] [INFO] console - [ 70, 231, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:18:08.707] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:18:08.709] [INFO] console - [ 70, 232, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:18:08.771] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:18:08.776] [INFO] console - [ 70, 233, {}, [ 'КОПА' ] ]
[2016-10-21 09:18:08.785] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:18:08.787] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 09:18:08.795] [INFO] console - [ 8,
  68,
  234,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 09:18:09.008] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:09.020] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:18:09.026] [INFO] console - [ 8,
  68,
  236,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:18:09.126] [INFO] console - [ 70, 238, {}, [ undefined ] ]
[2016-10-21 09:18:09.135] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:18:09.143] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:18:09.178] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:18:09.182] [INFO] console - Executing (a0099818-261b-4709-914b-368310df69e2): START TRANSACTION;
[2016-10-21 09:18:09.184] [INFO] console - Executing (a0099818-261b-4709-914b-368310df69e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:09.232] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:18:09.250] [INFO] console - Executing (a0099818-261b-4709-914b-368310df69e2): COMMIT;
[2016-10-21 09:18:09.252] [INFO] console - [ 70,
  239,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:09.273] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:18:09.275] [INFO] console - Executing (c1bfd6f5-8033-4842-a518-94c5df2db614): START TRANSACTION;
[2016-10-21 09:18:09.277] [INFO] console - Executing (c1bfd6f5-8033-4842-a518-94c5df2db614): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:09.283] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:09.294] [INFO] console - Executing (c1bfd6f5-8033-4842-a518-94c5df2db614): COMMIT;
[2016-10-21 09:18:09.295] [INFO] console - [ 70,
  240,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023339606',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:09.322] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:09.326] [INFO] console - Executing (16f1c5ce-3c42-451f-97e8-99f3d32182c9): START TRANSACTION;
[2016-10-21 09:18:09.330] [INFO] console - Executing (16f1c5ce-3c42-451f-97e8-99f3d32182c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:09.335] [INFO] console - Executing (16f1c5ce-3c42-451f-97e8-99f3d32182c9): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:18:09.331 +00:00','2016-10-21 04:18:09.331 +00:00',2,2) RETURNING *;
[2016-10-21 09:18:09.346] [INFO] console - Executing (16f1c5ce-3c42-451f-97e8-99f3d32182c9): COMMIT;
[2016-10-21 09:18:09.348] [INFO] console - [ 70, 241, {}, [ '18' ] ]
[2016-10-21 09:18:09.363] [INFO] console - Executing (8c954fa6-8108-42cf-b0bd-f3b34520038f): START TRANSACTION;
[2016-10-21 09:18:09.364] [INFO] console - Executing (8c954fa6-8108-42cf-b0bd-f3b34520038f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:09.367] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 18);
[2016-10-21 09:18:09.390] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:18:09.370 +00:00',"updated_at"='2016-10-21 04:18:09.370 +00:00' WHERE "id" = '18'
[2016-10-21 09:18:09.400] [INFO] console - Executing (8c954fa6-8108-42cf-b0bd-f3b34520038f): COMMIT;
[2016-10-21 09:18:09.402] [INFO] console - [ 70, 242, {}, [ undefined ] ]
[2016-10-21 09:18:09.404] [INFO] console - [ 16, 6406637503905792, {}, 'ru.kopa.model.Kopa.id18.change' ]
[2016-10-21 09:18:09.406] [INFO] console - [ 16,
  719889123770368,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 18 ] ]
[2016-10-21 09:18:09.416] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 18 }
[2016-10-21 09:18:09.423] [INFO] console - Executing (8e09a317-d640-464d-8b88-cdc916a530e4): START TRANSACTION;
[2016-10-21 09:18:09.425] [INFO] console - Executing (8e09a317-d640-464d-8b88-cdc916a530e4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:09.438] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 18);
[2016-10-21 09:18:09.445] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:18:09.450] [INFO] console - Executing (8e09a317-d640-464d-8b88-cdc916a530e4): COMMIT;
[2016-10-21 09:18:09.458] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:18:09.459] [INFO] console - [ 70,
  243,
  {},
  [ { id: '18',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:18:09 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:18:09 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:09 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:09.468] [INFO] console - [ 70, 244, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:18:09.503] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:18:09.516] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:18:09.520] [INFO] console - [ 70, 245, {}, [ [ [Object] ] ] ]
[2016-10-21 09:18:09.541] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:18:09.548] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:18:09.552] [INFO] console - [ 70, 246, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:18:09.583] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:18:09.590] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:18:09.593] [INFO] console - [ 70, 247, {}, [ [ [Object] ] ] ]
[2016-10-21 09:18:10.148] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:18:10.151] [INFO] console - Executing (e24e44f7-6727-41a1-9708-23f0d14263e1): START TRANSACTION;
[2016-10-21 09:18:10.156] [INFO] console - Executing (e24e44f7-6727-41a1-9708-23f0d14263e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.167] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:18:10.177] [INFO] console - Executing (e24e44f7-6727-41a1-9708-23f0d14263e1): COMMIT;
[2016-10-21 09:18:10.181] [INFO] console - [ 70,
  248,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:18:10.214] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:10.217] [INFO] console - Executing (9962f585-2091-4c0b-a45c-b41c7ea9d697): START TRANSACTION;
[2016-10-21 09:18:10.219] [INFO] console - Executing (9962f585-2091-4c0b-a45c-b41c7ea9d697): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.228] [INFO] console - Executing (9962f585-2091-4c0b-a45c-b41c7ea9d697): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477023490201 temp','2016-10-21 04:18:10.221 +00:00','2016-10-21 04:18:10.221 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:10.232] [INFO] console - Executing (9962f585-2091-4c0b-a45c-b41c7ea9d697): COMMIT;
[2016-10-21 09:18:10.234] [INFO] console - [ 70, 249, {}, [ '21' ] ]
[2016-10-21 09:18:10.238] [INFO] console - [ 16,
  1698449821007872,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '21' ] ]
[2016-10-21 09:18:10.274] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:10.283] [INFO] console - Executing (53a206c1-262d-4ebd-b36f-33999fad03f9): START TRANSACTION;
[2016-10-21 09:18:10.285] [INFO] console - Executing (53a206c1-262d-4ebd-b36f-33999fad03f9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.293] [INFO] console - Executing (53a206c1-262d-4ebd-b36f-33999fad03f9): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477023490263temp',0,0,'2016-10-21 04:18:10.287 +00:00','2016-10-21 04:18:10.287 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:10.298] [INFO] console - Executing (53a206c1-262d-4ebd-b36f-33999fad03f9): COMMIT;
[2016-10-21 09:18:10.300] [INFO] console - [ 70, 250, {}, [ '17' ] ]
[2016-10-21 09:18:10.303] [INFO] console - [ 16,
  351809369538560,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '17' ] ]
[2016-10-21 09:18:10.428] [INFO] console - [ 70, 252, {}, [ undefined ] ]
[2016-10-21 09:18:10.437] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:18:10.439] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:18:10.442] [INFO] console - Executing (52b7c0be-b9c6-4aa1-8e2a-4e974ded4e76): START TRANSACTION;
[2016-10-21 09:18:10.445] [INFO] console - Executing (52b7c0be-b9c6-4aa1-8e2a-4e974ded4e76): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.454] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:18:10.467] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:18:10.488] [INFO] console - Executing (52b7c0be-b9c6-4aa1-8e2a-4e974ded4e76): COMMIT;
[2016-10-21 09:18:10.491] [INFO] console - [ 70,
  253,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:18:10.526] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:18:10.531] [INFO] console - [ 70, 254, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:18:10.567] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:10.574] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): START TRANSACTION;
[2016-10-21 09:18:10.576] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.586] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:18:10.578 +00:00','2016-10-21 04:18:10.578 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:18:10.589] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:10.599] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:10.603] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:18:10.608] [INFO] console - Executing (e67d6bd9-ac7f-49ed-b1fc-7b8bc10446a8): COMMIT;
[2016-10-21 09:18:10.612] [INFO] console - [ 70, 255, {}, [ '24' ] ]
[2016-10-21 09:18:10.621] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:10.626] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:18:10.637] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:10.641] [INFO] console - Executing (103e8600-ece0-4dfd-a567-b200edfaa7d2): START TRANSACTION;
[2016-10-21 09:18:10.642] [INFO] console - [ 16,
  2088253886824448,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:18:10.645] [INFO] console - Executing (103e8600-ece0-4dfd-a567-b200edfaa7d2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.650] [INFO] console - [ 16,
  6723269503746048,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 24 } ]
[2016-10-21 09:18:10.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 09:18:10.665] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:18:10.671] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:10.679] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:10.683] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:10.706] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:18:10.685 +00:00' WHERE "id" = '24'
[2016-10-21 09:18:10.711] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '24'
                                    or path like '/24/'||'%'
[2016-10-21 09:18:10.715] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:18:10.723] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:18:10.727] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:10.733] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/24/'||'%'
[2016-10-21 09:18:10.735] [INFO] console - Executing (103e8600-ece0-4dfd-a567-b200edfaa7d2): COMMIT;
[2016-10-21 09:18:10.736] [INFO] console - [ 70, 256, {}, [ undefined ] ]
[2016-10-21 09:18:10.738] [INFO] console - [ 16,
  5886190481833984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/24/',
       id: '24',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:18:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:18:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:18:10.761] [INFO] console - [ 16,
  8347636878802944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:18:10.816] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:10.827] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): START TRANSACTION;
[2016-10-21 09:18:10.828] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:10.837] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:18:10.830 +00:00','2016-10-21 04:18:10.830 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:18:10.842] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:10.850] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:10.858] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:18:10.866] [INFO] console - Executing (cdea9406-a4c8-4b1d-a5c7-17dbc793ce99): COMMIT;
[2016-10-21 09:18:10.867] [INFO] console - [ 70, 257, {}, [ '25' ] ]
[2016-10-21 09:18:10.875] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:10.878] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:18:10.882] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:10.889] [INFO] console - [ 16,
  3032373683814400,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:18:10.900] [INFO] console - [ 16,
  3133942930604032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 25 } ]
[2016-10-21 09:18:11.209] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:18:11.213] [INFO] console - Executing (b6c64435-62d7-4984-8524-acbbbe9c59f4): START TRANSACTION;
[2016-10-21 09:18:11.215] [INFO] console - Executing (b6c64435-62d7-4984-8524-acbbbe9c59f4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.239] [INFO] console - Executing (beab743d-703e-4c9f-9de6-cade469fcb22): START TRANSACTION;
[2016-10-21 09:18:11.242] [INFO] console - Executing (beab743d-703e-4c9f-9de6-cade469fcb22): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.284] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:18:11.288] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 25);
[2016-10-21 09:18:11.296] [INFO] console - Executing (b6c64435-62d7-4984-8524-acbbbe9c59f4): COMMIT;
[2016-10-21 09:18:11.297] [INFO] console - [ 70,
  258,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:18:11.311] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 09:18:11.321] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.324] [INFO] console - Executing (423fb4ad-2619-4887-b180-743713ae97b3): START TRANSACTION;
[2016-10-21 09:18:11.327] [INFO] console - Executing (423fb4ad-2619-4887-b180-743713ae97b3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.333] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.338] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 09:18:11.343] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:11.349] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:18:11.359] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='24',"updated_at"='2016-10-21 04:18:11.350 +00:00' WHERE "id" = '25'
[2016-10-21 09:18:11.368] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.374] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/24/')
                                where
                                    id = '25'
                                    or path like '/25/'||'%'
[2016-10-21 09:18:11.379] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.382] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/24/' like path||id||'/%'
[2016-10-21 09:18:11.387] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:18:11.391] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/24/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.397] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('24', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.409] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:18:11.395 +00:00' WHERE "id" = '24'
[2016-10-21 09:18:11.415] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/24/25/'||'%'
[2016-10-21 09:18:11.417] [INFO] console - Executing (beab743d-703e-4c9f-9de6-cade469fcb22): COMMIT;
[2016-10-21 09:18:11.419] [INFO] console - [ 70, 259, {}, [ undefined ] ]
[2016-10-21 09:18:11.425] [INFO] console - [ 16,
  1399783501594624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/24/25/',
       id: '25',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/24/',
       note: null,
       created_at: Fri Oct 21 2016 09:18:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:18:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '24' } } ]
[2016-10-21 09:18:11.430] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '24'
                                    or path like '/2/24/'||'%'
[2016-10-21 09:18:11.439] [INFO] console - [ 16,
  1453107942785024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:18:11.447] [INFO] console - [ 16,
  4122042102185984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:18:11.469] [INFO] console - Executing (266211a5-6982-4095-9ead-834a869c4213): START TRANSACTION;
[2016-10-21 09:18:11.471] [INFO] console - Executing (266211a5-6982-4095-9ead-834a869c4213): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.473] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:18:11.479] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 09:18:11.483] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.489] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.497] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.503] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.508] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/24/'||'%'
[2016-10-21 09:18:11.512] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:18:11.519] [INFO] console - Executing (423fb4ad-2619-4887-b180-743713ae97b3): COMMIT;
[2016-10-21 09:18:11.526] [INFO] console - [ 70, 260, {}, [ undefined ] ]
[2016-10-21 09:18:11.540] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:18:11.525 +00:00' WHERE "id" = '24'
[2016-10-21 09:18:11.546] [INFO] console - [ 16,
  2380630010626048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 24 } ]
[2016-10-21 09:18:11.552] [INFO] console - [ 16,
  5101228056903680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/24/',
       id: '24',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:18:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:18:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:18:11.565] [INFO] console - [ 16,
  474586774765568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:18:11.589] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '24'
                                    or path like '/4/24/'||'%'
[2016-10-21 09:18:11.596] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:11.602] [INFO] console - [ 16,
  98434665152512,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:18:11.605] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.613] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.615] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/24/'||'%'
[2016-10-21 09:18:11.620] [INFO] console - [ 16,
  1538935715004416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id25.starshinaChange',
  [],
  {} ]
[2016-10-21 09:18:11.623] [INFO] console - Executing (266211a5-6982-4095-9ead-834a869c4213): COMMIT;
[2016-10-21 09:18:11.626] [INFO] console - [ 70, 261, {}, [ undefined ] ]
[2016-10-21 09:18:11.631] [INFO] console - [ 16,
  8333780821475328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 24 } ]
[2016-10-21 09:18:11.640] [INFO] console - [ 16,
  1116782188298240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: -1 } ]
[2016-10-21 09:18:11.649] [INFO] console - [ 16,
  4313025303543808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id25.starshinaChange',
  [],
  {} ]
[2016-10-21 09:18:11.676] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:11.681] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): START TRANSACTION;
[2016-10-21 09:18:11.683] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.701] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:18:11.692 +00:00','2016-10-21 04:18:11.692 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:18:11.705] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:11.711] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:11.715] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:18:11.719] [INFO] console - Executing (bfae9a8b-4679-4654-9d4c-4f53d8e9a429): COMMIT;
[2016-10-21 09:18:11.721] [INFO] console - [ 70, 262, {}, [ '26' ] ]
[2016-10-21 09:18:11.735] [INFO] console - Executing (4ed9844e-189a-434c-83a8-0bc9524c1aa3): START TRANSACTION;
[2016-10-21 09:18:11.739] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:11.742] [INFO] console - Executing (4ed9844e-189a-434c-83a8-0bc9524c1aa3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.745] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:18:11.753] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 09:18:11.758] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:11.763] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:18:11.764] [INFO] console - [ 16,
  8923720651374592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 09:18:11.772] [INFO] console - [ 16,
  5692638854381568,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 09:18:11.776] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.782] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.784] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:11.791] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:18:11.787 +00:00' WHERE "id" = '26'
[2016-10-21 09:18:11.796] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '26'
                                    or path like '/26/'||'%'
[2016-10-21 09:18:11.800] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:18:11.803] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.808] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.812] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/26/'||'%'
[2016-10-21 09:18:11.814] [INFO] console - Executing (4ed9844e-189a-434c-83a8-0bc9524c1aa3): COMMIT;
[2016-10-21 09:18:11.816] [INFO] console - [ 70, 263, {}, [ undefined ] ]
[2016-10-21 09:18:11.820] [INFO] console - [ 16,
  5447669025603584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/26/',
       id: '26',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:18:11 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:18:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:18:11.826] [INFO] console - Executing (2ade113e-deae-4462-9f8b-a65e939ec4c5): START TRANSACTION;
[2016-10-21 09:18:11.828] [INFO] console - Executing (2ade113e-deae-4462-9f8b-a65e939ec4c5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.830] [INFO] console - [ 16,
  5325367000694784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:18:11.835] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 09:18:11.842] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.850] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.856] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:18:11.869] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:18:11.858 +00:00' WHERE "id" = '26'
[2016-10-21 09:18:11.873] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '26'
                                    or path like '/2/26/'||'%'
[2016-10-21 09:18:11.877] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:11.879] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:11.884] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:11.887] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/26/'||'%'
[2016-10-21 09:18:11.891] [INFO] console - Executing (2ade113e-deae-4462-9f8b-a65e939ec4c5): COMMIT;
[2016-10-21 09:18:11.892] [INFO] console - [ 70, 264, {}, [ undefined ] ]
[2016-10-21 09:18:11.897] [INFO] console - [ 16,
  6911256552275968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 26 } ]
[2016-10-21 09:18:11.903] [INFO] console - [ 16,
  2509206378774528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:18:11.911] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:18:11.914] [INFO] console - Executing (02ad6555-edaa-446a-b282-e94d7cf72a66): START TRANSACTION;
[2016-10-21 09:18:11.915] [INFO] console - Executing (02ad6555-edaa-446a-b282-e94d7cf72a66): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.925] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:18:11.929] [INFO] console - Executing (02ad6555-edaa-446a-b282-e94d7cf72a66): COMMIT;
[2016-10-21 09:18:11.931] [INFO] console - [ 70,
  265,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:11.953] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:11.957] [INFO] console - Executing (5fb14974-414c-4302-84d1-8be1a09c84f6): START TRANSACTION;
[2016-10-21 09:18:11.958] [INFO] console - Executing (5fb14974-414c-4302-84d1-8be1a09c84f6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.968] [INFO] console - Executing (5fb14974-414c-4302-84d1-8be1a09c84f6): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:18:11 GMT+0500 (YEKT)',0,0,'2016-10-21 04:18:11.960 +00:00','2016-10-21 04:18:11.960 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:11.972] [INFO] console - Executing (5fb14974-414c-4302-84d1-8be1a09c84f6): COMMIT;
[2016-10-21 09:18:11.974] [INFO] console - [ 70, 266, {}, [ '18' ] ]
[2016-10-21 09:18:11.978] [INFO] console - [ 16,
  2722247731052544,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '18' ] ]
[2016-10-21 09:18:11.990] [INFO] console - Executing (de65f8fb-e00d-470b-8436-8ab313a1f4e0): START TRANSACTION;
[2016-10-21 09:18:11.992] [INFO] console - Executing (de65f8fb-e00d-470b-8436-8ab313a1f4e0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:11.996] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:12.001] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 18);
[2016-10-21 09:18:12.006] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:18:12.011] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.017] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.021] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:12.025] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:12.030] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '18' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:18:12.036] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:18:12.033 +00:00','2016-10-21 04:18:12.033 +00:00','18','2') RETURNING *;
[2016-10-21 09:18:12.041] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 18, 1, k.id, 24, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:18:12.049] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 18 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 18 and value=-1) "protiv"
[2016-10-21 09:18:12.055] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:18:12.052 +00:00' WHERE "id" = '18'
[2016-10-21 09:18:12.058] [INFO] console - Executing (de65f8fb-e00d-470b-8436-8ab313a1f4e0): COMMIT;
[2016-10-21 09:18:12.060] [INFO] console - [ 70, 267, {}, [ undefined ] ]
[2016-10-21 09:18:12.062] [INFO] console - [ 16,
  4608136272936960,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id18.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '24',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:18:12.138] [INFO] console - Executing (169d894a-34bf-45d1-b379-855589632fe5): START TRANSACTION;
[2016-10-21 09:18:12.139] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 24 }
[2016-10-21 09:18:12.142] [INFO] console - Executing (4d55b52b-09d8-4546-9276-a3ccfc55c4d1): START TRANSACTION;
[2016-10-21 09:18:12.143] [INFO] console - Executing (169d894a-34bf-45d1-b379-855589632fe5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.144] [INFO] console - Executing (4d55b52b-09d8-4546-9276-a3ccfc55c4d1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.153] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:12.161] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 24);
[2016-10-21 09:18:12.168] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 18);
[2016-10-21 09:18:12.170] [INFO] console - Executing (4d55b52b-09d8-4546-9276-a3ccfc55c4d1): COMMIT;
[2016-10-21 09:18:12.175] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:18:12.176] [INFO] console - [ 70,
  269,
  {},
  [ { id: '24',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:18:12 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:12 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '18',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:18:12.187] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.192] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.195] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:12.200] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:12.206] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '18' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:18:12.209] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 18
                                and (
                                    id= 24
                                    or parent_id = 24
                                )
[2016-10-21 09:18:12.214] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 18 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 18 and value=-1) "protiv"
[2016-10-21 09:18:12.221] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:18:12.217 +00:00' WHERE "id" = '18'
[2016-10-21 09:18:12.226] [INFO] console - Executing (169d894a-34bf-45d1-b379-855589632fe5): COMMIT;
[2016-10-21 09:18:12.228] [INFO] console - [ 70, 268, {}, [ undefined ] ]
[2016-10-21 09:18:12.231] [INFO] console - [ 16,
  144371301220352,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id18.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '24',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:18:12.356] [INFO] console - Executing (11dff5b8-4c3e-4c84-bd99-a5a535711d5e): START TRANSACTION;
[2016-10-21 09:18:12.357] [INFO] console - Executing (11dff5b8-4c3e-4c84-bd99-a5a535711d5e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.364] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:12.377] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 18);
[2016-10-21 09:18:12.386] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:18:12.398] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.406] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:18:12.409] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:18:12.415] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:18:12.423] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '18' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:18:12.450] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 04:18:12.434 +00:00','2016-10-21 04:18:12.434 +00:00','18','2') RETURNING *;
[2016-10-21 09:18:12.463] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 18, -1, k.id, 27, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:18:12.478] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 18 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 18 and value=-1) "protiv"
[2016-10-21 09:18:12.486] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=3,"updated_at"='2016-10-21 04:18:12.482 +00:00' WHERE "id" = '18'
[2016-10-21 09:18:12.495] [INFO] console - Executing (11dff5b8-4c3e-4c84-bd99-a5a535711d5e): COMMIT;
[2016-10-21 09:18:12.497] [INFO] console - [ 70, 270, {}, [ undefined ] ]
[2016-10-21 09:18:12.499] [INFO] console - [ 16,
  3242787929587712,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id18.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 3,
    GOLOS: '27',
    action: 'add',
    value: -1 } ]
[2016-10-21 09:18:12.545] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:18:12.550] [INFO] console - Executing (43965445-164e-4ba7-999a-610c1560acd3): START TRANSACTION;
[2016-10-21 09:18:12.552] [INFO] console - Executing (43965445-164e-4ba7-999a-610c1560acd3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.560] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:18:12.567] [INFO] console - Executing (43965445-164e-4ba7-999a-610c1560acd3): COMMIT;
[2016-10-21 09:18:12.569] [INFO] console - [ 70,
  272,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:12.625] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:12.631] [INFO] console - Executing (a5dff8b9-167d-4bb6-b9fb-8f5ed579b5eb): START TRANSACTION;
[2016-10-21 09:18:12.633] [INFO] console - Executing (a5dff8b9-167d-4bb6-b9fb-8f5ed579b5eb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.641] [INFO] console - Executing (a5dff8b9-167d-4bb6-b9fb-8f5ed579b5eb): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477023487595',0,0,'2016-10-21 04:18:12.636 +00:00','2016-10-21 04:18:12.636 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:12.654] [INFO] console - Executing (a5dff8b9-167d-4bb6-b9fb-8f5ed579b5eb): COMMIT;
[2016-10-21 09:18:12.660] [INFO] console - [ 70, 273, {}, [ '19' ] ]
[2016-10-21 09:18:12.663] [INFO] console - [ 16,
  4661738614030336,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '19' ] ]
[2016-10-21 09:18:12.697] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 09:18:12.700] [INFO] console - Executing (e4591436-2a2d-4271-8161-e186205b22d0): START TRANSACTION;
[2016-10-21 09:18:12.701] [INFO] console - Executing (e4591436-2a2d-4271-8161-e186205b22d0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.710] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 09:18:12.716] [INFO] console - Executing (e4591436-2a2d-4271-8161-e186205b22d0): COMMIT;
[2016-10-21 09:18:12.718] [INFO] console - [ 70,
  274,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:18:12.746] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 09:18:12.748] [INFO] console - [ 70, 275, {}, [ [] ] ]
[2016-10-21 09:18:12.932] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:18:12.936] [INFO] console - Executing (701b5b1c-986e-474c-9114-18776fa540af): START TRANSACTION;
[2016-10-21 09:18:12.938] [INFO] console - Executing (701b5b1c-986e-474c-9114-18776fa540af): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.943] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:18:12.950] [INFO] console - Executing (701b5b1c-986e-474c-9114-18776fa540af): COMMIT;
[2016-10-21 09:18:12.952] [INFO] console - [ 70,
  277,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:18:12.976] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 09:18:12.978] [INFO] console - Executing (db2d983d-c015-430f-8bb8-a39ecef2e56b): START TRANSACTION;
[2016-10-21 09:18:12.980] [INFO] console - Executing (db2d983d-c015-430f-8bb8-a39ecef2e56b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:12.990] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 09:18:12.995] [INFO] console - Executing (db2d983d-c015-430f-8bb8-a39ecef2e56b): COMMIT;
[2016-10-21 09:18:12.996] [INFO] console - [ 70,
  278,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:13.017] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.024] [INFO] console - Executing (3f595838-1642-472b-ab54-4b759a688116): START TRANSACTION;
[2016-10-21 09:18:13.025] [INFO] console - Executing (3f595838-1642-472b-ab54-4b759a688116): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.036] [INFO] console - Executing (3f595838-1642-472b-ab54-4b759a688116): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 04:18:13.028 +00:00','2016-10-21 04:18:13.028 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:13.040] [INFO] console - Executing (3f595838-1642-472b-ab54-4b759a688116): COMMIT;
[2016-10-21 09:18:13.042] [INFO] console - [ 70, 279, {}, [ '22' ] ]
[2016-10-21 09:18:13.046] [INFO] console - [ 16,
  7434264062722048,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '22' ] ]
[2016-10-21 09:18:13.064] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 22 }
[2016-10-21 09:18:13.066] [INFO] console - Executing (b0a5bcb6-8c88-4ff0-bc58-7641e6f58f72): START TRANSACTION;
[2016-10-21 09:18:13.067] [INFO] console - Executing (b0a5bcb6-8c88-4ff0-bc58-7641e6f58f72): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.075] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 22);
[2016-10-21 09:18:13.085] [INFO] console - Executing (b0a5bcb6-8c88-4ff0-bc58-7641e6f58f72): COMMIT;
[2016-10-21 09:18:13.087] [INFO] console - [ 70,
  280,
  {},
  [ { id: '22',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:18:13.113] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.119] [INFO] console - Executing (fe264ced-20ad-45b0-9db6-86bc85e3486b): START TRANSACTION;
[2016-10-21 09:18:13.124] [INFO] console - Executing (fe264ced-20ad-45b0-9db6-86bc85e3486b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.130] [INFO] console - Executing (fe264ced-20ad-45b0-9db6-86bc85e3486b): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477023493105','2016-10-21 04:18:13.126 +00:00','2016-10-21 04:18:13.126 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:13.133] [INFO] console - Executing (fe264ced-20ad-45b0-9db6-86bc85e3486b): COMMIT;
[2016-10-21 09:18:13.135] [INFO] console - [ 70, 281, {}, [ '23' ] ]
[2016-10-21 09:18:13.139] [INFO] console - [ 16,
  6774095595175936,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '23' ] ]
[2016-10-21 09:18:13.158] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:18:13.163] [INFO] console - Executing (e7390440-37de-4743-b5ef-d5cd2e55fb2c): START TRANSACTION;
[2016-10-21 09:18:13.164] [INFO] console - Executing (e7390440-37de-4743-b5ef-d5cd2e55fb2c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.171] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.182] [INFO] console - Executing (e7390440-37de-4743-b5ef-d5cd2e55fb2c): COMMIT;
[2016-10-21 09:18:13.183] [INFO] console - [ 70,
  282,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023339606',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:16:38 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:13.245] [INFO] console - Executing (6e9edebd-68a9-4178-83f7-93417ee0d117): START TRANSACTION;
[2016-10-21 09:18:13.247] [INFO] console - Executing (6e9edebd-68a9-4178-83f7-93417ee0d117): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.251] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.261] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477023487638',"updated_at"='2016-10-21 04:18:13.256 +00:00' WHERE "id" = '2'
[2016-10-21 09:18:13.264] [INFO] console - Executing (6e9edebd-68a9-4178-83f7-93417ee0d117): COMMIT;
[2016-10-21 09:18:13.268] [INFO] console - [ 16,
  8321686690594816,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 09:18:13.283] [INFO] console - [ 70, 283, {}, [ undefined ] ]
[2016-10-21 09:18:13.292] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:18:13.294] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:18:13.298] [INFO] console - Executing (1d777931-5585-45ab-85de-9de5f57a3878): START TRANSACTION;
[2016-10-21 09:18:13.298] [INFO] console - Executing (4c1d416e-6f3b-4ff5-8886-4d8e02969a15): START TRANSACTION;
[2016-10-21 09:18:13.300] [INFO] console - Executing (1d777931-5585-45ab-85de-9de5f57a3878): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.301] [INFO] console - Executing (4c1d416e-6f3b-4ff5-8886-4d8e02969a15): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.311] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.312] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.319] [INFO] console - Executing (1d777931-5585-45ab-85de-9de5f57a3878): COMMIT;
[2016-10-21 09:18:13.320] [INFO] console - Executing (4c1d416e-6f3b-4ff5-8886-4d8e02969a15): COMMIT;
[2016-10-21 09:18:13.322] [INFO] console - [ 70,
  284,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023487638',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:13.331] [INFO] console - [ 70,
  285,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023487638',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:13.428] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:18:13.431] [INFO] console - Executing (bd089a3f-1506-4fba-b5cd-91b85a034133): START TRANSACTION;
[2016-10-21 09:18:13.432] [INFO] console - Executing (bd089a3f-1506-4fba-b5cd-91b85a034133): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.439] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:18:13.445] [INFO] console - Executing (bd089a3f-1506-4fba-b5cd-91b85a034133): COMMIT;
[2016-10-21 09:18:13.447] [INFO] console - [ 70,
  287,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:13.504] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.509] [INFO] console - Executing (3f201071-a6cd-41f5-884a-8a42c4b0ee78): START TRANSACTION;
[2016-10-21 09:18:13.511] [INFO] console - Executing (3f201071-a6cd-41f5-884a-8a42c4b0ee78): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.516] [INFO] console - Executing (3f201071-a6cd-41f5-884a-8a42c4b0ee78): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 04:18:13.513 +00:00','2016-10-21 04:18:13.513 +00:00',2,3) RETURNING *;
[2016-10-21 09:18:13.523] [INFO] console - Executing (3f201071-a6cd-41f5-884a-8a42c4b0ee78): COMMIT;
[2016-10-21 09:18:13.527] [INFO] console - [ 70, 288, {}, [ '24' ] ]
[2016-10-21 09:18:13.531] [INFO] console - [ 16,
  4749879349870592,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '24' ] ]
[2016-10-21 09:18:13.546] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 24 }
[2016-10-21 09:18:13.549] [INFO] console - Executing (159d7ea0-5b71-4204-928e-a5f68b081119): START TRANSACTION;
[2016-10-21 09:18:13.551] [INFO] console - Executing (159d7ea0-5b71-4204-928e-a5f68b081119): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.555] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 24);
[2016-10-21 09:18:13.565] [INFO] console - Executing (159d7ea0-5b71-4204-928e-a5f68b081119): COMMIT;
[2016-10-21 09:18:13.571] [INFO] console - [ 70,
  289,
  {},
  [ { id: '24',
      value: 'some Slovo temp',
      note: null,
      created_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:18:13.593] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 09:18:13.595] [INFO] console - Executing (165ac5bb-c48d-49b0-82f9-1dd6224f4738): START TRANSACTION;
[2016-10-21 09:18:13.597] [INFO] console - Executing (165ac5bb-c48d-49b0-82f9-1dd6224f4738): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.609] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 09:18:13.613] [INFO] console - Executing (165ac5bb-c48d-49b0-82f9-1dd6224f4738): COMMIT;
[2016-10-21 09:18:13.615] [INFO] console - [ 70,
  290,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:18:13.689] [INFO] console - [ 70, 292, {}, [ undefined ] ]
[2016-10-21 09:18:13.690] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:18:13.697] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 09:18:13.704] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:18:13.707] [INFO] console - Executing (79b15c7f-badf-4e02-8ee0-6ff0aed7b2d0): START TRANSACTION;
[2016-10-21 09:18:13.708] [INFO] console - Executing (79b15c7f-badf-4e02-8ee0-6ff0aed7b2d0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.717] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.724] [INFO] console - Executing (79b15c7f-badf-4e02-8ee0-6ff0aed7b2d0): COMMIT;
[2016-10-21 09:18:13.726] [INFO] console - [ 70,
  293,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023487638',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:13.748] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.752] [INFO] console - Executing (066cc989-55f4-40f9-801f-cdd6dd78df28): START TRANSACTION;
[2016-10-21 09:18:13.754] [INFO] console - Executing (066cc989-55f4-40f9-801f-cdd6dd78df28): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.761] [INFO] console - Executing (066cc989-55f4-40f9-801f-cdd6dd78df28): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 04:18:13.757 +00:00','2016-10-21 04:18:13.757 +00:00',2,2) RETURNING *;
[2016-10-21 09:18:13.771] [INFO] console - Executing (066cc989-55f4-40f9-801f-cdd6dd78df28): COMMIT;
[2016-10-21 09:18:13.773] [INFO] console - [ 70, 294, {}, [ '19' ] ]
[2016-10-21 09:18:13.788] [INFO] console - Executing (65fbb019-a249-4fca-b68e-e1bd7d7a4f3b): START TRANSACTION;
[2016-10-21 09:18:13.789] [INFO] console - Executing (65fbb019-a249-4fca-b68e-e1bd7d7a4f3b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.793] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 19);
[2016-10-21 09:18:13.801] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:18:13.795 +00:00',"updated_at"='2016-10-21 04:18:13.795 +00:00' WHERE "id" = '19'
[2016-10-21 09:18:13.804] [INFO] console - Executing (65fbb019-a249-4fca-b68e-e1bd7d7a4f3b): COMMIT;
[2016-10-21 09:18:13.807] [INFO] console - [ 70, 295, {}, [ undefined ] ]
[2016-10-21 09:18:13.809] [INFO] console - [ 16, 5755780101832704, {}, 'ru.kopa.model.Kopa.id19.change' ]
[2016-10-21 09:18:13.810] [INFO] console - [ 16,
  1770185826500608,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 19 ] ]
[2016-10-21 09:18:13.820] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 19 }
[2016-10-21 09:18:13.822] [INFO] console - Executing (94c214aa-38eb-40f2-b8bf-9bf842a43af0): START TRANSACTION;
[2016-10-21 09:18:13.824] [INFO] console - Executing (94c214aa-38eb-40f2-b8bf-9bf842a43af0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.850] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 19);
[2016-10-21 09:18:13.858] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.873] [INFO] console - Executing (94c214aa-38eb-40f2-b8bf-9bf842a43af0): COMMIT;
[2016-10-21 09:18:13.874] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): START TRANSACTION;
[2016-10-21 09:18:13.877] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.878] [INFO] console - [ 70,
  296,
  {},
  [ { id: '19',
      question: 'temp',
      invited: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:18:13.893] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:18:13.902] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:18:13.906] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 04:18:13.885 +00:00','2016-10-21 04:18:13.885 +00:00',2) RETURNING *;
[2016-10-21 09:18:13.914] [INFO] console - Executing (b1d1f342-94c8-41b3-b32a-341b52457f2c): COMMIT;
[2016-10-21 09:18:13.918] [INFO] console - [ 70, 297, {}, [ '19' ] ]
[2016-10-21 09:18:13.925] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:18:13.940] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:13.943] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:13.949] [INFO] console - [ 16,
  1725150798020608,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:18:13.954] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): START TRANSACTION;
[2016-10-21 09:18:13.957] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:13.961] [INFO] console - [ 16,
  4460123334377472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 09:18:13.974] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 19);
[2016-10-21 09:18:13.985] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/19/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:18:13.991] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/19/','2016-10-21 04:18:13.969 +00:00','2016-10-21 04:18:13.969 +00:00',19) RETURNING *;
[2016-10-21 09:18:13.994] [INFO] console - Executing (41437307-9e72-4d26-9605-bf8c2359a688): COMMIT;
[2016-10-21 09:18:13.996] [INFO] console - [ 70, 298, {}, [ '20' ] ]
[2016-10-21 09:18:14.001] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/19/' like z.path||z.id||'/%'
[2016-10-21 09:18:14.008] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '19')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:14.012] [INFO] console - [ 16,
  1637032075984896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id19.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 09:18:14.025] [INFO] console - [ 16,
  3108845350027264,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:18:14.031] [INFO] console - [ 16,
  398614947954688,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 09:18:14.049] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:18:14.058] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): START TRANSACTION;
[2016-10-21 09:18:14.066] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:14.073] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:18:14.068 +00:00','2016-10-21 04:18:14.068 +00:00',20,NULL) RETURNING *;
[2016-10-21 09:18:14.078] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:18:14.083] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '20');
[2016-10-21 09:18:14.087] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/19/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 20
                                    )
[2016-10-21 09:18:14.090] [INFO] console - Executing (64e2706e-d132-47b3-8610-df135c9c06fa): COMMIT;
[2016-10-21 09:18:14.094] [INFO] console - [ 70, 299, {}, [ '27' ] ]
[2016-10-21 09:18:14.103] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '20');
[2016-10-21 09:18:14.106] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/19/' like z.path||z.id||'/%'
[2016-10-21 09:18:14.112] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '19')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:14.116] [INFO] console - [ 16,
  1936601842188288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id20.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:18:14.122] [INFO] console - [ 16,
  2895173289771008,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id19.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:18:14.130] [INFO] console - [ 16,
  4368309013184512,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:18:14.140] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 09:18:14.142] [INFO] console - [ 16,
  1936037880266752,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 27 } ]
[2016-10-21 09:18:14.153] [INFO] console - Executing (073a8fe4-447a-410e-884b-30ff5c5c1d87): START TRANSACTION;
[2016-10-21 09:18:14.155] [INFO] console - Executing (073a8fe4-447a-410e-884b-30ff5c5c1d87): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:14.168] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:18:14.174] [INFO] console - Executing (073a8fe4-447a-410e-884b-30ff5c5c1d87): COMMIT;
[2016-10-21 09:18:14.177] [INFO] console - [ 70,
  300,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:18:14.202] [INFO] console - Executing (20698f05-ccbe-4f37-8e55-e22752f66816): START TRANSACTION;
[2016-10-21 09:18:14.204] [INFO] console - Executing (20698f05-ccbe-4f37-8e55-e22752f66816): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:18:14.208] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 19);
[2016-10-21 09:18:14.222] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:18:14.229] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:18:14.240] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:14.252] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 19
                                    )
[2016-10-21 09:18:14.266] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 04:18:14.257 +00:00' WHERE "id" = '19'
[2016-10-21 09:18:14.275] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '19'
                                    or path like '/1/2/19/'||'%'
[2016-10-21 09:18:14.277] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 19
                                    )
[2016-10-21 09:18:14.281] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 09:18:14.286] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:18:14.289] [INFO] console - Executing (20698f05-ccbe-4f37-8e55-e22752f66816): COMMIT;
[2016-10-21 09:18:14.291] [INFO] console - [ 70, 301, {}, [ undefined ] ]
[2016-10-21 09:18:14.296] [INFO] console - [ 16,
  3070295703289856,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:18:14.301] [INFO] console - [ 16,
  7606356817215488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 09:18:14.307] [INFO] console - [ 16,
  3028762457276416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 09:18:14.312] [INFO] console - [ 16,
  6887501562118144,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 27 } ]
[2016-10-21 09:22:17.295] [INFO] console - [ 70, 303, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 09:22:17.321] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 09:22:17.327] [INFO] console - [ 70, 304, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 09:22:17.397] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 09:22:17.399] [INFO] console - [ 70, 305, {}, [ 'КОПА' ] ]
[2016-10-21 09:22:17.408] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 09:22:17.410] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 09:22:17.421] [INFO] console - [ 8,
  68,
  306,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 09:22:17.587] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:17.596] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 09:22:17.599] [INFO] console - [ 8,
  68,
  308,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 09:22:17.707] [INFO] console - [ 70, 310, {}, [ undefined ] ]
[2016-10-21 09:22:17.710] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:22:17.726] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:22:17.729] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 09:22:17.748] [INFO] console - Executing (38c32912-5802-4f9b-8a76-f7e3f441ca38): START TRANSACTION;
[2016-10-21 09:22:17.750] [INFO] console - Executing (38c32912-5802-4f9b-8a76-f7e3f441ca38): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:17.778] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:22:17.797] [INFO] console - Executing (38c32912-5802-4f9b-8a76-f7e3f441ca38): COMMIT;
[2016-10-21 09:22:17.799] [INFO] console - [ 70,
  311,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:17.817] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:22:17.821] [INFO] console - Executing (e309ea9b-f5b7-4c2a-86fd-b9699c58161c): START TRANSACTION;
[2016-10-21 09:22:17.826] [INFO] console - Executing (e309ea9b-f5b7-4c2a-86fd-b9699c58161c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:17.833] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:17.847] [INFO] console - Executing (e309ea9b-f5b7-4c2a-86fd-b9699c58161c): COMMIT;
[2016-10-21 09:22:17.849] [INFO] console - [ 70,
  312,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023487638',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:17.900] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:17.906] [INFO] console - Executing (a9a1bec9-7dfc-47cb-b5c7-d38c4a6b80bc): START TRANSACTION;
[2016-10-21 09:22:17.908] [INFO] console - Executing (a9a1bec9-7dfc-47cb-b5c7-d38c4a6b80bc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:17.920] [INFO] console - Executing (a9a1bec9-7dfc-47cb-b5c7-d38c4a6b80bc): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 04:22:17.910 +00:00','2016-10-21 04:22:17.910 +00:00',2,2) RETURNING *;
[2016-10-21 09:22:17.925] [INFO] console - Executing (a9a1bec9-7dfc-47cb-b5c7-d38c4a6b80bc): COMMIT;
[2016-10-21 09:22:17.927] [INFO] console - [ 70, 313, {}, [ '20' ] ]
[2016-10-21 09:22:17.943] [INFO] console - Executing (cf8485f4-b66d-4fd5-813f-66d29bc54da0): START TRANSACTION;
[2016-10-21 09:22:17.945] [INFO] console - Executing (cf8485f4-b66d-4fd5-813f-66d29bc54da0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:17.954] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 20);
[2016-10-21 09:22:17.970] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:22:17.957 +00:00',"updated_at"='2016-10-21 04:22:17.957 +00:00' WHERE "id" = '20'
[2016-10-21 09:22:17.983] [INFO] console - Executing (cf8485f4-b66d-4fd5-813f-66d29bc54da0): COMMIT;
[2016-10-21 09:22:17.988] [INFO] console - [ 70, 314, {}, [ undefined ] ]
[2016-10-21 09:22:17.991] [INFO] console - [ 16, 507899350614016, {}, 'ru.kopa.model.Kopa.id20.change' ]
[2016-10-21 09:22:17.995] [INFO] console - [ 16,
  3893774482669568,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 20 ] ]
[2016-10-21 09:22:18.004] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 20 }
[2016-10-21 09:22:18.008] [INFO] console - Executing (62041b00-13f2-41be-bcee-dc468c6d2712): START TRANSACTION;
[2016-10-21 09:22:18.010] [INFO] console - Executing (62041b00-13f2-41be-bcee-dc468c6d2712): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.019] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 20);
[2016-10-21 09:22:18.028] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:22:18.034] [INFO] console - Executing (62041b00-13f2-41be-bcee-dc468c6d2712): COMMIT;
[2016-10-21 09:22:18.039] [INFO] console - [ 70,
  315,
  {},
  [ { id: '20',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 09:22:17 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:22:17 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:17 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:18.051] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:22:18.057] [INFO] console - [ 70, 316, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:22:18.090] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 09:22:18.097] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 09:22:18.102] [INFO] console - [ 70, 317, {}, [ [ [Object] ] ] ]
[2016-10-21 09:22:18.115] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:22:18.124] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:22:18.131] [INFO] console - [ 70, 318, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 09:22:18.172] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 09:22:18.187] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 09:22:18.192] [INFO] console - [ 70, 319, {}, [ [ [Object] ] ] ]
[2016-10-21 09:22:18.214] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:22:18.217] [INFO] console - Executing (e13fdca8-6f3a-4cb6-9061-d47e9cffc394): START TRANSACTION;
[2016-10-21 09:22:18.226] [INFO] console - Executing (e13fdca8-6f3a-4cb6-9061-d47e9cffc394): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.237] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:22:18.250] [INFO] console - Executing (e13fdca8-6f3a-4cb6-9061-d47e9cffc394): COMMIT;
[2016-10-21 09:22:18.252] [INFO] console - [ 70,
  320,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:22:18.284] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:18.289] [INFO] console - Executing (2df3ba5a-35ad-48ff-afa9-22566a2a449f): START TRANSACTION;
[2016-10-21 09:22:18.293] [INFO] console - Executing (2df3ba5a-35ad-48ff-afa9-22566a2a449f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.299] [INFO] console - Executing (2df3ba5a-35ad-48ff-afa9-22566a2a449f): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477023738273 temp','2016-10-21 04:22:18.295 +00:00','2016-10-21 04:22:18.295 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:18.309] [INFO] console - Executing (2df3ba5a-35ad-48ff-afa9-22566a2a449f): COMMIT;
[2016-10-21 09:22:18.312] [INFO] console - [ 70, 321, {}, [ '25' ] ]
[2016-10-21 09:22:18.325] [INFO] console - [ 16,
  8216803058647040,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '25' ] ]
[2016-10-21 09:22:18.356] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:18.361] [INFO] console - Executing (183bd7aa-ead6-4258-943b-bff33bf8b5f2): START TRANSACTION;
[2016-10-21 09:22:18.363] [INFO] console - Executing (183bd7aa-ead6-4258-943b-bff33bf8b5f2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.372] [INFO] console - Executing (183bd7aa-ead6-4258-943b-bff33bf8b5f2): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477023738336temp',0,0,'2016-10-21 04:22:18.365 +00:00','2016-10-21 04:22:18.365 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:18.376] [INFO] console - Executing (183bd7aa-ead6-4258-943b-bff33bf8b5f2): COMMIT;
[2016-10-21 09:22:18.379] [INFO] console - [ 70, 322, {}, [ '20' ] ]
[2016-10-21 09:22:18.389] [INFO] console - [ 16,
  8197846377431040,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '20' ] ]
[2016-10-21 09:22:18.505] [INFO] console - [ 70, 324, {}, [ undefined ] ]
[2016-10-21 09:22:18.517] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:22:18.520] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:22:18.529] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:22:18.532] [INFO] console - Executing (0e77dfed-cb1c-4f25-b810-ec916037e439): START TRANSACTION;
[2016-10-21 09:22:18.537] [INFO] console - Executing (0e77dfed-cb1c-4f25-b810-ec916037e439): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.547] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:22:18.553] [INFO] console - Executing (0e77dfed-cb1c-4f25-b810-ec916037e439): COMMIT;
[2016-10-21 09:22:18.555] [INFO] console - [ 70,
  325,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:22:18.583] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:22:18.588] [INFO] console - [ 70, 326, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:22:18.620] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:18.625] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): START TRANSACTION;
[2016-10-21 09:22:18.627] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.645] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:22:18.632 +00:00','2016-10-21 04:22:18.632 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:22:18.655] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:18.662] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:18.667] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:22:18.673] [INFO] console - Executing (5b1ca6e0-8224-449f-ad64-e52b5c8b15cc): COMMIT;
[2016-10-21 09:22:18.675] [INFO] console - [ 70, 327, {}, [ '28' ] ]
[2016-10-21 09:22:18.690] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:18.695] [INFO] console - Executing (a440ad6e-1c7d-4f1c-b8ad-76366b6e1e49): START TRANSACTION;
[2016-10-21 09:22:18.697] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:22:18.699] [INFO] console - Executing (a440ad6e-1c7d-4f1c-b8ad-76366b6e1e49): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.708] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:18.710] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 09:22:18.715] [INFO] console - [ 16,
  5930632328773632,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:22:18.722] [INFO] console - [ 16,
  8360613803720704,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 28 } ]
[2016-10-21 09:22:18.733] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:22:18.742] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:18.752] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:18.756] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:18.772] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:22:18.759 +00:00' WHERE "id" = '28'
[2016-10-21 09:22:18.777] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '28'
                                    or path like '/28/'||'%'
[2016-10-21 09:22:18.781] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:22:18.786] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:22:18.792] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:18.796] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/28/'||'%'
[2016-10-21 09:22:18.799] [INFO] console - Executing (a440ad6e-1c7d-4f1c-b8ad-76366b6e1e49): COMMIT;
[2016-10-21 09:22:18.802] [INFO] console - [ 70, 328, {}, [ undefined ] ]
[2016-10-21 09:22:18.806] [INFO] console - [ 16,
  2446711368712192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/28/',
       id: '28',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:22:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:22:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:22:18.830] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:18.832] [INFO] console - [ 16,
  4586462716624896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:22:18.842] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): START TRANSACTION;
[2016-10-21 09:22:18.845] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.855] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:22:18.867] [INFO] console - Executing (0ca9c53b-a709-432b-a9b2-cb182e2e63d8): START TRANSACTION;
[2016-10-21 09:22:18.872] [INFO] console - Executing (0ca9c53b-a709-432b-a9b2-cb182e2e63d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.876] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:22:18.847 +00:00','2016-10-21 04:22:18.847 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:22:18.880] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:18.891] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:22:18.904] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:18.908] [INFO] console - Executing (0ca9c53b-a709-432b-a9b2-cb182e2e63d8): COMMIT;
[2016-10-21 09:22:18.912] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:22:18.914] [INFO] console - [ 70,
  330,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:22:18.945] [INFO] console - Executing (4974a219-24a8-40f6-9709-b653285eb6fa): COMMIT;
[2016-10-21 09:22:18.949] [INFO] console - [ 70, 329, {}, [ '29' ] ]
[2016-10-21 09:22:18.970] [INFO] console - Executing (18b3c2bc-89c1-42d1-a8ad-ba688c7f2660): START TRANSACTION;
[2016-10-21 09:22:18.979] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:18.986] [INFO] console - Executing (1e2c08e6-5432-4b96-829f-b59c06d4d60a): START TRANSACTION;
[2016-10-21 09:22:18.989] [INFO] console - Executing (18b3c2bc-89c1-42d1-a8ad-ba688c7f2660): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:18.994] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:22:19.019] [INFO] console - Executing (1e2c08e6-5432-4b96-829f-b59c06d4d60a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.032] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:19.063] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 09:22:19.067] [INFO] console - [ 16,
  7185252558569472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:22:19.120] [INFO] console - [ 16,
  5676234948214784,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 29 } ]
[2016-10-21 09:22:19.128] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 09:22:19.142] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:22:19.153] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 09:22:19.164] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.167] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.184] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.192] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:19.194] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.205] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='28',"updated_at"='2016-10-21 04:22:19.198 +00:00' WHERE "id" = '29'
[2016-10-21 09:22:19.212] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:22:19.218] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/28/')
                                where
                                    id = '29'
                                    or path like '/29/'||'%'
[2016-10-21 09:22:19.226] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:22:19.219 +00:00' WHERE "id" = '28'
[2016-10-21 09:22:19.228] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/28/' like path||id||'/%'
[2016-10-21 09:22:19.245] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '28'
                                    or path like '/2/28/'||'%'
[2016-10-21 09:22:19.254] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/28/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.260] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:22:19.267] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.271] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.278] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/28/29/'||'%'
[2016-10-21 09:22:19.284] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.290] [INFO] console - Executing (1e2c08e6-5432-4b96-829f-b59c06d4d60a): COMMIT;
[2016-10-21 09:22:19.294] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/28/'||'%'
[2016-10-21 09:22:19.296] [INFO] console - [ 70, 332, {}, [ undefined ] ]
[2016-10-21 09:22:19.299] [INFO] console - [ 16,
  200382097653760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id28.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/28/29/',
       id: '29',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/28/',
       note: null,
       created_at: Fri Oct 21 2016 09:22:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '28' } } ]
[2016-10-21 09:22:19.307] [INFO] console - Executing (18b3c2bc-89c1-42d1-a8ad-ba688c7f2660): COMMIT;
[2016-10-21 09:22:19.309] [INFO] console - [ 16,
  399042391572480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:22:19.313] [INFO] console - [ 70, 331, {}, [ undefined ] ]
[2016-10-21 09:22:19.320] [INFO] console - [ 16,
  3923822673657856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 28 } ]
[2016-10-21 09:22:19.326] [INFO] console - [ 16,
  3109329622269952,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/28/',
       id: '28',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:22:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:22:19.355] [INFO] console - [ 16,
  2855420687286272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:22:19.358] [INFO] console - Executing (c8378c7e-8ae4-4396-ac61-90b79f1e1c78): START TRANSACTION;
[2016-10-21 09:22:19.360] [INFO] console - Executing (c8378c7e-8ae4-4396-ac61-90b79f1e1c78): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.361] [INFO] console - [ 16,
  677137033986048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:22:19.368] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 09:22:19.370] [INFO] console - [ 16,
  5230128298721280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  {} ]
[2016-10-21 09:22:19.376] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.382] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.387] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:22:19.396] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:22:19.389 +00:00' WHERE "id" = '28'
[2016-10-21 09:22:19.400] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '28'
                                    or path like '/4/28/'||'%'
[2016-10-21 09:22:19.410] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:19.415] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): START TRANSACTION;
[2016-10-21 09:22:19.418] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:19.420] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.424] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.433] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:22:19.422 +00:00','2016-10-21 04:22:19.422 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:22:19.436] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.440] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:19.447] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/28/'||'%'
[2016-10-21 09:22:19.451] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.457] [INFO] console - Executing (c8378c7e-8ae4-4396-ac61-90b79f1e1c78): COMMIT;
[2016-10-21 09:22:19.458] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:22:19.462] [INFO] console - [ 70, 333, {}, [ undefined ] ]
[2016-10-21 09:22:19.464] [INFO] console - [ 16,
  5748125379592192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 28 } ]
[2016-10-21 09:22:19.470] [INFO] console - Executing (aa29cdb5-b335-445e-a268-880ff9c0188a): COMMIT;
[2016-10-21 09:22:19.473] [INFO] console - [ 70, 334, {}, [ '30' ] ]
[2016-10-21 09:22:19.480] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.482] [INFO] console - [ 16,
  2845423406415872,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: -1 } ]
[2016-10-21 09:22:19.489] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:22:19.493] [INFO] console - [ 16,
  4468565902098432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  {} ]
[2016-10-21 09:22:19.496] [INFO] console - Executing (54fad3d7-3d33-4b95-bbc1-8008c7544efc): START TRANSACTION;
[2016-10-21 09:22:19.500] [INFO] console - Executing (54fad3d7-3d33-4b95-bbc1-8008c7544efc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.510] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:19.514] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 30);
[2016-10-21 09:22:19.520] [INFO] console - [ 16,
  4201775257092096,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 09:22:19.525] [INFO] console - [ 16,
  6491764999323648,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 09:22:19.531] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:22:19.537] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.543] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.546] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:19.559] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:22:19.549 +00:00' WHERE "id" = '30'
[2016-10-21 09:22:19.565] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '30'
                                    or path like '/30/'||'%'
[2016-10-21 09:22:19.568] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:22:19.572] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.580] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.585] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/30/'||'%'
[2016-10-21 09:22:19.588] [INFO] console - Executing (54fad3d7-3d33-4b95-bbc1-8008c7544efc): COMMIT;
[2016-10-21 09:22:19.590] [INFO] console - [ 70, 335, {}, [ undefined ] ]
[2016-10-21 09:22:19.599] [INFO] console - [ 16,
  3102435417522176,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/30/',
       id: '30',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:22:19.613] [INFO] console - Executing (7705b656-3edc-469d-bce0-8c065a397951): START TRANSACTION;
[2016-10-21 09:22:19.618] [INFO] console - [ 16,
  3449940760068096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:22:19.622] [INFO] console - Executing (7705b656-3edc-469d-bce0-8c065a397951): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.627] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 30);
[2016-10-21 09:22:19.631] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.636] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.650] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:22:19.671] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:22:19.659 +00:00' WHERE "id" = '30'
[2016-10-21 09:22:19.677] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '30'
                                    or path like '/2/30/'||'%'
[2016-10-21 09:22:19.684] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:19.689] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.694] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.697] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/30/'||'%'
[2016-10-21 09:22:19.700] [INFO] console - Executing (7705b656-3edc-469d-bce0-8c065a397951): COMMIT;
[2016-10-21 09:22:19.703] [INFO] console - [ 70, 336, {}, [ undefined ] ]
[2016-10-21 09:22:19.710] [INFO] console - [ 16,
  6933928713650176,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 30 } ]
[2016-10-21 09:22:19.715] [INFO] console - [ 16,
  3254571157684224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:22:19.726] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:22:19.729] [INFO] console - Executing (744f81ee-0f9c-43ae-a364-ab7db7067bbc): START TRANSACTION;
[2016-10-21 09:22:19.731] [INFO] console - Executing (744f81ee-0f9c-43ae-a364-ab7db7067bbc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.738] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:22:19.747] [INFO] console - Executing (744f81ee-0f9c-43ae-a364-ab7db7067bbc): COMMIT;
[2016-10-21 09:22:19.748] [INFO] console - [ 70,
  337,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:19.766] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:19.770] [INFO] console - Executing (b80afa13-c179-4fb6-a720-a34c5ea2e958): START TRANSACTION;
[2016-10-21 09:22:19.771] [INFO] console - Executing (b80afa13-c179-4fb6-a720-a34c5ea2e958): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.779] [INFO] console - Executing (b80afa13-c179-4fb6-a720-a34c5ea2e958): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT)',0,0,'2016-10-21 04:22:19.774 +00:00','2016-10-21 04:22:19.774 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:19.782] [INFO] console - Executing (b80afa13-c179-4fb6-a720-a34c5ea2e958): COMMIT;
[2016-10-21 09:22:19.784] [INFO] console - [ 70, 338, {}, [ '21' ] ]
[2016-10-21 09:22:19.787] [INFO] console - [ 16,
  184895731138560,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '21' ] ]
[2016-10-21 09:22:19.799] [INFO] console - Executing (ac4719e6-6816-4c0f-9e0f-1820383057e5): START TRANSACTION;
[2016-10-21 09:22:19.801] [INFO] console - Executing (ac4719e6-6816-4c0f-9e0f-1820383057e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.806] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:19.814] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 21);
[2016-10-21 09:22:19.822] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:22:19.826] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.833] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.838] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.843] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.847] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '21' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:22:19.853] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:22:19.850 +00:00','2016-10-21 04:22:19.850 +00:00','21','2') RETURNING *;
[2016-10-21 09:22:19.862] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 21, 1, k.id, 30, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:22:19.866] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 21 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 21 and value=-1) "protiv"
[2016-10-21 09:22:19.873] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:22:19.869 +00:00' WHERE "id" = '21'
[2016-10-21 09:22:19.876] [INFO] console - Executing (ac4719e6-6816-4c0f-9e0f-1820383057e5): COMMIT;
[2016-10-21 09:22:19.878] [INFO] console - [ 70, 339, {}, [ undefined ] ]
[2016-10-21 09:22:19.881] [INFO] console - [ 16,
  5516012633980928,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id21.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '30',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:22:19.894] [INFO] console - Executing (7b94963d-17a7-45e1-8b47-5c23f4583340): START TRANSACTION;
[2016-10-21 09:22:19.896] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 30 }
[2016-10-21 09:22:19.898] [INFO] console - Executing (66445d9a-2a93-4367-9ed1-f487ccbc3b44): START TRANSACTION;
[2016-10-21 09:22:19.902] [INFO] console - Executing (7b94963d-17a7-45e1-8b47-5c23f4583340): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.906] [INFO] console - Executing (66445d9a-2a93-4367-9ed1-f487ccbc3b44): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:19.912] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:19.923] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 30);
[2016-10-21 09:22:19.930] [INFO] console - Executing (66445d9a-2a93-4367-9ed1-f487ccbc3b44): COMMIT;
[2016-10-21 09:22:19.932] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 21);
[2016-10-21 09:22:19.934] [INFO] console - [ 70,
  341,
  {},
  [ { id: '30',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:19 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '21',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:22:19.947] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:22:19.960] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.969] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:22:19.973] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:22:19.977] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:22:19.982] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '21' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:22:19.986] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 21
                                and (
                                    id= 30
                                    or parent_id = 30
                                )
[2016-10-21 09:22:19.994] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 21 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 21 and value=-1) "protiv"
[2016-10-21 09:22:20.005] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:22:19.998 +00:00' WHERE "id" = '21'
[2016-10-21 09:22:20.027] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:22:20.033] [INFO] console - Executing (a0c5e128-a714-43d0-a78a-0138dceebe24): START TRANSACTION;
[2016-10-21 09:22:20.036] [INFO] console - Executing (a0c5e128-a714-43d0-a78a-0138dceebe24): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.047] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:22:20.053] [INFO] console - Executing (a0c5e128-a714-43d0-a78a-0138dceebe24): COMMIT;
[2016-10-21 09:22:20.058] [INFO] console - [ 70,
  343,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:20.068] [INFO] console - Executing (7b94963d-17a7-45e1-8b47-5c23f4583340): COMMIT;
[2016-10-21 09:22:20.071] [INFO] console - [ 70, 340, {}, [ undefined ] ]
[2016-10-21 09:22:20.073] [INFO] console - [ 16,
  6212682973708288,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id21.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '30',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:22:20.095] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:20.106] [INFO] console - Executing (1853dbde-8793-4f40-bcc6-3279060a38fd): START TRANSACTION;
[2016-10-21 09:22:20.110] [INFO] console - Executing (1853dbde-8793-4f40-bcc6-3279060a38fd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.122] [INFO] console - Executing (1853dbde-8793-4f40-bcc6-3279060a38fd): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477023736478',0,0,'2016-10-21 04:22:20.114 +00:00','2016-10-21 04:22:20.114 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:20.126] [INFO] console - Executing (1853dbde-8793-4f40-bcc6-3279060a38fd): COMMIT;
[2016-10-21 09:22:20.129] [INFO] console - [ 70, 344, {}, [ '22' ] ]
[2016-10-21 09:22:20.133] [INFO] console - [ 16,
  3967076695801856,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '22' ] ]
[2016-10-21 09:22:20.175] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 09:22:20.178] [INFO] console - Executing (01d22dd4-5e8d-487c-b277-f3a55cccba94): START TRANSACTION;
[2016-10-21 09:22:20.181] [INFO] console - Executing (01d22dd4-5e8d-487c-b277-f3a55cccba94): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.189] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 09:22:20.195] [INFO] console - Executing (01d22dd4-5e8d-487c-b277-f3a55cccba94): COMMIT;
[2016-10-21 09:22:20.196] [INFO] console - [ 70,
  345,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:22:20.218] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 09:22:20.220] [INFO] console - [ 70, 346, {}, [ [] ] ]
[2016-10-21 09:22:20.292] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:22:20.295] [INFO] console - Executing (6bdf7b19-9955-4ff6-91ee-a2e2c3467992): START TRANSACTION;
[2016-10-21 09:22:20.297] [INFO] console - Executing (6bdf7b19-9955-4ff6-91ee-a2e2c3467992): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.304] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:22:20.318] [INFO] console - Executing (6bdf7b19-9955-4ff6-91ee-a2e2c3467992): COMMIT;
[2016-10-21 09:22:20.319] [INFO] console - [ 70,
  348,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:22:20.338] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 09:22:20.343] [INFO] console - Executing (6bbabc18-be76-495f-a6d3-68e95577fa1b): START TRANSACTION;
[2016-10-21 09:22:20.345] [INFO] console - Executing (6bbabc18-be76-495f-a6d3-68e95577fa1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.354] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 09:22:20.360] [INFO] console - Executing (6bbabc18-be76-495f-a6d3-68e95577fa1b): COMMIT;
[2016-10-21 09:22:20.361] [INFO] console - [ 70,
  349,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:20.387] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:20.391] [INFO] console - Executing (9958db99-d2e9-405b-9277-4678808b6e0a): START TRANSACTION;
[2016-10-21 09:22:20.394] [INFO] console - Executing (9958db99-d2e9-405b-9277-4678808b6e0a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.411] [INFO] console - Executing (9958db99-d2e9-405b-9277-4678808b6e0a): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 04:22:20.405 +00:00','2016-10-21 04:22:20.405 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:20.420] [INFO] console - Executing (9958db99-d2e9-405b-9277-4678808b6e0a): COMMIT;
[2016-10-21 09:22:20.422] [INFO] console - [ 70, 350, {}, [ '26' ] ]
[2016-10-21 09:22:20.426] [INFO] console - [ 16,
  6792854768713728,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '26' ] ]
[2016-10-21 09:22:20.442] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 26 }
[2016-10-21 09:22:20.444] [INFO] console - Executing (dafba217-bded-417c-bb3c-649d6ddca368): START TRANSACTION;
[2016-10-21 09:22:20.446] [INFO] console - Executing (dafba217-bded-417c-bb3c-649d6ddca368): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.454] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 26);
[2016-10-21 09:22:20.459] [INFO] console - Executing (dafba217-bded-417c-bb3c-649d6ddca368): COMMIT;
[2016-10-21 09:22:20.461] [INFO] console - [ 70,
  351,
  {},
  [ { id: '26',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:22:20.490] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:20.494] [INFO] console - Executing (ea39ed00-ebad-4943-85e9-b6211de1a84a): START TRANSACTION;
[2016-10-21 09:22:20.497] [INFO] console - Executing (ea39ed00-ebad-4943-85e9-b6211de1a84a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.506] [INFO] console - Executing (ea39ed00-ebad-4943-85e9-b6211de1a84a): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477023740474','2016-10-21 04:22:20.500 +00:00','2016-10-21 04:22:20.500 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:20.510] [INFO] console - Executing (ea39ed00-ebad-4943-85e9-b6211de1a84a): COMMIT;
[2016-10-21 09:22:20.512] [INFO] console - [ 70, 352, {}, [ '27' ] ]
[2016-10-21 09:22:20.514] [INFO] console - [ 16,
  122765262716928,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '27' ] ]
[2016-10-21 09:22:20.528] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:22:20.532] [INFO] console - Executing (0ba2acfe-1448-49c5-9869-b7f745f91f0d): START TRANSACTION;
[2016-10-21 09:22:20.534] [INFO] console - Executing (0ba2acfe-1448-49c5-9869-b7f745f91f0d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.540] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:20.548] [INFO] console - Executing (0ba2acfe-1448-49c5-9869-b7f745f91f0d): COMMIT;
[2016-10-21 09:22:20.549] [INFO] console - [ 70,
  353,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023487638',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:18:13 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:20.572] [INFO] console - Executing (7c9f92ab-3e4e-4c73-909e-6528d61f3055): START TRANSACTION;
[2016-10-21 09:22:20.574] [INFO] console - Executing (7c9f92ab-3e4e-4c73-909e-6528d61f3055): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.579] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:20.593] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477023736520',"updated_at"='2016-10-21 04:22:20.583 +00:00' WHERE "id" = '2'
[2016-10-21 09:22:20.596] [INFO] console - Executing (7c9f92ab-3e4e-4c73-909e-6528d61f3055): COMMIT;
[2016-10-21 09:22:20.598] [INFO] console - [ 16,
  6681010699763712,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 09:22:20.604] [INFO] console - [ 70, 354, {}, [ undefined ] ]
[2016-10-21 09:22:20.612] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:22:20.614] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:22:20.618] [INFO] console - Executing (135315a2-9b85-4e76-a428-94ab80bc9fcd): START TRANSACTION;
[2016-10-21 09:22:20.621] [INFO] console - Executing (c9fa0ef7-b3e6-4cbb-bea6-7a6e8749c78a): START TRANSACTION;
[2016-10-21 09:22:20.623] [INFO] console - Executing (135315a2-9b85-4e76-a428-94ab80bc9fcd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.626] [INFO] console - Executing (c9fa0ef7-b3e6-4cbb-bea6-7a6e8749c78a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.647] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:20.655] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:20.669] [INFO] console - Executing (135315a2-9b85-4e76-a428-94ab80bc9fcd): COMMIT;
[2016-10-21 09:22:20.670] [INFO] console - Executing (c9fa0ef7-b3e6-4cbb-bea6-7a6e8749c78a): COMMIT;
[2016-10-21 09:22:20.672] [INFO] console - [ 70,
  355,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023736520',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:20.689] [INFO] console - [ 70,
  356,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477023736520',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:20.752] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:22:20.758] [INFO] console - Executing (56a0524d-28ab-48be-9533-ce9f71a58fff): START TRANSACTION;
[2016-10-21 09:22:20.762] [INFO] console - Executing (56a0524d-28ab-48be-9533-ce9f71a58fff): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.779] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:22:20.783] [INFO] console - Executing (56a0524d-28ab-48be-9533-ce9f71a58fff): COMMIT;
[2016-10-21 09:22:20.785] [INFO] console - [ 70,
  358,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:20.805] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:20.809] [INFO] console - Executing (2944955d-808a-4c83-9fde-fd5f360d872d): START TRANSACTION;
[2016-10-21 09:22:20.811] [INFO] console - Executing (2944955d-808a-4c83-9fde-fd5f360d872d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.818] [INFO] console - Executing (2944955d-808a-4c83-9fde-fd5f360d872d): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 04:22:20.813 +00:00','2016-10-21 04:22:20.813 +00:00',2,3) RETURNING *;
[2016-10-21 09:22:20.823] [INFO] console - Executing (2944955d-808a-4c83-9fde-fd5f360d872d): COMMIT;
[2016-10-21 09:22:20.825] [INFO] console - [ 70, 359, {}, [ '28' ] ]
[2016-10-21 09:22:20.828] [INFO] console - [ 16,
  105550448689152,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '28' ] ]
[2016-10-21 09:22:20.842] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 09:22:20.846] [INFO] console - Executing (79652e66-2952-4b1c-8827-121ce4d5b134): START TRANSACTION;
[2016-10-21 09:22:20.848] [INFO] console - Executing (79652e66-2952-4b1c-8827-121ce4d5b134): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.860] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 09:22:20.864] [INFO] console - Executing (79652e66-2952-4b1c-8827-121ce4d5b134): COMMIT;
[2016-10-21 09:22:20.866] [INFO] console - [ 70,
  360,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 09:22:20.940] [INFO] console - [ 70, 362, {}, [ undefined ] ]
[2016-10-21 09:22:20.942] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:22:20.951] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 09:22:20.955] [INFO] console - Executing (e0ec9ba1-7d91-47a3-84e8-5825b24c3c87): START TRANSACTION;
[2016-10-21 09:22:20.957] [INFO] console - Executing (e0ec9ba1-7d91-47a3-84e8-5825b24c3c87): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:20.959] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 09:22:20.970] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:20.976] [INFO] console - Executing (e0ec9ba1-7d91-47a3-84e8-5825b24c3c87): COMMIT;
[2016-10-21 09:22:20.978] [INFO] console - [ 70,
  363,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477023736520',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:20.998] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:21.002] [INFO] console - Executing (ab7e9f15-4ecf-482c-baf2-732e40fa3e48): START TRANSACTION;
[2016-10-21 09:22:21.004] [INFO] console - Executing (ab7e9f15-4ecf-482c-baf2-732e40fa3e48): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.011] [INFO] console - Executing (ab7e9f15-4ecf-482c-baf2-732e40fa3e48): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 04:22:21.006 +00:00','2016-10-21 04:22:21.006 +00:00',2,2) RETURNING *;
[2016-10-21 09:22:21.015] [INFO] console - Executing (ab7e9f15-4ecf-482c-baf2-732e40fa3e48): COMMIT;
[2016-10-21 09:22:21.018] [INFO] console - [ 70, 364, {}, [ '21' ] ]
[2016-10-21 09:22:21.030] [INFO] console - Executing (cbabe2f0-1c89-4be5-942d-475da0fa22f9): START TRANSACTION;
[2016-10-21 09:22:21.032] [INFO] console - Executing (cbabe2f0-1c89-4be5-942d-475da0fa22f9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.036] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 21);
[2016-10-21 09:22:21.055] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 04:22:21.039 +00:00',"updated_at"='2016-10-21 04:22:21.039 +00:00' WHERE "id" = '21'
[2016-10-21 09:22:21.059] [INFO] console - Executing (cbabe2f0-1c89-4be5-942d-475da0fa22f9): COMMIT;
[2016-10-21 09:22:21.060] [INFO] console - [ 70, 365, {}, [ undefined ] ]
[2016-10-21 09:22:21.065] [INFO] console - [ 16, 5521341652402176, {}, 'ru.kopa.model.Kopa.id21.change' ]
[2016-10-21 09:22:21.070] [INFO] console - [ 16,
  8086453399584768,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 21 ] ]
[2016-10-21 09:22:21.086] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 21 }
[2016-10-21 09:22:21.097] [INFO] console - Executing (1df0dcbd-83f5-466d-977d-4c4026aa25c8): START TRANSACTION;
[2016-10-21 09:22:21.100] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:21.103] [INFO] console - Executing (1df0dcbd-83f5-466d-977d-4c4026aa25c8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.111] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): START TRANSACTION;
[2016-10-21 09:22:21.114] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 21);
[2016-10-21 09:22:21.116] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.123] [INFO] console - Executing (1df0dcbd-83f5-466d-977d-4c4026aa25c8): COMMIT;
[2016-10-21 09:22:21.127] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 09:22:21.131] [INFO] console - [ 70,
  366,
  {},
  [ { id: '21',
      question: 'temp',
      invited: Fri Oct 21 2016 09:22:21 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 09:22:21 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:21 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:22:21.137] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:22:21.148] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 04:22:21.121 +00:00','2016-10-21 04:22:21.121 +00:00',2) RETURNING *;
[2016-10-21 09:22:21.152] [INFO] console - Executing (c92f361e-06d9-49e2-a5b6-490b2b7abf9d): COMMIT;
[2016-10-21 09:22:21.164] [INFO] console - [ 70, 367, {}, [ '21' ] ]
[2016-10-21 09:22:21.170] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:22:21.215] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:21.222] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:21.223] [INFO] console - [ 16,
  3210316122947584,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:22:21.230] [INFO] console - [ 16,
  4661129410248704,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 09:22:21.239] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): START TRANSACTION;
[2016-10-21 09:22:21.241] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.247] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 21);
[2016-10-21 09:22:21.251] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/21/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 09:22:21.258] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/21/','2016-10-21 04:22:21.243 +00:00','2016-10-21 04:22:21.243 +00:00',21) RETURNING *;
[2016-10-21 09:22:21.262] [INFO] console - Executing (168e4787-fc07-423e-93ae-09bc5b93b894): COMMIT;
[2016-10-21 09:22:21.264] [INFO] console - [ 70, 368, {}, [ '22' ] ]
[2016-10-21 09:22:21.272] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/21/' like z.path||z.id||'/%'
[2016-10-21 09:22:21.277] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '21')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:21.280] [INFO] console - [ 16,
  7960473284640768,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id21.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 09:22:21.286] [INFO] console - [ 16,
  5229478299041792,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:22:21.292] [INFO] console - [ 16,
  8102546256166912,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 09:22:21.304] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:22:21.309] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): START TRANSACTION;
[2016-10-21 09:22:21.311] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.318] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:22:21.313 +00:00','2016-10-21 04:22:21.313 +00:00',22,NULL) RETURNING *;
[2016-10-21 09:22:21.328] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:22:21.332] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '22');
[2016-10-21 09:22:21.340] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/21/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 22
                                    )
[2016-10-21 09:22:21.343] [INFO] console - Executing (734ceadd-4839-45dd-9031-aacc2505d1f7): COMMIT;
[2016-10-21 09:22:21.346] [INFO] console - [ 70, 369, {}, [ '31' ] ]
[2016-10-21 09:22:21.357] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '22');
[2016-10-21 09:22:21.361] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/21/' like z.path||z.id||'/%'
[2016-10-21 09:22:21.367] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '21')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:21.370] [INFO] console - [ 16,
  2420455908573184,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id22.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:22:21.377] [INFO] console - [ 16,
  6915357170204672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id21.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 09:22:21.384] [INFO] console - [ 16,
  2839667659505664,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:22:21.398] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 09:22:21.400] [INFO] console - [ 16,
  7297556126105600,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 31 } ]
[2016-10-21 09:22:21.410] [INFO] console - Executing (527236ba-fc1f-4339-a545-e71077f6663d): START TRANSACTION;
[2016-10-21 09:22:21.412] [INFO] console - Executing (527236ba-fc1f-4339-a545-e71077f6663d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.419] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:22:21.425] [INFO] console - Executing (527236ba-fc1f-4339-a545-e71077f6663d): COMMIT;
[2016-10-21 09:22:21.427] [INFO] console - [ 70,
  370,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 09:22:21.446] [INFO] console - Executing (2c0ced25-1a63-4bc6-bbf0-53aee3c7ae3a): START TRANSACTION;
[2016-10-21 09:22:21.448] [INFO] console - Executing (2c0ced25-1a63-4bc6-bbf0-53aee3c7ae3a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:22:21.455] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 21);
[2016-10-21 09:22:21.460] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 09:22:21.464] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 09:22:21.474] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:21.486] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 21
                                    )
[2016-10-21 09:22:21.495] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 04:22:21.490 +00:00' WHERE "id" = '21'
[2016-10-21 09:22:21.500] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '21'
                                    or path like '/1/2/21/'||'%'
[2016-10-21 09:22:21.506] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 21
                                    )
[2016-10-21 09:22:21.508] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 09:22:21.513] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:22:21.516] [INFO] console - Executing (2c0ced25-1a63-4bc6-bbf0-53aee3c7ae3a): COMMIT;
[2016-10-21 09:22:21.520] [INFO] console - [ 70, 371, {}, [ undefined ] ]
[2016-10-21 09:22:21.522] [INFO] console - [ 16,
  1240923040120832,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 09:22:21.527] [INFO] console - [ 16,
  562308644339712,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 09:22:21.535] [INFO] console - [ 16,
  3425731870720000,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 09:22:21.550] [INFO] console - [ 16,
  1171969653342208,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 31 } ]
[2016-10-21 09:36:39.845] [INFO] console - [ 70, 373, {}, [ undefined ] ]
[2016-10-21 09:36:39.878] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:36:39.927] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:36:39.943] [INFO] console - Executing (7eea04b7-e71a-4220-bfd2-df9876f4ca0f): START TRANSACTION;
[2016-10-21 09:36:39.946] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:36:39.949] [INFO] console - Executing (7eea04b7-e71a-4220-bfd2-df9876f4ca0f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:39.962] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:36:39.980] [INFO] console - Executing (7eea04b7-e71a-4220-bfd2-df9876f4ca0f): COMMIT;
[2016-10-21 09:36:39.985] [INFO] console - [ 70,
  374,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:36:40.038] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:36:40.048] [INFO] console - [ 70, 375, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:36:40.086] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:40.095] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): START TRANSACTION;
[2016-10-21 09:36:40.097] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.113] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:36:40.099 +00:00','2016-10-21 04:36:40.099 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:36:40.118] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:40.126] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:40.136] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:36:40.140] [INFO] console - Executing (5cb4168d-74d2-43b6-8e6a-894d6db6e11e): COMMIT;
[2016-10-21 09:36:40.143] [INFO] console - [ 70, 376, {}, [ '32' ] ]
[2016-10-21 09:36:40.157] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:40.166] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:36:40.178] [INFO] console - Executing (89c4bdec-ea00-480b-85c7-ce0c21dab6b6): START TRANSACTION;
[2016-10-21 09:36:40.201] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:36:40.203] [INFO] console - Executing (89c4bdec-ea00-480b-85c7-ce0c21dab6b6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.208] [INFO] console - [ 16,
  6882513530126336,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 09:36:40.215] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 09:36:40.217] [INFO] console - [ 16,
  2859471283945472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 32 } ]
[2016-10-21 09:36:40.226] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:36:40.232] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.236] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.239] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:40.260] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:36:40.249 +00:00' WHERE "id" = '32'
[2016-10-21 09:36:40.269] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '32'
                                    or path like '/32/'||'%'
[2016-10-21 09:36:40.273] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:36:40.280] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.289] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.295] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/32/'||'%'
[2016-10-21 09:36:40.299] [INFO] console - Executing (89c4bdec-ea00-480b-85c7-ce0c21dab6b6): COMMIT;
[2016-10-21 09:36:40.302] [INFO] console - [ 70, 377, {}, [ undefined ] ]
[2016-10-21 09:36:40.306] [INFO] console - [ 16,
  6491923770507264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/32/',
       id: '32',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:36:40.322] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:40.327] [INFO] console - [ 16,
  5647081454698496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:36:40.337] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): START TRANSACTION;
[2016-10-21 09:36:40.339] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.352] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:36:40.342 +00:00','2016-10-21 04:36:40.342 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:36:40.357] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:40.363] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:40.370] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:36:40.374] [INFO] console - Executing (4334aec3-f7e2-4357-96be-33c2aaf3c38b): COMMIT;
[2016-10-21 09:36:40.377] [INFO] console - [ 70, 378, {}, [ '33' ] ]
[2016-10-21 09:36:40.384] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:40.389] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:36:40.398] [INFO] console - Executing (a1febdac-dd76-4894-9e7e-276697fbfa84): START TRANSACTION;
[2016-10-21 09:36:40.403] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:36:40.407] [INFO] console - Executing (a1febdac-dd76-4894-9e7e-276697fbfa84): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.408] [INFO] console - [ 16,
  4226496755400704,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 09:36:40.415] [INFO] console - [ 16,
  721675901468672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 33 } ]
[2016-10-21 09:36:40.426] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 33);
[2016-10-21 09:36:40.439] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 09:36:40.445] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.451] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.455] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:40.478] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='32',"updated_at"='2016-10-21 04:36:40.458 +00:00' WHERE "id" = '33'
[2016-10-21 09:36:40.482] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/32/')
                                where
                                    id = '33'
                                    or path like '/33/'||'%'
[2016-10-21 09:36:40.487] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/32/' like path||id||'/%'
[2016-10-21 09:36:40.490] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/32/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.496] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('32', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.500] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/32/33/'||'%'
[2016-10-21 09:36:40.505] [INFO] console - Executing (a1febdac-dd76-4894-9e7e-276697fbfa84): COMMIT;
[2016-10-21 09:36:40.509] [INFO] console - [ 70, 379, {}, [ undefined ] ]
[2016-10-21 09:36:40.515] [INFO] console - [ 16,
  2529908144209920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/32/33/',
       id: '33',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/32/',
       note: null,
       created_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '32' } } ]
[2016-10-21 09:36:40.535] [INFO] console - [ 16,
  4260799426068480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:36:40.543] [INFO] console - [ 16,
  107497702555648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:36:40.611] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:36:40.614] [INFO] console - Executing (2f5a2c4f-9c5f-411b-a141-2b2426aac36b): START TRANSACTION;
[2016-10-21 09:36:40.616] [INFO] console - Executing (2f5a2c4f-9c5f-411b-a141-2b2426aac36b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.627] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:36:40.635] [INFO] console - Executing (2f5a2c4f-9c5f-411b-a141-2b2426aac36b): COMMIT;
[2016-10-21 09:36:40.638] [INFO] console - [ 70,
  380,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:36:40.663] [INFO] console - Executing (e3e9834f-7e3f-46ab-b8b8-ebe8d74ecb02): START TRANSACTION;
[2016-10-21 09:36:40.665] [INFO] console - Executing (e3e9834f-7e3f-46ab-b8b8-ebe8d74ecb02): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.672] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 09:36:40.682] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:36:40.689] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.697] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.701] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:36:40.713] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:36:40.703 +00:00' WHERE "id" = '32'
[2016-10-21 09:36:40.717] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '32'
                                    or path like '/2/32/'||'%'
[2016-10-21 09:36:40.721] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:36:40.724] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.730] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.734] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/32/'||'%'
[2016-10-21 09:36:40.737] [INFO] console - Executing (e3e9834f-7e3f-46ab-b8b8-ebe8d74ecb02): COMMIT;
[2016-10-21 09:36:40.739] [INFO] console - [ 70, 381, {}, [ undefined ] ]
[2016-10-21 09:36:40.742] [INFO] console - [ 16,
  1695788887441408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 32 } ]
[2016-10-21 09:36:40.754] [INFO] console - [ 16,
  4122101692760064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/32/',
       id: '32',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:36:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:36:40.765] [INFO] console - [ 16,
  8313334287826944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:36:40.771] [INFO] console - [ 16,
  7731485847060480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:36:40.779] [INFO] console - [ 16,
  358950281150464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id33.starshinaChange',
  [],
  {} ]
[2016-10-21 09:36:40.820] [INFO] console - Executing (a5d99432-46d8-4257-85e5-f58dfa59d5b1): START TRANSACTION;
[2016-10-21 09:36:40.822] [INFO] console - Executing (a5d99432-46d8-4257-85e5-f58dfa59d5b1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:40.830] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 09:36:40.834] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.843] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.857] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:36:40.893] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:36:40.885 +00:00' WHERE "id" = '32'
[2016-10-21 09:36:40.906] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '32'
                                    or path like '/4/32/'||'%'
[2016-10-21 09:36:40.973] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:40.975] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:40.985] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:40.989] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/32/'||'%'
[2016-10-21 09:36:40.992] [INFO] console - Executing (a5d99432-46d8-4257-85e5-f58dfa59d5b1): COMMIT;
[2016-10-21 09:36:40.994] [INFO] console - [ 70, 382, {}, [ undefined ] ]
[2016-10-21 09:36:41.001] [INFO] console - [ 16,
  7417188338106368,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 32 } ]
[2016-10-21 09:36:41.008] [INFO] console - [ 16,
  8160049190928384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:36:41.014] [INFO] console - [ 16,
  4633235862585344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id33.starshinaChange',
  [],
  {} ]
[2016-10-21 09:36:41.041] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:41.045] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): START TRANSACTION;
[2016-10-21 09:36:41.047] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.059] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:36:41.049 +00:00','2016-10-21 04:36:41.049 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:36:41.065] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:41.073] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.089] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:36:41.095] [INFO] console - Executing (92e0a015-ca90-413d-af0c-3222c2a62a16): COMMIT;
[2016-10-21 09:36:41.097] [INFO] console - [ 70, 383, {}, [ '34' ] ]
[2016-10-21 09:36:41.110] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.116] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:36:41.126] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:36:41.139] [INFO] console - Executing (2007a219-7307-4b8b-ac36-b1654e9d1e46): START TRANSACTION;
[2016-10-21 09:36:41.141] [INFO] console - [ 16,
  237024122503168,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 09:36:41.146] [INFO] console - Executing (2007a219-7307-4b8b-ac36-b1654e9d1e46): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.149] [INFO] console - [ 16,
  6567735574134784,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 34 } ]
[2016-10-21 09:36:41.158] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 09:36:41.172] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:36:41.180] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.190] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.194] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:41.208] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:36:41.195 +00:00' WHERE "id" = '34'
[2016-10-21 09:36:41.218] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '34'
                                    or path like '/34/'||'%'
[2016-10-21 09:36:41.225] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:36:41.232] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.248] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.255] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/34/'||'%'
[2016-10-21 09:36:41.257] [INFO] console - Executing (2007a219-7307-4b8b-ac36-b1654e9d1e46): COMMIT;
[2016-10-21 09:36:41.265] [INFO] console - [ 70, 384, {}, [ undefined ] ]
[2016-10-21 09:36:41.269] [INFO] console - [ 16,
  426661824692224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/34/',
       id: '34',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:36:41 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:36:41 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:36:41.282] [INFO] console - Executing (405b7b9d-5617-45f2-b381-c132dcc47554): START TRANSACTION;
[2016-10-21 09:36:41.283] [INFO] console - [ 16,
  7509217569144832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:36:41.291] [INFO] console - Executing (405b7b9d-5617-45f2-b381-c132dcc47554): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.303] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 09:36:41.311] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.320] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.327] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:36:41.338] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:36:41.331 +00:00' WHERE "id" = '34'
[2016-10-21 09:36:41.342] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '34'
                                    or path like '/2/34/'||'%'
[2016-10-21 09:36:41.349] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:36:41.352] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.359] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.362] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/34/'||'%'
[2016-10-21 09:36:41.364] [INFO] console - Executing (405b7b9d-5617-45f2-b381-c132dcc47554): COMMIT;
[2016-10-21 09:36:41.368] [INFO] console - [ 70, 385, {}, [ undefined ] ]
[2016-10-21 09:36:41.371] [INFO] console - [ 16,
  3088203949015040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 34 } ]
[2016-10-21 09:36:41.381] [INFO] console - [ 16,
  4743929329090560,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:36:41.394] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:36:41.396] [INFO] console - Executing (f8ddcf16-e72a-439b-a196-ed63be2dab6a): START TRANSACTION;
[2016-10-21 09:36:41.398] [INFO] console - Executing (f8ddcf16-e72a-439b-a196-ed63be2dab6a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.408] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:36:41.427] [INFO] console - Executing (f8ddcf16-e72a-439b-a196-ed63be2dab6a): COMMIT;
[2016-10-21 09:36:41.430] [INFO] console - [ 70,
  386,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:36:41.459] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:41.464] [INFO] console - Executing (f5635e44-3737-4b16-ab1a-8239dab33eaa): START TRANSACTION;
[2016-10-21 09:36:41.471] [INFO] console - Executing (f5635e44-3737-4b16-ab1a-8239dab33eaa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.481] [INFO] console - Executing (f5635e44-3737-4b16-ab1a-8239dab33eaa): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:36:41 GMT+0500 (YEKT)',0,0,'2016-10-21 04:36:41.473 +00:00','2016-10-21 04:36:41.473 +00:00',2,3) RETURNING *;
[2016-10-21 09:36:41.484] [INFO] console - Executing (f5635e44-3737-4b16-ab1a-8239dab33eaa): COMMIT;
[2016-10-21 09:36:41.491] [INFO] console - [ 70, 387, {}, [ '23' ] ]
[2016-10-21 09:36:41.495] [INFO] console - [ 16,
  6125016460558336,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '23' ] ]
[2016-10-21 09:36:41.517] [INFO] console - Executing (ea074dd4-ba75-4d71-9f39-de504eb35a07): START TRANSACTION;
[2016-10-21 09:36:41.519] [INFO] console - Executing (ea074dd4-ba75-4d71-9f39-de504eb35a07): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.524] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:41.537] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 23);
[2016-10-21 09:36:41.546] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:36:41.553] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.559] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.566] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.571] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.577] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '23' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:36:41.586] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:36:41.582 +00:00','2016-10-21 04:36:41.582 +00:00','23','2') RETURNING *;
[2016-10-21 09:36:41.600] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 23, 1, k.id, 33, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:36:41.605] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 23 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 23 and value=-1) "protiv"
[2016-10-21 09:36:41.617] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:36:41.607 +00:00' WHERE "id" = '23'
[2016-10-21 09:36:41.621] [INFO] console - Executing (ea074dd4-ba75-4d71-9f39-de504eb35a07): COMMIT;
[2016-10-21 09:36:41.624] [INFO] console - [ 70, 388, {}, [ undefined ] ]
[2016-10-21 09:36:41.626] [INFO] console - [ 16,
  2178549379235840,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id23.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '33',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:36:41.639] [INFO] console - Executing (6a98ef5c-625a-4407-8fb1-987756f9c97b): START TRANSACTION;
[2016-10-21 09:36:41.641] [INFO] console - Executing (6a98ef5c-625a-4407-8fb1-987756f9c97b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.648] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:36:41.654] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 33 }
[2016-10-21 09:36:41.662] [INFO] console - Executing (b8acd493-f814-4015-819c-1a044795c4b5): START TRANSACTION;
[2016-10-21 09:36:41.669] [INFO] console - Executing (b8acd493-f814-4015-819c-1a044795c4b5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:36:41.714] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 23);
[2016-10-21 09:36:41.721] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 33);
[2016-10-21 09:36:41.734] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:36:41.742] [INFO] console - Executing (b8acd493-f814-4015-819c-1a044795c4b5): COMMIT;
[2016-10-21 09:36:41.756] [INFO] console - [ 70,
  390,
  {},
  [ { id: '33',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:36:41 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:36:41 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '23',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:36:41.785] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.798] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:36:41.806] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:36:41.818] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:36:41.824] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '23' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:36:41.838] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 23
                                and (
                                    id= 33
                                    or parent_id = 33
                                )
[2016-10-21 09:36:42.033] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 23 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 23 and value=-1) "protiv"
[2016-10-21 09:36:42.061] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:36:42.036 +00:00' WHERE "id" = '23'
[2016-10-21 09:36:42.065] [INFO] console - Executing (6a98ef5c-625a-4407-8fb1-987756f9c97b): COMMIT;
[2016-10-21 09:36:42.067] [INFO] console - [ 70, 389, {}, [ undefined ] ]
[2016-10-21 09:36:42.075] [INFO] console - [ 16,
  5774158656962560,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id23.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '33',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:38:08.198] [INFO] console - [ 70, 392, {}, [ undefined ] ]
[2016-10-21 09:38:08.232] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:38:08.256] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:38:08.278] [INFO] console - Executing (219908f5-2012-42b2-a564-6e3eb868d32d): START TRANSACTION;
[2016-10-21 09:38:08.284] [INFO] console - Executing (219908f5-2012-42b2-a564-6e3eb868d32d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:38:08.303] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:38:08.320] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:38:08.334] [INFO] console - Executing (219908f5-2012-42b2-a564-6e3eb868d32d): COMMIT;
[2016-10-21 09:38:08.341] [INFO] console - [ 70,
  393,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:38:08.371] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:38:08.382] [INFO] console - [ 70, 394, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:38:08.492] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:38:08.499] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): START TRANSACTION;
[2016-10-21 09:38:08.501] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:38:08.514] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:38:08.503 +00:00','2016-10-21 04:38:08.503 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:38:08.522] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:38:08.535] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:38:08.551] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:38:08.554] [INFO] console - Executing (ed32e9a2-97c7-4ec4-af76-4de420234c78): COMMIT;
[2016-10-21 09:38:08.557] [INFO] console - [ 70, 395, {}, [ '35' ] ]
[2016-10-21 09:38:08.570] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:38:08.583] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:38:08.599] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:38:08.604] [INFO] console - [ 16,
  1278510725332992,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 9 } ]
[2016-10-21 09:38:08.654] [INFO] console - [ 16,
  8997229622722560,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 35 } ]
[2016-10-21 09:38:08.811] [INFO] console - Executing (89256702-a890-4455-87d5-69287187707b): START TRANSACTION;
[2016-10-21 09:38:08.813] [INFO] console - Executing (89256702-a890-4455-87d5-69287187707b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:38:08.822] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 09:38:08.831] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:38:08.835] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:38:08.843] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:38:08.847] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:38:08.858] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:38:08.849 +00:00' WHERE "id" = '35'
[2016-10-21 09:38:08.864] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '35'
                                    or path like '/35/'||'%'
[2016-10-21 09:38:08.869] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:38:08.873] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:38:08.879] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:38:08.883] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/35/'||'%'
[2016-10-21 09:38:08.886] [INFO] console - Executing (89256702-a890-4455-87d5-69287187707b): COMMIT;
[2016-10-21 09:38:08.888] [INFO] console - [ 70, 396, {}, [ undefined ] ]
[2016-10-21 09:38:08.891] [INFO] console - [ 16,
  5623581721493504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/35/',
       id: '35',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:38:08 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:38:08 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:38:09.023] [INFO] console - [ 16,
  4853619939606528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:38:09.059] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:38:09.066] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): START TRANSACTION;
[2016-10-21 09:38:09.068] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:38:09.081] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:38:09.071 +00:00','2016-10-21 04:38:09.071 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:38:09.087] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:38:09.094] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:38:09.100] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:38:09.106] [INFO] console - Executing (f7e5a40c-cac2-4e43-82ff-0442ddb802ab): COMMIT;
[2016-10-21 09:38:09.108] [INFO] console - [ 70, 397, {}, [ '36' ] ]
[2016-10-21 09:38:09.120] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:38:09.126] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:38:09.136] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:38:09.144] [INFO] console - [ 16,
  4472494960410624,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 10 } ]
[2016-10-21 09:38:09.159] [INFO] console - [ 16,
  3079715940204544,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 36 } ]
[2016-10-21 09:39:12.955] [INFO] console - Executing (c84c4a4c-09b6-42a0-9494-926e789884e6): START TRANSACTION;
[2016-10-21 09:39:12.957] [INFO] console - Executing (c84c4a4c-09b6-42a0-9494-926e789884e6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:12.996] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 09:39:13.009] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 09:39:13.017] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:13.029] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:13.034] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:13.049] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='35',"updated_at"='2016-10-21 04:39:13.042 +00:00' WHERE "id" = '36'
[2016-10-21 09:39:13.062] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/35/')
                                where
                                    id = '36'
                                    or path like '/36/'||'%'
[2016-10-21 09:39:13.067] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/35/' like path||id||'/%'
[2016-10-21 09:39:13.069] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/35/' like k.path||k.id||'/%'
[2016-10-21 09:39:13.074] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('35', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:13.078] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/35/36/'||'%'
[2016-10-21 09:39:13.081] [INFO] console - Executing (c84c4a4c-09b6-42a0-9494-926e789884e6): COMMIT;
[2016-10-21 09:39:13.084] [INFO] console - [ 70, 398, {}, [ undefined ] ]
[2016-10-21 09:39:13.088] [INFO] console - [ 16,
  8042136813436928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id35.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/35/36/',
       id: '36',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/35/',
       note: null,
       created_at: Fri Oct 21 2016 09:38:09 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '35' } } ]
[2016-10-21 09:39:13.118] [INFO] console - [ 16,
  7794502011977728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id35.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:39:13.125] [INFO] console - [ 16,
  1671948752912384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:39:25.492] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:39:25.543] [INFO] console - Executing (83a8f8d6-6c54-44a9-b03e-ec7956ad4d26): START TRANSACTION;
[2016-10-21 09:39:25.545] [INFO] console - Executing (83a8f8d6-6c54-44a9-b03e-ec7956ad4d26): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:25.592] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:39:25.607] [INFO] console - Executing (83a8f8d6-6c54-44a9-b03e-ec7956ad4d26): COMMIT;
[2016-10-21 09:39:25.609] [INFO] console - [ 70,
  399,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:39:25.637] [INFO] console - Executing (6e12e33e-99aa-4f46-832f-7dd155df239c): START TRANSACTION;
[2016-10-21 09:39:25.639] [INFO] console - Executing (6e12e33e-99aa-4f46-832f-7dd155df239c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:25.655] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 09:39:25.668] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:39:25.680] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:25.689] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:25.695] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:25.719] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:39:25.706 +00:00' WHERE "id" = '35'
[2016-10-21 09:39:25.725] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '35'
                                    or path like '/2/35/'||'%'
[2016-10-21 09:39:25.729] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:39:25.736] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:39:25.744] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:25.757] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/35/'||'%'
[2016-10-21 09:39:25.760] [INFO] console - Executing (6e12e33e-99aa-4f46-832f-7dd155df239c): COMMIT;
[2016-10-21 09:39:25.763] [INFO] console - [ 70, 400, {}, [ undefined ] ]
[2016-10-21 09:39:25.766] [INFO] console - [ 16,
  5938505440034816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 35 } ]
[2016-10-21 09:39:25.777] [INFO] console - [ 16,
  2643639406690304,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/35/',
       id: '35',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:38:08 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:25 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:39:25.787] [INFO] console - [ 16,
  7740393646981120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:39:25.799] [INFO] console - [ 16,
  55444886257664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:39:25.813] [INFO] console - [ 16,
  7983077827543040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.starshinaChange',
  [],
  {} ]
[2016-10-21 09:39:25.818] [INFO] console - Executing (f24b20aa-dbc4-4469-8b67-742f41101cf0): START TRANSACTION;
[2016-10-21 09:39:25.826] [INFO] console - Executing (f24b20aa-dbc4-4469-8b67-742f41101cf0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:25.832] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 09:39:25.846] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:25.852] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:39:25.859] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): START TRANSACTION;
[2016-10-21 09:39:25.878] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:25.914] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:39:25.890 +00:00','2016-10-21 04:39:25.890 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:39:25.924] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:25.935] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:25.959] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:39:25.971] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:25.996] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:39:26.010] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:39:25.987 +00:00' WHERE "id" = '35'
[2016-10-21 09:39:26.013] [INFO] console - Executing (f39400f0-f369-4542-bd99-028b4ea89581): COMMIT;
[2016-10-21 09:39:26.025] [INFO] console - [ 70, 402, {}, [ '37' ] ]
[2016-10-21 09:39:26.031] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '35'
                                    or path like '/4/35/'||'%'
[2016-10-21 09:39:26.042] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:26.047] [INFO] console - Executing (8f83da56-8950-4859-b3b6-f63d63a5f280): START TRANSACTION;
[2016-10-21 09:39:26.052] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:26.055] [INFO] console - Executing (8f83da56-8950-4859-b3b6-f63d63a5f280): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:26.061] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:39:26.073] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:26.077] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 37);
[2016-10-21 09:39:26.097] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:39:26.107] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:26.109] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:39:26.110] [INFO] console - [ 16,
  3821206880911360,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 11 } ]
[2016-10-21 09:39:26.121] [INFO] console - [ 16,
  6019065231441920,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 37 } ]
[2016-10-21 09:39:26.127] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/35/'||'%'
[2016-10-21 09:39:26.128] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:26.135] [INFO] console - Executing (f24b20aa-dbc4-4469-8b67-742f41101cf0): COMMIT;
[2016-10-21 09:39:26.139] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:26.143] [INFO] console - [ 70, 401, {}, [ undefined ] ]
[2016-10-21 09:39:26.147] [INFO] console - [ 16,
  4983178743775232,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 35 } ]
[2016-10-21 09:39:26.159] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:26.170] [INFO] console - [ 16,
  3332564016168960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:39:26.182] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:39:26.173 +00:00' WHERE "id" = '37'
[2016-10-21 09:39:26.183] [INFO] console - [ 16,
  2568488373714944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.starshinaChange',
  [],
  {} ]
[2016-10-21 09:39:26.259] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '37'
                                    or path like '/37/'||'%'
[2016-10-21 09:39:26.261] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:26.270] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:26.284] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:26.295] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/37/'||'%'
[2016-10-21 09:39:26.299] [INFO] console - Executing (8f83da56-8950-4859-b3b6-f63d63a5f280): COMMIT;
[2016-10-21 09:39:26.301] [INFO] console - [ 70, 403, {}, [ undefined ] ]
[2016-10-21 09:39:26.306] [INFO] console - [ 16,
  1194786511912960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/37/',
       id: '37',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:39:25 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:26 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:39:26.322] [INFO] console - [ 16,
  7759611381678080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:39:26.329] [INFO] console - Executing (84f74745-b9fe-4da7-bc51-d9d1973202e9): START TRANSACTION;
[2016-10-21 09:39:26.331] [INFO] console - Executing (84f74745-b9fe-4da7-bc51-d9d1973202e9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:26.337] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 37);
[2016-10-21 09:39:26.342] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:26.353] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:26.365] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:26.387] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:39:26.367 +00:00' WHERE "id" = '37'
[2016-10-21 09:39:26.391] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '37'
                                    or path like '/2/37/'||'%'
[2016-10-21 09:39:26.396] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:26.404] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:26.422] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:26.426] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/37/'||'%'
[2016-10-21 09:39:26.428] [INFO] console - Executing (84f74745-b9fe-4da7-bc51-d9d1973202e9): COMMIT;
[2016-10-21 09:39:26.431] [INFO] console - [ 70, 404, {}, [ undefined ] ]
[2016-10-21 09:39:26.435] [INFO] console - [ 16,
  2240091137245184,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 37 } ]
[2016-10-21 09:39:26.448] [INFO] console - [ 16,
  3627343570534400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:39:38.629] [INFO] console - [ 70, 406, {}, [ undefined ] ]
[2016-10-21 09:39:38.648] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:39:38.708] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:39:38.713] [INFO] console - Executing (9e9303f7-f645-423c-be03-08eb31468185): START TRANSACTION;
[2016-10-21 09:39:38.715] [INFO] console - Executing (9e9303f7-f645-423c-be03-08eb31468185): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:38.738] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:39:38.745] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:39:38.751] [INFO] console - Executing (9e9303f7-f645-423c-be03-08eb31468185): COMMIT;
[2016-10-21 09:39:38.754] [INFO] console - [ 70,
  407,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:39:38.828] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:39:38.872] [INFO] console - [ 70, 408, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:39:38.938] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:38.943] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): START TRANSACTION;
[2016-10-21 09:39:38.945] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:38.957] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:39:38.949 +00:00','2016-10-21 04:39:38.949 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:39:38.967] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:38.977] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:38.982] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:39:38.986] [INFO] console - Executing (3aa23e9e-c1f5-4fa8-87e9-d5dfbc1f8cab): COMMIT;
[2016-10-21 09:39:38.989] [INFO] console - [ 70, 409, {}, [ '38' ] ]
[2016-10-21 09:39:38.999] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:39.009] [INFO] console - Executing (fc8da8cb-772d-4084-b49e-ad145d5134cd): START TRANSACTION;
[2016-10-21 09:39:39.016] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:39:39.018] [INFO] console - Executing (fc8da8cb-772d-4084-b49e-ad145d5134cd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.029] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:39:39.042] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 09:39:39.044] [INFO] console - [ 16,
  5686435455696896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 12 } ]
[2016-10-21 09:39:39.055] [INFO] console - [ 16,
  4980395288297472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 38 } ]
[2016-10-21 09:39:39.061] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:39:39.068] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.081] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.086] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:39.113] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:39:39.091 +00:00' WHERE "id" = '38'
[2016-10-21 09:39:39.123] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '38'
                                    or path like '/38/'||'%'
[2016-10-21 09:39:39.126] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:39.135] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.143] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.150] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/38/'||'%'
[2016-10-21 09:39:39.154] [INFO] console - Executing (fc8da8cb-772d-4084-b49e-ad145d5134cd): COMMIT;
[2016-10-21 09:39:39.158] [INFO] console - [ 70, 410, {}, [ undefined ] ]
[2016-10-21 09:39:39.171] [INFO] console - [ 16,
  101623124721664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/38/',
       id: '38',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:39:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:39:39.197] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:39.201] [INFO] console - [ 16,
  7181785720946688,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:39:39.219] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): START TRANSACTION;
[2016-10-21 09:39:39.221] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.230] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:39:39.223 +00:00','2016-10-21 04:39:39.223 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:39:39.235] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:39.243] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:39.247] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:39:39.252] [INFO] console - Executing (b0f05b3d-9cbd-445f-b045-81dfa5b5306c): COMMIT;
[2016-10-21 09:39:39.254] [INFO] console - [ 70, 411, {}, [ '39' ] ]
[2016-10-21 09:39:39.264] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:39.269] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:39:39.283] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:39:39.287] [INFO] console - Executing (fcdd2317-6a51-4843-9228-3de5b7b74dae): START TRANSACTION;
[2016-10-21 09:39:39.291] [INFO] console - Executing (fcdd2317-6a51-4843-9228-3de5b7b74dae): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.292] [INFO] console - [ 16,
  6892424613855232,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 13 } ]
[2016-10-21 09:39:39.300] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 39);
[2016-10-21 09:39:39.301] [INFO] console - [ 16,
  5071995307819008,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 39 } ]
[2016-10-21 09:39:39.311] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 09:39:39.317] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.323] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.327] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:39.340] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='38',"updated_at"='2016-10-21 04:39:39.330 +00:00' WHERE "id" = '39'
[2016-10-21 09:39:39.345] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/38/')
                                where
                                    id = '39'
                                    or path like '/39/'||'%'
[2016-10-21 09:39:39.351] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/38/' like path||id||'/%'
[2016-10-21 09:39:39.354] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/38/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.362] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('38', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.369] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/38/39/'||'%'
[2016-10-21 09:39:39.372] [INFO] console - Executing (fcdd2317-6a51-4843-9228-3de5b7b74dae): COMMIT;
[2016-10-21 09:39:39.374] [INFO] console - [ 70, 412, {}, [ undefined ] ]
[2016-10-21 09:39:39.378] [INFO] console - [ 16,
  8011341956644864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/38/39/',
       id: '39',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/38/',
       note: null,
       created_at: Fri Oct 21 2016 09:39:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '38' } } ]
[2016-10-21 09:39:39.547] [INFO] console - [ 16,
  5717223492550656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:39:39.556] [INFO] console - [ 16,
  5763837823287296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:39:39.566] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:39:39.570] [INFO] console - Executing (744e50db-7668-4d74-a4ac-ea1a60be9485): START TRANSACTION;
[2016-10-21 09:39:39.572] [INFO] console - Executing (744e50db-7668-4d74-a4ac-ea1a60be9485): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.581] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:39:39.590] [INFO] console - Executing (744e50db-7668-4d74-a4ac-ea1a60be9485): COMMIT;
[2016-10-21 09:39:39.592] [INFO] console - [ 70,
  413,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:39:39.617] [INFO] console - Executing (ab0706e1-e88e-4b53-b9a2-7942d80a50cf): START TRANSACTION;
[2016-10-21 09:39:39.619] [INFO] console - Executing (ab0706e1-e88e-4b53-b9a2-7942d80a50cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.624] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 09:39:39.638] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:39:39.643] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.653] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.659] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:39.669] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:39:39.661 +00:00' WHERE "id" = '38'
[2016-10-21 09:39:39.681] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '38'
                                    or path like '/2/38/'||'%'
[2016-10-21 09:39:39.691] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:39:39.698] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.703] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.707] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/38/'||'%'
[2016-10-21 09:39:39.713] [INFO] console - Executing (ab0706e1-e88e-4b53-b9a2-7942d80a50cf): COMMIT;
[2016-10-21 09:39:39.715] [INFO] console - [ 70, 414, {}, [ undefined ] ]
[2016-10-21 09:39:39.721] [INFO] console - [ 16,
  1891146221486080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 38 } ]
[2016-10-21 09:39:39.730] [INFO] console - [ 16,
  7252482384199680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/38/',
       id: '38',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:39:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:39:39.740] [INFO] console - [ 16,
  1399425375141888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:39:39.791] [INFO] console - [ 16,
  7485225187672064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:39:39.834] [INFO] console - [ 16,
  3686028839747584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id39.starshinaChange',
  [],
  {} ]
[2016-10-21 09:39:39.848] [INFO] console - Executing (60288212-1345-4ebd-b706-8a6aa2bff920): START TRANSACTION;
[2016-10-21 09:39:39.851] [INFO] console - Executing (60288212-1345-4ebd-b706-8a6aa2bff920): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.858] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 09:39:39.864] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:39.868] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:39:39.871] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): START TRANSACTION;
[2016-10-21 09:39:39.874] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.878] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:39.889] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:39:39.897] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:39:39.880 +00:00','2016-10-21 04:39:39.880 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:39:39.901] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:39.909] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:39.912] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:39:39.915] [INFO] console - Executing (f4319e01-8392-4a57-9510-480a17b8dd79): COMMIT;
[2016-10-21 09:39:39.925] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:39:39.919 +00:00' WHERE "id" = '38'
[2016-10-21 09:39:39.941] [INFO] console - [ 70, 416, {}, [ '40' ] ]
[2016-10-21 09:39:39.951] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:39.956] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:39:39.958] [INFO] console - Executing (f5171589-27b7-4429-b096-8a6c8e77fcf7): START TRANSACTION;
[2016-10-21 09:39:39.962] [INFO] console - Executing (f5171589-27b7-4429-b096-8a6c8e77fcf7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:39.966] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:39:39.981] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 40);
[2016-10-21 09:39:39.982] [INFO] console - [ 16,
  7765362464522240,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 09:39:39.989] [INFO] console - [ 16,
  2631218541625344,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 40 } ]
[2016-10-21 09:39:39.996] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '38'
                                    or path like '/4/38/'||'%'
[2016-10-21 09:39:40.007] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:39:40.011] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:40.014] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.017] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.021] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.024] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:40.029] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.037] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:39:40.030 +00:00' WHERE "id" = '40'
[2016-10-21 09:39:40.039] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/38/'||'%'
[2016-10-21 09:39:40.043] [INFO] console - Executing (60288212-1345-4ebd-b706-8a6aa2bff920): COMMIT;
[2016-10-21 09:39:40.044] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '40'
                                    or path like '/40/'||'%'
[2016-10-21 09:39:40.047] [INFO] console - [ 70, 415, {}, [ undefined ] ]
[2016-10-21 09:39:40.049] [INFO] console - [ 16,
  5274283093786624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 38 } ]
[2016-10-21 09:39:40.054] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:40.058] [INFO] console - [ 16,
  555779918659584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:39:40.063] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.067] [INFO] console - [ 16,
  3592586805641216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id39.starshinaChange',
  [],
  {} ]
[2016-10-21 09:39:40.072] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.077] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/40/'||'%'
[2016-10-21 09:39:40.079] [INFO] console - Executing (f5171589-27b7-4429-b096-8a6c8e77fcf7): COMMIT;
[2016-10-21 09:39:40.081] [INFO] console - [ 70, 417, {}, [ undefined ] ]
[2016-10-21 09:39:40.084] [INFO] console - [ 16,
  8666998818996224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/40/',
       id: '40',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:39:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:39:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:39:40.093] [INFO] console - Executing (eb358680-b428-4475-85cd-07720c6a4ec2): START TRANSACTION;
[2016-10-21 09:39:40.095] [INFO] console - Executing (eb358680-b428-4475-85cd-07720c6a4ec2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.096] [INFO] console - [ 16,
  656904271429632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:39:40.106] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 40);
[2016-10-21 09:39:40.112] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.121] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.124] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:39:40.132] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:39:40.127 +00:00' WHERE "id" = '40'
[2016-10-21 09:39:40.136] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '40'
                                    or path like '/2/40/'||'%'
[2016-10-21 09:39:40.140] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:39:40.143] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.148] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.150] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/40/'||'%'
[2016-10-21 09:39:40.153] [INFO] console - Executing (eb358680-b428-4475-85cd-07720c6a4ec2): COMMIT;
[2016-10-21 09:39:40.156] [INFO] console - [ 70, 418, {}, [ undefined ] ]
[2016-10-21 09:39:40.158] [INFO] console - [ 16,
  1459290451738624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 40 } ]
[2016-10-21 09:39:40.170] [INFO] console - [ 16,
  3277623245406208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:39:40.180] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:39:40.187] [INFO] console - Executing (175f6901-af4e-4193-8c88-14948f2c5fe6): START TRANSACTION;
[2016-10-21 09:39:40.189] [INFO] console - Executing (175f6901-af4e-4193-8c88-14948f2c5fe6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.209] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:39:40.217] [INFO] console - Executing (175f6901-af4e-4193-8c88-14948f2c5fe6): COMMIT;
[2016-10-21 09:39:40.219] [INFO] console - [ 70,
  419,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:39:40.239] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:40.244] [INFO] console - Executing (b3bdeb3c-a535-4e3b-8b09-3ab596b876ac): START TRANSACTION;
[2016-10-21 09:39:40.245] [INFO] console - Executing (b3bdeb3c-a535-4e3b-8b09-3ab596b876ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.260] [INFO] console - Executing (b3bdeb3c-a535-4e3b-8b09-3ab596b876ac): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:39:40 GMT+0500 (YEKT)',0,0,'2016-10-21 04:39:40.247 +00:00','2016-10-21 04:39:40.247 +00:00',2,3) RETURNING *;
[2016-10-21 09:39:40.263] [INFO] console - Executing (b3bdeb3c-a535-4e3b-8b09-3ab596b876ac): COMMIT;
[2016-10-21 09:39:40.265] [INFO] console - [ 70, 420, {}, [ '24' ] ]
[2016-10-21 09:39:40.267] [INFO] console - [ 16,
  898968898764800,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '24' ] ]
[2016-10-21 09:39:40.282] [INFO] console - Executing (ab60db71-340b-4ae1-b1da-fe830a2a3f7c): START TRANSACTION;
[2016-10-21 09:39:40.284] [INFO] console - Executing (ab60db71-340b-4ae1-b1da-fe830a2a3f7c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.291] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:40.297] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 24);
[2016-10-21 09:39:40.304] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:39:40.312] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:40.319] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:40.324] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.328] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.334] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '24' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:39:40.344] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:39:40.337 +00:00','2016-10-21 04:39:40.337 +00:00','24','2') RETURNING *;
[2016-10-21 09:39:40.350] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 24, 1, k.id, 36, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:39:40.357] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 24 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 24 and value=-1) "protiv"
[2016-10-21 09:39:40.365] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:39:40.360 +00:00' WHERE "id" = '24'
[2016-10-21 09:39:40.369] [INFO] console - Executing (ab60db71-340b-4ae1-b1da-fe830a2a3f7c): COMMIT;
[2016-10-21 09:39:40.371] [INFO] console - [ 70, 421, {}, [ undefined ] ]
[2016-10-21 09:39:40.374] [INFO] console - [ 16,
  4854446666285056,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id24.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '36',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:39:40.383] [INFO] console - Executing (240d158b-afb5-4e8f-aa1c-6333449aaa1f): START TRANSACTION;
[2016-10-21 09:39:40.386] [INFO] console - Executing (240d158b-afb5-4e8f-aa1c-6333449aaa1f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.390] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 36 }
[2016-10-21 09:39:40.393] [INFO] console - Executing (12367830-9078-4dce-9210-bc504e5401eb): START TRANSACTION;
[2016-10-21 09:39:40.396] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:39:40.400] [INFO] console - Executing (12367830-9078-4dce-9210-bc504e5401eb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:39:40.409] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 24);
[2016-10-21 09:39:40.431] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 36);
[2016-10-21 09:39:40.440] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:39:40.442] [INFO] console - Executing (12367830-9078-4dce-9210-bc504e5401eb): COMMIT;
[2016-10-21 09:39:40.450] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:40.450] [INFO] console - [ 70,
  423,
  {},
  [ { id: '36',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:39:40 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:39:40 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '24',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:39:40.464] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:39:40.469] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:39:40.478] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:39:40.483] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '24' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:39:40.497] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 24
                                and (
                                    id= 36
                                    or parent_id = 36
                                )
[2016-10-21 09:39:40.505] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 24 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 24 and value=-1) "protiv"
[2016-10-21 09:39:40.536] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:39:40.515 +00:00' WHERE "id" = '24'
[2016-10-21 09:39:40.545] [INFO] console - Executing (240d158b-afb5-4e8f-aa1c-6333449aaa1f): COMMIT;
[2016-10-21 09:39:40.546] [INFO] console - [ 70, 422, {}, [ undefined ] ]
[2016-10-21 09:39:40.548] [INFO] console - [ 16,
  3229581800636416,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id24.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '36',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:42:36.788] [INFO] console - [ 70, 425, {}, [ undefined ] ]
[2016-10-21 09:42:36.826] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:42:36.869] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:42:36.892] [INFO] console - Executing (51eef906-07db-44a6-8f17-d9ef67f83fff): START TRANSACTION;
[2016-10-21 09:42:36.895] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:42:36.897] [INFO] console - Executing (51eef906-07db-44a6-8f17-d9ef67f83fff): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:36.911] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:42:36.920] [INFO] console - Executing (51eef906-07db-44a6-8f17-d9ef67f83fff): COMMIT;
[2016-10-21 09:42:36.926] [INFO] console - [ 70,
  426,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:42:36.975] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:42:36.986] [INFO] console - [ 70, 427, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:42:37.019] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:37.029] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): START TRANSACTION;
[2016-10-21 09:42:37.031] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.044] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:42:37.034 +00:00','2016-10-21 04:42:37.034 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:42:37.049] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:37.055] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:37.059] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:42:37.076] [INFO] console - Executing (02d8090f-2524-481a-8a86-e8e2474cf647): COMMIT;
[2016-10-21 09:42:37.079] [INFO] console - [ 70, 428, {}, [ '41' ] ]
[2016-10-21 09:42:37.097] [INFO] console - Executing (f490ecd1-bafd-417b-af25-5ef25c9718c9): START TRANSACTION;
[2016-10-21 09:42:37.100] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:37.102] [INFO] console - Executing (f490ecd1-bafd-417b-af25-5ef25c9718c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.108] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:42:37.115] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 09:42:37.138] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:42:37.155] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:42:37.156] [INFO] console - [ 16,
  6451352821563392,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 15 } ]
[2016-10-21 09:42:37.178] [INFO] console - [ 16,
  2437996859097088,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 41 } ]
[2016-10-21 09:42:37.182] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.190] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.199] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:37.209] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:42:37.202 +00:00' WHERE "id" = '41'
[2016-10-21 09:42:37.213] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '41'
                                    or path like '/41/'||'%'
[2016-10-21 09:42:37.223] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:42:37.226] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.232] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.238] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/41/'||'%'
[2016-10-21 09:42:37.242] [INFO] console - Executing (f490ecd1-bafd-417b-af25-5ef25c9718c9): COMMIT;
[2016-10-21 09:42:37.252] [INFO] console - [ 70, 429, {}, [ undefined ] ]
[2016-10-21 09:42:37.255] [INFO] console - [ 16,
  3827593436463104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/41/',
       id: '41',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:42:37.268] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:37.272] [INFO] console - [ 16,
  86113748254720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:42:37.282] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): START TRANSACTION;
[2016-10-21 09:42:37.284] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.295] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:42:37.286 +00:00','2016-10-21 04:42:37.286 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:42:37.301] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:37.306] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:37.319] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:42:37.322] [INFO] console - Executing (4a32a6cf-fd6d-4d74-897c-72ebb8140cd3): COMMIT;
[2016-10-21 09:42:37.324] [INFO] console - [ 70, 430, {}, [ '42' ] ]
[2016-10-21 09:42:37.330] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:37.334] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:42:37.347] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:42:37.351] [INFO] console - Executing (2a647a87-2f5b-4061-a7bc-4da046c9f305): START TRANSACTION;
[2016-10-21 09:42:37.352] [INFO] console - [ 16,
  1342510884454400,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 16 } ]
[2016-10-21 09:42:37.357] [INFO] console - Executing (2a647a87-2f5b-4061-a7bc-4da046c9f305): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.360] [INFO] console - [ 16,
  6404201343090688,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 42 } ]
[2016-10-21 09:42:37.365] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 42);
[2016-10-21 09:42:37.378] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 09:42:37.381] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.387] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.391] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:37.397] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='41',"updated_at"='2016-10-21 04:42:37.392 +00:00' WHERE "id" = '42'
[2016-10-21 09:42:37.402] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/41/')
                                where
                                    id = '42'
                                    or path like '/42/'||'%'
[2016-10-21 09:42:37.406] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/41/' like path||id||'/%'
[2016-10-21 09:42:37.410] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/41/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.416] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('41', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.421] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/41/42/'||'%'
[2016-10-21 09:42:37.424] [INFO] console - Executing (2a647a87-2f5b-4061-a7bc-4da046c9f305): COMMIT;
[2016-10-21 09:42:37.425] [INFO] console - [ 70, 431, {}, [ undefined ] ]
[2016-10-21 09:42:37.431] [INFO] console - [ 16,
  5636419097722880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/41/42/',
       id: '42',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/41/',
       note: null,
       created_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '41' } } ]
[2016-10-21 09:42:37.441] [INFO] console - [ 16,
  691442429198336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:42:37.449] [INFO] console - [ 16,
  2645298247630848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:42:37.460] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:42:37.466] [INFO] console - Executing (60676c52-7507-4d6d-bf2a-9fafecfebcbc): START TRANSACTION;
[2016-10-21 09:42:37.467] [INFO] console - Executing (60676c52-7507-4d6d-bf2a-9fafecfebcbc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.480] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:42:37.485] [INFO] console - Executing (60676c52-7507-4d6d-bf2a-9fafecfebcbc): COMMIT;
[2016-10-21 09:42:37.487] [INFO] console - [ 70,
  432,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:42:37.507] [INFO] console - Executing (ec889444-0517-4b66-b010-0671c4a55443): START TRANSACTION;
[2016-10-21 09:42:37.511] [INFO] console - Executing (ec889444-0517-4b66-b010-0671c4a55443): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.515] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 09:42:37.522] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:42:37.526] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.532] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.537] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:42:37.546] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:42:37.539 +00:00' WHERE "id" = '41'
[2016-10-21 09:42:37.551] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '41'
                                    or path like '/2/41/'||'%'
[2016-10-21 09:42:37.554] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:42:37.558] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:42:37.568] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:37.572] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/41/'||'%'
[2016-10-21 09:42:37.575] [INFO] console - Executing (ec889444-0517-4b66-b010-0671c4a55443): COMMIT;
[2016-10-21 09:42:37.577] [INFO] console - [ 70, 433, {}, [ undefined ] ]
[2016-10-21 09:42:37.582] [INFO] console - [ 16,
  4369027296133120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 41 } ]
[2016-10-21 09:42:37.590] [INFO] console - [ 16,
  6461572654301184,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/41/',
       id: '41',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:42:37.612] [INFO] console - [ 16,
  6552260960059392,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:42:37.617] [INFO] console - [ 16,
  3826397923508224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:42:37.623] [INFO] console - [ 16,
  8446748171173888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id42.starshinaChange',
  [],
  {} ]
[2016-10-21 09:42:37.663] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 42 }
[2016-10-21 09:42:37.671] [INFO] console - Executing (cf1dbc39-c4d7-48dd-a608-5ad88b6536e7): START TRANSACTION;
[2016-10-21 09:42:37.673] [INFO] console - Executing (cf1dbc39-c4d7-48dd-a608-5ad88b6536e7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.680] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 42);
[2016-10-21 09:42:37.688] [INFO] console - Executing (cf1dbc39-c4d7-48dd-a608-5ad88b6536e7): COMMIT;
[2016-10-21 09:42:37.690] [INFO] console - [ 70,
  434,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/41/42/',
      id: '42',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/41/',
      note: null,
      created_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '41',
      attachments: [] } ] ]
[2016-10-21 09:42:37.784] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 41 }
[2016-10-21 09:42:37.788] [INFO] console - Executing (62b5dfe9-e00e-4e07-8e2f-c78745d69f06): START TRANSACTION;
[2016-10-21 09:42:37.790] [INFO] console - Executing (62b5dfe9-e00e-4e07-8e2f-c78745d69f06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.804] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 09:42:37.814] [INFO] console - Executing (62b5dfe9-e00e-4e07-8e2f-c78745d69f06): COMMIT;
[2016-10-21 09:42:37.816] [INFO] console - [ 70,
  435,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/41/',
      id: '41',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:42:37 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 09:42:37.900] [INFO] console - Executing (26cef3e2-7373-44ba-b18a-c67f20503068): START TRANSACTION;
[2016-10-21 09:42:37.903] [INFO] console - Executing (26cef3e2-7373-44ba-b18a-c67f20503068): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:37.921] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 09:42:37.994] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.008] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.012] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:42:38.025] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:42:38.017 +00:00' WHERE "id" = '41'
[2016-10-21 09:42:38.029] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '41'
                                    or path like '/4/41/'||'%'
[2016-10-21 09:42:38.034] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:38.039] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.045] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.047] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/41/'||'%'
[2016-10-21 09:42:38.051] [INFO] console - Executing (26cef3e2-7373-44ba-b18a-c67f20503068): COMMIT;
[2016-10-21 09:42:38.053] [INFO] console - [ 70, 436, {}, [ undefined ] ]
[2016-10-21 09:42:38.074] [INFO] console - [ 16,
  2500019760398336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 41 } ]
[2016-10-21 09:42:38.131] [INFO] console - [ 16,
  2427066184105984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:42:38.164] [INFO] console - [ 16,
  6239888515006464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id42.starshinaChange',
  [],
  {} ]
[2016-10-21 09:42:38.178] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:38.182] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): START TRANSACTION;
[2016-10-21 09:42:38.184] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.194] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:42:38.186 +00:00','2016-10-21 04:42:38.186 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:42:38.197] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:38.202] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.205] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:42:38.209] [INFO] console - Executing (cbec1d0f-0bc6-4d46-8769-14aa95895757): COMMIT;
[2016-10-21 09:42:38.215] [INFO] console - [ 70, 437, {}, [ '43' ] ]
[2016-10-21 09:42:38.220] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.229] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:42:38.233] [INFO] console - Executing (b8df4040-cfb8-47f6-84c4-4c308ff7722c): START TRANSACTION;
[2016-10-21 09:42:38.235] [INFO] console - Executing (b8df4040-cfb8-47f6-84c4-4c308ff7722c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.240] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:42:38.245] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 09:42:38.246] [INFO] console - [ 16,
  5955087597830144,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 17 } ]
[2016-10-21 09:42:38.258] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:42:38.263] [INFO] console - [ 16,
  8614859841208320,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 43 } ]
[2016-10-21 09:42:38.266] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.275] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.278] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:38.290] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:42:38.281 +00:00' WHERE "id" = '43'
[2016-10-21 09:42:38.294] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '43'
                                    or path like '/43/'||'%'
[2016-10-21 09:42:38.299] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:42:38.302] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.309] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.313] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/43/'||'%'
[2016-10-21 09:42:38.315] [INFO] console - Executing (b8df4040-cfb8-47f6-84c4-4c308ff7722c): COMMIT;
[2016-10-21 09:42:38.317] [INFO] console - [ 70, 438, {}, [ undefined ] ]
[2016-10-21 09:42:38.321] [INFO] console - [ 16,
  8660694511648768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/43/',
       id: '43',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:42:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:42:38 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:42:38.327] [INFO] console - Executing (861972cd-24a9-44b0-b46e-5f339cc207cd): START TRANSACTION;
[2016-10-21 09:42:38.329] [INFO] console - Executing (861972cd-24a9-44b0-b46e-5f339cc207cd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.331] [INFO] console - [ 16,
  1734519157686272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:42:38.336] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 09:42:38.341] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.346] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.350] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:42:38.357] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:42:38.353 +00:00' WHERE "id" = '43'
[2016-10-21 09:42:38.360] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '43'
                                    or path like '/2/43/'||'%'
[2016-10-21 09:42:38.363] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:42:38.366] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.370] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.372] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/43/'||'%'
[2016-10-21 09:42:38.377] [INFO] console - Executing (861972cd-24a9-44b0-b46e-5f339cc207cd): COMMIT;
[2016-10-21 09:42:38.379] [INFO] console - [ 70, 439, {}, [ undefined ] ]
[2016-10-21 09:42:38.381] [INFO] console - [ 16,
  7304494517846016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 43 } ]
[2016-10-21 09:42:38.391] [INFO] console - [ 16,
  5352940451659776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:42:38.399] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:42:38.403] [INFO] console - Executing (a52471e6-fd0f-4d87-b3cc-73ea4bdb1f8c): START TRANSACTION;
[2016-10-21 09:42:38.405] [INFO] console - Executing (a52471e6-fd0f-4d87-b3cc-73ea4bdb1f8c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.415] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:42:38.420] [INFO] console - Executing (a52471e6-fd0f-4d87-b3cc-73ea4bdb1f8c): COMMIT;
[2016-10-21 09:42:38.422] [INFO] console - [ 70,
  440,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:42:38.441] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:38.445] [INFO] console - Executing (96ee8702-4022-4d77-ac3f-f3f0fd50b0ee): START TRANSACTION;
[2016-10-21 09:42:38.446] [INFO] console - Executing (96ee8702-4022-4d77-ac3f-f3f0fd50b0ee): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.453] [INFO] console - Executing (96ee8702-4022-4d77-ac3f-f3f0fd50b0ee): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:42:38 GMT+0500 (YEKT)',0,0,'2016-10-21 04:42:38.448 +00:00','2016-10-21 04:42:38.448 +00:00',2,3) RETURNING *;
[2016-10-21 09:42:38.459] [INFO] console - Executing (96ee8702-4022-4d77-ac3f-f3f0fd50b0ee): COMMIT;
[2016-10-21 09:42:38.461] [INFO] console - [ 70, 441, {}, [ '25' ] ]
[2016-10-21 09:42:38.466] [INFO] console - [ 16,
  8999548697444352,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '25' ] ]
[2016-10-21 09:42:38.495] [INFO] console - Executing (cbbab0a7-09fb-44cd-bb51-7d366ac3d064): START TRANSACTION;
[2016-10-21 09:42:38.496] [INFO] console - Executing (cbbab0a7-09fb-44cd-bb51-7d366ac3d064): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.500] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:38.522] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 25);
[2016-10-21 09:42:38.529] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:42:38.534] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.541] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.545] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.550] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.556] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '25' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:42:38.565] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:42:38.559 +00:00','2016-10-21 04:42:38.559 +00:00','25','2') RETURNING *;
[2016-10-21 09:42:38.570] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 25, 1, k.id, 39, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:42:38.577] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 25 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 25 and value=-1) "protiv"
[2016-10-21 09:42:38.585] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:42:38.580 +00:00' WHERE "id" = '25'
[2016-10-21 09:42:38.589] [INFO] console - Executing (cbbab0a7-09fb-44cd-bb51-7d366ac3d064): COMMIT;
[2016-10-21 09:42:38.591] [INFO] console - [ 70, 442, {}, [ undefined ] ]
[2016-10-21 09:42:38.593] [INFO] console - [ 16,
  503796987854848,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id25.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '39',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:42:38.601] [INFO] console - Executing (9ed61976-5698-49da-bfaa-af46a656c835): START TRANSACTION;
[2016-10-21 09:42:38.604] [INFO] console - Executing (9ed61976-5698-49da-bfaa-af46a656c835): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.608] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 39 }
[2016-10-21 09:42:38.616] [INFO] console - Executing (aaa1cfd4-e33d-4cc8-890f-2af47d0c06b2): START TRANSACTION;
[2016-10-21 09:42:38.620] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:42:38.626] [INFO] console - Executing (aaa1cfd4-e33d-4cc8-890f-2af47d0c06b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:42:38.632] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 25);
[2016-10-21 09:42:38.641] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 39);
[2016-10-21 09:42:38.649] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:42:38.651] [INFO] console - Executing (aaa1cfd4-e33d-4cc8-890f-2af47d0c06b2): COMMIT;
[2016-10-21 09:42:38.658] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.659] [INFO] console - [ 70,
  444,
  {},
  [ { id: '39',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:42:38 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:42:38 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '25',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:42:38.689] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:42:38.696] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:42:38.702] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:42:38.714] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '25' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:42:38.718] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 25
                                and (
                                    id= 39
                                    or parent_id = 39
                                )
[2016-10-21 09:42:38.740] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 25 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 25 and value=-1) "protiv"
[2016-10-21 09:42:38.755] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:42:38.750 +00:00' WHERE "id" = '25'
[2016-10-21 09:42:38.760] [INFO] console - Executing (9ed61976-5698-49da-bfaa-af46a656c835): COMMIT;
[2016-10-21 09:42:38.763] [INFO] console - [ 70, 443, {}, [ undefined ] ]
[2016-10-21 09:42:38.766] [INFO] console - [ 16,
  4171966346952704,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id25.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '39',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:47:00.162] [INFO] console - [ 70, 446, {}, [ undefined ] ]
[2016-10-21 09:47:00.195] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:47:00.220] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:47:00.235] [INFO] console - Executing (dd1ac779-587c-4533-b1e3-dda7d9160b00): START TRANSACTION;
[2016-10-21 09:47:00.238] [INFO] console - Executing (dd1ac779-587c-4533-b1e3-dda7d9160b00): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.251] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:47:00.272] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:47:00.282] [INFO] console - Executing (dd1ac779-587c-4533-b1e3-dda7d9160b00): COMMIT;
[2016-10-21 09:47:00.288] [INFO] console - [ 70,
  447,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:47:00.345] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:47:00.354] [INFO] console - [ 70, 448, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:47:00.381] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:00.396] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): START TRANSACTION;
[2016-10-21 09:47:00.398] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.406] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:47:00.400 +00:00','2016-10-21 04:47:00.400 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:47:00.417] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:00.422] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:00.426] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:47:00.430] [INFO] console - Executing (d31a598e-1a01-4b92-a126-5090c8f8a31a): COMMIT;
[2016-10-21 09:47:00.432] [INFO] console - [ 70, 449, {}, [ '44' ] ]
[2016-10-21 09:47:00.441] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:00.447] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:47:00.449] [INFO] console - Executing (69892cbe-fb61-4d34-b43b-a01476f1b89f): START TRANSACTION;
[2016-10-21 09:47:00.453] [INFO] console - Executing (69892cbe-fb61-4d34-b43b-a01476f1b89f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.457] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:47:00.463] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 09:47:00.472] [INFO] console - [ 16,
  3733472610877440,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 09:47:00.481] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:47:00.484] [INFO] console - [ 16,
  2483253084684288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 44 } ]
[2016-10-21 09:47:00.498] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.512] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.535] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:00.551] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:47:00.538 +00:00' WHERE "id" = '44'
[2016-10-21 09:47:00.556] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '44'
                                    or path like '/44/'||'%'
[2016-10-21 09:47:00.559] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:47:00.562] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.569] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.579] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/44/'||'%'
[2016-10-21 09:47:00.584] [INFO] console - Executing (69892cbe-fb61-4d34-b43b-a01476f1b89f): COMMIT;
[2016-10-21 09:47:00.585] [INFO] console - [ 70, 450, {}, [ undefined ] ]
[2016-10-21 09:47:00.590] [INFO] console - [ 16,
  4681254987366400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/44/',
       id: '44',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:47:00.602] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:00.604] [INFO] console - [ 16,
  2080762757120000,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:47:00.611] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): START TRANSACTION;
[2016-10-21 09:47:00.614] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.624] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:47:00.618 +00:00','2016-10-21 04:47:00.618 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:47:00.629] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:00.637] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:00.641] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:47:00.644] [INFO] console - Executing (f4df0682-ca2a-49a3-8761-e429d5c44785): COMMIT;
[2016-10-21 09:47:00.646] [INFO] console - [ 70, 451, {}, [ '45' ] ]
[2016-10-21 09:47:00.653] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:00.662] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:47:00.668] [INFO] console - Executing (84e2df37-10b8-42a5-b4d7-56c0226ad2e8): START TRANSACTION;
[2016-10-21 09:47:00.671] [INFO] console - Executing (84e2df37-10b8-42a5-b4d7-56c0226ad2e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.675] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:47:00.684] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 45);
[2016-10-21 09:47:00.686] [INFO] console - [ 16,
  217020039692288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 19 } ]
[2016-10-21 09:47:00.692] [INFO] console - [ 16,
  4346343388610560,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 45 } ]
[2016-10-21 09:47:00.706] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 09:47:00.710] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.718] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.722] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:00.730] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='44',"updated_at"='2016-10-21 04:47:00.724 +00:00' WHERE "id" = '45'
[2016-10-21 09:47:00.734] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/44/')
                                where
                                    id = '45'
                                    or path like '/45/'||'%'
[2016-10-21 09:47:00.742] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/44/' like path||id||'/%'
[2016-10-21 09:47:00.745] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/44/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.754] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('44', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.760] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/44/45/'||'%'
[2016-10-21 09:47:00.766] [INFO] console - Executing (84e2df37-10b8-42a5-b4d7-56c0226ad2e8): COMMIT;
[2016-10-21 09:47:00.768] [INFO] console - [ 70, 452, {}, [ undefined ] ]
[2016-10-21 09:47:00.771] [INFO] console - [ 16,
  2150026308485120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id44.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/44/45/',
       id: '45',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/44/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '44' } } ]
[2016-10-21 09:47:00.783] [INFO] console - [ 16,
  3248720407691264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id44.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:47:00.789] [INFO] console - [ 16,
  4872490885054464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:47:00.802] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:47:00.815] [INFO] console - Executing (c69d4ac9-27a2-4512-823a-4e6d877d045c): START TRANSACTION;
[2016-10-21 09:47:00.822] [INFO] console - Executing (c69d4ac9-27a2-4512-823a-4e6d877d045c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.829] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:47:00.835] [INFO] console - Executing (c69d4ac9-27a2-4512-823a-4e6d877d045c): COMMIT;
[2016-10-21 09:47:00.839] [INFO] console - [ 70,
  453,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:47:00.856] [INFO] console - Executing (b650b213-dbea-4e52-bb75-1bf0ba4d8b91): START TRANSACTION;
[2016-10-21 09:47:00.858] [INFO] console - Executing (b650b213-dbea-4e52-bb75-1bf0ba4d8b91): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.862] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 09:47:00.871] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:47:00.879] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.884] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.887] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:47:00.899] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:47:00.890 +00:00' WHERE "id" = '44'
[2016-10-21 09:47:00.907] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '44'
                                    or path like '/2/44/'||'%'
[2016-10-21 09:47:00.911] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:47:00.915] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:47:00.924] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:00.928] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/44/'||'%'
[2016-10-21 09:47:00.931] [INFO] console - Executing (b650b213-dbea-4e52-bb75-1bf0ba4d8b91): COMMIT;
[2016-10-21 09:47:00.933] [INFO] console - [ 70, 454, {}, [ undefined ] ]
[2016-10-21 09:47:00.936] [INFO] console - [ 16,
  8393113307447296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 44 } ]
[2016-10-21 09:47:00.943] [INFO] console - [ 16,
  1706522694385664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/44/',
       id: '44',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:47:00.955] [INFO] console - [ 16,
  4326091669897216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:47:00.964] [INFO] console - [ 16,
  3838110559371264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:47:00.973] [INFO] console - [ 16,
  8224308673380352,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id45.starshinaChange',
  [],
  {} ]
[2016-10-21 09:47:00.984] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 45 }
[2016-10-21 09:47:00.987] [INFO] console - Executing (fb5bdd47-4e53-4505-8b8f-b27f73a7c2f6): START TRANSACTION;
[2016-10-21 09:47:00.989] [INFO] console - Executing (fb5bdd47-4e53-4505-8b8f-b27f73a7c2f6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:00.996] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 45);
[2016-10-21 09:47:01.004] [INFO] console - Executing (fb5bdd47-4e53-4505-8b8f-b27f73a7c2f6): COMMIT;
[2016-10-21 09:47:01.008] [INFO] console - [ 70,
  455,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/44/45/',
      id: '45',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/44/',
      note: null,
      created_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '44',
      attachments: [] } ] ]
[2016-10-21 09:47:01.022] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 44 }
[2016-10-21 09:47:01.024] [INFO] console - Executing (f9bec310-d34c-4dc9-b358-9ff0e9438571): START TRANSACTION;
[2016-10-21 09:47:01.026] [INFO] console - Executing (f9bec310-d34c-4dc9-b358-9ff0e9438571): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.038] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 09:47:01.044] [INFO] console - Executing (f9bec310-d34c-4dc9-b358-9ff0e9438571): COMMIT;
[2016-10-21 09:47:01.046] [INFO] console - [ 70,
  456,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/44/',
      id: '44',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:47:00 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 09:47:01.061] [INFO] console - Executing (16a91393-d012-45fb-8a16-d1b656be2e85): START TRANSACTION;
[2016-10-21 09:47:01.066] [INFO] console - Executing (16a91393-d012-45fb-8a16-d1b656be2e85): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.072] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 09:47:01.079] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.086] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.091] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:47:01.108] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:47:01.094 +00:00' WHERE "id" = '44'
[2016-10-21 09:47:01.114] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '44'
                                    or path like '/4/44/'||'%'
[2016-10-21 09:47:01.118] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:01.121] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.128] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.136] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/44/'||'%'
[2016-10-21 09:47:01.139] [INFO] console - Executing (16a91393-d012-45fb-8a16-d1b656be2e85): COMMIT;
[2016-10-21 09:47:01.141] [INFO] console - [ 70, 457, {}, [ undefined ] ]
[2016-10-21 09:47:01.147] [INFO] console - [ 16,
  6508281772113920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 44 } ]
[2016-10-21 09:47:01.157] [INFO] console - [ 16,
  1735204592943104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:47:01.168] [INFO] console - [ 16,
  5060412997369856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id45.starshinaChange',
  [],
  {} ]
[2016-10-21 09:47:01.184] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:01.194] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): START TRANSACTION;
[2016-10-21 09:47:01.195] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.203] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:47:01.198 +00:00','2016-10-21 04:47:01.198 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:47:01.207] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:01.212] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.216] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:47:01.220] [INFO] console - Executing (1d250999-276b-4168-9cdf-cb8bd1511b24): COMMIT;
[2016-10-21 09:47:01.222] [INFO] console - [ 70, 458, {}, [ '46' ] ]
[2016-10-21 09:47:01.228] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.233] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:47:01.237] [INFO] console - Executing (ca38aa3d-703a-4603-bbff-3b1af6b7ce35): START TRANSACTION;
[2016-10-21 09:47:01.240] [INFO] console - Executing (ca38aa3d-703a-4603-bbff-3b1af6b7ce35): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.242] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:47:01.247] [INFO] console - [ 16,
  7706053674270720,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 20 } ]
[2016-10-21 09:47:01.254] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 09:47:01.256] [INFO] console - [ 16,
  1990042807435264,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 46 } ]
[2016-10-21 09:47:01.263] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:47:01.267] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.271] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.276] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:01.282] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:47:01.278 +00:00' WHERE "id" = '46'
[2016-10-21 09:47:01.290] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '46'
                                    or path like '/46/'||'%'
[2016-10-21 09:47:01.294] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:47:01.298] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.303] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.307] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/46/'||'%'
[2016-10-21 09:47:01.309] [INFO] console - Executing (ca38aa3d-703a-4603-bbff-3b1af6b7ce35): COMMIT;
[2016-10-21 09:47:01.311] [INFO] console - [ 70, 459, {}, [ undefined ] ]
[2016-10-21 09:47:01.313] [INFO] console - [ 16,
  7528814378745856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/46/',
       id: '46',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:47:01.324] [INFO] console - Executing (c3714638-3cde-4ec5-8c1d-4073b23d6631): START TRANSACTION;
[2016-10-21 09:47:01.325] [INFO] console - [ 16,
  3589525947285504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:47:01.329] [INFO] console - Executing (c3714638-3cde-4ec5-8c1d-4073b23d6631): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.335] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 09:47:01.340] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.347] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.351] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:47:01.357] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:47:01.353 +00:00' WHERE "id" = '46'
[2016-10-21 09:47:01.362] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '46'
                                    or path like '/2/46/'||'%'
[2016-10-21 09:47:01.365] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:01.368] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.372] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.379] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/46/'||'%'
[2016-10-21 09:47:01.381] [INFO] console - Executing (c3714638-3cde-4ec5-8c1d-4073b23d6631): COMMIT;
[2016-10-21 09:47:01.383] [INFO] console - [ 70, 460, {}, [ undefined ] ]
[2016-10-21 09:47:01.392] [INFO] console - [ 16,
  8368661018443776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 46 } ]
[2016-10-21 09:47:01.400] [INFO] console - [ 16,
  2846856140816384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:47:01.407] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:47:01.412] [INFO] console - Executing (d3cf76b4-e6b8-4855-987d-8905682709ee): START TRANSACTION;
[2016-10-21 09:47:01.414] [INFO] console - Executing (d3cf76b4-e6b8-4855-987d-8905682709ee): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.431] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:47:01.445] [INFO] console - Executing (d3cf76b4-e6b8-4855-987d-8905682709ee): COMMIT;
[2016-10-21 09:47:01.446] [INFO] console - [ 70,
  461,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:47:01.466] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:01.471] [INFO] console - Executing (0b068d2f-6695-4408-8486-d1bef42237da): START TRANSACTION;
[2016-10-21 09:47:01.472] [INFO] console - Executing (0b068d2f-6695-4408-8486-d1bef42237da): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.483] [INFO] console - Executing (0b068d2f-6695-4408-8486-d1bef42237da): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:47:01 GMT+0500 (YEKT)',0,0,'2016-10-21 04:47:01.478 +00:00','2016-10-21 04:47:01.478 +00:00',2,3) RETURNING *;
[2016-10-21 09:47:01.492] [INFO] console - Executing (0b068d2f-6695-4408-8486-d1bef42237da): COMMIT;
[2016-10-21 09:47:01.496] [INFO] console - [ 70, 462, {}, [ '26' ] ]
[2016-10-21 09:47:01.498] [INFO] console - [ 16,
  1591137892564992,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '26' ] ]
[2016-10-21 09:47:01.519] [INFO] console - Executing (f3c74dcc-da28-4041-be5a-ff5475bb5da0): START TRANSACTION;
[2016-10-21 09:47:01.523] [INFO] console - Executing (f3c74dcc-da28-4041-be5a-ff5475bb5da0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.526] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:01.537] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 26);
[2016-10-21 09:47:01.542] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:47:01.547] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.553] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.557] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.561] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.568] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '26' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:47:01.574] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:47:01.570 +00:00','2016-10-21 04:47:01.570 +00:00','26','2') RETURNING *;
[2016-10-21 09:47:01.579] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 26, 1, k.id, 42, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:47:01.588] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 26 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 26 and value=-1) "protiv"
[2016-10-21 09:47:01.595] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:47:01.590 +00:00' WHERE "id" = '26'
[2016-10-21 09:47:01.598] [INFO] console - Executing (f3c74dcc-da28-4041-be5a-ff5475bb5da0): COMMIT;
[2016-10-21 09:47:01.600] [INFO] console - [ 70, 463, {}, [ undefined ] ]
[2016-10-21 09:47:01.604] [INFO] console - [ 16,
  7943936672792576,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id26.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '42',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:47:01.621] [INFO] console - Executing (ab745f85-be3f-4632-8c39-f3b9c028d1cb): START TRANSACTION;
[2016-10-21 09:47:01.623] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 42 }
[2016-10-21 09:47:01.626] [INFO] console - Executing (b6fddb3b-7a23-45b6-bfb3-38681ab530bd): START TRANSACTION;
[2016-10-21 09:47:01.627] [INFO] console - Executing (ab745f85-be3f-4632-8c39-f3b9c028d1cb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.629] [INFO] console - Executing (b6fddb3b-7a23-45b6-bfb3-38681ab530bd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:01.637] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:01.648] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 42);
[2016-10-21 09:47:01.657] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 26);
[2016-10-21 09:47:01.660] [INFO] console - Executing (b6fddb3b-7a23-45b6-bfb3-38681ab530bd): COMMIT;
[2016-10-21 09:47:01.667] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:47:01.668] [INFO] console - [ 70,
  465,
  {},
  [ { id: '42',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:47:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:47:01 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '26',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:47:01.686] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.693] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:01.700] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:01.706] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:01.716] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '26' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:47:01.724] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 26
                                and (
                                    id= 42
                                    or parent_id = 42
                                )
[2016-10-21 09:47:01.727] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 26 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 26 and value=-1) "protiv"
[2016-10-21 09:47:01.747] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:47:01.738 +00:00' WHERE "id" = '26'
[2016-10-21 09:47:01.752] [INFO] console - Executing (ab745f85-be3f-4632-8c39-f3b9c028d1cb): COMMIT;
[2016-10-21 09:47:01.755] [INFO] console - [ 70, 464, {}, [ undefined ] ]
[2016-10-21 09:47:01.760] [INFO] console - [ 16,
  5846209356890112,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id26.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '42',
    action: 'remove',
    value: 1 } ]
[2016-10-21 09:47:59.016] [INFO] console - [ 70, 467, {}, [ undefined ] ]
[2016-10-21 09:47:59.054] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 09:47:59.082] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 09:47:59.126] [INFO] console - Executing (dbe13dd9-eb75-44a2-b84e-b332ac18c6e1): START TRANSACTION;
[2016-10-21 09:47:59.134] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 09:47:59.137] [INFO] console - Executing (dbe13dd9-eb75-44a2-b84e-b332ac18c6e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.160] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:47:59.189] [INFO] console - Executing (dbe13dd9-eb75-44a2-b84e-b332ac18c6e1): COMMIT;
[2016-10-21 09:47:59.192] [INFO] console - [ 70,
  468,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:47:59.318] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 09:47:59.325] [INFO] console - [ 70, 469, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 09:47:59.374] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:59.381] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): START TRANSACTION;
[2016-10-21 09:47:59.387] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.399] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:47:59.389 +00:00','2016-10-21 04:47:59.389 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:47:59.411] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:59.417] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:59.423] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:47:59.427] [INFO] console - Executing (c550e725-43c8-41a0-8513-8f09bd40b066): COMMIT;
[2016-10-21 09:47:59.430] [INFO] console - [ 70, 470, {}, [ '47' ] ]
[2016-10-21 09:47:59.436] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:59.443] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:47:59.452] [INFO] console - Executing (5e631f96-3b30-40b0-8594-6049c7b1153e): START TRANSACTION;
[2016-10-21 09:47:59.456] [INFO] console - Executing (5e631f96-3b30-40b0-8594-6049c7b1153e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.459] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:47:59.470] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 09:47:59.471] [INFO] console - [ 16,
  2414656576552960,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 21 } ]
[2016-10-21 09:47:59.483] [INFO] console - [ 16,
  5597703364935680,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 47 } ]
[2016-10-21 09:47:59.491] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:47:59.498] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:59.503] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:59.507] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:59.515] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:47:59.509 +00:00' WHERE "id" = '47'
[2016-10-21 09:47:59.575] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '47'
                                    or path like '/47/'||'%'
[2016-10-21 09:47:59.582] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:47:59.586] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:59.595] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:59.603] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/47/'||'%'
[2016-10-21 09:47:59.605] [INFO] console - Executing (5e631f96-3b30-40b0-8594-6049c7b1153e): COMMIT;
[2016-10-21 09:47:59.607] [INFO] console - [ 70, 471, {}, [ undefined ] ]
[2016-10-21 09:47:59.611] [INFO] console - [ 16,
  416336721215488,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/47/',
       id: '47',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:47:59.627] [INFO] console - [ 16,
  6787131695431680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:47:59.636] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:47:59.644] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): START TRANSACTION;
[2016-10-21 09:47:59.656] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.673] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:47:59.664 +00:00','2016-10-21 04:47:59.664 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:47:59.683] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:59.696] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:59.700] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:47:59.703] [INFO] console - Executing (5acf1ca0-08bc-4ca6-a80f-296b981527c9): COMMIT;
[2016-10-21 09:47:59.707] [INFO] console - [ 70, 472, {}, [ '48' ] ]
[2016-10-21 09:47:59.718] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:47:59.732] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:47:59.738] [INFO] console - Executing (c476481e-03fe-4fd0-a7e8-8a708b9bcfca): START TRANSACTION;
[2016-10-21 09:47:59.742] [INFO] console - Executing (c476481e-03fe-4fd0-a7e8-8a708b9bcfca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.750] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:47:59.754] [INFO] console - [ 16,
  4490960866115584,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 09:47:59.764] [INFO] console - [ 16,
  8791629599080448,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 48 } ]
[2016-10-21 09:47:59.774] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 09:47:59.787] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 09:47:59.797] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:47:59.801] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:59.806] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:47:59.817] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='47',"updated_at"='2016-10-21 04:47:59.808 +00:00' WHERE "id" = '48'
[2016-10-21 09:47:59.833] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/47/')
                                where
                                    id = '48'
                                    or path like '/48/'||'%'
[2016-10-21 09:47:59.836] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/47/' like path||id||'/%'
[2016-10-21 09:47:59.841] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/47/' like k.path||k.id||'/%'
[2016-10-21 09:47:59.847] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('47', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:59.858] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/47/48/'||'%'
[2016-10-21 09:47:59.863] [INFO] console - Executing (c476481e-03fe-4fd0-a7e8-8a708b9bcfca): COMMIT;
[2016-10-21 09:47:59.865] [INFO] console - [ 70, 473, {}, [ undefined ] ]
[2016-10-21 09:47:59.868] [INFO] console - [ 16,
  2077037026082816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id47.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/47/48/',
       id: '48',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/47/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '47' } } ]
[2016-10-21 09:47:59.878] [INFO] console - [ 16,
  5450998627696640,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id47.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 09:47:59.883] [INFO] console - [ 16,
  2583285618180096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 09:47:59.898] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 09:47:59.901] [INFO] console - Executing (c96b948c-d077-4bbc-a449-789f1b81c29e): START TRANSACTION;
[2016-10-21 09:47:59.903] [INFO] console - Executing (c96b948c-d077-4bbc-a449-789f1b81c29e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.917] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:47:59.928] [INFO] console - Executing (c96b948c-d077-4bbc-a449-789f1b81c29e): COMMIT;
[2016-10-21 09:47:59.929] [INFO] console - [ 70,
  474,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 09:47:59.946] [INFO] console - Executing (a25290ac-a906-4408-8729-4e618802e409): START TRANSACTION;
[2016-10-21 09:47:59.949] [INFO] console - Executing (a25290ac-a906-4408-8729-4e618802e409): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:47:59.954] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 09:47:59.961] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 09:47:59.969] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:47:59.974] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:47:59.978] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:48:00.006] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 04:47:59.991 +00:00' WHERE "id" = '47'
[2016-10-21 09:48:00.009] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '47'
                                    or path like '/2/47/'||'%'
[2016-10-21 09:48:00.021] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:48:00.025] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.030] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.034] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/47/'||'%'
[2016-10-21 09:48:00.038] [INFO] console - Executing (a25290ac-a906-4408-8729-4e618802e409): COMMIT;
[2016-10-21 09:48:00.041] [INFO] console - [ 70, 475, {}, [ undefined ] ]
[2016-10-21 09:48:00.043] [INFO] console - [ 16,
  6521407578046464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 47 } ]
[2016-10-21 09:48:00.048] [INFO] console - [ 16,
  5616448254771200,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/47/',
       id: '47',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 09:48:00.055] [INFO] console - [ 16,
  7230045634428928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:48:00.062] [INFO] console - [ 16,
  2121057936867328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 09:48:00.066] [INFO] console - [ 16,
  7103386906263552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.starshinaChange',
  [],
  {} ]
[2016-10-21 09:48:00.074] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 48 }
[2016-10-21 09:48:00.077] [INFO] console - Executing (9fe6cfaf-94a1-4b9f-9b88-f996bc8e1f10): START TRANSACTION;
[2016-10-21 09:48:00.078] [INFO] console - Executing (9fe6cfaf-94a1-4b9f-9b88-f996bc8e1f10): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.088] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 09:48:00.094] [INFO] console - Executing (9fe6cfaf-94a1-4b9f-9b88-f996bc8e1f10): COMMIT;
[2016-10-21 09:48:00.096] [INFO] console - [ 70,
  476,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/47/48/',
      id: '48',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/47/',
      note: null,
      created_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '47',
      attachments: [] } ] ]
[2016-10-21 09:48:00.107] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 47 }
[2016-10-21 09:48:00.109] [INFO] console - Executing (d2941802-4db8-485b-bbc5-197da5faffbd): START TRANSACTION;
[2016-10-21 09:48:00.111] [INFO] console - Executing (d2941802-4db8-485b-bbc5-197da5faffbd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.121] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 09:48:00.126] [INFO] console - Executing (d2941802-4db8-485b-bbc5-197da5faffbd): COMMIT;
[2016-10-21 09:48:00.128] [INFO] console - [ 70,
  477,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/47/',
      id: '47',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:47:59 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 09:48:00.147] [INFO] console - Executing (4298be12-64d0-47cb-80c8-7be1eedbb8c5): START TRANSACTION;
[2016-10-21 09:48:00.149] [INFO] console - Executing (4298be12-64d0-47cb-80c8-7be1eedbb8c5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.154] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 09:48:00.157] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.163] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.170] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 09:48:00.176] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:48:00.172 +00:00' WHERE "id" = '47'
[2016-10-21 09:48:00.184] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '47'
                                    or path like '/4/47/'||'%'
[2016-10-21 09:48:00.187] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:48:00.189] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.193] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.202] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/47/'||'%'
[2016-10-21 09:48:00.206] [INFO] console - Executing (4298be12-64d0-47cb-80c8-7be1eedbb8c5): COMMIT;
[2016-10-21 09:48:00.207] [INFO] console - [ 70, 478, {}, [ undefined ] ]
[2016-10-21 09:48:00.209] [INFO] console - [ 16,
  5910917080416256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 47 } ]
[2016-10-21 09:48:00.214] [INFO] console - [ 16,
  5935680223969280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 09:48:00.261] [INFO] console - [ 16,
  7225427292585984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.starshinaChange',
  [],
  {} ]
[2016-10-21 09:48:00.287] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:48:00.290] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): START TRANSACTION;
[2016-10-21 09:48:00.291] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.299] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 04:48:00.293 +00:00','2016-10-21 04:48:00.293 +00:00',2,NULL) RETURNING *;
[2016-10-21 09:48:00.305] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:48:00.310] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.314] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 09:48:00.325] [INFO] console - Executing (7427c52f-68d5-4c98-b9e7-44da85695515): COMMIT;
[2016-10-21 09:48:00.326] [INFO] console - [ 70, 479, {}, [ '49' ] ]
[2016-10-21 09:48:00.335] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.349] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 09:48:00.353] [INFO] console - Executing (f180f937-bd7d-4b46-9319-2f4176d5c985): START TRANSACTION;
[2016-10-21 09:48:00.360] [INFO] console - Executing (f180f937-bd7d-4b46-9319-2f4176d5c985): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.370] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 09:48:00.378] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 49);
[2016-10-21 09:48:00.383] [INFO] console - [ 16,
  875848162869248,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 23 } ]
[2016-10-21 09:48:00.391] [INFO] console - [ 16,
  1414883637723136,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 49 } ]
[2016-10-21 09:48:00.397] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 09:48:00.401] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.410] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.412] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:48:00.422] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 04:48:00.414 +00:00' WHERE "id" = '49'
[2016-10-21 09:48:00.427] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '49'
                                    or path like '/49/'||'%'
[2016-10-21 09:48:00.431] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:48:00.435] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.439] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.445] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/49/'||'%'
[2016-10-21 09:48:00.448] [INFO] console - Executing (f180f937-bd7d-4b46-9319-2f4176d5c985): COMMIT;
[2016-10-21 09:48:00.452] [INFO] console - [ 70, 480, {}, [ undefined ] ]
[2016-10-21 09:48:00.455] [INFO] console - [ 16,
  8679894026289152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/49/',
       id: '49',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 09:48:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 09:48:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 09:48:00.465] [INFO] console - Executing (aecc50dd-4d39-4eac-affc-a2d154cfa132): START TRANSACTION;
[2016-10-21 09:48:00.468] [INFO] console - [ 16,
  5514713328779264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 09:48:00.470] [INFO] console - Executing (aecc50dd-4d39-4eac-affc-a2d154cfa132): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.479] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 49);
[2016-10-21 09:48:00.483] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.487] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.494] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 09:48:00.502] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 04:48:00.495 +00:00' WHERE "id" = '49'
[2016-10-21 09:48:00.506] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '49'
                                    or path like '/2/49/'||'%'
[2016-10-21 09:48:00.510] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 09:48:00.513] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.518] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.520] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/49/'||'%'
[2016-10-21 09:48:00.522] [INFO] console - Executing (aecc50dd-4d39-4eac-affc-a2d154cfa132): COMMIT;
[2016-10-21 09:48:00.524] [INFO] console - [ 70, 481, {}, [ undefined ] ]
[2016-10-21 09:48:00.526] [INFO] console - [ 16,
  5881780817100800,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 49 } ]
[2016-10-21 09:48:00.534] [INFO] console - [ 16,
  5357948138160128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 09:48:00.541] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 09:48:00.545] [INFO] console - Executing (22e9233b-d56e-4ad4-8787-8bfe17d2bbc1): START TRANSACTION;
[2016-10-21 09:48:00.546] [INFO] console - Executing (22e9233b-d56e-4ad4-8787-8bfe17d2bbc1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.551] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 09:48:00.557] [INFO] console - Executing (22e9233b-d56e-4ad4-8787-8bfe17d2bbc1): COMMIT;
[2016-10-21 09:48:00.559] [INFO] console - [ 70,
  482,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 09:48:00.580] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:48:00.586] [INFO] console - Executing (901262ff-791f-404f-bad2-00d29aca7444): START TRANSACTION;
[2016-10-21 09:48:00.588] [INFO] console - Executing (901262ff-791f-404f-bad2-00d29aca7444): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.601] [INFO] console - Executing (901262ff-791f-404f-bad2-00d29aca7444): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 09:48:00 GMT+0500 (YEKT)',0,0,'2016-10-21 04:48:00.590 +00:00','2016-10-21 04:48:00.590 +00:00',2,3) RETURNING *;
[2016-10-21 09:48:00.615] [INFO] console - Executing (901262ff-791f-404f-bad2-00d29aca7444): COMMIT;
[2016-10-21 09:48:00.625] [INFO] console - [ 70, 483, {}, [ '27' ] ]
[2016-10-21 09:48:00.628] [INFO] console - [ 16,
  3575012506206208,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '27' ] ]
[2016-10-21 09:48:00.671] [INFO] console - Executing (ce84fc84-9589-4d61-9eee-e950f6fc10b8): START TRANSACTION;
[2016-10-21 09:48:00.678] [INFO] console - Executing (ce84fc84-9589-4d61-9eee-e950f6fc10b8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.685] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:48:00.698] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 27);
[2016-10-21 09:48:00.708] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:48:00.718] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.731] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.734] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.737] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.742] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '27' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:48:00.755] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 04:48:00.748 +00:00','2016-10-21 04:48:00.748 +00:00','27','2') RETURNING *;
[2016-10-21 09:48:00.764] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 27, 1, k.id, 45, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 09:48:00.768] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 27 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 27 and value=-1) "protiv"
[2016-10-21 09:48:00.782] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 04:48:00.774 +00:00' WHERE "id" = '27'
[2016-10-21 09:48:00.784] [INFO] console - Executing (ce84fc84-9589-4d61-9eee-e950f6fc10b8): COMMIT;
[2016-10-21 09:48:00.786] [INFO] console - [ 70, 484, {}, [ undefined ] ]
[2016-10-21 09:48:00.787] [INFO] console - [ 16,
  7192892267298816,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id27.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '45',
    action: 'add',
    value: 1 } ]
[2016-10-21 09:48:00.803] [INFO] console - Executing (9c8e5d4e-91cb-45cc-8fa8-0343c7d41f75): START TRANSACTION;
[2016-10-21 09:48:00.805] [INFO] console - Executing (9c8e5d4e-91cb-45cc-8fa8-0343c7d41f75): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.810] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 09:48:00.816] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 45 }
[2016-10-21 09:48:00.818] [INFO] console - Executing (20b459b0-1633-4d07-a152-2d580c969ac0): START TRANSACTION;
[2016-10-21 09:48:00.821] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 27);
[2016-10-21 09:48:00.823] [INFO] console - Executing (20b459b0-1633-4d07-a152-2d580c969ac0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 09:48:00.834] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 45);
[2016-10-21 09:48:00.835] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 09:48:00.849] [INFO] console - Executing (20b459b0-1633-4d07-a152-2d580c969ac0): COMMIT;
[2016-10-21 09:48:00.852] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.855] [INFO] console - [ 70,
  486,
  {},
  [ { id: '45',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 09:48:00 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:48:00 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '27',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 09:48:00.874] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 09:48:00.876] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 09:48:00.886] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 09:48:00.895] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '27' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 09:48:00.898] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 27
                                and (
                                    id= 45
                                    or parent_id = 45
                                )
[2016-10-21 09:48:00.904] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 27 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 27 and value=-1) "protiv"
[2016-10-21 09:48:00.911] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 04:48:00.907 +00:00' WHERE "id" = '27'
[2016-10-21 09:48:00.916] [INFO] console - Executing (9c8e5d4e-91cb-45cc-8fa8-0343c7d41f75): COMMIT;
[2016-10-21 09:48:00.918] [INFO] console - [ 70, 485, {}, [ undefined ] ]
[2016-10-21 09:48:00.921] [INFO] console - [ 16,
  8614085360877568,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id27.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '45',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:02:03.025] [INFO] console - Executing (7870fe30-d108-4d6e-b79a-08af3edf0dbb): START TRANSACTION;
[2016-10-21 10:02:03.037] [INFO] console - Executing (7870fe30-d108-4d6e-b79a-08af3edf0dbb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:03.080] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:03.119] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 27);
[2016-10-21 10:02:03.132] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:02:03.144] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:03.149] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:03.155] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:03.167] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:03.174] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '27' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:02:03.206] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 05:02:03.188 +00:00','2016-10-21 05:02:03.188 +00:00','27','2') RETURNING *;
[2016-10-21 10:02:03.231] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 27, -1, k.id, 48, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:02:03.236] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 27 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 27 and value=-1) "protiv"
[2016-10-21 10:02:03.250] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=3,"updated_at"='2016-10-21 05:02:03.241 +00:00' WHERE "id" = '27'
[2016-10-21 10:02:03.255] [INFO] console - Executing (7870fe30-d108-4d6e-b79a-08af3edf0dbb): COMMIT;
[2016-10-21 10:02:03.257] [INFO] console - [ 70, 487, {}, [ undefined ] ]
[2016-10-21 10:02:03.262] [INFO] console - [ 16,
  3460861098196992,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id27.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 3,
    GOLOS: '48',
    action: 'add',
    value: -1 } ]
[2016-10-21 10:02:14.463] [INFO] console - [ 70, 489, {}, [ undefined ] ]
[2016-10-21 10:02:14.482] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:02:14.510] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:02:14.528] [INFO] console - Executing (2a758bf6-0ea6-436e-adb6-a35dac5fda30): START TRANSACTION;
[2016-10-21 10:02:14.530] [INFO] console - Executing (2a758bf6-0ea6-436e-adb6-a35dac5fda30): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:14.557] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:14.585] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:02:14.601] [INFO] console - Executing (2a758bf6-0ea6-436e-adb6-a35dac5fda30): COMMIT;
[2016-10-21 10:02:14.608] [INFO] console - [ 70,
  490,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:14.654] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:02:14.666] [INFO] console - [ 70, 491, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:02:14.700] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:14.711] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): START TRANSACTION;
[2016-10-21 10:02:14.712] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:14.721] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:14.714 +00:00','2016-10-21 05:02:14.714 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:14.730] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:14.735] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:14.739] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:14.742] [INFO] console - Executing (b84c3762-a318-4ac5-b7ee-507f9ac82200): COMMIT;
[2016-10-21 10:02:14.745] [INFO] console - [ 70, 492, {}, [ '50' ] ]
[2016-10-21 10:02:14.753] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:14.760] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:14.772] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:14.775] [INFO] console - [ 16,
  6393242213941248,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 24 } ]
[2016-10-21 10:02:14.782] [INFO] console - [ 16,
  3889284650106880,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 50 } ]
[2016-10-21 10:02:14.791] [INFO] console - Executing (d1d41355-35b8-4d47-bad2-50488aa7dfe3): START TRANSACTION;
[2016-10-21 10:02:14.794] [INFO] console - Executing (d1d41355-35b8-4d47-bad2-50488aa7dfe3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:14.800] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 10:02:14.812] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:14.823] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:14.828] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:14.831] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:14.844] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:02:14.833 +00:00' WHERE "id" = '50'
[2016-10-21 10:02:14.847] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '50'
                                    or path like '/50/'||'%'
[2016-10-21 10:02:14.852] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:14.856] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:14.861] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:14.864] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/50/'||'%'
[2016-10-21 10:02:14.867] [INFO] console - Executing (d1d41355-35b8-4d47-bad2-50488aa7dfe3): COMMIT;
[2016-10-21 10:02:14.869] [INFO] console - [ 70, 493, {}, [ undefined ] ]
[2016-10-21 10:02:14.871] [INFO] console - [ 16,
  5934200012144640,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/50/',
       id: '50',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:02:14.908] [INFO] console - [ 16,
  6424371816038400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:02:14.914] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:14.921] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): START TRANSACTION;
[2016-10-21 10:02:14.923] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:14.930] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:14.925 +00:00','2016-10-21 05:02:14.925 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:14.935] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:14.940] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:14.943] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:14.947] [INFO] console - Executing (71921666-355e-487a-b0bf-621e1c9853da): COMMIT;
[2016-10-21 10:02:14.949] [INFO] console - [ 70, 494, {}, [ '51' ] ]
[2016-10-21 10:02:14.953] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:14.958] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:14.972] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:14.978] [INFO] console - [ 16,
  6400360585363456,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 25 } ]
[2016-10-21 10:02:15.004] [INFO] console - [ 16,
  3461711786934272,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 51 } ]
[2016-10-21 10:02:15.008] [INFO] console - Executing (9f6bf761-9591-416f-ac02-8da0221bbfa9): START TRANSACTION;
[2016-10-21 10:02:15.010] [INFO] console - Executing (9f6bf761-9591-416f-ac02-8da0221bbfa9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.014] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 51);
[2016-10-21 10:02:15.021] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 10:02:15.027] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.031] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.035] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:15.043] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='50',"updated_at"='2016-10-21 05:02:15.038 +00:00' WHERE "id" = '51'
[2016-10-21 10:02:15.049] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/50/')
                                where
                                    id = '51'
                                    or path like '/51/'||'%'
[2016-10-21 10:02:15.055] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/50/' like path||id||'/%'
[2016-10-21 10:02:15.058] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/50/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.064] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('50', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.070] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/50/51/'||'%'
[2016-10-21 10:02:15.073] [INFO] console - Executing (9f6bf761-9591-416f-ac02-8da0221bbfa9): COMMIT;
[2016-10-21 10:02:15.075] [INFO] console - [ 70, 495, {}, [ undefined ] ]
[2016-10-21 10:02:15.077] [INFO] console - [ 16,
  7933583368912896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/50/51/',
       id: '51',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/50/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '50' } } ]
[2016-10-21 10:02:15.109] [INFO] console - [ 16,
  2068365902348288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:02:15.119] [INFO] console - [ 16,
  31441073209344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:02:15.133] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:02:15.139] [INFO] console - Executing (3197fbc8-9bbc-489d-a64d-27c5bef170d6): START TRANSACTION;
[2016-10-21 10:02:15.145] [INFO] console - Executing (3197fbc8-9bbc-489d-a64d-27c5bef170d6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.153] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:02:15.160] [INFO] console - Executing (3197fbc8-9bbc-489d-a64d-27c5bef170d6): COMMIT;
[2016-10-21 10:02:15.162] [INFO] console - [ 70,
  496,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:15.193] [INFO] console - Executing (45d3096e-022b-4182-a470-8b856db112b8): START TRANSACTION;
[2016-10-21 10:02:15.195] [INFO] console - Executing (45d3096e-022b-4182-a470-8b856db112b8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.203] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 10:02:15.208] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:02:15.212] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.218] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.222] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:15.229] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:02:15.224 +00:00' WHERE "id" = '50'
[2016-10-21 10:02:15.235] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '50'
                                    or path like '/2/50/'||'%'
[2016-10-21 10:02:15.240] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:02:15.244] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.250] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.256] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/50/'||'%'
[2016-10-21 10:02:15.259] [INFO] console - Executing (45d3096e-022b-4182-a470-8b856db112b8): COMMIT;
[2016-10-21 10:02:15.261] [INFO] console - [ 70, 497, {}, [ undefined ] ]
[2016-10-21 10:02:15.263] [INFO] console - [ 16,
  4373690621886464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 50 } ]
[2016-10-21 10:02:15.283] [INFO] console - [ 16,
  7119375823798272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/50/',
       id: '50',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:02:15.298] [INFO] console - [ 16,
  2120769872068608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:02:15.305] [INFO] console - [ 16,
  6793754774077440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:02:15.311] [INFO] console - [ 16,
  6879202794012672,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id51.starshinaChange',
  [],
  {} ]
[2016-10-21 10:02:15.332] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 51 }
[2016-10-21 10:02:15.335] [INFO] console - Executing (69ba76d8-3ce6-40e6-9367-5cd971400929): START TRANSACTION;
[2016-10-21 10:02:15.337] [INFO] console - Executing (69ba76d8-3ce6-40e6-9367-5cd971400929): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.344] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 51);
[2016-10-21 10:02:15.353] [INFO] console - Executing (69ba76d8-3ce6-40e6-9367-5cd971400929): COMMIT;
[2016-10-21 10:02:15.355] [INFO] console - [ 70,
  498,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/50/51/',
      id: '51',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/50/',
      note: null,
      created_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '50',
      attachments: [] } ] ]
[2016-10-21 10:02:15.368] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 50 }
[2016-10-21 10:02:15.370] [INFO] console - Executing (82e9c399-e537-45de-bfef-3366feb33b91): START TRANSACTION;
[2016-10-21 10:02:15.372] [INFO] console - Executing (82e9c399-e537-45de-bfef-3366feb33b91): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.377] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 10:02:15.383] [INFO] console - Executing (82e9c399-e537-45de-bfef-3366feb33b91): COMMIT;
[2016-10-21 10:02:15.385] [INFO] console - [ 70,
  499,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/50/',
      id: '50',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:02:14 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:02:15.410] [INFO] console - Executing (dc646067-c0de-4d35-88d1-c4c8fed34cd6): START TRANSACTION;
[2016-10-21 10:02:15.412] [INFO] console - Executing (dc646067-c0de-4d35-88d1-c4c8fed34cd6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.417] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 10:02:15.424] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.430] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.435] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:02:15.443] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:02:15.438 +00:00' WHERE "id" = '50'
[2016-10-21 10:02:15.452] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '50'
                                    or path like '/4/50/'||'%'
[2016-10-21 10:02:15.456] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:15.459] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.469] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.473] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/50/'||'%'
[2016-10-21 10:02:15.476] [INFO] console - Executing (dc646067-c0de-4d35-88d1-c4c8fed34cd6): COMMIT;
[2016-10-21 10:02:15.477] [INFO] console - [ 70, 500, {}, [ undefined ] ]
[2016-10-21 10:02:15.481] [INFO] console - [ 16,
  5829583876128768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 50 } ]
[2016-10-21 10:02:15.486] [INFO] console - [ 16,
  1323639687348224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:02:15.520] [INFO] console - [ 16,
  490546053251072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id51.starshinaChange',
  [],
  {} ]
[2016-10-21 10:02:15.536] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:15.540] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): START TRANSACTION;
[2016-10-21 10:02:15.542] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.551] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:15.545 +00:00','2016-10-21 05:02:15.545 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:15.555] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:15.560] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:15.564] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:15.569] [INFO] console - Executing (29ef0b1c-a86e-493c-9e9b-2d260d642fef): COMMIT;
[2016-10-21 10:02:15.571] [INFO] console - [ 70, 501, {}, [ '52' ] ]
[2016-10-21 10:02:15.576] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:15.585] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:15.590] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:15.593] [INFO] console - [ 16,
  6979226871791616,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 10:02:15.603] [INFO] console - [ 16,
  5950285092487168,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 52 } ]
[2016-10-21 10:02:15.606] [INFO] console - Executing (756ba965-eea6-4e61-a1e5-3ce12a97ea23): START TRANSACTION;
[2016-10-21 10:02:15.608] [INFO] console - Executing (756ba965-eea6-4e61-a1e5-3ce12a97ea23): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.612] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 10:02:15.623] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:15.626] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.632] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.635] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:15.645] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:02:15.637 +00:00' WHERE "id" = '52'
[2016-10-21 10:02:15.650] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '52'
                                    or path like '/52/'||'%'
[2016-10-21 10:02:15.652] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:15.656] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.660] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.664] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/52/'||'%'
[2016-10-21 10:02:15.666] [INFO] console - Executing (756ba965-eea6-4e61-a1e5-3ce12a97ea23): COMMIT;
[2016-10-21 10:02:15.668] [INFO] console - [ 70, 502, {}, [ undefined ] ]
[2016-10-21 10:02:15.670] [INFO] console - [ 16,
  7830271913099264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/52/',
       id: '52',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:02:15.678] [INFO] console - Executing (56acef7e-fc14-44ce-be74-6bb521c688b2): START TRANSACTION;
[2016-10-21 10:02:15.681] [INFO] console - Executing (56acef7e-fc14-44ce-be74-6bb521c688b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.685] [INFO] console - [ 16,
  4532337217896448,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:02:15.691] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 10:02:15.694] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.699] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.703] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:15.711] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:02:15.705 +00:00' WHERE "id" = '52'
[2016-10-21 10:02:15.715] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '52'
                                    or path like '/2/52/'||'%'
[2016-10-21 10:02:15.719] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:15.721] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.725] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.728] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/52/'||'%'
[2016-10-21 10:02:15.731] [INFO] console - Executing (56acef7e-fc14-44ce-be74-6bb521c688b2): COMMIT;
[2016-10-21 10:02:15.733] [INFO] console - [ 70, 503, {}, [ undefined ] ]
[2016-10-21 10:02:15.735] [INFO] console - [ 16,
  3885432014110720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 52 } ]
[2016-10-21 10:02:15.743] [INFO] console - [ 16,
  7268430671511552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:02:15.773] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:02:15.776] [INFO] console - Executing (b75e58b2-1907-4980-b73b-a290117646fa): START TRANSACTION;
[2016-10-21 10:02:15.778] [INFO] console - Executing (b75e58b2-1907-4980-b73b-a290117646fa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.792] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:02:15.798] [INFO] console - Executing (b75e58b2-1907-4980-b73b-a290117646fa): COMMIT;
[2016-10-21 10:02:15.800] [INFO] console - [ 70,
  504,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:02:15.820] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:15.827] [INFO] console - Executing (310de0f4-aad9-43fb-a8d6-47058fc2ed54): START TRANSACTION;
[2016-10-21 10:02:15.828] [INFO] console - Executing (310de0f4-aad9-43fb-a8d6-47058fc2ed54): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.835] [INFO] console - Executing (310de0f4-aad9-43fb-a8d6-47058fc2ed54): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT)',0,0,'2016-10-21 05:02:15.830 +00:00','2016-10-21 05:02:15.830 +00:00',2,3) RETURNING *;
[2016-10-21 10:02:15.841] [INFO] console - Executing (310de0f4-aad9-43fb-a8d6-47058fc2ed54): COMMIT;
[2016-10-21 10:02:15.843] [INFO] console - [ 70, 505, {}, [ '28' ] ]
[2016-10-21 10:02:15.845] [INFO] console - [ 16,
  1112427695439872,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '28' ] ]
[2016-10-21 10:02:15.865] [INFO] console - Executing (5e32bbe9-2555-4129-b84c-df3deb20c3ea): START TRANSACTION;
[2016-10-21 10:02:15.867] [INFO] console - Executing (5e32bbe9-2555-4129-b84c-df3deb20c3ea): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.874] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:15.880] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 28);
[2016-10-21 10:02:15.889] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:02:15.893] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:15.898] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:15.902] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:15.906] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:15.912] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '28' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:02:15.920] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:02:15.913 +00:00','2016-10-21 05:02:15.913 +00:00','28','2') RETURNING *;
[2016-10-21 10:02:15.927] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 28, 1, k.id, 51, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:02:15.931] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 28 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 28 and value=-1) "protiv"
[2016-10-21 10:02:15.938] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:02:15.934 +00:00' WHERE "id" = '28'
[2016-10-21 10:02:15.942] [INFO] console - Executing (5e32bbe9-2555-4129-b84c-df3deb20c3ea): COMMIT;
[2016-10-21 10:02:15.946] [INFO] console - [ 70, 506, {}, [ undefined ] ]
[2016-10-21 10:02:15.948] [INFO] console - [ 16,
  7045545589735424,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id28.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '51',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:02:15.962] [INFO] console - Executing (73b9a2e5-5c3e-4389-842f-2ab5bcccbff5): START TRANSACTION;
[2016-10-21 10:02:15.964] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 51 }
[2016-10-21 10:02:15.967] [INFO] console - Executing (04d79ae7-aae2-443d-9d82-1824c49b019e): START TRANSACTION;
[2016-10-21 10:02:15.975] [INFO] console - Executing (73b9a2e5-5c3e-4389-842f-2ab5bcccbff5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.976] [INFO] console - Executing (04d79ae7-aae2-443d-9d82-1824c49b019e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:15.980] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:15.991] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 51);
[2016-10-21 10:02:15.998] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 28);
[2016-10-21 10:02:16.000] [INFO] console - Executing (04d79ae7-aae2-443d-9d82-1824c49b019e): COMMIT;
[2016-10-21 10:02:16.006] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:02:16.007] [INFO] console - [ 70,
  508,
  {},
  [ { id: '51',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:15 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '28',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:16.020] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:16.034] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:16.042] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:16.048] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:16.053] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '28' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:02:16.059] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 28
                                and (
                                    id= 51
                                    or parent_id = 51
                                )
[2016-10-21 10:02:16.063] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 28 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 28 and value=-1) "protiv"
[2016-10-21 10:02:16.077] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:02:16.068 +00:00' WHERE "id" = '28'
[2016-10-21 10:02:16.079] [INFO] console - Executing (73b9a2e5-5c3e-4389-842f-2ab5bcccbff5): COMMIT;
[2016-10-21 10:02:16.081] [INFO] console - [ 70, 507, {}, [ undefined ] ]
[2016-10-21 10:02:16.085] [INFO] console - [ 16,
  7572892527099904,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id28.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '51',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:02:43.880] [INFO] console - [ 70, 510, {}, [ undefined ] ]
[2016-10-21 10:02:43.913] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:02:43.954] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:02:43.963] [INFO] console - Executing (3cf3e0d0-be1d-4b1f-896b-7e8e596ea852): START TRANSACTION;
[2016-10-21 10:02:43.965] [INFO] console - Executing (3cf3e0d0-be1d-4b1f-896b-7e8e596ea852): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:43.981] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:44.000] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:02:44.005] [INFO] console - Executing (3cf3e0d0-be1d-4b1f-896b-7e8e596ea852): COMMIT;
[2016-10-21 10:02:44.007] [INFO] console - [ 70,
  511,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:44.037] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:02:44.054] [INFO] console - [ 70, 512, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:02:44.084] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:44.092] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): START TRANSACTION;
[2016-10-21 10:02:44.095] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.103] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:44.098 +00:00','2016-10-21 05:02:44.098 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:44.110] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:44.115] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:44.119] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:44.122] [INFO] console - Executing (5b5df926-c50c-445f-a083-ccabd2b57abb): COMMIT;
[2016-10-21 10:02:44.124] [INFO] console - [ 70, 513, {}, [ '53' ] ]
[2016-10-21 10:02:44.138] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:44.142] [INFO] console - Executing (b2c06ba0-1021-43b8-be82-ff732b4a3f9c): START TRANSACTION;
[2016-10-21 10:02:44.146] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:44.147] [INFO] console - Executing (b2c06ba0-1021-43b8-be82-ff732b4a3f9c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.158] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:44.159] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 10:02:44.162] [INFO] console - [ 16,
  4442926031568896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 27 } ]
[2016-10-21 10:02:44.168] [INFO] console - [ 16,
  5230900858060800,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 53 } ]
[2016-10-21 10:02:44.176] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:44.179] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.184] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.187] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:44.198] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:02:44.189 +00:00' WHERE "id" = '53'
[2016-10-21 10:02:44.201] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '53'
                                    or path like '/53/'||'%'
[2016-10-21 10:02:44.209] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:44.212] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.226] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.230] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/53/'||'%'
[2016-10-21 10:02:44.233] [INFO] console - Executing (b2c06ba0-1021-43b8-be82-ff732b4a3f9c): COMMIT;
[2016-10-21 10:02:44.235] [INFO] console - [ 70, 514, {}, [ undefined ] ]
[2016-10-21 10:02:44.247] [INFO] console - [ 16,
  1236420435902464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/53/',
       id: '53',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:02:44.259] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:44.261] [INFO] console - [ 16,
  5683181225246720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:02:44.277] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): START TRANSACTION;
[2016-10-21 10:02:44.279] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.285] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:44.280 +00:00','2016-10-21 05:02:44.280 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:44.290] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:44.294] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:44.304] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:44.308] [INFO] console - Executing (978dea21-d157-407e-9b3f-f33bc90507d8): COMMIT;
[2016-10-21 10:02:44.310] [INFO] console - [ 70, 515, {}, [ '54' ] ]
[2016-10-21 10:02:44.317] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:44.324] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:44.329] [INFO] console - Executing (3fd74714-d6a7-41f5-8cf7-4eda16ecb1e2): START TRANSACTION;
[2016-10-21 10:02:44.332] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:44.339] [INFO] console - Executing (3fd74714-d6a7-41f5-8cf7-4eda16ecb1e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.340] [INFO] console - [ 16,
  5681938413125632,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 28 } ]
[2016-10-21 10:02:44.349] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 54);
[2016-10-21 10:02:44.356] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 10:02:44.357] [INFO] console - [ 16,
  7043172093919232,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 54 } ]
[2016-10-21 10:02:44.365] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.370] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.373] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:44.383] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='53',"updated_at"='2016-10-21 05:02:44.376 +00:00' WHERE "id" = '54'
[2016-10-21 10:02:44.386] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/53/')
                                where
                                    id = '54'
                                    or path like '/54/'||'%'
[2016-10-21 10:02:44.393] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/53/' like path||id||'/%'
[2016-10-21 10:02:44.397] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/53/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.402] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('53', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.408] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/53/54/'||'%'
[2016-10-21 10:02:44.410] [INFO] console - Executing (3fd74714-d6a7-41f5-8cf7-4eda16ecb1e2): COMMIT;
[2016-10-21 10:02:44.412] [INFO] console - [ 70, 516, {}, [ undefined ] ]
[2016-10-21 10:02:44.415] [INFO] console - [ 16,
  3060383933792256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id53.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/53/54/',
       id: '54',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/53/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '53' } } ]
[2016-10-21 10:02:44.426] [INFO] console - [ 16,
  5281594459815936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id53.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:02:44.433] [INFO] console - [ 16,
  8451167684132864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:02:44.447] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:02:44.450] [INFO] console - Executing (bcf750a6-96c5-4e8e-90d3-b80ce1d10c0f): START TRANSACTION;
[2016-10-21 10:02:44.455] [INFO] console - Executing (bcf750a6-96c5-4e8e-90d3-b80ce1d10c0f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.464] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:02:44.471] [INFO] console - Executing (bcf750a6-96c5-4e8e-90d3-b80ce1d10c0f): COMMIT;
[2016-10-21 10:02:44.473] [INFO] console - [ 70,
  517,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:44.495] [INFO] console - Executing (443d9766-19c2-42ce-b5fa-f6f9dcd48f66): START TRANSACTION;
[2016-10-21 10:02:44.496] [INFO] console - Executing (443d9766-19c2-42ce-b5fa-f6f9dcd48f66): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.501] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 10:02:44.507] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:02:44.510] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.520] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.525] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:44.535] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:02:44.527 +00:00' WHERE "id" = '53'
[2016-10-21 10:02:44.541] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '53'
                                    or path like '/2/53/'||'%'
[2016-10-21 10:02:44.552] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:02:44.555] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.564] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.568] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/53/'||'%'
[2016-10-21 10:02:44.572] [INFO] console - Executing (443d9766-19c2-42ce-b5fa-f6f9dcd48f66): COMMIT;
[2016-10-21 10:02:44.574] [INFO] console - [ 70, 518, {}, [ undefined ] ]
[2016-10-21 10:02:44.578] [INFO] console - [ 16,
  3850078196334592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 53 } ]
[2016-10-21 10:02:44.625] [INFO] console - [ 16,
  2231161610829824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/53/',
       id: '53',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:02:44.640] [INFO] console - [ 16,
  2775992036753408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:02:44.646] [INFO] console - [ 16,
  6484321881817088,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:02:44.653] [INFO] console - [ 16,
  7864651119329280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id54.starshinaChange',
  [],
  {} ]
[2016-10-21 10:02:44.662] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 54 }
[2016-10-21 10:02:44.669] [INFO] console - Executing (285692f5-275a-4865-800d-dbcba0c8e994): START TRANSACTION;
[2016-10-21 10:02:44.670] [INFO] console - Executing (285692f5-275a-4865-800d-dbcba0c8e994): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.680] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 54);
[2016-10-21 10:02:44.688] [INFO] console - Executing (285692f5-275a-4865-800d-dbcba0c8e994): COMMIT;
[2016-10-21 10:02:44.690] [INFO] console - [ 70,
  519,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/53/54/',
      id: '54',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/53/',
      note: null,
      created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '53',
      attachments: [] } ] ]
[2016-10-21 10:02:44.707] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 53 }
[2016-10-21 10:02:44.710] [INFO] console - Executing (9e3c190f-4a4a-42d0-a55d-9c3aeba8ed30): START TRANSACTION;
[2016-10-21 10:02:44.712] [INFO] console - Executing (9e3c190f-4a4a-42d0-a55d-9c3aeba8ed30): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.719] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 10:02:44.806] [INFO] console - Executing (9e3c190f-4a4a-42d0-a55d-9c3aeba8ed30): COMMIT;
[2016-10-21 10:02:44.807] [INFO] console - [ 70,
  520,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/53/',
      id: '53',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:02:44.844] [INFO] console - Executing (eb5fe7ef-3ad1-400b-9fde-9a8ffaa8db05): START TRANSACTION;
[2016-10-21 10:02:44.846] [INFO] console - Executing (eb5fe7ef-3ad1-400b-9fde-9a8ffaa8db05): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.849] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 10:02:44.865] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.879] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.882] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:02:44.902] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:02:44.896 +00:00' WHERE "id" = '53'
[2016-10-21 10:02:44.906] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '53'
                                    or path like '/4/53/'||'%'
[2016-10-21 10:02:44.914] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:44.918] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:44.923] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:44.926] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/53/'||'%'
[2016-10-21 10:02:44.930] [INFO] console - Executing (eb5fe7ef-3ad1-400b-9fde-9a8ffaa8db05): COMMIT;
[2016-10-21 10:02:44.932] [INFO] console - [ 70, 521, {}, [ undefined ] ]
[2016-10-21 10:02:44.935] [INFO] console - [ 16,
  7490592552517632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 53 } ]
[2016-10-21 10:02:44.943] [INFO] console - [ 16,
  7909364591493120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:02:44.952] [INFO] console - [ 16,
  4704013748535296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id54.starshinaChange',
  [],
  {} ]
[2016-10-21 10:02:44.983] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:44.987] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): START TRANSACTION;
[2016-10-21 10:02:44.989] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:44.996] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:02:44.991 +00:00','2016-10-21 05:02:44.991 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:02:45.001] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:45.005] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:45.008] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:02:45.013] [INFO] console - Executing (834e82fe-aa05-4815-a4e4-9a1d92fcfe61): COMMIT;
[2016-10-21 10:02:45.015] [INFO] console - [ 70, 522, {}, [ '55' ] ]
[2016-10-21 10:02:45.020] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:45.025] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:02:45.032] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:02:45.035] [INFO] console - Executing (789ae06c-e24e-4a8c-acbb-98b345613b72): START TRANSACTION;
[2016-10-21 10:02:45.036] [INFO] console - [ 16,
  1185776022847488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 29 } ]
[2016-10-21 10:02:45.040] [INFO] console - Executing (789ae06c-e24e-4a8c-acbb-98b345613b72): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:45.044] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 10:02:45.046] [INFO] console - [ 16,
  8616178979176448,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 55 } ]
[2016-10-21 10:02:45.052] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:02:45.056] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:45.061] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:45.065] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:45.078] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:02:45.067 +00:00' WHERE "id" = '55'
[2016-10-21 10:02:45.082] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '55'
                                    or path like '/55/'||'%'
[2016-10-21 10:02:45.085] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:45.088] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:45.092] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:45.096] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/55/'||'%'
[2016-10-21 10:02:45.099] [INFO] console - Executing (789ae06c-e24e-4a8c-acbb-98b345613b72): COMMIT;
[2016-10-21 10:02:45.102] [INFO] console - [ 70, 523, {}, [ undefined ] ]
[2016-10-21 10:02:45.107] [INFO] console - [ 16,
  943914959765504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/55/',
       id: '55',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:02:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:02:45 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:02:45.118] [INFO] console - Executing (358ae306-52fd-48f7-97a1-1a790088963b): START TRANSACTION;
[2016-10-21 10:02:45.123] [INFO] console - [ 16,
  1013953486389248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:02:45.136] [INFO] console - Executing (358ae306-52fd-48f7-97a1-1a790088963b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:45.143] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 10:02:45.147] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:02:45.158] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:45.167] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:02:45.173] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:02:45.169 +00:00' WHERE "id" = '55'
[2016-10-21 10:02:45.176] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '55'
                                    or path like '/2/55/'||'%'
[2016-10-21 10:02:45.182] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:02:45.184] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:45.188] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:45.191] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/55/'||'%'
[2016-10-21 10:02:45.196] [INFO] console - Executing (358ae306-52fd-48f7-97a1-1a790088963b): COMMIT;
[2016-10-21 10:02:45.199] [INFO] console - [ 70, 524, {}, [ undefined ] ]
[2016-10-21 10:02:45.204] [INFO] console - [ 16,
  5422039139614720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 55 } ]
[2016-10-21 10:02:45.211] [INFO] console - [ 16,
  1386079143854080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:02:45.220] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:02:45.224] [INFO] console - Executing (1c79193c-0f15-427d-8dec-f49d43d5bf63): START TRANSACTION;
[2016-10-21 10:02:45.226] [INFO] console - Executing (1c79193c-0f15-427d-8dec-f49d43d5bf63): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:45.233] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:02:45.239] [INFO] console - Executing (1c79193c-0f15-427d-8dec-f49d43d5bf63): COMMIT;
[2016-10-21 10:02:45.241] [INFO] console - [ 70,
  525,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:02:45.268] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:45.273] [INFO] console - Executing (c5a0e351-81df-4d77-b68e-fcc8b4f78e1d): START TRANSACTION;
[2016-10-21 10:02:45.277] [INFO] console - Executing (c5a0e351-81df-4d77-b68e-fcc8b4f78e1d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:45.289] [INFO] console - Executing (c5a0e351-81df-4d77-b68e-fcc8b4f78e1d): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:02:45 GMT+0500 (YEKT)',0,0,'2016-10-21 05:02:45.282 +00:00','2016-10-21 05:02:45.282 +00:00',2,3) RETURNING *;
[2016-10-21 10:02:45.294] [INFO] console - Executing (c5a0e351-81df-4d77-b68e-fcc8b4f78e1d): COMMIT;
[2016-10-21 10:02:45.297] [INFO] console - [ 70, 526, {}, [ '29' ] ]
[2016-10-21 10:02:45.303] [INFO] console - [ 16,
  8989224866938880,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '29' ] ]
[2016-10-21 10:02:56.683] [INFO] console - Executing (40f5e432-561a-4360-9959-ff619263066a): START TRANSACTION;
[2016-10-21 10:02:56.687] [INFO] console - Executing (40f5e432-561a-4360-9959-ff619263066a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:56.729] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:56.745] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 29);
[2016-10-21 10:02:56.762] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:02:56.769] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:56.777] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:56.781] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:56.788] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:56.793] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '29' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:02:56.804] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:02:56.798 +00:00','2016-10-21 05:02:56.798 +00:00','29','2') RETURNING *;
[2016-10-21 10:02:56.826] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 29, 1, k.id, 54, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:02:56.830] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 29 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 29 and value=-1) "protiv"
[2016-10-21 10:02:56.845] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:02:56.835 +00:00' WHERE "id" = '29'
[2016-10-21 10:02:56.853] [INFO] console - Executing (40f5e432-561a-4360-9959-ff619263066a): COMMIT;
[2016-10-21 10:02:56.855] [INFO] console - [ 70, 527, {}, [ undefined ] ]
[2016-10-21 10:02:56.857] [INFO] console - [ 16,
  7825631326765056,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id29.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '54',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:02:56.869] [INFO] console - Executing (4df03c6e-95c8-4459-b997-9bae59528d89): START TRANSACTION;
[2016-10-21 10:02:56.871] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 54 }
[2016-10-21 10:02:56.874] [INFO] console - Executing (8e1c508d-9918-4218-b3ee-ad80065f10b5): START TRANSACTION;
[2016-10-21 10:02:56.877] [INFO] console - Executing (4df03c6e-95c8-4459-b997-9bae59528d89): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:56.879] [INFO] console - Executing (8e1c508d-9918-4218-b3ee-ad80065f10b5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:02:56.931] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:02:56.956] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 54);
[2016-10-21 10:02:56.967] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 29);
[2016-10-21 10:02:56.970] [INFO] console - Executing (8e1c508d-9918-4218-b3ee-ad80065f10b5): COMMIT;
[2016-10-21 10:02:56.977] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:02:56.979] [INFO] console - [ 70,
  529,
  {},
  [ { id: '54',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:02:56 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:02:56 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '29',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:02:56.989] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:56.998] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:02:57.006] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:02:57.043] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:02:57.050] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '29' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:02:57.065] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 29
                                and (
                                    id= 54
                                    or parent_id = 54
                                )
[2016-10-21 10:02:57.070] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 29 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 29 and value=-1) "protiv"
[2016-10-21 10:02:57.084] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:02:57.075 +00:00' WHERE "id" = '29'
[2016-10-21 10:02:57.097] [INFO] console - Executing (4df03c6e-95c8-4459-b997-9bae59528d89): COMMIT;
[2016-10-21 10:02:57.099] [INFO] console - [ 70, 528, {}, [ undefined ] ]
[2016-10-21 10:02:57.103] [INFO] console - [ 16,
  6704532364984320,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id29.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '54',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:03:29.336] [INFO] console - Executing (94c0e1b3-6d80-4491-a26d-22baece22f2b): START TRANSACTION;
[2016-10-21 10:03:29.343] [INFO] console - Executing (94c0e1b3-6d80-4491-a26d-22baece22f2b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:03:29.378] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:03:29.398] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 29);
[2016-10-21 10:03:29.412] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:03:29.425] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:03:29.432] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:03:29.438] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:03:29.446] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:03:29.453] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '29' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:03:29.467] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 05:03:29.457 +00:00','2016-10-21 05:03:29.457 +00:00','29','2') RETURNING *;
[2016-10-21 10:03:29.477] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 29, -1, k.id, 57, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:03:29.481] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 29 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 29 and value=-1) "protiv"
[2016-10-21 10:03:29.493] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=3,"updated_at"='2016-10-21 05:03:29.484 +00:00' WHERE "id" = '29'
[2016-10-21 10:03:29.497] [INFO] console - Executing (94c0e1b3-6d80-4491-a26d-22baece22f2b): COMMIT;
[2016-10-21 10:03:29.500] [INFO] console - [ 70, 530, {}, [ undefined ] ]
[2016-10-21 10:03:29.503] [INFO] console - [ 16,
  4238514466062336,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id29.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 3,
    GOLOS: '57',
    action: 'add',
    value: -1 } ]
[2016-10-21 10:08:23.686] [INFO] console - [ 70, 532, {}, [ undefined ] ]
[2016-10-21 10:08:23.711] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:08:23.765] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:08:23.790] [INFO] console - Executing (768b9a29-647b-4876-bf64-1c43f93adee6): START TRANSACTION;
[2016-10-21 10:08:23.794] [INFO] console - Executing (768b9a29-647b-4876-bf64-1c43f93adee6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:23.798] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:08:23.834] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:23.852] [INFO] console - Executing (768b9a29-647b-4876-bf64-1c43f93adee6): COMMIT;
[2016-10-21 10:08:23.855] [INFO] console - [ 70,
  533,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:23.898] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:08:23.931] [INFO] console - [ 70, 534, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:08:23.999] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:24.006] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): START TRANSACTION;
[2016-10-21 10:08:24.008] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.021] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:24.011 +00:00','2016-10-21 05:08:24.011 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:24.036] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.049] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.055] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:24.058] [INFO] console - Executing (0a6a7886-f614-418d-a912-fe81e4969df5): COMMIT;
[2016-10-21 10:08:24.061] [INFO] console - [ 70, 535, {}, [ '56' ] ]
[2016-10-21 10:08:24.080] [INFO] console - Executing (4e0990ef-9488-4541-97fc-3ff90414fa2c): START TRANSACTION;
[2016-10-21 10:08:24.083] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.085] [INFO] console - Executing (4e0990ef-9488-4541-97fc-3ff90414fa2c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.094] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:24.097] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 10:08:24.108] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:24.110] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:24.115] [INFO] console - [ 16,
  8003711284543488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 10:08:24.125] [INFO] console - [ 16,
  6866959312355328,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 56 } ]
[2016-10-21 10:08:24.130] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.139] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.142] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.154] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:24.145 +00:00' WHERE "id" = '56'
[2016-10-21 10:08:24.159] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '56'
                                    or path like '/56/'||'%'
[2016-10-21 10:08:24.168] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:24.173] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.181] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.186] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/56/'||'%'
[2016-10-21 10:08:24.188] [INFO] console - Executing (4e0990ef-9488-4541-97fc-3ff90414fa2c): COMMIT;
[2016-10-21 10:08:24.195] [INFO] console - [ 70, 536, {}, [ undefined ] ]
[2016-10-21 10:08:24.199] [INFO] console - [ 16,
  2978770264784896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/56/',
       id: '56',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:24.215] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:24.217] [INFO] console - [ 16,
  2733788620652544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:24.224] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): START TRANSACTION;
[2016-10-21 10:08:24.226] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.234] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:24.228 +00:00','2016-10-21 05:08:24.228 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:24.239] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.244] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.248] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:24.254] [INFO] console - Executing (be48cf81-9b95-472b-b6af-14cb20c548c7): COMMIT;
[2016-10-21 10:08:24.257] [INFO] console - [ 70, 537, {}, [ '57' ] ]
[2016-10-21 10:08:24.264] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.266] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:08:24.275] [INFO] console - Executing (3ac44bf7-add9-42e4-9ecb-44ba79e7ce7b): START TRANSACTION;
[2016-10-21 10:08:24.278] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:24.279] [INFO] console - Executing (3ac44bf7-add9-42e4-9ecb-44ba79e7ce7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.282] [INFO] console - Executing (40ebc857-cf56-48f7-94c3-c217a970cd50): START TRANSACTION;
[2016-10-21 10:08:24.285] [INFO] console - Executing (40ebc857-cf56-48f7-94c3-c217a970cd50): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.298] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:24.299] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:24.305] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 57);
[2016-10-21 10:08:24.307] [INFO] console - [ 16,
  1999857191485440,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 31 } ]
[2016-10-21 10:08:24.320] [INFO] console - [ 16,
  8346625554513920,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 57 } ]
[2016-10-21 10:08:24.326] [INFO] console - Executing (3ac44bf7-add9-42e4-9ecb-44ba79e7ce7b): COMMIT;
[2016-10-21 10:08:24.330] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 10:08:24.334] [INFO] console - [ 70,
  538,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:24.340] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.346] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.349] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.360] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='56',"updated_at"='2016-10-21 05:08:24.354 +00:00' WHERE "id" = '57'
[2016-10-21 10:08:24.365] [INFO] console - Executing (dcc896c5-d4c8-400e-94fe-332d98d9b640): START TRANSACTION;
[2016-10-21 10:08:24.367] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/56/')
                                where
                                    id = '57'
                                    or path like '/57/'||'%'
[2016-10-21 10:08:24.369] [INFO] console - Executing (dcc896c5-d4c8-400e-94fe-332d98d9b640): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.377] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 10:08:24.380] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/56/' like path||id||'/%'
[2016-10-21 10:08:24.385] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:24.390] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/56/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.394] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.401] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('56', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.409] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.415] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/56/57/'||'%'
[2016-10-21 10:08:24.421] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:24.424] [INFO] console - Executing (40ebc857-cf56-48f7-94c3-c217a970cd50): COMMIT;
[2016-10-21 10:08:24.437] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:08:24.426 +00:00' WHERE "id" = '56'
[2016-10-21 10:08:24.439] [INFO] console - [ 70, 539, {}, [ undefined ] ]
[2016-10-21 10:08:24.443] [INFO] console - [ 16,
  3668747506155520,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id56.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/56/57/',
       id: '57',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/56/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '56' } } ]
[2016-10-21 10:08:24.451] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '56'
                                    or path like '/2/56/'||'%'
[2016-10-21 10:08:24.458] [INFO] console - [ 16,
  8004145246109696,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id56.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:24.463] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:08:24.466] [INFO] console - [ 16,
  1075265140686848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:08:24.470] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.483] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.489] [INFO] console - Executing (68bcc7ac-c400-4f94-9b82-7faec0304873): START TRANSACTION;
[2016-10-21 10:08:24.495] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/56/'||'%'
[2016-10-21 10:08:24.498] [INFO] console - Executing (68bcc7ac-c400-4f94-9b82-7faec0304873): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.502] [INFO] console - Executing (dcc896c5-d4c8-400e-94fe-332d98d9b640): COMMIT;
[2016-10-21 10:08:24.506] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 10:08:24.513] [INFO] console - [ 70, 540, {}, [ undefined ] ]
[2016-10-21 10:08:24.516] [INFO] console - [ 16,
  5630752683196416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 56 } ]
[2016-10-21 10:08:24.522] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.527] [INFO] console - [ 16,
  7791086508441600,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/56/',
       id: '56',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:08:24.538] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.546] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:08:24.549] [INFO] console - [ 16,
  622270846337024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:24.570] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:24.557 +00:00' WHERE "id" = '56'
[2016-10-21 10:08:24.573] [INFO] console - [ 16,
  459629156892672,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:24.578] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '56'
                                    or path like '/4/56/'||'%'
[2016-10-21 10:08:24.581] [INFO] console - [ 16,
  8461096862089216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id57.starshinaChange',
  [],
  {} ]
[2016-10-21 10:08:24.586] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.592] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.597] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.605] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:24.611] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/56/'||'%'
[2016-10-21 10:08:24.614] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): START TRANSACTION;
[2016-10-21 10:08:24.617] [INFO] console - Executing (68bcc7ac-c400-4f94-9b82-7faec0304873): COMMIT;
[2016-10-21 10:08:24.619] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.626] [INFO] console - [ 70, 541, {}, [ undefined ] ]
[2016-10-21 10:08:24.629] [INFO] console - [ 16,
  2622972221194240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 56 } ]
[2016-10-21 10:08:24.637] [INFO] console - [ 16,
  3706420857929728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: -1 } ]
[2016-10-21 10:08:24.646] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:24.634 +00:00','2016-10-21 05:08:24.634 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:24.647] [INFO] console - [ 16,
  8974690424979456,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id57.starshinaChange',
  [],
  {} ]
[2016-10-21 10:08:24.653] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.658] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.662] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:24.668] [INFO] console - Executing (31554875-8fa8-460b-82c6-4679c1fc222c): COMMIT;
[2016-10-21 10:08:24.670] [INFO] console - [ 70, 542, {}, [ '58' ] ]
[2016-10-21 10:08:24.676] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:24.683] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:24.687] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:24.691] [INFO] console - [ 16,
  7808901426708480,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 32 } ]
[2016-10-21 10:08:24.702] [INFO] console - Executing (dc7fc31b-d656-4ddd-bdd1-cb5b292a5c43): START TRANSACTION;
[2016-10-21 10:08:24.703] [INFO] console - [ 16,
  6930271184093184,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 58 } ]
[2016-10-21 10:08:24.708] [INFO] console - Executing (dc7fc31b-d656-4ddd-bdd1-cb5b292a5c43): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.715] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 10:08:24.721] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:24.725] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.729] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.732] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.739] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:24.734 +00:00' WHERE "id" = '58'
[2016-10-21 10:08:24.744] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '58'
                                    or path like '/58/'||'%'
[2016-10-21 10:08:24.747] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:24.750] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.756] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.760] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/58/'||'%'
[2016-10-21 10:08:24.763] [INFO] console - Executing (dc7fc31b-d656-4ddd-bdd1-cb5b292a5c43): COMMIT;
[2016-10-21 10:08:24.764] [INFO] console - [ 70, 543, {}, [ undefined ] ]
[2016-10-21 10:08:24.767] [INFO] console - [ 16,
  1025318609485824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/58/',
       id: '58',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:24.775] [INFO] console - Executing (88b83880-d7b2-4aee-aab1-da8d9315177f): START TRANSACTION;
[2016-10-21 10:08:24.777] [INFO] console - [ 16,
  2188544162398208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:08:24.781] [INFO] console - Executing (88b83880-d7b2-4aee-aab1-da8d9315177f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.787] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 10:08:24.791] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.796] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.801] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:24.817] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:24.803 +00:00' WHERE "id" = '58'
[2016-10-21 10:08:24.819] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:08:24.822] [INFO] console - Executing (9caedb6b-8cdf-4118-8f13-b216b72a17cf): START TRANSACTION;
[2016-10-21 10:08:24.825] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '58'
                                    or path like '/2/58/'||'%'
[2016-10-21 10:08:24.827] [INFO] console - Executing (9caedb6b-8cdf-4118-8f13-b216b72a17cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.833] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:24.842] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:08:24.852] [INFO] console - Executing (9caedb6b-8cdf-4118-8f13-b216b72a17cf): COMMIT;
[2016-10-21 10:08:24.854] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:24.858] [INFO] console - [ 70,
  545,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:08:24.868] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:24.872] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/58/'||'%'
[2016-10-21 10:08:24.875] [INFO] console - Executing (88b83880-d7b2-4aee-aab1-da8d9315177f): COMMIT;
[2016-10-21 10:08:24.876] [INFO] console - [ 70, 544, {}, [ undefined ] ]
[2016-10-21 10:08:24.879] [INFO] console - [ 16,
  68043992465408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 58 } ]
[2016-10-21 10:08:24.887] [INFO] console - [ 16,
  8004721440718848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:24.894] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:24.899] [INFO] console - Executing (9df73602-1f3f-4a27-a3a1-53f7463b6255): START TRANSACTION;
[2016-10-21 10:08:24.901] [INFO] console - Executing (9df73602-1f3f-4a27-a3a1-53f7463b6255): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.918] [INFO] console - Executing (9df73602-1f3f-4a27-a3a1-53f7463b6255): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:08:24 GMT+0500 (YEKT)',0,0,'2016-10-21 05:08:24.904 +00:00','2016-10-21 05:08:24.904 +00:00',2,3) RETURNING *;
[2016-10-21 10:08:24.922] [INFO] console - Executing (9df73602-1f3f-4a27-a3a1-53f7463b6255): COMMIT;
[2016-10-21 10:08:24.924] [INFO] console - [ 70, 546, {}, [ '30' ] ]
[2016-10-21 10:08:24.926] [INFO] console - [ 16,
  6768109073465344,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '30' ] ]
[2016-10-21 10:08:24.954] [INFO] console - Executing (71f177b4-621b-43a6-bc3f-f096824d577d): START TRANSACTION;
[2016-10-21 10:08:24.957] [INFO] console - Executing (71f177b4-621b-43a6-bc3f-f096824d577d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:24.962] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:24.981] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 30);
[2016-10-21 10:08:24.994] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:24.999] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:25.005] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:25.015] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:25.019] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:25.032] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '30' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:25.043] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:08:25.036 +00:00','2016-10-21 05:08:25.036 +00:00','30','2') RETURNING *;
[2016-10-21 10:08:25.048] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 30, 1, k.id, 60, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:08:25.056] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 30 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 30 and value=-1) "protiv"
[2016-10-21 10:08:25.064] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:08:25.058 +00:00' WHERE "id" = '30'
[2016-10-21 10:08:25.073] [INFO] console - Executing (71f177b4-621b-43a6-bc3f-f096824d577d): COMMIT;
[2016-10-21 10:08:25.078] [INFO] console - [ 70, 547, {}, [ undefined ] ]
[2016-10-21 10:08:25.083] [INFO] console - [ 16,
  7166718247960576,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id30.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '60',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:08:25.112] [INFO] console - Executing (dfdb0c40-dfa2-4803-9995-e23bb03c5681): START TRANSACTION;
[2016-10-21 10:08:25.114] [INFO] console - Executing (dfdb0c40-dfa2-4803-9995-e23bb03c5681): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:25.125] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:25.136] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 60 }
[2016-10-21 10:08:25.141] [INFO] console - Executing (ad215f9b-aa35-4fe3-8e36-6ffe697af467): START TRANSACTION;
[2016-10-21 10:08:25.149] [INFO] console - Executing (ad215f9b-aa35-4fe3-8e36-6ffe697af467): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:25.157] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 30);
[2016-10-21 10:08:25.167] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 60);
[2016-10-21 10:08:25.170] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:25.178] [INFO] console - Executing (ad215f9b-aa35-4fe3-8e36-6ffe697af467): COMMIT;
[2016-10-21 10:08:25.183] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:25.184] [INFO] console - [ 70,
  549,
  {},
  [ { id: '60',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:08:25 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:08:25 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '30',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:25.195] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:25.201] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:25.205] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:25.211] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '30' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:25.217] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 30
                                and (
                                    id= 60
                                    or parent_id = 60
                                )
[2016-10-21 10:08:25.221] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 30 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 30 and value=-1) "protiv"
[2016-10-21 10:08:25.235] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:08:25.230 +00:00' WHERE "id" = '30'
[2016-10-21 10:08:25.335] [INFO] console - Executing (dfdb0c40-dfa2-4803-9995-e23bb03c5681): COMMIT;
[2016-10-21 10:08:25.339] [INFO] console - [ 70, 548, {}, [ undefined ] ]
[2016-10-21 10:08:25.347] [INFO] console - [ 16,
  3587902466424832,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id30.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '60',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:08:39.239] [INFO] console - [ 70, 551, {}, [ undefined ] ]
[2016-10-21 10:08:39.263] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:08:39.310] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:08:39.316] [INFO] console - Executing (8987e3b9-393b-4123-8ee3-674599d1993e): START TRANSACTION;
[2016-10-21 10:08:39.318] [INFO] console - Executing (8987e3b9-393b-4123-8ee3-674599d1993e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:39.337] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:39.351] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:08:39.359] [INFO] console - Executing (8987e3b9-393b-4123-8ee3-674599d1993e): COMMIT;
[2016-10-21 10:08:39.363] [INFO] console - [ 70,
  552,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:39.403] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:08:39.409] [INFO] console - [ 70, 553, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:08:39.443] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:39.474] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): START TRANSACTION;
[2016-10-21 10:08:39.476] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:39.487] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:39.478 +00:00','2016-10-21 05:08:39.478 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:39.494] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:39.500] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:39.504] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:39.508] [INFO] console - Executing (4d96e8a8-968d-4335-8de9-c40e55d92818): COMMIT;
[2016-10-21 10:08:39.509] [INFO] console - [ 70, 554, {}, [ '59' ] ]
[2016-10-21 10:08:39.526] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:39.532] [INFO] console - Executing (bb84042b-7acd-401e-a223-6b0012865ac2): START TRANSACTION;
[2016-10-21 10:08:39.539] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:39.542] [INFO] console - Executing (bb84042b-7acd-401e-a223-6b0012865ac2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:39.563] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:39.568] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 59);
[2016-10-21 10:08:39.576] [INFO] console - [ 16,
  5849094037700608,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 33 } ]
[2016-10-21 10:08:39.586] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:39.588] [INFO] console - [ 16,
  1935638305701888,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 59 } ]
[2016-10-21 10:08:39.599] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:39.607] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:39.612] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:39.626] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:39.618 +00:00' WHERE "id" = '59'
[2016-10-21 10:08:39.639] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '59'
                                    or path like '/59/'||'%'
[2016-10-21 10:08:39.643] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:39.648] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:39.665] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:39.674] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/59/'||'%'
[2016-10-21 10:08:39.677] [INFO] console - Executing (bb84042b-7acd-401e-a223-6b0012865ac2): COMMIT;
[2016-10-21 10:08:39.681] [INFO] console - [ 70, 555, {}, [ undefined ] ]
[2016-10-21 10:08:39.691] [INFO] console - [ 16,
  6620496888070144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/59/',
       id: '59',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:39.714] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:39.715] [INFO] console - [ 16,
  7821732888969216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:39.734] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): START TRANSACTION;
[2016-10-21 10:08:39.738] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:39.746] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:39.740 +00:00','2016-10-21 05:08:39.740 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:39.752] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:39.758] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:39.763] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:39.767] [INFO] console - Executing (9d083ac9-e774-4083-8a55-52e24d57ab91): COMMIT;
[2016-10-21 10:08:39.771] [INFO] console - [ 70, 556, {}, [ '60' ] ]
[2016-10-21 10:08:39.783] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:39.788] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:39.796] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:39.800] [INFO] console - [ 16,
  185577416687616,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 34 } ]
[2016-10-21 10:08:39.858] [INFO] console - [ 16,
  2247299652648960,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 60 } ]
[2016-10-21 10:08:40.137] [INFO] console - Executing (1f1dcd52-0ec9-425d-b7da-ccbbbf00ec3a): START TRANSACTION;
[2016-10-21 10:08:40.138] [INFO] console - Executing (1f1dcd52-0ec9-425d-b7da-ccbbbf00ec3a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.145] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 10:08:40.151] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:08:40.155] [INFO] console - Executing (102ac26f-e017-400c-9968-b31ad51cde6e): START TRANSACTION;
[2016-10-21 10:08:40.158] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 59);
[2016-10-21 10:08:40.160] [INFO] console - Executing (102ac26f-e017-400c-9968-b31ad51cde6e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.171] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:40.184] [INFO] console - Executing (102ac26f-e017-400c-9968-b31ad51cde6e): COMMIT;
[2016-10-21 10:08:40.186] [INFO] console - [ 70,
  558,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:40.207] [INFO] console - Executing (e3692e6a-8508-45cb-817e-c2f4df73cc91): START TRANSACTION;
[2016-10-21 10:08:40.209] [INFO] console - Executing (e3692e6a-8508-45cb-817e-c2f4df73cc91): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.213] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 59);
[2016-10-21 10:08:40.219] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:40.224] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.231] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.236] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:40.258] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:08:40.241 +00:00' WHERE "id" = '59'
[2016-10-21 10:08:40.263] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.272] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '59'
                                    or path like '/2/59/'||'%'
[2016-10-21 10:08:40.281] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.285] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:08:40.291] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:40.294] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.303] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='59',"updated_at"='2016-10-21 05:08:40.296 +00:00' WHERE "id" = '60'
[2016-10-21 10:08:40.312] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.317] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/59/')
                                where
                                    id = '60'
                                    or path like '/60/'||'%'
[2016-10-21 10:08:40.322] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/59/'||'%'
[2016-10-21 10:08:40.332] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/59/' like path||id||'/%'
[2016-10-21 10:08:40.335] [INFO] console - Executing (e3692e6a-8508-45cb-817e-c2f4df73cc91): COMMIT;
[2016-10-21 10:08:40.339] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/59/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.341] [INFO] console - [ 70, 559, {}, [ undefined ] ]
[2016-10-21 10:08:40.346] [INFO] console - [ 16,
  4715090173493248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 59 } ]
[2016-10-21 10:08:40.358] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.360] [INFO] console - [ 16,
  5518632291401728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/59/',
       id: '59',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:08:40.367] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/59/60/'||'%'
[2016-10-21 10:08:40.369] [INFO] console - [ 16,
  8674692141416448,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:08:40.374] [INFO] console - [ 16,
  1210283368382464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:40.376] [INFO] console - Executing (1f1dcd52-0ec9-425d-b7da-ccbbbf00ec3a): COMMIT;
[2016-10-21 10:08:40.379] [INFO] console - [ 70, 557, {}, [ undefined ] ]
[2016-10-21 10:08:40.382] [INFO] console - [ 16,
  8926347703353344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id59.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/59/60/',
       id: '60',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/59/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '59' } } ]
[2016-10-21 10:08:40.480] [INFO] console - [ 16,
  277642613882880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:40.484] [INFO] console - Executing (7dcac3b8-777e-4855-b8f1-433dfb466698): START TRANSACTION;
[2016-10-21 10:08:40.493] [INFO] console - Executing (7dcac3b8-777e-4855-b8f1-433dfb466698): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.498] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 59);
[2016-10-21 10:08:40.505] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.512] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.520] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:08:40.529] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:40.524 +00:00' WHERE "id" = '59'
[2016-10-21 10:08:40.534] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '59'
                                    or path like '/4/59/'||'%'
[2016-10-21 10:08:40.541] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:40.548] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.557] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.561] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/59/'||'%'
[2016-10-21 10:08:40.564] [INFO] console - Executing (7dcac3b8-777e-4855-b8f1-433dfb466698): COMMIT;
[2016-10-21 10:08:40.566] [INFO] console - [ 70, 560, {}, [ undefined ] ]
[2016-10-21 10:08:40.574] [INFO] console - [ 16,
  8078350488698880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 59 } ]
[2016-10-21 10:08:40.584] [INFO] console - [ 16,
  610221011501056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:08:40.607] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:40.614] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): START TRANSACTION;
[2016-10-21 10:08:40.622] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.633] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:40.626 +00:00','2016-10-21 05:08:40.626 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:40.637] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:40.648] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:40.652] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:40.657] [INFO] console - Executing (44890998-973f-4af4-b63f-66b44c999a2d): COMMIT;
[2016-10-21 10:08:40.661] [INFO] console - [ 70, 561, {}, [ '61' ] ]
[2016-10-21 10:08:40.669] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:40.673] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:40.680] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:40.684] [INFO] console - Executing (afec27f9-d200-456c-9699-ed10c8afb8c8): START TRANSACTION;
[2016-10-21 10:08:40.690] [INFO] console - Executing (afec27f9-d200-456c-9699-ed10c8afb8c8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.692] [INFO] console - [ 16,
  8731983079276544,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 35 } ]
[2016-10-21 10:08:40.699] [INFO] console - [ 16,
  6411841141997568,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 61 } ]
[2016-10-21 10:08:40.710] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 61);
[2016-10-21 10:08:40.720] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:40.729] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.737] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.740] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:40.749] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:40.744 +00:00' WHERE "id" = '61'
[2016-10-21 10:08:40.756] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '61'
                                    or path like '/61/'||'%'
[2016-10-21 10:08:40.759] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:40.764] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.772] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.775] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/61/'||'%'
[2016-10-21 10:08:40.781] [INFO] console - Executing (afec27f9-d200-456c-9699-ed10c8afb8c8): COMMIT;
[2016-10-21 10:08:40.783] [INFO] console - [ 70, 562, {}, [ undefined ] ]
[2016-10-21 10:08:40.794] [INFO] console - [ 16,
  7651847300972544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/61/',
       id: '61',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:40.815] [INFO] console - [ 16,
  6190185876291584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:08:40.825] [INFO] console - Executing (a0288ae7-8722-4554-a324-ca2f31d8cf8c): START TRANSACTION;
[2016-10-21 10:08:40.827] [INFO] console - Executing (a0288ae7-8722-4554-a324-ca2f31d8cf8c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.832] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 61);
[2016-10-21 10:08:40.838] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.847] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.853] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:08:40.860] [INFO] console - Executing (fcb5f9da-b740-496b-8809-9d6ba34ed720): START TRANSACTION;
[2016-10-21 10:08:40.864] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:40.866] [INFO] console - Executing (fcb5f9da-b740-496b-8809-9d6ba34ed720): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:40.878] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:40.868 +00:00' WHERE "id" = '61'
[2016-10-21 10:08:40.890] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:08:40.898] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '61'
                                    or path like '/2/61/'||'%'
[2016-10-21 10:08:40.902] [INFO] console - Executing (fcb5f9da-b740-496b-8809-9d6ba34ed720): COMMIT;
[2016-10-21 10:08:40.907] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:40.909] [INFO] console - [ 70,
  564,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:08:40.974] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:40.980] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:40.983] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/61/'||'%'
[2016-10-21 10:08:40.989] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:40.991] [INFO] console - Executing (a0288ae7-8722-4554-a324-ca2f31d8cf8c): COMMIT;
[2016-10-21 10:08:40.995] [INFO] console - Executing (9e7b6b88-06cb-4dbc-ae0a-2a7bedb5fc32): START TRANSACTION;
[2016-10-21 10:08:40.996] [INFO] console - [ 70, 563, {}, [ undefined ] ]
[2016-10-21 10:08:40.999] [INFO] console - [ 16,
  5517651692486656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 61 } ]
[2016-10-21 10:08:41.002] [INFO] console - Executing (9e7b6b88-06cb-4dbc-ae0a-2a7bedb5fc32): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:41.007] [INFO] console - [ 16,
  3273530850410496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:41.017] [INFO] console - Executing (9e7b6b88-06cb-4dbc-ae0a-2a7bedb5fc32): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:08:40 GMT+0500 (YEKT)',0,0,'2016-10-21 05:08:41.006 +00:00','2016-10-21 05:08:41.006 +00:00',2,3) RETURNING *;
[2016-10-21 10:08:41.025] [INFO] console - Executing (9e7b6b88-06cb-4dbc-ae0a-2a7bedb5fc32): COMMIT;
[2016-10-21 10:08:41.027] [INFO] console - [ 70, 565, {}, [ '31' ] ]
[2016-10-21 10:08:41.029] [INFO] console - [ 16,
  5491850156703744,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '31' ] ]
[2016-10-21 10:08:41.050] [INFO] console - Executing (48ee6214-2512-4274-bf5f-34d726459e67): START TRANSACTION;
[2016-10-21 10:08:41.053] [INFO] console - Executing (48ee6214-2512-4274-bf5f-34d726459e67): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:41.057] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:41.069] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 31);
[2016-10-21 10:08:41.077] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:41.083] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.088] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.094] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:41.098] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:41.101] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '31' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:41.116] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:08:41.111 +00:00','2016-10-21 05:08:41.111 +00:00','31','2') RETURNING *;
[2016-10-21 10:08:41.128] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 31, 1, k.id, 63, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:08:41.136] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 31 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 31 and value=-1) "protiv"
[2016-10-21 10:08:41.147] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=4,"updated_at"='2016-10-21 05:08:41.139 +00:00' WHERE "id" = '31'
[2016-10-21 10:08:41.150] [INFO] console - Executing (48ee6214-2512-4274-bf5f-34d726459e67): COMMIT;
[2016-10-21 10:08:41.151] [INFO] console - [ 70, 566, {}, [ undefined ] ]
[2016-10-21 10:08:41.154] [INFO] console - [ 16,
  6755400477048832,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id31.rebalance',
  [],
  { totalZa: 4,
    totalProtiv: 0,
    GOLOS: '63',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:08:41.168] [INFO] console - Executing (803211cb-d73b-42fa-b989-ce68ece1a2a9): START TRANSACTION;
[2016-10-21 10:08:41.174] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 63 }
[2016-10-21 10:08:41.177] [INFO] console - Executing (f6f51bc4-7db3-459a-b378-e1fdd0c4773e): START TRANSACTION;
[2016-10-21 10:08:41.178] [INFO] console - Executing (803211cb-d73b-42fa-b989-ce68ece1a2a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:41.180] [INFO] console - Executing (f6f51bc4-7db3-459a-b378-e1fdd0c4773e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:41.187] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:41.196] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 63);
[2016-10-21 10:08:41.205] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 31);
[2016-10-21 10:08:41.208] [INFO] console - Executing (f6f51bc4-7db3-459a-b378-e1fdd0c4773e): COMMIT;
[2016-10-21 10:08:41.213] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:41.214] [INFO] console - [ 70,
  568,
  {},
  [ { id: '63',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:08:41 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:08:41 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '31',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:41.226] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.235] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.238] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:41.243] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:41.248] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '31' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:41.251] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 31
                                and (
                                    id= 63
                                    or parent_id = 63
                                )
[2016-10-21 10:08:41.257] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 31 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 31 and value=-1) "protiv"
[2016-10-21 10:08:41.262] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:08:41.259 +00:00' WHERE "id" = '31'
[2016-10-21 10:08:41.268] [INFO] console - Executing (803211cb-d73b-42fa-b989-ce68ece1a2a9): COMMIT;
[2016-10-21 10:08:41.269] [INFO] console - [ 70, 567, {}, [ undefined ] ]
[2016-10-21 10:08:41.276] [INFO] console - [ 16,
  6688356050141184,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id31.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '63',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:08:41.365] [INFO] console - Executing (031c8296-b3a7-474e-ae26-067fb099cb36): START TRANSACTION;
[2016-10-21 10:08:41.367] [INFO] console - Executing (031c8296-b3a7-474e-ae26-067fb099cb36): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:41.370] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:41.383] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 31);
[2016-10-21 10:08:41.392] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:41.402] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.416] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:41.426] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:41.430] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:41.436] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '31' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:41.447] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,-1,'2016-10-21 05:08:41.443 +00:00','2016-10-21 05:08:41.443 +00:00','31','2') RETURNING *;
[2016-10-21 10:08:41.457] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 31, -1, k.id, 67, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:08:41.459] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 31 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 31 and value=-1) "protiv"
[2016-10-21 10:08:41.470] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalProtiv"=4,"updated_at"='2016-10-21 05:08:41.467 +00:00' WHERE "id" = '31'
[2016-10-21 10:08:41.475] [INFO] console - Executing (031c8296-b3a7-474e-ae26-067fb099cb36): COMMIT;
[2016-10-21 10:08:41.476] [INFO] console - [ 70, 569, {}, [ undefined ] ]
[2016-10-21 10:08:41.479] [INFO] console - [ 16,
  3611561652387840,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id31.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 4,
    GOLOS: '67',
    action: 'add',
    value: -1 } ]
[2016-10-21 10:08:54.553] [INFO] console - [ 70, 571, {}, [ undefined ] ]
[2016-10-21 10:08:54.569] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:08:54.609] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:08:54.610] [INFO] console - Executing (d18f0cff-0a98-4625-b72d-354ab2e040cb): START TRANSACTION;
[2016-10-21 10:08:54.612] [INFO] console - Executing (d18f0cff-0a98-4625-b72d-354ab2e040cb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:54.638] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:54.650] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:08:54.655] [INFO] console - Executing (d18f0cff-0a98-4625-b72d-354ab2e040cb): COMMIT;
[2016-10-21 10:08:54.664] [INFO] console - [ 70,
  572,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:54.710] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:08:54.717] [INFO] console - [ 70, 573, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:08:54.749] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:54.756] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): START TRANSACTION;
[2016-10-21 10:08:54.758] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:54.770] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:54.760 +00:00','2016-10-21 05:08:54.760 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:54.778] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:54.782] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:54.785] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:54.790] [INFO] console - Executing (a835dd36-9eca-4b2e-ade6-d251bd3b8d09): COMMIT;
[2016-10-21 10:08:54.792] [INFO] console - [ 70, 574, {}, [ '62' ] ]
[2016-10-21 10:08:54.801] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:54.808] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:54.810] [INFO] console - Executing (dbd7486a-3f88-47cf-815d-821d01a17fe4): START TRANSACTION;
[2016-10-21 10:08:54.813] [INFO] console - Executing (dbd7486a-3f88-47cf-815d-821d01a17fe4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:54.817] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:54.822] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 10:08:54.823] [INFO] console - [ 16,
  7202725047566336,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 36 } ]
[2016-10-21 10:08:54.832] [INFO] console - [ 16,
  8922187119460352,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 62 } ]
[2016-10-21 10:08:54.839] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:54.845] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:54.851] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:54.854] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:54.865] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:54.858 +00:00' WHERE "id" = '62'
[2016-10-21 10:08:54.897] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '62'
                                    or path like '/62/'||'%'
[2016-10-21 10:08:54.902] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:54.906] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:54.913] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:54.920] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/62/'||'%'
[2016-10-21 10:08:54.923] [INFO] console - Executing (dbd7486a-3f88-47cf-815d-821d01a17fe4): COMMIT;
[2016-10-21 10:08:54.925] [INFO] console - [ 70, 575, {}, [ undefined ] ]
[2016-10-21 10:08:54.927] [INFO] console - [ 16,
  7009112313298944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/62/',
       id: '62',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:54 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:54 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:54.939] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:54.945] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): START TRANSACTION;
[2016-10-21 10:08:54.948] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:54.950] [INFO] console - [ 16,
  8658461264969728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:08:54.962] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:54.954 +00:00','2016-10-21 05:08:54.954 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:54.968] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:54.976] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:54.981] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:54.985] [INFO] console - Executing (51e6605c-a6b6-490f-a46d-8d39496aa1ab): COMMIT;
[2016-10-21 10:08:54.988] [INFO] console - [ 70, 576, {}, [ '63' ] ]
[2016-10-21 10:08:54.993] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:54.999] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:55.006] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:55.008] [INFO] console - [ 16,
  1521761627668480,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 37 } ]
[2016-10-21 10:08:55.018] [INFO] console - [ 16,
  2731663758983168,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 63 } ]
[2016-10-21 10:08:55.337] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:08:55.339] [INFO] console - Executing (cd2ef17d-3c11-4cef-b028-e91d06b60c0c): START TRANSACTION;
[2016-10-21 10:08:55.340] [INFO] console - Executing (778838b2-de37-4db9-aa54-d649198ec13c): START TRANSACTION;
[2016-10-21 10:08:55.344] [INFO] console - Executing (cd2ef17d-3c11-4cef-b028-e91d06b60c0c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.345] [INFO] console - Executing (778838b2-de37-4db9-aa54-d649198ec13c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.355] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 63);
[2016-10-21 10:08:55.357] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:55.367] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 10:08:55.371] [INFO] console - Executing (778838b2-de37-4db9-aa54-d649198ec13c): COMMIT;
[2016-10-21 10:08:55.379] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.381] [INFO] console - [ 70,
  578,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:55.399] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.403] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:55.412] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='62',"updated_at"='2016-10-21 05:08:55.405 +00:00' WHERE "id" = '63'
[2016-10-21 10:08:55.422] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/62/')
                                where
                                    id = '63'
                                    or path like '/63/'||'%'
[2016-10-21 10:08:55.426] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/62/' like path||id||'/%'
[2016-10-21 10:08:55.428] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/62/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.435] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('62', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.440] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/62/63/'||'%'
[2016-10-21 10:08:55.443] [INFO] console - Executing (cd2ef17d-3c11-4cef-b028-e91d06b60c0c): COMMIT;
[2016-10-21 10:08:55.445] [INFO] console - [ 70, 577, {}, [ undefined ] ]
[2016-10-21 10:08:55.448] [INFO] console - [ 16,
  1030490221969408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id62.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/62/63/',
       id: '63',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/62/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:54 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:55 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '62' } } ]
[2016-10-21 10:08:55.459] [INFO] console - Executing (82487326-46f1-4880-b495-4d1c86acafec): START TRANSACTION;
[2016-10-21 10:08:55.460] [INFO] console - Executing (82487326-46f1-4880-b495-4d1c86acafec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.462] [INFO] console - [ 16,
  6973354089119744,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id62.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:55.469] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 10:08:55.470] [INFO] console - [ 16,
  1729706569236480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:08:55.481] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:08:55.488] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.494] [INFO] console - Executing (65c9d4a9-8c45-4ea2-bb54-0d6a1b86c244): START TRANSACTION;
[2016-10-21 10:08:55.504] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.508] [INFO] console - Executing (65c9d4a9-8c45-4ea2-bb54-0d6a1b86c244): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.511] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:55.520] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 10:08:55.528] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:08:55.521 +00:00' WHERE "id" = '62'
[2016-10-21 10:08:55.531] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.535] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '62'
                                    or path like '/2/62/'||'%'
[2016-10-21 10:08:55.541] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.546] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:08:55.550] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:55.553] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.560] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:55.555 +00:00' WHERE "id" = '62'
[2016-10-21 10:08:55.565] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.570] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '62'
                                    or path like '/2/62/'||'%'
[2016-10-21 10:08:55.580] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/62/'||'%'
[2016-10-21 10:08:55.584] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:55.588] [INFO] console - Executing (82487326-46f1-4880-b495-4d1c86acafec): COMMIT;
[2016-10-21 10:08:55.592] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.594] [INFO] console - [ 70, 579, {}, [ undefined ] ]
[2016-10-21 10:08:55.600] [INFO] console - [ 16,
  5143696666263552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 62 } ]
[2016-10-21 10:08:55.609] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.612] [INFO] console - [ 16,
  4317429857517568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/62/',
       id: '62',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:54 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:55 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:08:55.623] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/62/'||'%'
[2016-10-21 10:08:55.627] [INFO] console - [ 16,
  923899560722432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:08:55.631] [INFO] console - Executing (65c9d4a9-8c45-4ea2-bb54-0d6a1b86c244): COMMIT;
[2016-10-21 10:08:55.634] [INFO] console - [ 16,
  6954147504979968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:08:55.642] [INFO] console - [ 70, 580, {}, [ undefined ] ]
[2016-10-21 10:08:55.645] [INFO] console - [ 16,
  13585218535424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id63.starshinaChange',
  [],
  {} ]
[2016-10-21 10:08:55.648] [INFO] console - [ 16,
  8275605499936768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 62 } ]
[2016-10-21 10:08:55.662] [INFO] console - [ 16,
  5111834661093376,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:55.717] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:55.725] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): START TRANSACTION;
[2016-10-21 10:08:55.727] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.742] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:08:55.729 +00:00','2016-10-21 05:08:55.729 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:08:55.748] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:55.757] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:55.762] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:08:55.765] [INFO] console - Executing (3f55633d-a374-448a-baf0-a2a234c84269): COMMIT;
[2016-10-21 10:08:55.771] [INFO] console - [ 70, 581, {}, [ '64' ] ]
[2016-10-21 10:08:55.777] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:55.780] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:08:55.786] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:08:55.790] [INFO] console - Executing (cdead84c-6fb1-4294-83ef-79fb8b3e972f): START TRANSACTION;
[2016-10-21 10:08:55.792] [INFO] console - [ 16,
  1483161231949824,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 38 } ]
[2016-10-21 10:08:55.795] [INFO] console - Executing (cdead84c-6fb1-4294-83ef-79fb8b3e972f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.796] [INFO] console - [ 16,
  4013815660281856,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 64 } ]
[2016-10-21 10:08:55.804] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 64);
[2016-10-21 10:08:55.811] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:08:55.815] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.820] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.822] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:55.830] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:08:55.825 +00:00' WHERE "id" = '64'
[2016-10-21 10:08:55.839] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '64'
                                    or path like '/64/'||'%'
[2016-10-21 10:08:55.843] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:55.849] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.856] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.859] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/64/'||'%'
[2016-10-21 10:08:55.862] [INFO] console - Executing (cdead84c-6fb1-4294-83ef-79fb8b3e972f): COMMIT;
[2016-10-21 10:08:55.863] [INFO] console - [ 70, 582, {}, [ undefined ] ]
[2016-10-21 10:08:55.866] [INFO] console - [ 16,
  2289747057704960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/64/',
       id: '64',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:08:55 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:08:55 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:08:55.879] [INFO] console - Executing (f0dba6fe-592d-4bf1-be02-6094f7cc6c06): START TRANSACTION;
[2016-10-21 10:08:55.881] [INFO] console - [ 16,
  5600862229495808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:08:55.886] [INFO] console - Executing (f0dba6fe-592d-4bf1-be02-6094f7cc6c06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.891] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 64);
[2016-10-21 10:08:55.895] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.902] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.908] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:08:55.912] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:08:55.918] [INFO] console - Executing (23cd5d1b-b3ce-4e27-9f1a-4edd8757aa8d): START TRANSACTION;
[2016-10-21 10:08:55.920] [INFO] console - Executing (23cd5d1b-b3ce-4e27-9f1a-4edd8757aa8d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:55.928] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:08:55.921 +00:00' WHERE "id" = '64'
[2016-10-21 10:08:55.936] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:08:55.943] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '64'
                                    or path like '/2/64/'||'%'
[2016-10-21 10:08:55.947] [INFO] console - Executing (23cd5d1b-b3ce-4e27-9f1a-4edd8757aa8d): COMMIT;
[2016-10-21 10:08:55.957] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:08:55.958] [INFO] console - [ 70,
  584,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:08:55.973] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:55.982] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:55.993] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:55.999] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/64/'||'%'
[2016-10-21 10:08:56.002] [INFO] console - Executing (b6f74d2b-fe9a-490c-b5e8-859cd3294448): START TRANSACTION;
[2016-10-21 10:08:56.004] [INFO] console - Executing (f0dba6fe-592d-4bf1-be02-6094f7cc6c06): COMMIT;
[2016-10-21 10:08:56.005] [INFO] console - Executing (b6f74d2b-fe9a-490c-b5e8-859cd3294448): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:56.014] [INFO] console - [ 70, 583, {}, [ undefined ] ]
[2016-10-21 10:08:56.017] [INFO] console - [ 16,
  4995357805117440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 64 } ]
[2016-10-21 10:08:56.025] [INFO] console - Executing (b6f74d2b-fe9a-490c-b5e8-859cd3294448): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:08:55 GMT+0500 (YEKT)',0,0,'2016-10-21 05:08:56.013 +00:00','2016-10-21 05:08:56.013 +00:00',2,3) RETURNING *;
[2016-10-21 10:08:56.031] [INFO] console - [ 16,
  8328460755795968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:08:56.039] [INFO] console - Executing (b6f74d2b-fe9a-490c-b5e8-859cd3294448): COMMIT;
[2016-10-21 10:08:56.041] [INFO] console - [ 70, 585, {}, [ '32' ] ]
[2016-10-21 10:08:56.046] [INFO] console - [ 16,
  4202361369133056,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '32' ] ]
[2016-10-21 10:08:56.064] [INFO] console - Executing (852cffea-3f2c-4ed4-92cb-b5ce9f027cb9): START TRANSACTION;
[2016-10-21 10:08:56.066] [INFO] console - Executing (852cffea-3f2c-4ed4-92cb-b5ce9f027cb9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:56.071] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:56.082] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 32);
[2016-10-21 10:08:56.090] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:56.095] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:56.101] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:56.108] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:56.113] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:56.119] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '32' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:56.129] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:08:56.122 +00:00','2016-10-21 05:08:56.122 +00:00','32','2') RETURNING *;
[2016-10-21 10:08:56.134] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 32, 1, k.id, 71, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:08:56.142] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 32 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 32 and value=-1) "protiv"
[2016-10-21 10:08:56.150] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:08:56.144 +00:00' WHERE "id" = '32'
[2016-10-21 10:08:56.154] [INFO] console - Executing (852cffea-3f2c-4ed4-92cb-b5ce9f027cb9): COMMIT;
[2016-10-21 10:08:56.156] [INFO] console - [ 70, 586, {}, [ undefined ] ]
[2016-10-21 10:08:56.164] [INFO] console - [ 16,
  2982749126262784,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id32.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '71',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:08:56.178] [INFO] console - Executing (e851cb35-a6e0-404c-84e1-5f03467c0a60): START TRANSACTION;
[2016-10-21 10:08:56.179] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 71 }
[2016-10-21 10:08:56.182] [INFO] console - Executing (9a8eec75-30bf-41a9-97ff-b8a1e5855ea5): START TRANSACTION;
[2016-10-21 10:08:56.183] [INFO] console - Executing (e851cb35-a6e0-404c-84e1-5f03467c0a60): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:56.185] [INFO] console - Executing (9a8eec75-30bf-41a9-97ff-b8a1e5855ea5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:08:56.190] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:08:56.201] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 71);
[2016-10-21 10:08:56.209] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 32);
[2016-10-21 10:08:56.212] [INFO] console - Executing (9a8eec75-30bf-41a9-97ff-b8a1e5855ea5): COMMIT;
[2016-10-21 10:08:56.217] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:08:56.218] [INFO] console - [ 70,
  588,
  {},
  [ { id: '71',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:08:56 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:08:56 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '32',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:08:56.244] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:56.250] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:08:56.253] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:08:56.263] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:08:56.270] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '32' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:08:56.275] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 32
                                and (
                                    id= 71
                                    or parent_id = 71
                                )
[2016-10-21 10:08:56.280] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 32 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 32 and value=-1) "protiv"
[2016-10-21 10:08:56.285] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:08:56.281 +00:00' WHERE "id" = '32'
[2016-10-21 10:08:56.290] [INFO] console - Executing (e851cb35-a6e0-404c-84e1-5f03467c0a60): COMMIT;
[2016-10-21 10:08:56.295] [INFO] console - [ 70, 587, {}, [ undefined ] ]
[2016-10-21 10:08:56.296] [INFO] console - [ 16,
  8247778262122496,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id32.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '71',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:09:04.200] [INFO] console - [ 70, 590, {}, [ undefined ] ]
[2016-10-21 10:09:04.206] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:09:04.214] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:09:04.222] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:09:04.224] [INFO] console - Executing (36ff9b13-4570-44d2-bd59-aefea28cbce3): START TRANSACTION;
[2016-10-21 10:09:04.229] [INFO] console - Executing (36ff9b13-4570-44d2-bd59-aefea28cbce3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.235] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:09:04.242] [INFO] console - Executing (36ff9b13-4570-44d2-bd59-aefea28cbce3): COMMIT;
[2016-10-21 10:09:04.244] [INFO] console - [ 70,
  591,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:09:04.272] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:09:04.277] [INFO] console - [ 70, 592, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:09:04.305] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:04.310] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): START TRANSACTION;
[2016-10-21 10:09:04.312] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.320] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:09:04.314 +00:00','2016-10-21 05:09:04.314 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:09:04.324] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:04.328] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:04.332] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:09:04.335] [INFO] console - Executing (7aad269d-7f94-4351-9124-50b1f256193f): COMMIT;
[2016-10-21 10:09:04.338] [INFO] console - [ 70, 593, {}, [ '65' ] ]
[2016-10-21 10:09:04.349] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:04.353] [INFO] console - Executing (b0a173bc-8797-4074-9a93-5c6d37a59dda): START TRANSACTION;
[2016-10-21 10:09:04.356] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:09:04.358] [INFO] console - Executing (b0a173bc-8797-4074-9a93-5c6d37a59dda): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.366] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:09:04.369] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 65);
[2016-10-21 10:09:04.373] [INFO] console - [ 16,
  3312878734016512,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 39 } ]
[2016-10-21 10:09:04.379] [INFO] console - [ 16,
  8394286531870720,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 65 } ]
[2016-10-21 10:09:04.383] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:09:04.387] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:04.391] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:04.394] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:04.405] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:09:04.396 +00:00' WHERE "id" = '65'
[2016-10-21 10:09:04.408] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '65'
                                    or path like '/65/'||'%'
[2016-10-21 10:09:04.411] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:09:04.418] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:09:04.422] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:04.425] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/65/'||'%'
[2016-10-21 10:09:04.428] [INFO] console - Executing (b0a173bc-8797-4074-9a93-5c6d37a59dda): COMMIT;
[2016-10-21 10:09:04.430] [INFO] console - [ 70, 594, {}, [ undefined ] ]
[2016-10-21 10:09:04.432] [INFO] console - [ 16,
  5385764036673536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/65/',
       id: '65',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:09:04.444] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:04.447] [INFO] console - [ 16,
  2388493779075072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:09:04.455] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): START TRANSACTION;
[2016-10-21 10:09:04.457] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.464] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:09:04.459 +00:00','2016-10-21 05:09:04.459 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:09:04.468] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:04.472] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:04.476] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:09:04.479] [INFO] console - Executing (ec851b82-6d27-479b-82b4-dd5a694413bb): COMMIT;
[2016-10-21 10:09:04.482] [INFO] console - [ 70, 595, {}, [ '66' ] ]
[2016-10-21 10:09:04.487] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:04.491] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:09:04.497] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:09:04.502] [INFO] console - [ 16,
  512269188333568,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 40 } ]
[2016-10-21 10:09:04.513] [INFO] console - [ 16,
  8332137814032384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 66 } ]
[2016-10-21 10:09:04.834] [INFO] console - Executing (7dabb36e-fe4e-4897-a243-5c229d5b3e98): START TRANSACTION;
[2016-10-21 10:09:04.836] [INFO] console - Executing (7dabb36e-fe4e-4897-a243-5c229d5b3e98): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.841] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 66);
[2016-10-21 10:09:04.848] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:09:04.851] [INFO] console - Executing (93191e93-c9b8-4be9-9380-e0ea63fe2407): START TRANSACTION;
[2016-10-21 10:09:04.855] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 65);
[2016-10-21 10:09:04.860] [INFO] console - Executing (93191e93-c9b8-4be9-9380-e0ea63fe2407): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.863] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:04.871] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:09:04.881] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:04.884] [INFO] console - Executing (93191e93-c9b8-4be9-9380-e0ea63fe2407): COMMIT;
[2016-10-21 10:09:04.886] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:04.888] [INFO] console - [ 70,
  597,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:09:04.907] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='65',"updated_at"='2016-10-21 05:09:04.896 +00:00' WHERE "id" = '66'
[2016-10-21 10:09:04.913] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/65/')
                                where
                                    id = '66'
                                    or path like '/66/'||'%'
[2016-10-21 10:09:04.917] [INFO] console - Executing (7009791f-337d-4a9b-b15b-48d4e9182db2): START TRANSACTION;
[2016-10-21 10:09:04.920] [INFO] console - Executing (7009791f-337d-4a9b-b15b-48d4e9182db2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:04.924] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/65/' like path||id||'/%'
[2016-10-21 10:09:04.927] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/65/' like k.path||k.id||'/%'
[2016-10-21 10:09:04.932] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 65);
[2016-10-21 10:09:04.939] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('65', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:04.941] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:09:04.947] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/65/66/'||'%'
[2016-10-21 10:09:04.950] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:09:04.954] [INFO] console - Executing (7dabb36e-fe4e-4897-a243-5c229d5b3e98): COMMIT;
[2016-10-21 10:09:04.956] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:04.959] [INFO] console - [ 70, 596, {}, [ undefined ] ]
[2016-10-21 10:09:04.962] [INFO] console - [ 16,
  7300687677358080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id65.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/65/66/',
       id: '66',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/65/',
       note: null,
       created_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '65' } } ]
[2016-10-21 10:09:04.971] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:09:04.975] [INFO] console - [ 16,
  1497353578086400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id65.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:09:04.984] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:09:04.979 +00:00' WHERE "id" = '65'
[2016-10-21 10:09:04.989] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '65'
                                    or path like '/2/65/'||'%'
[2016-10-21 10:09:04.994] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:09:04.997] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.003] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.011] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/65/'||'%'
[2016-10-21 10:09:05.015] [INFO] console - Executing (7009791f-337d-4a9b-b15b-48d4e9182db2): COMMIT;
[2016-10-21 10:09:05.017] [INFO] console - [ 70, 598, {}, [ undefined ] ]
[2016-10-21 10:09:05.020] [INFO] console - [ 16,
  4277887756664832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:09:05.024] [INFO] console - [ 16,
  1909717708308480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 65 } ]
[2016-10-21 10:09:05.044] [INFO] console - [ 16,
  1298332332851200,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/65/',
       id: '65',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:09:04 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:09:05.068] [INFO] console - [ 16,
  4997174477717504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:09:05.078] [INFO] console - [ 16,
  1155970596077568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:09:05.080] [INFO] console - Executing (47f8e853-14ab-4b52-b618-1b7a39379f1c): START TRANSACTION;
[2016-10-21 10:09:05.082] [INFO] console - Executing (47f8e853-14ab-4b52-b618-1b7a39379f1c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.089] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 65);
[2016-10-21 10:09:05.094] [INFO] console - [ 16,
  4032737751072768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id66.starshinaChange',
  [],
  {} ]
[2016-10-21 10:09:05.099] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.106] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.110] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:09:05.123] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:09:05.112 +00:00' WHERE "id" = '65'
[2016-10-21 10:09:05.128] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:05.134] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '65'
                                    or path like '/4/65/'||'%'
[2016-10-21 10:09:05.138] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): START TRANSACTION;
[2016-10-21 10:09:05.140] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:05.141] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.148] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.158] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:09:05.145 +00:00','2016-10-21 05:09:05.145 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:09:05.162] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.165] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:05.169] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/65/'||'%'
[2016-10-21 10:09:05.174] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.177] [INFO] console - Executing (47f8e853-14ab-4b52-b618-1b7a39379f1c): COMMIT;
[2016-10-21 10:09:05.180] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:09:05.183] [INFO] console - [ 70, 599, {}, [ undefined ] ]
[2016-10-21 10:09:05.185] [INFO] console - [ 16,
  6192069219450880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 65 } ]
[2016-10-21 10:09:05.189] [INFO] console - Executing (5f34d9d8-ccec-4cb2-bc01-b972c0e68ae5): COMMIT;
[2016-10-21 10:09:05.191] [INFO] console - [ 16,
  6995104034193408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:09:05.195] [INFO] console - [ 70, 600, {}, [ '67' ] ]
[2016-10-21 10:09:05.197] [INFO] console - [ 16,
  3449973695840256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id66.starshinaChange',
  [],
  {} ]
[2016-10-21 10:09:05.202] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.206] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:09:05.212] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:09:05.215] [INFO] console - [ 16,
  3018838780149760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 41 } ]
[2016-10-21 10:09:05.224] [INFO] console - [ 16,
  4562364221358080,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 67 } ]
[2016-10-21 10:09:05.237] [INFO] console - Executing (49ae04a1-3df8-4437-a4ec-5aac972d9ece): START TRANSACTION;
[2016-10-21 10:09:05.239] [INFO] console - Executing (49ae04a1-3df8-4437-a4ec-5aac972d9ece): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.242] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 67);
[2016-10-21 10:09:05.257] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:09:05.262] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.266] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.269] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:05.279] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:09:05.271 +00:00' WHERE "id" = '67'
[2016-10-21 10:09:05.283] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '67'
                                    or path like '/67/'||'%'
[2016-10-21 10:09:05.287] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:09:05.290] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.295] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.299] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/67/'||'%'
[2016-10-21 10:09:05.302] [INFO] console - Executing (49ae04a1-3df8-4437-a4ec-5aac972d9ece): COMMIT;
[2016-10-21 10:09:05.303] [INFO] console - [ 70, 601, {}, [ undefined ] ]
[2016-10-21 10:09:05.305] [INFO] console - [ 16,
  6600850493407232,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/67/',
       id: '67',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:09:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:09:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:09:05.314] [INFO] console - Executing (f831e6ef-ccb8-4a9f-9fd6-24bd57646981): START TRANSACTION;
[2016-10-21 10:09:05.315] [INFO] console - Executing (f831e6ef-ccb8-4a9f-9fd6-24bd57646981): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.317] [INFO] console - [ 16,
  7583884199854080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:09:05.324] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 67);
[2016-10-21 10:09:05.330] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.336] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.340] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:09:05.357] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:09:05.347 +00:00' WHERE "id" = '67'
[2016-10-21 10:09:05.359] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:09:05.361] [INFO] console - Executing (667a4146-5eb8-4137-baef-737a68289797): START TRANSACTION;
[2016-10-21 10:09:05.370] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '67'
                                    or path like '/2/67/'||'%'
[2016-10-21 10:09:05.371] [INFO] console - Executing (667a4146-5eb8-4137-baef-737a68289797): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.374] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:09:05.378] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:09:05.383] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.386] [INFO] console - Executing (667a4146-5eb8-4137-baef-737a68289797): COMMIT;
[2016-10-21 10:09:05.390] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.391] [INFO] console - [ 70,
  603,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:09:05.396] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/67/'||'%'
[2016-10-21 10:09:05.401] [INFO] console - Executing (f831e6ef-ccb8-4a9f-9fd6-24bd57646981): COMMIT;
[2016-10-21 10:09:05.402] [INFO] console - [ 70, 602, {}, [ undefined ] ]
[2016-10-21 10:09:05.404] [INFO] console - [ 16,
  1292952982781952,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 67 } ]
[2016-10-21 10:09:05.412] [INFO] console - [ 16,
  288943224389632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:09:05.428] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:05.431] [INFO] console - Executing (cab41a57-f578-4d01-8ce8-b603aa7f4c5d): START TRANSACTION;
[2016-10-21 10:09:05.434] [INFO] console - Executing (cab41a57-f578-4d01-8ce8-b603aa7f4c5d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.440] [INFO] console - Executing (cab41a57-f578-4d01-8ce8-b603aa7f4c5d): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:09:05 GMT+0500 (YEKT)',0,0,'2016-10-21 05:09:05.436 +00:00','2016-10-21 05:09:05.436 +00:00',2,3) RETURNING *;
[2016-10-21 10:09:05.452] [INFO] console - Executing (cab41a57-f578-4d01-8ce8-b603aa7f4c5d): COMMIT;
[2016-10-21 10:09:05.454] [INFO] console - [ 70, 604, {}, [ '33' ] ]
[2016-10-21 10:09:05.456] [INFO] console - [ 16,
  947000824561664,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '33' ] ]
[2016-10-21 10:09:05.477] [INFO] console - Executing (89931a19-66f9-463c-99d7-d88b67b3a875): START TRANSACTION;
[2016-10-21 10:09:05.479] [INFO] console - Executing (89931a19-66f9-463c-99d7-d88b67b3a875): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.484] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:05.495] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 33);
[2016-10-21 10:09:05.500] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:09:05.504] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.515] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.518] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.524] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.537] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '33' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:09:05.543] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:09:05.539 +00:00','2016-10-21 05:09:05.539 +00:00','33','2') RETURNING *;
[2016-10-21 10:09:05.551] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 33, 1, k.id, 74, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:09:05.559] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 33 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 33 and value=-1) "protiv"
[2016-10-21 10:09:05.568] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:09:05.562 +00:00' WHERE "id" = '33'
[2016-10-21 10:09:05.577] [INFO] console - Executing (89931a19-66f9-463c-99d7-d88b67b3a875): COMMIT;
[2016-10-21 10:09:05.579] [INFO] console - [ 70, 605, {}, [ undefined ] ]
[2016-10-21 10:09:05.583] [INFO] console - [ 16,
  2582269355098112,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id33.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '74',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:09:05.604] [INFO] console - Executing (2a485eb1-4ae9-4dcc-87d7-dd8b567c71b4): START TRANSACTION;
[2016-10-21 10:09:05.613] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 74 }
[2016-10-21 10:09:05.615] [INFO] console - Executing (32af7d2b-4ee1-4d92-8f84-4d3f22f58fd0): START TRANSACTION;
[2016-10-21 10:09:05.617] [INFO] console - Executing (2a485eb1-4ae9-4dcc-87d7-dd8b567c71b4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.618] [INFO] console - Executing (32af7d2b-4ee1-4d92-8f84-4d3f22f58fd0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:09:05.621] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:09:05.631] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 74);
[2016-10-21 10:09:05.639] [INFO] console - Executing (32af7d2b-4ee1-4d92-8f84-4d3f22f58fd0): COMMIT;
[2016-10-21 10:09:05.643] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 33);
[2016-10-21 10:09:05.646] [INFO] console - [ 70,
  607,
  {},
  [ { id: '74',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:09:05 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:09:05 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '33',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:09:05.660] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:09:05.668] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.682] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:09:05.694] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:09:05.701] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:09:05.706] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '33' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:09:05.718] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 33
                                and (
                                    id= 74
                                    or parent_id = 74
                                )
[2016-10-21 10:09:05.734] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 33 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 33 and value=-1) "protiv"
[2016-10-21 10:09:05.749] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:09:05.737 +00:00' WHERE "id" = '33'
[2016-10-21 10:09:05.753] [INFO] console - Executing (2a485eb1-4ae9-4dcc-87d7-dd8b567c71b4): COMMIT;
[2016-10-21 10:09:05.755] [INFO] console - [ 70, 606, {}, [ undefined ] ]
[2016-10-21 10:09:05.760] [INFO] console - [ 16,
  4473595373813760,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id33.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '74',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:10:58.440] [INFO] console - [ 70, 609, {}, [ undefined ] ]
[2016-10-21 10:10:58.459] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:10:58.488] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:10:58.494] [INFO] console - Executing (27539874-7881-42c5-a95c-68218397aa54): START TRANSACTION;
[2016-10-21 10:10:58.496] [INFO] console - Executing (27539874-7881-42c5-a95c-68218397aa54): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:10:58.511] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:10:58.520] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:10:58.527] [INFO] console - Executing (27539874-7881-42c5-a95c-68218397aa54): COMMIT;
[2016-10-21 10:10:58.530] [INFO] console - [ 70,
  610,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:10:58.578] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:10:58.584] [INFO] console - [ 70, 611, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:10:58.610] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:10:58.625] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): START TRANSACTION;
[2016-10-21 10:10:58.627] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:10:58.636] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:10:58.629 +00:00','2016-10-21 05:10:58.629 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:10:58.646] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:10:58.654] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:10:58.658] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:10:58.661] [INFO] console - Executing (09dc4d44-838b-4212-bd57-b207d8398607): COMMIT;
[2016-10-21 10:10:58.663] [INFO] console - [ 70, 612, {}, [ '68' ] ]
[2016-10-21 10:10:58.674] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:10:58.683] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:10:58.689] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:10:58.704] [INFO] console - [ 16,
  3106895470526464,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 42 } ]
[2016-10-21 10:10:58.712] [INFO] console - [ 16,
  5786456836538368,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 68 } ]
[2016-10-21 10:11:22.303] [INFO] console - Executing (b4857572-01bb-4491-b8dc-a54ab5ef748d): START TRANSACTION;
[2016-10-21 10:11:22.305] [INFO] console - Executing (b4857572-01bb-4491-b8dc-a54ab5ef748d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:11:22.337] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 68);
[2016-10-21 10:11:22.344] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:11:22.348] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:11:22.353] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:11:22.357] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:11:22.365] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:11:22.359 +00:00' WHERE "id" = '68'
[2016-10-21 10:11:22.369] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '68'
                                    or path like '/68/'||'%'
[2016-10-21 10:11:22.373] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:11:22.379] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:11:22.385] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:11:22.388] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/68/'||'%'
[2016-10-21 10:11:22.392] [INFO] console - Executing (b4857572-01bb-4491-b8dc-a54ab5ef748d): COMMIT;
[2016-10-21 10:11:22.394] [INFO] console - [ 70, 613, {}, [ undefined ] ]
[2016-10-21 10:11:22.397] [INFO] console - [ 16,
  1519774200758272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/68/',
       id: '68',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:10:58 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:11:22 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:11:22.411] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:11:22.413] [INFO] console - [ 16,
  4697125109628928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:11:22.421] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): START TRANSACTION;
[2016-10-21 10:11:22.424] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:11:22.443] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:11:22.427 +00:00','2016-10-21 05:11:22.427 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:11:22.451] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:11:22.457] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:11:22.463] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:11:22.467] [INFO] console - Executing (adbb9b93-38db-4fee-a60d-632c24ee845b): COMMIT;
[2016-10-21 10:11:22.469] [INFO] console - [ 70, 614, {}, [ '69' ] ]
[2016-10-21 10:11:22.480] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:11:22.483] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:11:22.489] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:11:22.492] [INFO] console - [ 16,
  3455840136724480,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 43 } ]
[2016-10-21 10:11:22.498] [INFO] console - [ 16,
  3145118781538304,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 69 } ]
[2016-10-21 10:16:31.400] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:16:31.453] [INFO] console - Executing (407132e0-41ac-41f8-ad7a-d315e8d7a32c): START TRANSACTION;
[2016-10-21 10:16:31.455] [INFO] console - Executing (eaf98b81-3a71-4a01-86a2-d34471a45122): START TRANSACTION;
[2016-10-21 10:16:31.458] [INFO] console - Executing (eaf98b81-3a71-4a01-86a2-d34471a45122): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:31.459] [INFO] console - Executing (407132e0-41ac-41f8-ad7a-d315e8d7a32c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:31.506] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 69);
[2016-10-21 10:16:31.519] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:16:31.542] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 68);
[2016-10-21 10:16:31.547] [INFO] console - Executing (407132e0-41ac-41f8-ad7a-d315e8d7a32c): COMMIT;
[2016-10-21 10:16:31.559] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.560] [INFO] console - [ 70,
  615,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:16:31.577] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.594] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:31.599] [INFO] console - Executing (19568289-6c86-477b-9d9b-c110d3ae8295): START TRANSACTION;
[2016-10-21 10:16:31.603] [INFO] console - Executing (19568289-6c86-477b-9d9b-c110d3ae8295): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:31.613] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='68',"updated_at"='2016-10-21 05:16:31.605 +00:00' WHERE "id" = '69'
[2016-10-21 10:16:31.624] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 68);
[2016-10-21 10:16:31.633] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/68/')
                                where
                                    id = '69'
                                    or path like '/69/'||'%'
[2016-10-21 10:16:31.638] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:16:31.645] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/68/' like path||id||'/%'
[2016-10-21 10:16:31.646] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.658] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.668] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:31.670] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/68/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.680] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('68', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.692] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:16:31.674 +00:00' WHERE "id" = '68'
[2016-10-21 10:16:31.709] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/68/69/'||'%'
[2016-10-21 10:16:31.717] [INFO] console - Executing (eaf98b81-3a71-4a01-86a2-d34471a45122): COMMIT;
[2016-10-21 10:16:31.719] [INFO] console - [ 70, 616, {}, [ undefined ] ]
[2016-10-21 10:16:31.723] [INFO] console - [ 16,
  1293162014310400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id68.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/68/69/',
       id: '69',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/68/',
       note: null,
       created_at: Fri Oct 21 2016 10:11:22 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:31 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '68' } } ]
[2016-10-21 10:16:31.736] [INFO] console - [ 16,
  1982695311671296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id68.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:16:31.743] [INFO] console - [ 16,
  4503523645456384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:16:31.751] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '68'
                                    or path like '/2/68/'||'%'
[2016-10-21 10:16:31.758] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:16:31.766] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.779] [INFO] console - Executing (f06d2941-1350-4737-b308-e0195462ad1b): START TRANSACTION;
[2016-10-21 10:16:31.782] [INFO] console - Executing (f06d2941-1350-4737-b308-e0195462ad1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:31.787] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.795] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/68/'||'%'
[2016-10-21 10:16:31.799] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 68);
[2016-10-21 10:16:31.805] [INFO] console - Executing (19568289-6c86-477b-9d9b-c110d3ae8295): COMMIT;
[2016-10-21 10:16:31.807] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.811] [INFO] console - [ 70, 617, {}, [ undefined ] ]
[2016-10-21 10:16:31.814] [INFO] console - [ 16,
  4009518398701568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 68 } ]
[2016-10-21 10:16:31.824] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.828] [INFO] console - [ 16,
  41364846804992,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/68/',
       id: '68',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:10:58 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:31 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:16:31.845] [INFO] console - [ 16,
  5133049322799104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:16:31.858] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:16:31.861] [INFO] console - [ 16,
  7315584261816320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:16:31.873] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:16:31.865 +00:00' WHERE "id" = '68'
[2016-10-21 10:16:31.876] [INFO] console - [ 16,
  390429004529664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id69.starshinaChange',
  [],
  {} ]
[2016-10-21 10:16:31.882] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '68'
                                    or path like '/4/68/'||'%'
[2016-10-21 10:16:31.912] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:31.919] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:31.922] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): START TRANSACTION;
[2016-10-21 10:16:31.926] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:31.931] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:31.941] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:31.952] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:16:31.934 +00:00','2016-10-21 05:16:31.934 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:16:31.956] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/68/'||'%'
[2016-10-21 10:16:31.959] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:31.963] [INFO] console - Executing (f06d2941-1350-4737-b308-e0195462ad1b): COMMIT;
[2016-10-21 10:16:31.969] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:31.971] [INFO] console - [ 70, 618, {}, [ undefined ] ]
[2016-10-21 10:16:31.976] [INFO] console - [ 16,
  4759358554505216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 68 } ]
[2016-10-21 10:16:31.984] [INFO] console - [ 16,
  3737800532819968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: -1 } ]
[2016-10-21 10:16:31.989] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:16:31.995] [INFO] console - [ 16,
  674715842641920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id69.starshinaChange',
  [],
  {} ]
[2016-10-21 10:16:32.004] [INFO] console - Executing (355e550b-d849-45bd-a762-8666cfe9f13a): COMMIT;
[2016-10-21 10:16:32.015] [INFO] console - [ 70, 619, {}, [ '70' ] ]
[2016-10-21 10:16:32.030] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:32.043] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:16:32.053] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:16:32.057] [INFO] console - Executing (dcf8fb89-8978-4e86-ac38-ee00232a2cc4): START TRANSACTION;
[2016-10-21 10:16:32.058] [INFO] console - Executing (dcf8fb89-8978-4e86-ac38-ee00232a2cc4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.062] [INFO] console - [ 16,
  3911919480078336,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 44 } ]
[2016-10-21 10:16:32.069] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 70);
[2016-10-21 10:16:32.073] [INFO] console - [ 16,
  2747653305663488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 70 } ]
[2016-10-21 10:16:32.084] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:16:32.090] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.097] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.103] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:32.111] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:16:32.105 +00:00' WHERE "id" = '70'
[2016-10-21 10:16:32.116] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '70'
                                    or path like '/70/'||'%'
[2016-10-21 10:16:32.126] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:32.129] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.135] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.140] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/70/'||'%'
[2016-10-21 10:16:32.143] [INFO] console - Executing (dcf8fb89-8978-4e86-ac38-ee00232a2cc4): COMMIT;
[2016-10-21 10:16:32.146] [INFO] console - [ 70, 620, {}, [ undefined ] ]
[2016-10-21 10:16:32.151] [INFO] console - [ 16,
  6955212396822528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/70/',
       id: '70',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:16:31 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:32 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:16:32.169] [INFO] console - [ 16,
  1094330223689728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:16:32.179] [INFO] console - Executing (e0d25630-97f7-4a7b-93f7-39b3d4bc4348): START TRANSACTION;
[2016-10-21 10:16:32.184] [INFO] console - Executing (e0d25630-97f7-4a7b-93f7-39b3d4bc4348): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.189] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 70);
[2016-10-21 10:16:32.194] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.205] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:16:32.208] [INFO] console - Executing (fe1c8450-c4ef-4b3d-9c91-e266ed176f21): START TRANSACTION;
[2016-10-21 10:16:32.211] [INFO] console - Executing (fe1c8450-c4ef-4b3d-9c91-e266ed176f21): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.214] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.230] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:16:32.236] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:32.241] [INFO] console - Executing (fe1c8450-c4ef-4b3d-9c91-e266ed176f21): COMMIT;
[2016-10-21 10:16:32.243] [INFO] console - [ 70,
  622,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:16:32.289] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:32.297] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:16:32.277 +00:00' WHERE "id" = '70'
[2016-10-21 10:16:32.302] [INFO] console - Executing (0e90ba7d-25c6-4d23-953e-1c854d99a621): START TRANSACTION;
[2016-10-21 10:16:32.304] [INFO] console - Executing (0e90ba7d-25c6-4d23-953e-1c854d99a621): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.317] [INFO] console - Executing (0e90ba7d-25c6-4d23-953e-1c854d99a621): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:16:32 GMT+0500 (YEKT)',0,0,'2016-10-21 05:16:32.309 +00:00','2016-10-21 05:16:32.309 +00:00',2,3) RETURNING *;
[2016-10-21 10:16:32.322] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '70'
                                    or path like '/2/70/'||'%'
[2016-10-21 10:16:32.329] [INFO] console - Executing (0e90ba7d-25c6-4d23-953e-1c854d99a621): COMMIT;
[2016-10-21 10:16:32.334] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:32.336] [INFO] console - [ 70, 623, {}, [ '34' ] ]
[2016-10-21 10:16:32.343] [INFO] console - [ 16,
  7612532309098496,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '34' ] ]
[2016-10-21 10:16:32.349] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.360] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.369] [INFO] console - Executing (fd4f2852-85b9-4762-9fbb-6a945f2515be): START TRANSACTION;
[2016-10-21 10:16:32.371] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/70/'||'%'
[2016-10-21 10:16:32.373] [INFO] console - Executing (fd4f2852-85b9-4762-9fbb-6a945f2515be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.378] [INFO] console - Executing (e0d25630-97f7-4a7b-93f7-39b3d4bc4348): COMMIT;
[2016-10-21 10:16:32.384] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:32.390] [INFO] console - [ 70, 621, {}, [ undefined ] ]
[2016-10-21 10:16:32.395] [INFO] console - [ 16,
  2045513706766336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 70 } ]
[2016-10-21 10:16:32.406] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 34);
[2016-10-21 10:16:32.408] [INFO] console - [ 16,
  2771228970450944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:16:32.425] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:16:32.436] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:32.442] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:32.448] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.456] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.464] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '34' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:16:32.480] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:16:32.467 +00:00','2016-10-21 05:16:32.467 +00:00','34','2') RETURNING *;
[2016-10-21 10:16:32.485] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 34, 1, k.id, 77, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:16:32.503] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 34 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 34 and value=-1) "protiv"
[2016-10-21 10:16:32.511] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:16:32.506 +00:00' WHERE "id" = '34'
[2016-10-21 10:16:32.516] [INFO] console - Executing (fd4f2852-85b9-4762-9fbb-6a945f2515be): COMMIT;
[2016-10-21 10:16:32.518] [INFO] console - [ 70, 624, {}, [ undefined ] ]
[2016-10-21 10:16:32.520] [INFO] console - [ 16,
  4462472153006080,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id34.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '77',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:16:32.539] [INFO] console - Executing (0c68733e-d2b0-4314-8bcd-d0087316cd3e): START TRANSACTION;
[2016-10-21 10:16:32.541] [INFO] console - Executing (0c68733e-d2b0-4314-8bcd-d0087316cd3e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.546] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 77 }
[2016-10-21 10:16:32.549] [INFO] console - Executing (cb43e99c-24de-459e-9087-24e5d7a01124): START TRANSACTION;
[2016-10-21 10:16:32.552] [INFO] console - Executing (cb43e99c-24de-459e-9087-24e5d7a01124): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:32.556] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:32.570] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 77);
[2016-10-21 10:16:32.572] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 34);
[2016-10-21 10:16:32.582] [INFO] console - Executing (cb43e99c-24de-459e-9087-24e5d7a01124): COMMIT;
[2016-10-21 10:16:32.592] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:16:32.593] [INFO] console - [ 70,
  626,
  {},
  [ { id: '77',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:16:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:16:32 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '34',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:16:32.605] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:32.611] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:32.616] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:32.623] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:32.630] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '34' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:16:32.635] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 34
                                and (
                                    id= 77
                                    or parent_id = 77
                                )
[2016-10-21 10:16:32.645] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 34 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 34 and value=-1) "protiv"
[2016-10-21 10:16:32.664] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:16:32.649 +00:00' WHERE "id" = '34'
[2016-10-21 10:16:32.685] [INFO] console - Executing (0c68733e-d2b0-4314-8bcd-d0087316cd3e): COMMIT;
[2016-10-21 10:16:32.689] [INFO] console - [ 70, 625, {}, [ undefined ] ]
[2016-10-21 10:16:32.701] [INFO] console - [ 16,
  3777705445163008,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id34.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '77',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:16:42.512] [INFO] console - [ 70, 628, {}, [ undefined ] ]
[2016-10-21 10:16:42.518] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:16:42.523] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:16:42.529] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:16:42.531] [INFO] console - Executing (8b74dc60-30c1-4df3-a0aa-5128ff156c58): START TRANSACTION;
[2016-10-21 10:16:42.534] [INFO] console - Executing (8b74dc60-30c1-4df3-a0aa-5128ff156c58): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:42.546] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:16:42.553] [INFO] console - Executing (8b74dc60-30c1-4df3-a0aa-5128ff156c58): COMMIT;
[2016-10-21 10:16:42.559] [INFO] console - [ 70,
  629,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:16:42.590] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:16:42.597] [INFO] console - [ 70, 630, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:16:42.627] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:42.633] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): START TRANSACTION;
[2016-10-21 10:16:42.635] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:42.649] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:16:42.641 +00:00','2016-10-21 05:16:42.641 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:16:42.654] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:42.659] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:42.664] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:16:42.669] [INFO] console - Executing (3f54d08a-98b9-40d5-b987-30b8f2cc8fe3): COMMIT;
[2016-10-21 10:16:42.671] [INFO] console - [ 70, 631, {}, [ '71' ] ]
[2016-10-21 10:16:42.679] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:42.686] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:16:42.688] [INFO] console - Executing (f7d49f91-b3bb-4cdf-9bcf-aa11c1c9f2f5): START TRANSACTION;
[2016-10-21 10:16:42.691] [INFO] console - Executing (f7d49f91-b3bb-4cdf-9bcf-aa11c1c9f2f5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:42.699] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:16:42.712] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 71);
[2016-10-21 10:16:42.713] [INFO] console - [ 16,
  6860147110445056,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 45 } ]
[2016-10-21 10:16:42.720] [INFO] console - [ 16,
  6729487341322240,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 71 } ]
[2016-10-21 10:16:42.730] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:16:42.737] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:42.743] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:42.747] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:42.760] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:16:42.750 +00:00' WHERE "id" = '71'
[2016-10-21 10:16:42.763] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '71'
                                    or path like '/71/'||'%'
[2016-10-21 10:16:42.770] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:42.774] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:42.783] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:42.789] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/71/'||'%'
[2016-10-21 10:16:42.791] [INFO] console - Executing (f7d49f91-b3bb-4cdf-9bcf-aa11c1c9f2f5): COMMIT;
[2016-10-21 10:16:42.793] [INFO] console - [ 70, 632, {}, [ undefined ] ]
[2016-10-21 10:16:42.799] [INFO] console - [ 16,
  4776044189974528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/71/',
       id: '71',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:16:42.812] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:42.813] [INFO] console - [ 16,
  8559777915338752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:16:42.822] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): START TRANSACTION;
[2016-10-21 10:16:42.824] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:42.836] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:16:42.827 +00:00','2016-10-21 05:16:42.827 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:16:42.840] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:42.845] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:42.855] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:16:42.863] [INFO] console - Executing (6abb6e85-2122-45a8-b9ad-392793200307): COMMIT;
[2016-10-21 10:16:42.872] [INFO] console - [ 70, 633, {}, [ '72' ] ]
[2016-10-21 10:16:42.879] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:42.884] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:16:42.891] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:16:42.895] [INFO] console - [ 16,
  2553021084991488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 46 } ]
[2016-10-21 10:16:42.916] [INFO] console - [ 16,
  1522548722368512,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 72 } ]
[2016-10-21 10:16:46.061] [INFO] console - Executing (492fceee-65d3-479d-9cf7-a8a37b17c4c6): START TRANSACTION;
[2016-10-21 10:16:46.063] [INFO] console - Executing (492fceee-65d3-479d-9cf7-a8a37b17c4c6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.068] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 72);
[2016-10-21 10:16:46.075] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 71);
[2016-10-21 10:16:46.080] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.088] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.091] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:46.098] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='71',"updated_at"='2016-10-21 05:16:46.094 +00:00' WHERE "id" = '72'
[2016-10-21 10:16:46.112] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/71/')
                                where
                                    id = '72'
                                    or path like '/72/'||'%'
[2016-10-21 10:16:46.117] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/71/' like path||id||'/%'
[2016-10-21 10:16:46.123] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/71/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.132] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('71', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.137] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/71/72/'||'%'
[2016-10-21 10:16:46.140] [INFO] console - Executing (492fceee-65d3-479d-9cf7-a8a37b17c4c6): COMMIT;
[2016-10-21 10:16:46.143] [INFO] console - [ 70, 634, {}, [ undefined ] ]
[2016-10-21 10:16:46.150] [INFO] console - [ 16,
  5735985606295552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id71.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/71/72/',
       id: '72',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/71/',
       note: null,
       created_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '71' } } ]
[2016-10-21 10:16:46.165] [INFO] console - [ 16,
  5988952081170432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id71.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:16:46.170] [INFO] console - [ 16,
  8187211243585536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:16:46.181] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:16:46.185] [INFO] console - Executing (44e4439f-c08a-4c5b-93e4-aa041f818b4e): START TRANSACTION;
[2016-10-21 10:16:46.189] [INFO] console - Executing (44e4439f-c08a-4c5b-93e4-aa041f818b4e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.198] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:16:46.205] [INFO] console - Executing (44e4439f-c08a-4c5b-93e4-aa041f818b4e): COMMIT;
[2016-10-21 10:16:46.207] [INFO] console - [ 70,
  635,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:16:46.233] [INFO] console - Executing (d92bd842-3a22-4a34-be3d-cc0221741357): START TRANSACTION;
[2016-10-21 10:16:46.234] [INFO] console - Executing (d92bd842-3a22-4a34-be3d-cc0221741357): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.239] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 71);
[2016-10-21 10:16:46.245] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:16:46.248] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.255] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.262] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:46.270] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:16:46.265 +00:00' WHERE "id" = '71'
[2016-10-21 10:16:46.273] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '71'
                                    or path like '/2/71/'||'%'
[2016-10-21 10:16:46.276] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:16:46.280] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.286] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.290] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/71/'||'%'
[2016-10-21 10:16:46.293] [INFO] console - Executing (d92bd842-3a22-4a34-be3d-cc0221741357): COMMIT;
[2016-10-21 10:16:46.295] [INFO] console - [ 70, 636, {}, [ undefined ] ]
[2016-10-21 10:16:46.297] [INFO] console - [ 16,
  1475235589128192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 71 } ]
[2016-10-21 10:16:46.305] [INFO] console - [ 16,
  4732314739277824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/71/',
       id: '71',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:16:46.316] [INFO] console - [ 16,
  5002418204966912,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:16:46.321] [INFO] console - [ 16,
  588639843123200,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:16:46.326] [INFO] console - [ 16,
  4736414442848256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id72.starshinaChange',
  [],
  {} ]
[2016-10-21 10:16:46.335] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 72 }
[2016-10-21 10:16:46.338] [INFO] console - Executing (23131a32-c40e-4c2f-a747-67a6298682e2): START TRANSACTION;
[2016-10-21 10:16:46.340] [INFO] console - Executing (23131a32-c40e-4c2f-a747-67a6298682e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.346] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 72);
[2016-10-21 10:16:46.353] [INFO] console - Executing (23131a32-c40e-4c2f-a747-67a6298682e2): COMMIT;
[2016-10-21 10:16:46.354] [INFO] console - [ 70,
  637,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/71/72/',
      id: '72',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/71/',
      note: null,
      created_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '71',
      attachments: [] } ] ]
[2016-10-21 10:16:46.364] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 71 }
[2016-10-21 10:16:46.367] [INFO] console - Executing (d39497ce-5aac-4925-8070-8641f45fbcdf): START TRANSACTION;
[2016-10-21 10:16:46.371] [INFO] console - Executing (d39497ce-5aac-4925-8070-8641f45fbcdf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.378] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 71);
[2016-10-21 10:16:46.383] [INFO] console - Executing (d39497ce-5aac-4925-8070-8641f45fbcdf): COMMIT;
[2016-10-21 10:16:46.385] [INFO] console - [ 70,
  638,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/71/',
      id: '71',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:16:42 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:16:46.398] [INFO] console - Executing (8f577d67-7cc3-4af5-958f-36bfcbc06fdb): START TRANSACTION;
[2016-10-21 10:16:46.399] [INFO] console - Executing (8f577d67-7cc3-4af5-958f-36bfcbc06fdb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.404] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 71);
[2016-10-21 10:16:46.408] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.415] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.422] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:16:46.430] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:16:46.424 +00:00' WHERE "id" = '71'
[2016-10-21 10:16:46.434] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '71'
                                    or path like '/4/71/'||'%'
[2016-10-21 10:16:46.437] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:46.440] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.444] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.448] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/71/'||'%'
[2016-10-21 10:16:46.450] [INFO] console - Executing (8f577d67-7cc3-4af5-958f-36bfcbc06fdb): COMMIT;
[2016-10-21 10:16:46.452] [INFO] console - [ 70, 639, {}, [ undefined ] ]
[2016-10-21 10:16:46.456] [INFO] console - [ 16,
  6864662343712768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 71 } ]
[2016-10-21 10:16:46.462] [INFO] console - [ 16,
  813007789621248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:16:46.467] [INFO] console - [ 16,
  8527619479830528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id72.starshinaChange',
  [],
  {} ]
[2016-10-21 10:16:46.480] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:46.485] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): START TRANSACTION;
[2016-10-21 10:16:46.487] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.494] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:16:46.489 +00:00','2016-10-21 05:16:46.489 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:16:46.498] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:46.502] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.506] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:16:46.510] [INFO] console - Executing (23e1a06c-d1a5-4ec6-a031-392831cec08a): COMMIT;
[2016-10-21 10:16:46.512] [INFO] console - [ 70, 640, {}, [ '73' ] ]
[2016-10-21 10:16:46.519] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.524] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:16:46.526] [INFO] console - Executing (552928f1-d358-416d-961b-0fce04116162): START TRANSACTION;
[2016-10-21 10:16:46.530] [INFO] console - Executing (552928f1-d358-416d-961b-0fce04116162): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.534] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:16:46.539] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 73);
[2016-10-21 10:16:46.541] [INFO] console - [ 16,
  2186655750422528,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 47 } ]
[2016-10-21 10:16:46.550] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:16:46.551] [INFO] console - [ 16,
  5852249515360256,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 73 } ]
[2016-10-21 10:16:46.557] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.562] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.565] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:46.574] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:16:46.567 +00:00' WHERE "id" = '73'
[2016-10-21 10:16:46.577] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '73'
                                    or path like '/73/'||'%'
[2016-10-21 10:16:46.580] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:46.583] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.590] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.595] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/73/'||'%'
[2016-10-21 10:16:46.597] [INFO] console - Executing (552928f1-d358-416d-961b-0fce04116162): COMMIT;
[2016-10-21 10:16:46.599] [INFO] console - [ 70, 641, {}, [ undefined ] ]
[2016-10-21 10:16:46.607] [INFO] console - [ 16,
  3389037991690240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/73/',
       id: '73',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:16:46.622] [INFO] console - Executing (061649bf-502b-4881-a60b-19109ed7ed6f): START TRANSACTION;
[2016-10-21 10:16:46.624] [INFO] console - [ 16,
  2770403732750336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:16:46.632] [INFO] console - Executing (061649bf-502b-4881-a60b-19109ed7ed6f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.634] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:16:46.637] [INFO] console - Executing (21682c91-6906-4719-a219-985d386afbd0): START TRANSACTION;
[2016-10-21 10:16:46.640] [INFO] console - Executing (21682c91-6906-4719-a219-985d386afbd0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.643] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 73);
[2016-10-21 10:16:46.655] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:16:46.661] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.665] [INFO] console - Executing (21682c91-6906-4719-a219-985d386afbd0): COMMIT;
[2016-10-21 10:16:46.670] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.671] [INFO] console - [ 70,
  643,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:16:46.683] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:16:46.695] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:46.701] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:16:46.688 +00:00' WHERE "id" = '73'
[2016-10-21 10:16:46.707] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '73'
                                    or path like '/2/73/'||'%'
[2016-10-21 10:16:46.708] [INFO] console - Executing (38ac4903-38b1-4f7d-80e6-b7f13ad55e8f): START TRANSACTION;
[2016-10-21 10:16:46.710] [INFO] console - Executing (38ac4903-38b1-4f7d-80e6-b7f13ad55e8f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.713] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:16:46.718] [INFO] console - Executing (38ac4903-38b1-4f7d-80e6-b7f13ad55e8f): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT)',0,0,'2016-10-21 05:16:46.714 +00:00','2016-10-21 05:16:46.714 +00:00',2,3) RETURNING *;
[2016-10-21 10:16:46.721] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.725] [INFO] console - Executing (38ac4903-38b1-4f7d-80e6-b7f13ad55e8f): COMMIT;
[2016-10-21 10:16:46.729] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.731] [INFO] console - [ 70, 644, {}, [ '35' ] ]
[2016-10-21 10:16:46.735] [INFO] console - [ 16,
  7011125476458496,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '35' ] ]
[2016-10-21 10:16:46.745] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/73/'||'%'
[2016-10-21 10:16:46.748] [INFO] console - Executing (6a2dc16a-f635-4def-97ce-7011ff258169): START TRANSACTION;
[2016-10-21 10:16:46.750] [INFO] console - Executing (061649bf-502b-4881-a60b-19109ed7ed6f): COMMIT;
[2016-10-21 10:16:46.751] [INFO] console - Executing (6a2dc16a-f635-4def-97ce-7011ff258169): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.754] [INFO] console - [ 70, 642, {}, [ undefined ] ]
[2016-10-21 10:16:46.758] [INFO] console - [ 16,
  615641289588736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 73 } ]
[2016-10-21 10:16:46.766] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:46.768] [INFO] console - [ 16,
  7175127449993216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:16:46.777] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 35);
[2016-10-21 10:16:46.783] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:16:46.790] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.796] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.801] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.805] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.810] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '35' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:16:46.817] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:16:46.812 +00:00','2016-10-21 05:16:46.812 +00:00','35','2') RETURNING *;
[2016-10-21 10:16:46.821] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 35, 1, k.id, 80, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:16:46.826] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 35 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 35 and value=-1) "protiv"
[2016-10-21 10:16:46.834] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:16:46.828 +00:00' WHERE "id" = '35'
[2016-10-21 10:16:46.839] [INFO] console - Executing (6a2dc16a-f635-4def-97ce-7011ff258169): COMMIT;
[2016-10-21 10:16:46.841] [INFO] console - [ 70, 645, {}, [ undefined ] ]
[2016-10-21 10:16:46.845] [INFO] console - [ 16,
  1082918250217472,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id35.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '80',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:16:46.858] [INFO] console - Executing (ce6d24cf-020a-4dc8-8737-7cfb431ef42a): START TRANSACTION;
[2016-10-21 10:16:46.859] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 80 }
[2016-10-21 10:16:46.863] [INFO] console - Executing (8b118a0e-1a61-4e64-b4da-63566ba4363b): START TRANSACTION;
[2016-10-21 10:16:46.864] [INFO] console - Executing (ce6d24cf-020a-4dc8-8737-7cfb431ef42a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.866] [INFO] console - Executing (8b118a0e-1a61-4e64-b4da-63566ba4363b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:16:46.870] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:16:46.879] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 80);
[2016-10-21 10:16:46.887] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 35);
[2016-10-21 10:16:46.889] [INFO] console - Executing (8b118a0e-1a61-4e64-b4da-63566ba4363b): COMMIT;
[2016-10-21 10:16:46.894] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:16:46.895] [INFO] console - [ 70,
  647,
  {},
  [ { id: '80',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:16:46 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '35',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:16:46.911] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.921] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:16:46.927] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:16:46.934] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:16:46.940] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '35' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:16:46.944] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 35
                                and (
                                    id= 80
                                    or parent_id = 80
                                )
[2016-10-21 10:16:46.949] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 35 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 35 and value=-1) "protiv"
[2016-10-21 10:16:46.966] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:16:46.956 +00:00' WHERE "id" = '35'
[2016-10-21 10:16:46.970] [INFO] console - Executing (ce6d24cf-020a-4dc8-8737-7cfb431ef42a): COMMIT;
[2016-10-21 10:16:46.973] [INFO] console - [ 70, 646, {}, [ undefined ] ]
[2016-10-21 10:16:46.976] [INFO] console - [ 16,
  3648672692699136,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id35.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '80',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:17:45.680] [INFO] console - [ 70, 649, {}, [ undefined ] ]
[2016-10-21 10:17:45.695] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:17:45.743] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:17:45.751] [INFO] console - Executing (acf98084-4a26-44a5-b6a5-bb8e6a680f8d): START TRANSACTION;
[2016-10-21 10:17:45.752] [INFO] console - Executing (acf98084-4a26-44a5-b6a5-bb8e6a680f8d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:45.764] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:17:45.784] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:17:45.799] [INFO] console - Executing (acf98084-4a26-44a5-b6a5-bb8e6a680f8d): COMMIT;
[2016-10-21 10:17:45.806] [INFO] console - [ 70,
  650,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:17:45.856] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:17:45.866] [INFO] console - [ 70, 651, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:17:45.966] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:45.971] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): START TRANSACTION;
[2016-10-21 10:17:45.972] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:45.985] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:17:45.974 +00:00','2016-10-21 05:17:45.974 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:17:45.992] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:45.997] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.003] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:17:46.008] [INFO] console - Executing (3b9dde16-9233-4f7c-a673-b606f47d6314): COMMIT;
[2016-10-21 10:17:46.011] [INFO] console - [ 70, 652, {}, [ '74' ] ]
[2016-10-21 10:17:46.030] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.033] [INFO] console - Executing (da1ffd5f-5a43-43b4-94bb-c60065549d0f): START TRANSACTION;
[2016-10-21 10:17:46.042] [INFO] console - Executing (da1ffd5f-5a43-43b4-94bb-c60065549d0f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.047] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:17:46.052] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 74);
[2016-10-21 10:17:46.057] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:17:46.062] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:17:46.066] [INFO] console - [ 16,
  6802857204383744,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 48 } ]
[2016-10-21 10:17:46.072] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.076] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.085] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.089] [INFO] console - [ 16,
  8779417711017984,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 74 } ]
[2016-10-21 10:17:46.103] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:17:46.088 +00:00' WHERE "id" = '74'
[2016-10-21 10:17:46.112] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '74'
                                    or path like '/74/'||'%'
[2016-10-21 10:17:46.114] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:17:46.119] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.124] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.127] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/74/'||'%'
[2016-10-21 10:17:46.130] [INFO] console - Executing (da1ffd5f-5a43-43b4-94bb-c60065549d0f): COMMIT;
[2016-10-21 10:17:46.132] [INFO] console - [ 70, 653, {}, [ undefined ] ]
[2016-10-21 10:17:46.134] [INFO] console - [ 16,
  6358043790934016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/74/',
       id: '74',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:17:45 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:17:46.148] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:46.150] [INFO] console - [ 16,
  1477524609564672,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:17:46.156] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): START TRANSACTION;
[2016-10-21 10:17:46.157] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.165] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:17:46.159 +00:00','2016-10-21 05:17:46.159 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:17:46.169] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.173] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.177] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:17:46.180] [INFO] console - Executing (dddb1707-018d-4de8-98d0-bf9643d34251): COMMIT;
[2016-10-21 10:17:46.182] [INFO] console - [ 70, 654, {}, [ '75' ] ]
[2016-10-21 10:17:46.186] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.194] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:17:46.201] [INFO] console - Executing (79ec4230-0a18-4510-9ea0-61b0aade039a): START TRANSACTION;
[2016-10-21 10:17:46.204] [INFO] console - Executing (79ec4230-0a18-4510-9ea0-61b0aade039a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.207] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:17:46.210] [INFO] console - [ 16,
  4492167955349504,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 49 } ]
[2016-10-21 10:17:46.215] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 75);
[2016-10-21 10:17:46.216] [INFO] console - [ 16,
  5373691701493760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 75 } ]
[2016-10-21 10:17:46.224] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 74);
[2016-10-21 10:17:46.227] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.232] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.236] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.247] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='74',"updated_at"='2016-10-21 05:17:46.237 +00:00' WHERE "id" = '75'
[2016-10-21 10:17:46.250] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/74/')
                                where
                                    id = '75'
                                    or path like '/75/'||'%'
[2016-10-21 10:17:46.254] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/74/' like path||id||'/%'
[2016-10-21 10:17:46.257] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/74/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.266] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('74', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.270] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/74/75/'||'%'
[2016-10-21 10:17:46.273] [INFO] console - Executing (79ec4230-0a18-4510-9ea0-61b0aade039a): COMMIT;
[2016-10-21 10:17:46.274] [INFO] console - [ 70, 655, {}, [ undefined ] ]
[2016-10-21 10:17:46.276] [INFO] console - [ 16,
  3372389792481280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id74.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/74/75/',
       id: '75',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/74/',
       note: null,
       created_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '74' } } ]
[2016-10-21 10:17:46.285] [INFO] console - [ 16,
  2090438322290688,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id74.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:17:46.289] [INFO] console - [ 16,
  8081138908135424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:17:46.301] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:17:46.305] [INFO] console - Executing (fdcd8613-2187-415b-86c2-ef4f68a4db96): START TRANSACTION;
[2016-10-21 10:17:46.307] [INFO] console - Executing (fdcd8613-2187-415b-86c2-ef4f68a4db96): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.314] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:17:46.322] [INFO] console - Executing (fdcd8613-2187-415b-86c2-ef4f68a4db96): COMMIT;
[2016-10-21 10:17:46.324] [INFO] console - [ 70,
  656,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:17:46.342] [INFO] console - Executing (f5a926d6-387f-4729-b93b-799c2bd49bab): START TRANSACTION;
[2016-10-21 10:17:46.343] [INFO] console - Executing (f5a926d6-387f-4729-b93b-799c2bd49bab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.348] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 74);
[2016-10-21 10:17:46.356] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:17:46.359] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.363] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.368] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:17:46.376] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:17:46.370 +00:00' WHERE "id" = '74'
[2016-10-21 10:17:46.378] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '74'
                                    or path like '/2/74/'||'%'
[2016-10-21 10:17:46.382] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:17:46.385] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.390] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.393] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/74/'||'%'
[2016-10-21 10:17:46.395] [INFO] console - Executing (f5a926d6-387f-4729-b93b-799c2bd49bab): COMMIT;
[2016-10-21 10:17:46.397] [INFO] console - [ 70, 657, {}, [ undefined ] ]
[2016-10-21 10:17:46.400] [INFO] console - [ 16,
  5090067301269504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 74 } ]
[2016-10-21 10:17:46.407] [INFO] console - [ 16,
  6060775875543040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/74/',
       id: '74',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:17:45 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:17:46.414] [INFO] console - [ 16,
  2352803324362752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:17:46.419] [INFO] console - [ 16,
  3604900785160192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:17:46.423] [INFO] console - [ 16,
  5545970433523712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id75.starshinaChange',
  [],
  {} ]
[2016-10-21 10:17:46.433] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 75 }
[2016-10-21 10:17:46.435] [INFO] console - Executing (6c65a8ef-8635-4934-b730-794caf1a8b53): START TRANSACTION;
[2016-10-21 10:17:46.437] [INFO] console - Executing (6c65a8ef-8635-4934-b730-794caf1a8b53): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.444] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 75);
[2016-10-21 10:17:46.451] [INFO] console - Executing (6c65a8ef-8635-4934-b730-794caf1a8b53): COMMIT;
[2016-10-21 10:17:46.456] [INFO] console - [ 70,
  658,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/74/75/',
      id: '75',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/74/',
      note: null,
      created_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '74',
      attachments: [] } ] ]
[2016-10-21 10:17:46.468] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 74 }
[2016-10-21 10:17:46.471] [INFO] console - Executing (c5e7c86d-2df2-41dc-8c7b-b12cec7b4457): START TRANSACTION;
[2016-10-21 10:17:46.473] [INFO] console - Executing (c5e7c86d-2df2-41dc-8c7b-b12cec7b4457): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.480] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 74);
[2016-10-21 10:17:46.485] [INFO] console - Executing (c5e7c86d-2df2-41dc-8c7b-b12cec7b4457): COMMIT;
[2016-10-21 10:17:46.487] [INFO] console - [ 70,
  659,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/74/',
      id: '74',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:17:45 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:17:46.503] [INFO] console - Executing (28e099c0-c348-4df9-9c77-ed9c55ac32b4): START TRANSACTION;
[2016-10-21 10:17:46.505] [INFO] console - Executing (28e099c0-c348-4df9-9c77-ed9c55ac32b4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.513] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 74);
[2016-10-21 10:17:46.521] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.526] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.532] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:17:46.541] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:17:46.535 +00:00' WHERE "id" = '74'
[2016-10-21 10:17:46.543] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '74'
                                    or path like '/4/74/'||'%'
[2016-10-21 10:17:46.547] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.550] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.554] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.557] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/74/'||'%'
[2016-10-21 10:17:46.560] [INFO] console - Executing (28e099c0-c348-4df9-9c77-ed9c55ac32b4): COMMIT;
[2016-10-21 10:17:46.562] [INFO] console - [ 70, 660, {}, [ undefined ] ]
[2016-10-21 10:17:46.564] [INFO] console - [ 16,
  5056042905894912,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 74 } ]
[2016-10-21 10:17:46.571] [INFO] console - [ 16,
  8990707356270592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:17:46.576] [INFO] console - [ 16,
  5616025666060288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id75.starshinaChange',
  [],
  {} ]
[2016-10-21 10:17:46.587] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:46.590] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): START TRANSACTION;
[2016-10-21 10:17:46.592] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.599] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:17:46.594 +00:00','2016-10-21 05:17:46.594 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:17:46.604] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.607] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.610] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:17:46.614] [INFO] console - Executing (b7b70f10-9e7f-427a-85c6-3f2d92c0a436): COMMIT;
[2016-10-21 10:17:46.616] [INFO] console - [ 70, 661, {}, [ '76' ] ]
[2016-10-21 10:17:46.623] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.627] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:17:46.636] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:17:46.640] [INFO] console - Executing (feee2697-a466-4e09-b634-7078c4a5e466): START TRANSACTION;
[2016-10-21 10:17:46.641] [INFO] console - [ 16,
  7943274658529280,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 50 } ]
[2016-10-21 10:17:46.645] [INFO] console - Executing (feee2697-a466-4e09-b634-7078c4a5e466): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.648] [INFO] console - [ 16,
  452390629146624,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 76 } ]
[2016-10-21 10:17:46.656] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 76);
[2016-10-21 10:17:46.662] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:17:46.668] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.673] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.676] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.685] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:17:46.679 +00:00' WHERE "id" = '76'
[2016-10-21 10:17:46.689] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '76'
                                    or path like '/76/'||'%'
[2016-10-21 10:17:46.691] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:17:46.695] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.699] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.702] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/76/'||'%'
[2016-10-21 10:17:46.704] [INFO] console - Executing (feee2697-a466-4e09-b634-7078c4a5e466): COMMIT;
[2016-10-21 10:17:46.706] [INFO] console - [ 70, 662, {}, [ undefined ] ]
[2016-10-21 10:17:46.708] [INFO] console - [ 16,
  390729809526784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/76/',
       id: '76',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:17:46.716] [INFO] console - Executing (0fa1390f-9a95-4bd2-8771-5c7d928ca1ac): START TRANSACTION;
[2016-10-21 10:17:46.718] [INFO] console - [ 16,
  3993209032146944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:17:46.722] [INFO] console - Executing (0fa1390f-9a95-4bd2-8771-5c7d928ca1ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.727] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 76);
[2016-10-21 10:17:46.731] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.736] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.741] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:17:46.749] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:17:46.745 +00:00' WHERE "id" = '76'
[2016-10-21 10:17:46.752] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '76'
                                    or path like '/2/76/'||'%'
[2016-10-21 10:17:46.756] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:17:46.758] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.763] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.767] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/76/'||'%'
[2016-10-21 10:17:46.769] [INFO] console - Executing (0fa1390f-9a95-4bd2-8771-5c7d928ca1ac): COMMIT;
[2016-10-21 10:17:46.771] [INFO] console - [ 70, 663, {}, [ undefined ] ]
[2016-10-21 10:17:46.773] [INFO] console - [ 16,
  5441129883369472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 76 } ]
[2016-10-21 10:17:46.778] [INFO] console - [ 16,
  1390067048251392,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:17:46.792] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:17:46.797] [INFO] console - Executing (de5f1764-8a49-431d-850f-4ae1b3753d80): START TRANSACTION;
[2016-10-21 10:17:46.800] [INFO] console - Executing (de5f1764-8a49-431d-850f-4ae1b3753d80): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.814] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:17:46.821] [INFO] console - Executing (de5f1764-8a49-431d-850f-4ae1b3753d80): COMMIT;
[2016-10-21 10:17:46.822] [INFO] console - [ 70,
  664,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:17:46.841] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:46.846] [INFO] console - Executing (94e9dd37-df72-431f-a377-350e604ecd1d): START TRANSACTION;
[2016-10-21 10:17:46.847] [INFO] console - Executing (94e9dd37-df72-431f-a377-350e604ecd1d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.856] [INFO] console - Executing (94e9dd37-df72-431f-a377-350e604ecd1d): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT)',0,0,'2016-10-21 05:17:46.849 +00:00','2016-10-21 05:17:46.849 +00:00',2,3) RETURNING *;
[2016-10-21 10:17:46.864] [INFO] console - Executing (94e9dd37-df72-431f-a377-350e604ecd1d): COMMIT;
[2016-10-21 10:17:46.866] [INFO] console - [ 70, 665, {}, [ '36' ] ]
[2016-10-21 10:17:46.874] [INFO] console - [ 16,
  8803236332961792,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '36' ] ]
[2016-10-21 10:17:46.895] [INFO] console - Executing (2ab68d74-e5be-4276-8975-d9ce60262cc8): START TRANSACTION;
[2016-10-21 10:17:46.896] [INFO] console - Executing (2ab68d74-e5be-4276-8975-d9ce60262cc8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:46.902] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:46.910] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 36);
[2016-10-21 10:17:46.924] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:17:46.935] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.940] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:46.943] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:46.948] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:46.952] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '36' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:17:46.958] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:17:46.955 +00:00','2016-10-21 05:17:46.955 +00:00','36','2') RETURNING *;
[2016-10-21 10:17:46.969] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 36, 1, k.id, 83, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:17:46.972] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 36 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 36 and value=-1) "protiv"
[2016-10-21 10:17:46.981] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:17:46.974 +00:00' WHERE "id" = '36'
[2016-10-21 10:17:46.985] [INFO] console - Executing (2ab68d74-e5be-4276-8975-d9ce60262cc8): COMMIT;
[2016-10-21 10:17:46.986] [INFO] console - [ 70, 666, {}, [ undefined ] ]
[2016-10-21 10:17:46.994] [INFO] console - [ 16,
  8002373291081728,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id36.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '83',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:17:46.999] [INFO] console - Executing (519d2098-b775-4b67-9d2b-24af069d2f2e): START TRANSACTION;
[2016-10-21 10:17:47.006] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 83 }
[2016-10-21 10:17:47.008] [INFO] console - Executing (6f579334-d113-46dc-829d-01afae79efbc): START TRANSACTION;
[2016-10-21 10:17:47.009] [INFO] console - Executing (519d2098-b775-4b67-9d2b-24af069d2f2e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:47.011] [INFO] console - Executing (6f579334-d113-46dc-829d-01afae79efbc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:17:47.018] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:17:47.026] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 83);
[2016-10-21 10:17:47.035] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 36);
[2016-10-21 10:17:47.037] [INFO] console - Executing (6f579334-d113-46dc-829d-01afae79efbc): COMMIT;
[2016-10-21 10:17:47.042] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:17:47.043] [INFO] console - [ 70,
  668,
  {},
  [ { id: '83',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:17:46 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '36',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:17:47.059] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:47.071] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:17:47.076] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:17:47.082] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:17:47.087] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '36' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:17:47.091] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 36
                                and (
                                    id= 83
                                    or parent_id = 83
                                )
[2016-10-21 10:17:47.096] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 36 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 36 and value=-1) "protiv"
[2016-10-21 10:17:47.104] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:17:47.099 +00:00' WHERE "id" = '36'
[2016-10-21 10:17:47.108] [INFO] console - Executing (519d2098-b775-4b67-9d2b-24af069d2f2e): COMMIT;
[2016-10-21 10:17:47.111] [INFO] console - [ 70, 667, {}, [ undefined ] ]
[2016-10-21 10:17:47.113] [INFO] console - [ 16,
  3224144145547264,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id36.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '83',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:18:00.493] [INFO] console - [ 70, 670, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:18:00.508] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:18:00.510] [INFO] console - [ 70, 671, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:18:00.572] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:18:00.575] [INFO] console - [ 70, 672, {}, [ 'КОПА' ] ]
[2016-10-21 10:18:00.593] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:18:00.598] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:18:00.617] [INFO] console - [ 8,
  68,
  673,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:18:00.723] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:00.730] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:18:00.736] [INFO] console - [ 8,
  68,
  675,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:18:00.819] [INFO] console - [ 70, 677, {}, [ undefined ] ]
[2016-10-21 10:18:00.831] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:18:00.839] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:18:00.846] [INFO] console - Executing (1dc74ee1-d2b2-42e5-b058-0eae84ffdb1f): START TRANSACTION;
[2016-10-21 10:18:00.858] [INFO] console - Executing (1dc74ee1-d2b2-42e5-b058-0eae84ffdb1f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:00.913] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:18:00.928] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:18:00.942] [INFO] console - Executing (1dc74ee1-d2b2-42e5-b058-0eae84ffdb1f): COMMIT;
[2016-10-21 10:18:00.944] [INFO] console - [ 70,
  678,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:00.968] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:18:00.970] [INFO] console - Executing (68058b38-d56d-4ccc-89e4-306180b5416f): START TRANSACTION;
[2016-10-21 10:18:00.972] [INFO] console - Executing (68058b38-d56d-4ccc-89e4-306180b5416f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:00.983] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:00.989] [INFO] console - Executing (68058b38-d56d-4ccc-89e4-306180b5416f): COMMIT;
[2016-10-21 10:18:00.990] [INFO] console - [ 70,
  679,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 50,
      path: '/1/',
      note: 'unit test 1477023736520',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:01.018] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:01.022] [INFO] console - Executing (c43f671d-b88b-4e28-855c-ba7f5788d96a): START TRANSACTION;
[2016-10-21 10:18:01.023] [INFO] console - Executing (c43f671d-b88b-4e28-855c-ba7f5788d96a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.034] [INFO] console - Executing (c43f671d-b88b-4e28-855c-ba7f5788d96a): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:18:01.028 +00:00','2016-10-21 05:18:01.028 +00:00',2,2) RETURNING *;
[2016-10-21 10:18:01.042] [INFO] console - Executing (c43f671d-b88b-4e28-855c-ba7f5788d96a): COMMIT;
[2016-10-21 10:18:01.047] [INFO] console - [ 70, 680, {}, [ '22' ] ]
[2016-10-21 10:18:01.077] [INFO] console - Executing (81d1e674-896d-4d66-a16d-d62bde80c0b1): START TRANSACTION;
[2016-10-21 10:18:01.079] [INFO] console - Executing (81d1e674-896d-4d66-a16d-d62bde80c0b1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.088] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 22);
[2016-10-21 10:18:01.098] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:18:01.091 +00:00',"updated_at"='2016-10-21 05:18:01.091 +00:00' WHERE "id" = '22'
[2016-10-21 10:18:01.103] [INFO] console - Executing (81d1e674-896d-4d66-a16d-d62bde80c0b1): COMMIT;
[2016-10-21 10:18:01.105] [INFO] console - [ 70, 681, {}, [ undefined ] ]
[2016-10-21 10:18:01.107] [INFO] console - [ 16, 6913867531681792, {}, 'ru.kopa.model.Kopa.id22.change' ]
[2016-10-21 10:18:01.109] [INFO] console - [ 16,
  91718909165568,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 22 ] ]
[2016-10-21 10:18:01.127] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 22 }
[2016-10-21 10:18:01.130] [INFO] console - Executing (7a352a43-582a-4ee7-9f9e-3d771c89cedb): START TRANSACTION;
[2016-10-21 10:18:01.142] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:18:01.143] [INFO] console - Executing (7a352a43-582a-4ee7-9f9e-3d771c89cedb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.156] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:18:01.158] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 22);
[2016-10-21 10:18:01.166] [INFO] console - [ 70, 683, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:18:01.169] [INFO] console - Executing (7a352a43-582a-4ee7-9f9e-3d771c89cedb): COMMIT;
[2016-10-21 10:18:01.172] [INFO] console - [ 70,
  682,
  {},
  [ { id: '22',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:01.206] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:18:01.219] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:18:01.222] [INFO] console - [ 70, 684, {}, [ [ [Object] ] ] ]
[2016-10-21 10:18:01.237] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:18:01.244] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:18:01.257] [INFO] console - [ 70, 685, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:18:01.288] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:18:01.306] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:18:01.308] [INFO] console - [ 70, 686, {}, [ [ [Object] ] ] ]
[2016-10-21 10:18:01.323] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:18:01.326] [INFO] console - Executing (8e4c1497-0840-4111-a17c-420912f9316f): START TRANSACTION;
[2016-10-21 10:18:01.327] [INFO] console - Executing (8e4c1497-0840-4111-a17c-420912f9316f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.338] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:18:01.348] [INFO] console - Executing (8e4c1497-0840-4111-a17c-420912f9316f): COMMIT;
[2016-10-21 10:18:01.350] [INFO] console - [ 70,
  687,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:18:01.373] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:01.381] [INFO] console - Executing (a9daf4e2-a050-46d6-ab76-4880a9dedfbd): START TRANSACTION;
[2016-10-21 10:18:01.385] [INFO] console - Executing (a9daf4e2-a050-46d6-ab76-4880a9dedfbd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.395] [INFO] console - Executing (a9daf4e2-a050-46d6-ab76-4880a9dedfbd): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027081366 temp','2016-10-21 05:18:01.389 +00:00','2016-10-21 05:18:01.389 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:01.399] [INFO] console - Executing (a9daf4e2-a050-46d6-ab76-4880a9dedfbd): COMMIT;
[2016-10-21 10:18:01.401] [INFO] console - [ 70, 688, {}, [ '29' ] ]
[2016-10-21 10:18:01.404] [INFO] console - [ 16,
  6858431401033728,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '29' ] ]
[2016-10-21 10:18:01.428] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:01.433] [INFO] console - Executing (e22b3d41-5553-4f01-bfb6-08cf089b2623): START TRANSACTION;
[2016-10-21 10:18:01.434] [INFO] console - Executing (e22b3d41-5553-4f01-bfb6-08cf089b2623): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.446] [INFO] console - Executing (e22b3d41-5553-4f01-bfb6-08cf089b2623): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027081417temp',0,0,'2016-10-21 05:18:01.436 +00:00','2016-10-21 05:18:01.436 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:01.449] [INFO] console - Executing (e22b3d41-5553-4f01-bfb6-08cf089b2623): COMMIT;
[2016-10-21 10:18:01.451] [INFO] console - [ 70, 689, {}, [ '37' ] ]
[2016-10-21 10:18:01.454] [INFO] console - [ 16,
  473414766690304,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '37' ] ]
[2016-10-21 10:18:01.543] [INFO] console - [ 70, 691, {}, [ undefined ] ]
[2016-10-21 10:18:01.546] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:18:01.559] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:18:01.562] [INFO] console - Executing (1c8b8b16-c514-4850-a16a-1e8651eeb44d): START TRANSACTION;
[2016-10-21 10:18:01.564] [INFO] console - Executing (1c8b8b16-c514-4850-a16a-1e8651eeb44d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.566] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:18:01.575] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:18:01.581] [INFO] console - Executing (1c8b8b16-c514-4850-a16a-1e8651eeb44d): COMMIT;
[2016-10-21 10:18:01.583] [INFO] console - [ 70,
  692,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:18:01.610] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:18:01.619] [INFO] console - [ 70, 693, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:18:01.643] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:01.648] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): START TRANSACTION;
[2016-10-21 10:18:01.650] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.659] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:18:01.652 +00:00','2016-10-21 05:18:01.652 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:18:01.663] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:01.668] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:01.671] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:18:01.674] [INFO] console - Executing (adf054ae-6ab7-485e-80a4-b0c3ce723989): COMMIT;
[2016-10-21 10:18:01.677] [INFO] console - [ 70, 694, {}, [ '77' ] ]
[2016-10-21 10:18:01.683] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:01.686] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:18:01.692] [INFO] console - Executing (a616211c-4b27-4acd-8a22-6a76f24cebdf): START TRANSACTION;
[2016-10-21 10:18:01.698] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:01.700] [INFO] console - Executing (a616211c-4b27-4acd-8a22-6a76f24cebdf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.703] [INFO] console - [ 16,
  3838716850208768,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 51 } ]
[2016-10-21 10:18:01.708] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 77);
[2016-10-21 10:18:01.710] [INFO] console - [ 16,
  1174312782397440,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 77 } ]
[2016-10-21 10:18:01.716] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:18:01.720] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:01.726] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:01.728] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:01.735] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:18:01.730 +00:00' WHERE "id" = '77'
[2016-10-21 10:18:01.745] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '77'
                                    or path like '/77/'||'%'
[2016-10-21 10:18:01.747] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:18:01.751] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:18:01.758] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:01.763] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/77/'||'%'
[2016-10-21 10:18:01.766] [INFO] console - Executing (a616211c-4b27-4acd-8a22-6a76f24cebdf): COMMIT;
[2016-10-21 10:18:01.768] [INFO] console - [ 70, 695, {}, [ undefined ] ]
[2016-10-21 10:18:01.771] [INFO] console - [ 16,
  6021533719855104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/77/',
       id: '77',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:18:01.783] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:01.785] [INFO] console - [ 16,
  4673868050464768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:18:01.792] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): START TRANSACTION;
[2016-10-21 10:18:01.794] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.801] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:18:01.796 +00:00','2016-10-21 05:18:01.796 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:18:01.806] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:01.811] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:01.814] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:18:01.818] [INFO] console - Executing (2b1c97ad-99cc-4e9d-9824-bb0f9e061ddb): COMMIT;
[2016-10-21 10:18:01.819] [INFO] console - [ 70, 696, {}, [ '78' ] ]
[2016-10-21 10:18:01.823] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:01.828] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:18:01.834] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:01.837] [INFO] console - Executing (90b15916-29e5-4424-bba1-50282dc67ea4): START TRANSACTION;
[2016-10-21 10:18:01.839] [INFO] console - [ 16,
  156359085522944,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 52 } ]
[2016-10-21 10:18:01.843] [INFO] console - Executing (90b15916-29e5-4424-bba1-50282dc67ea4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.845] [INFO] console - [ 16,
  3564742643810304,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 78 } ]
[2016-10-21 10:18:01.850] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 78);
[2016-10-21 10:18:01.856] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 77);
[2016-10-21 10:18:01.859] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:01.864] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:01.867] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:01.877] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='77',"updated_at"='2016-10-21 05:18:01.869 +00:00' WHERE "id" = '78'
[2016-10-21 10:18:01.881] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/77/')
                                where
                                    id = '78'
                                    or path like '/78/'||'%'
[2016-10-21 10:18:01.886] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/77/' like path||id||'/%'
[2016-10-21 10:18:01.892] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/77/' like k.path||k.id||'/%'
[2016-10-21 10:18:01.897] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('77', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:01.900] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/77/78/'||'%'
[2016-10-21 10:18:01.904] [INFO] console - Executing (90b15916-29e5-4424-bba1-50282dc67ea4): COMMIT;
[2016-10-21 10:18:01.907] [INFO] console - [ 70, 697, {}, [ undefined ] ]
[2016-10-21 10:18:01.909] [INFO] console - [ 16,
  6481024015925248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id77.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/77/78/',
       id: '78',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/77/',
       note: null,
       created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '77' } } ]
[2016-10-21 10:18:01.918] [INFO] console - [ 16,
  4607736725635072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id77.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:18:01.923] [INFO] console - [ 16,
  2028763019739136,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:18:01.932] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:18:01.935] [INFO] console - Executing (dfb2f27c-bee3-4939-8b8a-99f279a30b3d): START TRANSACTION;
[2016-10-21 10:18:01.936] [INFO] console - Executing (dfb2f27c-bee3-4939-8b8a-99f279a30b3d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.943] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:18:01.950] [INFO] console - Executing (dfb2f27c-bee3-4939-8b8a-99f279a30b3d): COMMIT;
[2016-10-21 10:18:01.952] [INFO] console - [ 70,
  698,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:18:01.969] [INFO] console - Executing (56d42959-f9cf-4453-a445-c4abe113b9d3): START TRANSACTION;
[2016-10-21 10:18:01.971] [INFO] console - Executing (56d42959-f9cf-4453-a445-c4abe113b9d3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:01.976] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 77);
[2016-10-21 10:18:01.982] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:18:01.985] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:18:01.990] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:01.994] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:18:02.000] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:18:01.997 +00:00' WHERE "id" = '77'
[2016-10-21 10:18:02.005] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '77'
                                    or path like '/2/77/'||'%'
[2016-10-21 10:18:02.007] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:18:02.010] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.015] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.018] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/77/'||'%'
[2016-10-21 10:18:02.020] [INFO] console - Executing (56d42959-f9cf-4453-a445-c4abe113b9d3): COMMIT;
[2016-10-21 10:18:02.022] [INFO] console - [ 70, 699, {}, [ undefined ] ]
[2016-10-21 10:18:02.023] [INFO] console - [ 16,
  3939460540530688,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 77 } ]
[2016-10-21 10:18:02.029] [INFO] console - [ 16,
  7737289002188800,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/77/',
       id: '77',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:18:02.039] [INFO] console - [ 16,
  458705847975936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:18:02.045] [INFO] console - [ 16,
  3120696985124864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:18:02.050] [INFO] console - [ 16,
  6026804257095680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id78.starshinaChange',
  [],
  {} ]
[2016-10-21 10:18:02.060] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 78 }
[2016-10-21 10:18:02.062] [INFO] console - Executing (5d10cd30-9261-4280-a419-6c6c951e6808): START TRANSACTION;
[2016-10-21 10:18:02.064] [INFO] console - Executing (5d10cd30-9261-4280-a419-6c6c951e6808): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.071] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 78);
[2016-10-21 10:18:02.077] [INFO] console - Executing (5d10cd30-9261-4280-a419-6c6c951e6808): COMMIT;
[2016-10-21 10:18:02.078] [INFO] console - [ 70,
  700,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/77/78/',
      id: '78',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/77/',
      note: null,
      created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '77',
      attachments: [] } ] ]
[2016-10-21 10:18:02.094] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 77 }
[2016-10-21 10:18:02.097] [INFO] console - Executing (e6b7c398-175e-43f7-b678-39e1f00aa4d1): START TRANSACTION;
[2016-10-21 10:18:02.098] [INFO] console - Executing (e6b7c398-175e-43f7-b678-39e1f00aa4d1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.103] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 77);
[2016-10-21 10:18:02.114] [INFO] console - Executing (e6b7c398-175e-43f7-b678-39e1f00aa4d1): COMMIT;
[2016-10-21 10:18:02.115] [INFO] console - [ 70,
  701,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/77/',
      id: '77',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:01 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:18:02.125] [INFO] console - Executing (041608ae-6a62-47af-b6f0-99b810d13c48): START TRANSACTION;
[2016-10-21 10:18:02.126] [INFO] console - Executing (041608ae-6a62-47af-b6f0-99b810d13c48): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.129] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 77);
[2016-10-21 10:18:02.132] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.143] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.148] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:18:02.157] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:18:02.150 +00:00' WHERE "id" = '77'
[2016-10-21 10:18:02.160] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '77'
                                    or path like '/4/77/'||'%'
[2016-10-21 10:18:02.166] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:02.172] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.176] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.185] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/77/'||'%'
[2016-10-21 10:18:02.187] [INFO] console - Executing (041608ae-6a62-47af-b6f0-99b810d13c48): COMMIT;
[2016-10-21 10:18:02.189] [INFO] console - [ 70, 702, {}, [ undefined ] ]
[2016-10-21 10:18:02.192] [INFO] console - [ 16,
  1023995742781440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 77 } ]
[2016-10-21 10:18:02.197] [INFO] console - [ 16,
  2050153152249856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:18:02.203] [INFO] console - [ 16,
  6315968634552320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id78.starshinaChange',
  [],
  {} ]
[2016-10-21 10:18:02.230] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:02.235] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): START TRANSACTION;
[2016-10-21 10:18:02.240] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.249] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:18:02.242 +00:00','2016-10-21 05:18:02.242 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:18:02.252] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:02.256] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.260] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:18:02.262] [INFO] console - Executing (5cc402ab-0aec-4677-94cb-aba78994af17): COMMIT;
[2016-10-21 10:18:02.266] [INFO] console - [ 70, 703, {}, [ '79' ] ]
[2016-10-21 10:18:02.272] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.277] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:18:02.280] [INFO] console - Executing (a86a2530-e4a2-4815-8b6c-b69b89631d65): START TRANSACTION;
[2016-10-21 10:18:02.282] [INFO] console - Executing (a86a2530-e4a2-4815-8b6c-b69b89631d65): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.285] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:02.288] [INFO] console - [ 16,
  2586855876853760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 53 } ]
[2016-10-21 10:18:02.292] [INFO] console - [ 16,
  7129124451647488,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 79 } ]
[2016-10-21 10:18:02.299] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 79);
[2016-10-21 10:18:02.304] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:18:02.308] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.313] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.316] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:02.322] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:18:02.318 +00:00' WHERE "id" = '79'
[2016-10-21 10:18:02.327] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '79'
                                    or path like '/79/'||'%'
[2016-10-21 10:18:02.331] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:18:02.334] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.337] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.341] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/79/'||'%'
[2016-10-21 10:18:02.342] [INFO] console - Executing (a86a2530-e4a2-4815-8b6c-b69b89631d65): COMMIT;
[2016-10-21 10:18:02.344] [INFO] console - [ 70, 704, {}, [ undefined ] ]
[2016-10-21 10:18:02.346] [INFO] console - [ 16,
  2710040339283968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/79/',
       id: '79',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:18:02 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:18:02 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:18:02.352] [INFO] console - Executing (cf5e1e39-8b71-4a52-a02d-1ee33d266d4e): START TRANSACTION;
[2016-10-21 10:18:02.353] [INFO] console - Executing (cf5e1e39-8b71-4a52-a02d-1ee33d266d4e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.354] [INFO] console - [ 16,
  2942228899037184,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:18:02.359] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 79);
[2016-10-21 10:18:02.363] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.366] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.370] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:18:02.377] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:18:02.373 +00:00' WHERE "id" = '79'
[2016-10-21 10:18:02.379] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '79'
                                    or path like '/2/79/'||'%'
[2016-10-21 10:18:02.382] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:02.385] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.388] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.390] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/79/'||'%'
[2016-10-21 10:18:02.391] [INFO] console - Executing (cf5e1e39-8b71-4a52-a02d-1ee33d266d4e): COMMIT;
[2016-10-21 10:18:02.393] [INFO] console - [ 70, 705, {}, [ undefined ] ]
[2016-10-21 10:18:02.394] [INFO] console - [ 16,
  8188212205846528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 79 } ]
[2016-10-21 10:18:02.400] [INFO] console - [ 16,
  379075749216256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:18:02.422] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:18:02.428] [INFO] console - Executing (d0f3e6ae-0989-4cf8-96eb-5247a80084ec): START TRANSACTION;
[2016-10-21 10:18:02.430] [INFO] console - Executing (d0f3e6ae-0989-4cf8-96eb-5247a80084ec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.435] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:18:02.440] [INFO] console - Executing (d0f3e6ae-0989-4cf8-96eb-5247a80084ec): COMMIT;
[2016-10-21 10:18:02.442] [INFO] console - [ 70,
  706,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:02.457] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:02.461] [INFO] console - Executing (1cad6e88-5900-488c-84db-22ad216eccc5): START TRANSACTION;
[2016-10-21 10:18:02.467] [INFO] console - Executing (1cad6e88-5900-488c-84db-22ad216eccc5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.479] [INFO] console - Executing (1cad6e88-5900-488c-84db-22ad216eccc5): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:18:02 GMT+0500 (YEKT)',0,0,'2016-10-21 05:18:02.473 +00:00','2016-10-21 05:18:02.473 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:02.482] [INFO] console - Executing (1cad6e88-5900-488c-84db-22ad216eccc5): COMMIT;
[2016-10-21 10:18:02.484] [INFO] console - [ 70, 707, {}, [ '38' ] ]
[2016-10-21 10:18:02.495] [INFO] console - [ 16,
  4966835361415168,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '38' ] ]
[2016-10-21 10:18:02.504] [INFO] console - Executing (bc3b4ed3-853c-4ebb-b085-e1f2e5409076): START TRANSACTION;
[2016-10-21 10:18:02.506] [INFO] console - Executing (bc3b4ed3-853c-4ebb-b085-e1f2e5409076): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.513] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:02.521] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 38);
[2016-10-21 10:18:02.530] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:18:02.539] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.545] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.549] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.554] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.558] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '38' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:18:02.566] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:18:02.560 +00:00','2016-10-21 05:18:02.560 +00:00','38','2') RETURNING *;
[2016-10-21 10:18:02.569] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 38, 1, k.id, 86, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:18:02.577] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 38 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 38 and value=-1) "protiv"
[2016-10-21 10:18:02.584] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:18:02.579 +00:00' WHERE "id" = '38'
[2016-10-21 10:18:02.587] [INFO] console - Executing (bc3b4ed3-853c-4ebb-b085-e1f2e5409076): COMMIT;
[2016-10-21 10:18:02.588] [INFO] console - [ 70, 708, {}, [ undefined ] ]
[2016-10-21 10:18:02.598] [INFO] console - [ 16,
  1667085864271872,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id38.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '86',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:18:02.611] [INFO] console - Executing (ff68c330-03d5-4f52-83b9-f5e894d8baf4): START TRANSACTION;
[2016-10-21 10:18:02.615] [INFO] console - Executing (ff68c330-03d5-4f52-83b9-f5e894d8baf4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.620] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:02.621] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 86 }
[2016-10-21 10:18:02.625] [INFO] console - Executing (5d8aaf5b-86f4-4888-a9c2-f57cec4a70e4): START TRANSACTION;
[2016-10-21 10:18:02.627] [INFO] console - Executing (5d8aaf5b-86f4-4888-a9c2-f57cec4a70e4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.630] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 38);
[2016-10-21 10:18:02.639] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 86);
[2016-10-21 10:18:02.641] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:18:02.648] [INFO] console - Executing (5d8aaf5b-86f4-4888-a9c2-f57cec4a70e4): COMMIT;
[2016-10-21 10:18:02.651] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.655] [INFO] console - [ 70,
  710,
  {},
  [ { id: '86',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:18:02 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:02 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '38',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:18:02.661] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:18:02.666] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:18:02.671] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:18:02.679] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '38' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:18:02.684] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 38
                                and (
                                    id= 86
                                    or parent_id = 86
                                )
[2016-10-21 10:18:02.693] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 38 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 38 and value=-1) "protiv"
[2016-10-21 10:18:02.703] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:18:02.696 +00:00' WHERE "id" = '38'
[2016-10-21 10:18:02.707] [INFO] console - Executing (ff68c330-03d5-4f52-83b9-f5e894d8baf4): COMMIT;
[2016-10-21 10:18:02.708] [INFO] console - [ 70, 709, {}, [ undefined ] ]
[2016-10-21 10:18:02.714] [INFO] console - [ 16,
  6616126360387584,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id38.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '86',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:18:02.760] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:18:02.762] [INFO] console - Executing (aada6b55-547f-411a-adab-9c6c10a8f59e): START TRANSACTION;
[2016-10-21 10:18:02.763] [INFO] console - Executing (aada6b55-547f-411a-adab-9c6c10a8f59e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.775] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:18:02.780] [INFO] console - Executing (aada6b55-547f-411a-adab-9c6c10a8f59e): COMMIT;
[2016-10-21 10:18:02.782] [INFO] console - [ 70,
  712,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:02.804] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:02.812] [INFO] console - Executing (8397f5d1-b4b9-4d78-b09a-94b6a32fefc8): START TRANSACTION;
[2016-10-21 10:18:02.813] [INFO] console - Executing (8397f5d1-b4b9-4d78-b09a-94b6a32fefc8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.821] [INFO] console - Executing (8397f5d1-b4b9-4d78-b09a-94b6a32fefc8): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027079650',0,0,'2016-10-21 05:18:02.815 +00:00','2016-10-21 05:18:02.815 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:02.826] [INFO] console - Executing (8397f5d1-b4b9-4d78-b09a-94b6a32fefc8): COMMIT;
[2016-10-21 10:18:02.827] [INFO] console - [ 70, 713, {}, [ '39' ] ]
[2016-10-21 10:18:02.829] [INFO] console - [ 16,
  2150110358142976,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '39' ] ]
[2016-10-21 10:18:02.844] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 10:18:02.848] [INFO] console - Executing (52d43c56-bbbf-42e8-8f03-5fcef4c30eee): START TRANSACTION;
[2016-10-21 10:18:02.850] [INFO] console - Executing (52d43c56-bbbf-42e8-8f03-5fcef4c30eee): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:02.858] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 10:18:02.862] [INFO] console - Executing (52d43c56-bbbf-42e8-8f03-5fcef4c30eee): COMMIT;
[2016-10-21 10:18:02.867] [INFO] console - [ 70,
  714,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:18:02.882] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 10:18:02.883] [INFO] console - [ 70, 715, {}, [ [] ] ]
[2016-10-21 10:18:03.065] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:18:03.069] [INFO] console - Executing (4405a487-e51a-466b-82a1-9ad94359bdd2): START TRANSACTION;
[2016-10-21 10:18:03.070] [INFO] console - Executing (4405a487-e51a-466b-82a1-9ad94359bdd2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.076] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:18:03.081] [INFO] console - Executing (4405a487-e51a-466b-82a1-9ad94359bdd2): COMMIT;
[2016-10-21 10:18:03.083] [INFO] console - [ 70,
  717,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:18:03.105] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:18:03.107] [INFO] console - Executing (23fb617c-e36c-4fa8-b100-909d8b2e4a0f): START TRANSACTION;
[2016-10-21 10:18:03.110] [INFO] console - Executing (23fb617c-e36c-4fa8-b100-909d8b2e4a0f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.115] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:18:03.121] [INFO] console - Executing (23fb617c-e36c-4fa8-b100-909d8b2e4a0f): COMMIT;
[2016-10-21 10:18:03.123] [INFO] console - [ 70,
  718,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:03.143] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.147] [INFO] console - Executing (7dc2ff95-41e6-4db8-bafa-6132f975152d): START TRANSACTION;
[2016-10-21 10:18:03.152] [INFO] console - Executing (7dc2ff95-41e6-4db8-bafa-6132f975152d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.158] [INFO] console - Executing (7dc2ff95-41e6-4db8-bafa-6132f975152d): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:18:03.154 +00:00','2016-10-21 05:18:03.154 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:03.162] [INFO] console - Executing (7dc2ff95-41e6-4db8-bafa-6132f975152d): COMMIT;
[2016-10-21 10:18:03.164] [INFO] console - [ 70, 719, {}, [ '30' ] ]
[2016-10-21 10:18:03.166] [INFO] console - [ 16,
  1392072923807744,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '30' ] ]
[2016-10-21 10:18:03.177] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 30 }
[2016-10-21 10:18:03.179] [INFO] console - Executing (45852a91-7c30-43db-9ec3-30142a7477b9): START TRANSACTION;
[2016-10-21 10:18:03.181] [INFO] console - Executing (45852a91-7c30-43db-9ec3-30142a7477b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.187] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 30);
[2016-10-21 10:18:03.193] [INFO] console - Executing (45852a91-7c30-43db-9ec3-30142a7477b9): COMMIT;
[2016-10-21 10:18:03.197] [INFO] console - [ 70,
  720,
  {},
  [ { id: '30',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:18:03.214] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.218] [INFO] console - Executing (d1e36699-cdcd-4efc-b247-dcd2dcd430c5): START TRANSACTION;
[2016-10-21 10:18:03.219] [INFO] console - Executing (d1e36699-cdcd-4efc-b247-dcd2dcd430c5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.227] [INFO] console - Executing (d1e36699-cdcd-4efc-b247-dcd2dcd430c5): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027083208','2016-10-21 05:18:03.221 +00:00','2016-10-21 05:18:03.221 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:03.230] [INFO] console - Executing (d1e36699-cdcd-4efc-b247-dcd2dcd430c5): COMMIT;
[2016-10-21 10:18:03.232] [INFO] console - [ 70, 721, {}, [ '31' ] ]
[2016-10-21 10:18:03.234] [INFO] console - [ 16,
  3567779259088896,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '31' ] ]
[2016-10-21 10:18:03.246] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:18:03.248] [INFO] console - Executing (d0a9b604-e9c5-4dee-8679-7af1b5a0a9df): START TRANSACTION;
[2016-10-21 10:18:03.251] [INFO] console - Executing (d0a9b604-e9c5-4dee-8679-7af1b5a0a9df): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.256] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.262] [INFO] console - Executing (d0a9b604-e9c5-4dee-8679-7af1b5a0a9df): COMMIT;
[2016-10-21 10:18:03.264] [INFO] console - [ 70,
  722,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 53,
      path: '/1/',
      note: 'unit test 1477023736520',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 09:22:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:03.287] [INFO] console - Executing (a27483d9-2090-4650-bbd2-f3ae4e2539df): START TRANSACTION;
[2016-10-21 10:18:03.289] [INFO] console - Executing (a27483d9-2090-4650-bbd2-f3ae4e2539df): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.293] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.304] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027079698',"updated_at"='2016-10-21 05:18:03.297 +00:00' WHERE "id" = '2'
[2016-10-21 10:18:03.307] [INFO] console - Executing (a27483d9-2090-4650-bbd2-f3ae4e2539df): COMMIT;
[2016-10-21 10:18:03.309] [INFO] console - [ 16,
  5337956841684992,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:18:03.313] [INFO] console - [ 70, 723, {}, [ undefined ] ]
[2016-10-21 10:18:03.322] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:18:03.325] [INFO] console - Executing (12d9792a-6246-46aa-9615-79b28f9d2aa7): START TRANSACTION;
[2016-10-21 10:18:03.326] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:18:03.329] [INFO] console - Executing (59e01de1-ed60-4bce-b3c9-edd6c38a113c): START TRANSACTION;
[2016-10-21 10:18:03.330] [INFO] console - Executing (12d9792a-6246-46aa-9615-79b28f9d2aa7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.333] [INFO] console - Executing (59e01de1-ed60-4bce-b3c9-edd6c38a113c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.339] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.350] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.353] [INFO] console - Executing (12d9792a-6246-46aa-9615-79b28f9d2aa7): COMMIT;
[2016-10-21 10:18:03.356] [INFO] console - Executing (59e01de1-ed60-4bce-b3c9-edd6c38a113c): COMMIT;
[2016-10-21 10:18:03.357] [INFO] console - [ 70,
  724,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 53,
      path: '/1/',
      note: 'unit test 1477027079698',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:03.362] [INFO] console - [ 70,
  725,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 53,
      path: '/1/',
      note: 'unit test 1477027079698',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:03.424] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:18:03.426] [INFO] console - Executing (181ee9ae-9958-47ed-845a-b22e4a39857a): START TRANSACTION;
[2016-10-21 10:18:03.428] [INFO] console - Executing (181ee9ae-9958-47ed-845a-b22e4a39857a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.433] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:18:03.438] [INFO] console - Executing (181ee9ae-9958-47ed-845a-b22e4a39857a): COMMIT;
[2016-10-21 10:18:03.440] [INFO] console - [ 70,
  727,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:03.459] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.462] [INFO] console - Executing (2f37f279-5ac1-4b00-a9f5-7b47e6664972): START TRANSACTION;
[2016-10-21 10:18:03.464] [INFO] console - Executing (2f37f279-5ac1-4b00-a9f5-7b47e6664972): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.469] [INFO] console - Executing (2f37f279-5ac1-4b00-a9f5-7b47e6664972): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:18:03.465 +00:00','2016-10-21 05:18:03.465 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:03.472] [INFO] console - Executing (2f37f279-5ac1-4b00-a9f5-7b47e6664972): COMMIT;
[2016-10-21 10:18:03.476] [INFO] console - [ 70, 728, {}, [ '32' ] ]
[2016-10-21 10:18:03.480] [INFO] console - [ 16,
  1258749303980032,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '32' ] ]
[2016-10-21 10:18:03.524] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:18:03.528] [INFO] console - Executing (7856e3d4-ec53-403a-ae37-e8e5ea604c19): START TRANSACTION;
[2016-10-21 10:18:03.534] [INFO] console - Executing (7856e3d4-ec53-403a-ae37-e8e5ea604c19): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.546] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:18:03.552] [INFO] console - Executing (7856e3d4-ec53-403a-ae37-e8e5ea604c19): COMMIT;
[2016-10-21 10:18:03.553] [INFO] console - [ 70,
  729,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:18:03.651] [INFO] console - [ 70, 731, {}, [ undefined ] ]
[2016-10-21 10:18:03.657] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:18:03.660] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:18:03.665] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:18:03.670] [INFO] console - Executing (8ffcf304-d5e8-41c7-a8ba-7a7e59d747ae): START TRANSACTION;
[2016-10-21 10:18:03.671] [INFO] console - Executing (8ffcf304-d5e8-41c7-a8ba-7a7e59d747ae): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.681] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.685] [INFO] console - Executing (8ffcf304-d5e8-41c7-a8ba-7a7e59d747ae): COMMIT;
[2016-10-21 10:18:03.687] [INFO] console - [ 70,
  732,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027079698',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:03.704] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.708] [INFO] console - Executing (40ab84d5-7a03-4022-a8c3-107b9d7beb79): START TRANSACTION;
[2016-10-21 10:18:03.710] [INFO] console - Executing (40ab84d5-7a03-4022-a8c3-107b9d7beb79): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.717] [INFO] console - Executing (40ab84d5-7a03-4022-a8c3-107b9d7beb79): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:18:03.712 +00:00','2016-10-21 05:18:03.712 +00:00',2,2) RETURNING *;
[2016-10-21 10:18:03.723] [INFO] console - Executing (40ab84d5-7a03-4022-a8c3-107b9d7beb79): COMMIT;
[2016-10-21 10:18:03.728] [INFO] console - [ 70, 733, {}, [ '23' ] ]
[2016-10-21 10:18:03.740] [INFO] console - Executing (39f06c78-ccc3-4892-a2df-5267402b3ddb): START TRANSACTION;
[2016-10-21 10:18:03.741] [INFO] console - Executing (39f06c78-ccc3-4892-a2df-5267402b3ddb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.746] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 23);
[2016-10-21 10:18:03.799] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:18:03.792 +00:00',"updated_at"='2016-10-21 05:18:03.792 +00:00' WHERE "id" = '23'
[2016-10-21 10:18:03.802] [INFO] console - Executing (39f06c78-ccc3-4892-a2df-5267402b3ddb): COMMIT;
[2016-10-21 10:18:03.804] [INFO] console - [ 70, 734, {}, [ undefined ] ]
[2016-10-21 10:18:03.806] [INFO] console - [ 16, 1052992704872448, {}, 'ru.kopa.model.Kopa.id23.change' ]
[2016-10-21 10:18:03.809] [INFO] console - [ 16,
  3696619660771328,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 23 ] ]
[2016-10-21 10:18:03.820] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 23 }
[2016-10-21 10:18:03.823] [INFO] console - Executing (aaefb2dc-b2ce-46fa-9c18-66fc3433faa5): START TRANSACTION;
[2016-10-21 10:18:03.825] [INFO] console - Executing (aaefb2dc-b2ce-46fa-9c18-66fc3433faa5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.834] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.851] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 23);
[2016-10-21 10:18:03.859] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): START TRANSACTION;
[2016-10-21 10:18:03.864] [INFO] console - Executing (aaefb2dc-b2ce-46fa-9c18-66fc3433faa5): COMMIT;
[2016-10-21 10:18:03.865] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.873] [INFO] console - [ 70,
  735,
  {},
  [ { id: '23',
      question: 'temp',
      invited: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:03.884] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:18:03.889] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:18:03.895] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:18:03.873 +00:00','2016-10-21 05:18:03.873 +00:00',2) RETURNING *;
[2016-10-21 10:18:03.899] [INFO] console - Executing (03b33587-f479-4715-acdc-16ea6e54970c): COMMIT;
[2016-10-21 10:18:03.901] [INFO] console - [ 70, 736, {}, [ '23' ] ]
[2016-10-21 10:18:03.905] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:18:03.911] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:03.919] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:03.920] [INFO] console - [ 16,
  6399911402668032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:18:03.927] [INFO] console - [ 16,
  6476356825120768,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 79 } ]
[2016-10-21 10:18:03.934] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): START TRANSACTION;
[2016-10-21 10:18:03.937] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:03.943] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 23);
[2016-10-21 10:18:03.948] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/23/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:18:03.954] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/23/','2016-10-21 05:18:03.939 +00:00','2016-10-21 05:18:03.939 +00:00',23) RETURNING *;
[2016-10-21 10:18:03.958] [INFO] console - Executing (0ae57643-685c-497f-8785-2774aa00e2a9): COMMIT;
[2016-10-21 10:18:03.961] [INFO] console - [ 70, 737, {}, [ '24' ] ]
[2016-10-21 10:18:03.966] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/23/' like z.path||z.id||'/%'
[2016-10-21 10:18:03.973] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '23')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:03.977] [INFO] console - [ 16,
  475707673149440,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id23.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:18:03.988] [INFO] console - [ 16,
  5271766635118592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:18:03.994] [INFO] console - [ 16,
  4009281785430016,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 79 } ]
[2016-10-21 10:18:04.008] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:04.015] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): START TRANSACTION;
[2016-10-21 10:18:04.018] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:04.025] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:18:04.020 +00:00','2016-10-21 05:18:04.020 +00:00',24,NULL) RETURNING *;
[2016-10-21 10:18:04.030] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:18:04.036] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '24');
[2016-10-21 10:18:04.042] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/23/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 24
                                    )
[2016-10-21 10:18:04.044] [INFO] console - Executing (310da071-95b4-4970-8cd5-159f7f2090d4): COMMIT;
[2016-10-21 10:18:04.047] [INFO] console - [ 70, 738, {}, [ '80' ] ]
[2016-10-21 10:18:04.056] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '24');
[2016-10-21 10:18:04.067] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/23/' like z.path||z.id||'/%'
[2016-10-21 10:18:04.075] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '23')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:04.079] [INFO] console - [ 16,
  7941134380695552,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id24.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:18:04.084] [INFO] console - [ 16,
  2282527335120896,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id23.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:18:04.089] [INFO] console - [ 16,
  7615122402967552,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:18:04.098] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:18:04.104] [INFO] console - [ 16,
  104345982992384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 80 } ]
[2016-10-21 10:18:04.107] [INFO] console - Executing (5623bba4-99bd-428e-a2fc-f0be20c66e00): START TRANSACTION;
[2016-10-21 10:18:04.113] [INFO] console - Executing (5623bba4-99bd-428e-a2fc-f0be20c66e00): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:04.120] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:18:04.126] [INFO] console - Executing (5623bba4-99bd-428e-a2fc-f0be20c66e00): COMMIT;
[2016-10-21 10:18:04.127] [INFO] console - [ 70,
  739,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:18:04.144] [INFO] console - Executing (22e46644-3f10-466c-891a-8e3df033da90): START TRANSACTION;
[2016-10-21 10:18:04.145] [INFO] console - Executing (22e46644-3f10-466c-891a-8e3df033da90): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:04.150] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 23);
[2016-10-21 10:18:04.156] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:18:04.160] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:18:04.176] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:04.185] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 23
                                    )
[2016-10-21 10:18:04.193] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:18:04.188 +00:00' WHERE "id" = '23'
[2016-10-21 10:18:04.199] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '23'
                                    or path like '/1/2/23/'||'%'
[2016-10-21 10:18:04.204] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 23
                                    )
[2016-10-21 10:18:04.208] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:18:04.217] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:18:04.221] [INFO] console - Executing (22e46644-3f10-466c-891a-8e3df033da90): COMMIT;
[2016-10-21 10:18:04.223] [INFO] console - [ 70, 740, {}, [ undefined ] ]
[2016-10-21 10:18:04.226] [INFO] console - [ 16,
  2268709271896064,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:18:04.233] [INFO] console - [ 16,
  4043463458816000,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 79 } ]
[2016-10-21 10:18:04.246] [INFO] console - [ 16,
  5568308044627968,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:18:04.252] [INFO] console - [ 16,
  3415034451460096,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 80 } ]
[2016-10-21 10:18:27.036] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:18:27.085] [INFO] console - Executing (43b8e098-2191-4dcc-9ea1-0211c27ed3f6): START TRANSACTION;
[2016-10-21 10:18:27.091] [INFO] console - Executing (43b8e098-2191-4dcc-9ea1-0211c27ed3f6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:27.131] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:18:27.145] [INFO] console - Executing (43b8e098-2191-4dcc-9ea1-0211c27ed3f6): COMMIT;
[2016-10-21 10:18:27.147] [INFO] console - [ 70,
  742,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:18:27.181] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:18:27.185] [INFO] console - Executing (60bff7ca-49ee-4fa1-8d03-6281e19eee19): START TRANSACTION;
[2016-10-21 10:18:27.187] [INFO] console - Executing (60bff7ca-49ee-4fa1-8d03-6281e19eee19): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:27.193] [INFO] console - Executing (60bff7ca-49ee-4fa1-8d03-6281e19eee19): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027106544',0,0,'2016-10-21 05:18:27.189 +00:00','2016-10-21 05:18:27.189 +00:00',2,3) RETURNING *;
[2016-10-21 10:18:27.201] [INFO] console - Executing (60bff7ca-49ee-4fa1-8d03-6281e19eee19): COMMIT;
[2016-10-21 10:18:27.204] [INFO] console - [ 70, 743, {}, [ '40' ] ]
[2016-10-21 10:18:27.206] [INFO] console - [ 16,
  3622827729092608,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '40' ] ]
[2016-10-21 10:18:27.228] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 1 }
[2016-10-21 10:18:27.231] [INFO] console - Executing (f120049c-be90-4f2a-b485-59ba428ff380): START TRANSACTION;
[2016-10-21 10:18:27.233] [INFO] console - Executing (f120049c-be90-4f2a-b485-59ba428ff380): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:18:27.239] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 10:18:27.249] [INFO] console - Executing (f120049c-be90-4f2a-b485-59ba428ff380): COMMIT;
[2016-10-21 10:18:27.251] [INFO] console - [ 70,
  744,
  {},
  [ { id: '1',
      value: 'Хочу ...',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:18:27.270] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 10:18:27.274] [INFO] console - [ 70, 745, {}, [ [] ] ]
[2016-10-21 10:20:04.650] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:20:04.690] [INFO] console - Executing (8c882cd2-dd44-4122-b4ef-ea02e2fed0b4): START TRANSACTION;
[2016-10-21 10:20:04.692] [INFO] console - Executing (8c882cd2-dd44-4122-b4ef-ea02e2fed0b4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:04.725] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:20:04.734] [INFO] console - Executing (8c882cd2-dd44-4122-b4ef-ea02e2fed0b4): COMMIT;
[2016-10-21 10:20:04.735] [INFO] console - [ 70,
  747,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:04.763] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:04.771] [INFO] console - Executing (aeb7a902-cf79-4cb0-afc1-35c3d3fae49a): START TRANSACTION;
[2016-10-21 10:20:04.773] [INFO] console - Executing (aeb7a902-cf79-4cb0-afc1-35c3d3fae49a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:04.787] [INFO] console - Executing (aeb7a902-cf79-4cb0-afc1-35c3d3fae49a): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027204178',0,0,'2016-10-21 05:20:04.775 +00:00','2016-10-21 05:20:04.775 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:04.793] [INFO] console - Executing (aeb7a902-cf79-4cb0-afc1-35c3d3fae49a): COMMIT;
[2016-10-21 10:20:04.796] [INFO] console - [ 70, 748, {}, [ '41' ] ]
[2016-10-21 10:20:04.799] [INFO] console - [ 16,
  8052342834331648,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '41' ] ]
[2016-10-21 10:20:17.037] [INFO] console - [ 70, 750, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:20:17.050] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:20:17.052] [INFO] console - [ 70, 751, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:20:17.097] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:20:17.100] [INFO] console - [ 70, 752, {}, [ 'КОПА' ] ]
[2016-10-21 10:20:17.114] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:20:17.116] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:20:17.130] [INFO] console - [ 8,
  68,
  753,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:20:17.230] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:17.235] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:20:17.239] [INFO] console - [ 8,
  68,
  755,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:20:17.312] [INFO] console - [ 70, 757, {}, [ undefined ] ]
[2016-10-21 10:20:17.319] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:20:17.330] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:20:17.338] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:20:17.347] [INFO] console - Executing (e4b89d0c-1500-4579-8fc4-0fc8a6808d01): START TRANSACTION;
[2016-10-21 10:20:17.349] [INFO] console - Executing (e4b89d0c-1500-4579-8fc4-0fc8a6808d01): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.383] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:20:17.394] [INFO] console - Executing (e4b89d0c-1500-4579-8fc4-0fc8a6808d01): COMMIT;
[2016-10-21 10:20:17.396] [INFO] console - [ 70,
  758,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:17.415] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:20:17.420] [INFO] console - Executing (51eca219-b94f-42d8-8119-1b41d833fdfe): START TRANSACTION;
[2016-10-21 10:20:17.423] [INFO] console - Executing (51eca219-b94f-42d8-8119-1b41d833fdfe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.448] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:17.455] [INFO] console - Executing (51eca219-b94f-42d8-8119-1b41d833fdfe): COMMIT;
[2016-10-21 10:20:17.456] [INFO] console - [ 70,
  759,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027079698',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:17.478] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:17.483] [INFO] console - Executing (03034658-a43b-4389-b306-f37fc6ba624f): START TRANSACTION;
[2016-10-21 10:20:17.484] [INFO] console - Executing (03034658-a43b-4389-b306-f37fc6ba624f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.493] [INFO] console - Executing (03034658-a43b-4389-b306-f37fc6ba624f): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:20:17.486 +00:00','2016-10-21 05:20:17.486 +00:00',2,2) RETURNING *;
[2016-10-21 10:20:17.497] [INFO] console - Executing (03034658-a43b-4389-b306-f37fc6ba624f): COMMIT;
[2016-10-21 10:20:17.500] [INFO] console - [ 70, 760, {}, [ '24' ] ]
[2016-10-21 10:20:17.514] [INFO] console - Executing (74f39485-7953-4e9b-b973-5ffb192866ea): START TRANSACTION;
[2016-10-21 10:20:17.516] [INFO] console - Executing (74f39485-7953-4e9b-b973-5ffb192866ea): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.524] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 24);
[2016-10-21 10:20:17.539] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:20:17.528 +00:00',"updated_at"='2016-10-21 05:20:17.532 +00:00' WHERE "id" = '24'
[2016-10-21 10:20:17.543] [INFO] console - Executing (74f39485-7953-4e9b-b973-5ffb192866ea): COMMIT;
[2016-10-21 10:20:17.544] [INFO] console - [ 70, 761, {}, [ undefined ] ]
[2016-10-21 10:20:17.548] [INFO] console - [ 16, 6641880030773248, {}, 'ru.kopa.model.Kopa.id24.change' ]
[2016-10-21 10:20:17.551] [INFO] console - [ 16,
  4528439994351616,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 24 ] ]
[2016-10-21 10:20:17.559] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 24 }
[2016-10-21 10:20:17.562] [INFO] console - Executing (309ec44e-a6fc-4ae9-beff-df1454fe4aa0): START TRANSACTION;
[2016-10-21 10:20:17.570] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:20:17.571] [INFO] console - Executing (309ec44e-a6fc-4ae9-beff-df1454fe4aa0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.584] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 24);
[2016-10-21 10:20:17.589] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:20:17.598] [INFO] console - [ 70, 763, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:20:17.603] [INFO] console - Executing (309ec44e-a6fc-4ae9-beff-df1454fe4aa0): COMMIT;
[2016-10-21 10:20:17.608] [INFO] console - [ 70,
  762,
  {},
  [ { id: '24',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:20:17 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:20:17 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:17 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:17.623] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:20:17.636] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:20:17.639] [INFO] console - [ 70, 764, {}, [ [ [Object] ] ] ]
[2016-10-21 10:20:17.653] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:20:17.660] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:20:17.674] [INFO] console - [ 70, 765, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:20:17.700] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:20:17.709] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:20:17.717] [INFO] console - [ 70, 766, {}, [ [ [Object] ] ] ]
[2016-10-21 10:20:17.728] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:20:17.735] [INFO] console - Executing (ba7395c3-b023-4438-a3b4-463cf36d684c): START TRANSACTION;
[2016-10-21 10:20:17.739] [INFO] console - Executing (ba7395c3-b023-4438-a3b4-463cf36d684c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.750] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:20:17.765] [INFO] console - Executing (ba7395c3-b023-4438-a3b4-463cf36d684c): COMMIT;
[2016-10-21 10:20:17.768] [INFO] console - [ 70,
  767,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:20:17.792] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:17.797] [INFO] console - Executing (fa8d81d9-4ab6-458d-a9cf-643c1bc46ac2): START TRANSACTION;
[2016-10-21 10:20:17.799] [INFO] console - Executing (fa8d81d9-4ab6-458d-a9cf-643c1bc46ac2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.807] [INFO] console - Executing (fa8d81d9-4ab6-458d-a9cf-643c1bc46ac2): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027217784 temp','2016-10-21 05:20:17.801 +00:00','2016-10-21 05:20:17.801 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:17.811] [INFO] console - Executing (fa8d81d9-4ab6-458d-a9cf-643c1bc46ac2): COMMIT;
[2016-10-21 10:20:17.813] [INFO] console - [ 70, 768, {}, [ '33' ] ]
[2016-10-21 10:20:17.821] [INFO] console - [ 16,
  603211566153728,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '33' ] ]
[2016-10-21 10:20:17.840] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:17.844] [INFO] console - Executing (f0fe799a-fbf5-4887-9859-6190e1b15820): START TRANSACTION;
[2016-10-21 10:20:17.847] [INFO] console - Executing (f0fe799a-fbf5-4887-9859-6190e1b15820): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:17.855] [INFO] console - Executing (f0fe799a-fbf5-4887-9859-6190e1b15820): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027217829temp',0,0,'2016-10-21 05:20:17.848 +00:00','2016-10-21 05:20:17.848 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:17.860] [INFO] console - Executing (f0fe799a-fbf5-4887-9859-6190e1b15820): COMMIT;
[2016-10-21 10:20:17.862] [INFO] console - [ 70, 769, {}, [ '42' ] ]
[2016-10-21 10:20:17.867] [INFO] console - [ 16,
  5864413309435904,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '42' ] ]
[2016-10-21 10:20:17.989] [INFO] console - [ 70, 771, {}, [ undefined ] ]
[2016-10-21 10:20:18.007] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:20:18.017] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:20:18.024] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:20:18.026] [INFO] console - Executing (3139db33-fe5e-4604-a5a2-de0fefde07e1): START TRANSACTION;
[2016-10-21 10:20:18.028] [INFO] console - Executing (3139db33-fe5e-4604-a5a2-de0fefde07e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.040] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:20:18.051] [INFO] console - Executing (3139db33-fe5e-4604-a5a2-de0fefde07e1): COMMIT;
[2016-10-21 10:20:18.054] [INFO] console - [ 70,
  772,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:20:18.085] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:20:18.092] [INFO] console - [ 70, 773, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:20:18.136] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:18.144] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): START TRANSACTION;
[2016-10-21 10:20:18.146] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.156] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:20:18.148 +00:00','2016-10-21 05:20:18.148 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:20:18.162] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.170] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.174] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:20:18.177] [INFO] console - Executing (ad569f49-219d-4d27-bda3-5c489d18638c): COMMIT;
[2016-10-21 10:20:18.179] [INFO] console - [ 70, 774, {}, [ '81' ] ]
[2016-10-21 10:20:18.186] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.190] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:20:18.198] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:18.201] [INFO] console - [ 16,
  2099983950020608,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:20:18.212] [INFO] console - [ 16,
  7866727058636800,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 81 } ]
[2016-10-21 10:20:18.215] [INFO] console - Executing (aa3bd4d2-5508-4dab-aa55-2c5f23402360): START TRANSACTION;
[2016-10-21 10:20:18.218] [INFO] console - Executing (aa3bd4d2-5508-4dab-aa55-2c5f23402360): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.225] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 81);
[2016-10-21 10:20:18.233] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:20:18.237] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.243] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.246] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.253] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:20:18.248 +00:00' WHERE "id" = '81'
[2016-10-21 10:20:18.258] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '81'
                                    or path like '/81/'||'%'
[2016-10-21 10:20:18.262] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:20:18.265] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.271] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.274] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/81/'||'%'
[2016-10-21 10:20:18.277] [INFO] console - Executing (aa3bd4d2-5508-4dab-aa55-2c5f23402360): COMMIT;
[2016-10-21 10:20:18.281] [INFO] console - [ 70, 775, {}, [ undefined ] ]
[2016-10-21 10:20:18.285] [INFO] console - [ 16,
  5567846283214848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/81/',
       id: '81',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:20:18.307] [INFO] console - [ 16,
  201075474825216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:20:18.313] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:18.317] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): START TRANSACTION;
[2016-10-21 10:20:18.319] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.330] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:20:18.322 +00:00','2016-10-21 05:20:18.322 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:20:18.334] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.338] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.343] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:20:18.347] [INFO] console - Executing (b4f90efc-8f47-4c87-b4f2-7f374becb741): COMMIT;
[2016-10-21 10:20:18.350] [INFO] console - [ 70, 776, {}, [ '82' ] ]
[2016-10-21 10:20:18.355] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.360] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:20:18.364] [INFO] console - Executing (4ded730f-55e3-4e78-94d1-223b7a883fab): START TRANSACTION;
[2016-10-21 10:20:18.367] [INFO] console - Executing (4ded730f-55e3-4e78-94d1-223b7a883fab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.370] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:18.377] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 82);
[2016-10-21 10:20:18.378] [INFO] console - [ 16,
  1010348746342400,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 10:20:18.386] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 81);
[2016-10-21 10:20:18.393] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.399] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.404] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.413] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='81',"updated_at"='2016-10-21 05:20:18.406 +00:00' WHERE "id" = '82'
[2016-10-21 10:20:18.420] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/81/')
                                where
                                    id = '82'
                                    or path like '/82/'||'%'
[2016-10-21 10:20:18.422] [INFO] console - [ 16,
  112112542154752,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 82 } ]
[2016-10-21 10:20:18.427] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/81/' like path||id||'/%'
[2016-10-21 10:20:18.435] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/81/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.439] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('81', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.443] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/81/82/'||'%'
[2016-10-21 10:20:18.446] [INFO] console - Executing (4ded730f-55e3-4e78-94d1-223b7a883fab): COMMIT;
[2016-10-21 10:20:18.448] [INFO] console - [ 70, 777, {}, [ undefined ] ]
[2016-10-21 10:20:18.450] [INFO] console - [ 16,
  8524465073815552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id81.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/81/82/',
       id: '82',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/81/',
       note: null,
       created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '81' } } ]
[2016-10-21 10:20:18.464] [INFO] console - [ 16,
  59218570772480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id81.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:20:18.469] [INFO] console - [ 16,
  1956952328372224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:20:18.504] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:20:18.507] [INFO] console - Executing (dbc6fd2e-23af-4eac-bc1d-4f096fa6c1e1): START TRANSACTION;
[2016-10-21 10:20:18.512] [INFO] console - Executing (dbc6fd2e-23af-4eac-bc1d-4f096fa6c1e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.519] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:20:18.529] [INFO] console - Executing (dbc6fd2e-23af-4eac-bc1d-4f096fa6c1e1): COMMIT;
[2016-10-21 10:20:18.531] [INFO] console - [ 70,
  778,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:20:18.559] [INFO] console - Executing (5d61f3ac-7c50-4bcd-8495-9df2a98ac1ca): START TRANSACTION;
[2016-10-21 10:20:18.560] [INFO] console - Executing (5d61f3ac-7c50-4bcd-8495-9df2a98ac1ca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.564] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 81);
[2016-10-21 10:20:18.570] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:20:18.573] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.579] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.583] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:20:18.591] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:20:18.585 +00:00' WHERE "id" = '81'
[2016-10-21 10:20:18.594] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '81'
                                    or path like '/2/81/'||'%'
[2016-10-21 10:20:18.598] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:20:18.601] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.608] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.611] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/81/'||'%'
[2016-10-21 10:20:18.615] [INFO] console - Executing (5d61f3ac-7c50-4bcd-8495-9df2a98ac1ca): COMMIT;
[2016-10-21 10:20:18.620] [INFO] console - [ 70, 779, {}, [ undefined ] ]
[2016-10-21 10:20:18.622] [INFO] console - [ 16,
  8598008235032576,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 81 } ]
[2016-10-21 10:20:18.628] [INFO] console - [ 16,
  6801300662517760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/81/',
       id: '81',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:20:18.638] [INFO] console - [ 16,
  7236464209297408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:20:18.643] [INFO] console - [ 16,
  4782689601191936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:20:18.657] [INFO] console - [ 16,
  6001914139377664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id82.starshinaChange',
  [],
  {} ]
[2016-10-21 10:20:18.670] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 82 }
[2016-10-21 10:20:18.672] [INFO] console - Executing (e2ac2c91-f758-473e-a99e-47e31060aacf): START TRANSACTION;
[2016-10-21 10:20:18.673] [INFO] console - Executing (e2ac2c91-f758-473e-a99e-47e31060aacf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.681] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 82);
[2016-10-21 10:20:18.687] [INFO] console - Executing (e2ac2c91-f758-473e-a99e-47e31060aacf): COMMIT;
[2016-10-21 10:20:18.689] [INFO] console - [ 70,
  780,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/81/82/',
      id: '82',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/81/',
      note: null,
      created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '81',
      attachments: [] } ] ]
[2016-10-21 10:20:18.707] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 81 }
[2016-10-21 10:20:18.711] [INFO] console - Executing (dff78d59-4c2c-4c7b-9790-2c22a9893780): START TRANSACTION;
[2016-10-21 10:20:18.713] [INFO] console - Executing (dff78d59-4c2c-4c7b-9790-2c22a9893780): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.726] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 81);
[2016-10-21 10:20:18.731] [INFO] console - Executing (dff78d59-4c2c-4c7b-9790-2c22a9893780): COMMIT;
[2016-10-21 10:20:18.737] [INFO] console - [ 70,
  781,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/81/',
      id: '81',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:20:18.753] [INFO] console - Executing (28d24a2f-5e1e-43ac-82c5-91b956d1bd76): START TRANSACTION;
[2016-10-21 10:20:18.760] [INFO] console - Executing (28d24a2f-5e1e-43ac-82c5-91b956d1bd76): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.764] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 81);
[2016-10-21 10:20:18.772] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.778] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.782] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:20:18.788] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:20:18.784 +00:00' WHERE "id" = '81'
[2016-10-21 10:20:18.793] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '81'
                                    or path like '/4/81/'||'%'
[2016-10-21 10:20:18.797] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.799] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.807] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.811] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/81/'||'%'
[2016-10-21 10:20:18.813] [INFO] console - Executing (28d24a2f-5e1e-43ac-82c5-91b956d1bd76): COMMIT;
[2016-10-21 10:20:18.815] [INFO] console - [ 70, 782, {}, [ undefined ] ]
[2016-10-21 10:20:18.818] [INFO] console - [ 16,
  1908790456745984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 81 } ]
[2016-10-21 10:20:18.823] [INFO] console - [ 16,
  8630885853167616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:20:18.831] [INFO] console - [ 16,
  6365302749134848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id82.starshinaChange',
  [],
  {} ]
[2016-10-21 10:20:18.846] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:18.856] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): START TRANSACTION;
[2016-10-21 10:20:18.862] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.870] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:20:18.863 +00:00','2016-10-21 05:20:18.863 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:20:18.881] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.887] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.891] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:20:18.895] [INFO] console - Executing (7ca876cb-4594-4fcd-a0e0-8e017df0af4b): COMMIT;
[2016-10-21 10:20:18.898] [INFO] console - [ 70, 783, {}, [ '83' ] ]
[2016-10-21 10:20:18.903] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:18.911] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:20:18.918] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:18.922] [INFO] console - Executing (36e1f840-acab-4594-b9f3-e756a81369c6): START TRANSACTION;
[2016-10-21 10:20:18.926] [INFO] console - Executing (36e1f840-acab-4594-b9f3-e756a81369c6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:18.928] [INFO] console - [ 16,
  1369528447533056,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 10:20:18.937] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 83);
[2016-10-21 10:20:18.941] [INFO] console - [ 16,
  8579025087758336,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 83 } ]
[2016-10-21 10:20:18.952] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:20:18.958] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.964] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.967] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:18.974] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:20:18.969 +00:00' WHERE "id" = '83'
[2016-10-21 10:20:18.978] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '83'
                                    or path like '/83/'||'%'
[2016-10-21 10:20:18.982] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:20:18.987] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:20:18.993] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:18.996] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/83/'||'%'
[2016-10-21 10:20:19.000] [INFO] console - Executing (36e1f840-acab-4594-b9f3-e756a81369c6): COMMIT;
[2016-10-21 10:20:19.002] [INFO] console - [ 70, 784, {}, [ undefined ] ]
[2016-10-21 10:20:19.010] [INFO] console - [ 16,
  6421732915150848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/83/',
       id: '83',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:20:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:20:19.032] [INFO] console - Executing (3dd9a106-9ae6-4530-a8ac-172bb0202670): START TRANSACTION;
[2016-10-21 10:20:19.033] [INFO] console - [ 16,
  3957225267658752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:20:19.046] [INFO] console - Executing (3dd9a106-9ae6-4530-a8ac-172bb0202670): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.051] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 83);
[2016-10-21 10:20:19.056] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:20:19.066] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:19.074] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:20:19.084] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:20:19.076 +00:00' WHERE "id" = '83'
[2016-10-21 10:20:19.091] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '83'
                                    or path like '/2/83/'||'%'
[2016-10-21 10:20:19.094] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:19.098] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:19.103] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:19.106] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/83/'||'%'
[2016-10-21 10:20:19.111] [INFO] console - Executing (3dd9a106-9ae6-4530-a8ac-172bb0202670): COMMIT;
[2016-10-21 10:20:19.113] [INFO] console - [ 70, 785, {}, [ undefined ] ]
[2016-10-21 10:20:19.119] [INFO] console - [ 16,
  8768022726574080,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 83 } ]
[2016-10-21 10:20:19.127] [INFO] console - [ 16,
  6891946186375168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:20:19.132] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:20:19.136] [INFO] console - Executing (44f4fbce-7034-4bf9-9fe9-c5ec21034331): START TRANSACTION;
[2016-10-21 10:20:19.138] [INFO] console - Executing (44f4fbce-7034-4bf9-9fe9-c5ec21034331): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.153] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:20:19.166] [INFO] console - Executing (44f4fbce-7034-4bf9-9fe9-c5ec21034331): COMMIT;
[2016-10-21 10:20:19.168] [INFO] console - [ 70,
  786,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:19.193] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:19.198] [INFO] console - Executing (76e0128b-cdc0-47cd-b30e-2802371da132): START TRANSACTION;
[2016-10-21 10:20:19.200] [INFO] console - Executing (76e0128b-cdc0-47cd-b30e-2802371da132): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.209] [INFO] console - Executing (76e0128b-cdc0-47cd-b30e-2802371da132): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:20:19 GMT+0500 (YEKT)',0,0,'2016-10-21 05:20:19.202 +00:00','2016-10-21 05:20:19.202 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:19.212] [INFO] console - Executing (76e0128b-cdc0-47cd-b30e-2802371da132): COMMIT;
[2016-10-21 10:20:19.214] [INFO] console - [ 70, 787, {}, [ '43' ] ]
[2016-10-21 10:20:19.217] [INFO] console - [ 16,
  2379520944373760,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '43' ] ]
[2016-10-21 10:20:19.231] [INFO] console - Executing (8308b2c6-757c-4eb9-9ce5-648bd5a9dba8): START TRANSACTION;
[2016-10-21 10:20:19.233] [INFO] console - Executing (8308b2c6-757c-4eb9-9ce5-648bd5a9dba8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.239] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:19.249] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 43);
[2016-10-21 10:20:19.254] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:20:19.258] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:19.263] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:19.267] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:19.272] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:19.276] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '43' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:20:19.292] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:20:19.287 +00:00','2016-10-21 05:20:19.287 +00:00','43','2') RETURNING *;
[2016-10-21 10:20:19.298] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 43, 1, k.id, 89, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:20:19.306] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 43 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 43 and value=-1) "protiv"
[2016-10-21 10:20:19.312] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:20:19.308 +00:00' WHERE "id" = '43'
[2016-10-21 10:20:19.318] [INFO] console - Executing (8308b2c6-757c-4eb9-9ce5-648bd5a9dba8): COMMIT;
[2016-10-21 10:20:19.320] [INFO] console - [ 70, 788, {}, [ undefined ] ]
[2016-10-21 10:20:19.326] [INFO] console - [ 16,
  6378023982989312,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id43.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '89',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:20:19.335] [INFO] console - Executing (e8ac82a2-420e-4707-ae9c-f8e76324ff27): START TRANSACTION;
[2016-10-21 10:20:19.337] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 89 }
[2016-10-21 10:20:19.340] [INFO] console - Executing (a0c71457-4f0e-4302-af1b-b0baf441568f): START TRANSACTION;
[2016-10-21 10:20:19.341] [INFO] console - Executing (e8ac82a2-420e-4707-ae9c-f8e76324ff27): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.342] [INFO] console - Executing (a0c71457-4f0e-4302-af1b-b0baf441568f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.346] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:19.359] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 89);
[2016-10-21 10:20:19.369] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 43);
[2016-10-21 10:20:19.372] [INFO] console - Executing (a0c71457-4f0e-4302-af1b-b0baf441568f): COMMIT;
[2016-10-21 10:20:19.374] [INFO] console - [ 70,
  790,
  {},
  [ { id: '89',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:20:19 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:19 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '43',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:20:19.387] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:20:19.401] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:19.407] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:20:19.411] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:20:19.422] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:20:19.450] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '43' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:20:19.467] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 43
                                and (
                                    id= 89
                                    or parent_id = 89
                                )
[2016-10-21 10:20:19.480] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 43 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 43 and value=-1) "protiv"
[2016-10-21 10:20:19.504] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:20:19.483 +00:00' WHERE "id" = '43'
[2016-10-21 10:20:19.510] [INFO] console - Executing (e8ac82a2-420e-4707-ae9c-f8e76324ff27): COMMIT;
[2016-10-21 10:20:19.512] [INFO] console - [ 70, 789, {}, [ undefined ] ]
[2016-10-21 10:20:19.515] [INFO] console - [ 16,
  5896824063787008,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id43.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '89',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:20:19.558] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:20:19.566] [INFO] console - Executing (b1294e0a-f41a-490c-b934-25abda64783d): START TRANSACTION;
[2016-10-21 10:20:19.568] [INFO] console - Executing (b1294e0a-f41a-490c-b934-25abda64783d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.580] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:20:19.585] [INFO] console - Executing (b1294e0a-f41a-490c-b934-25abda64783d): COMMIT;
[2016-10-21 10:20:19.587] [INFO] console - [ 70,
  792,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:19.613] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:19.617] [INFO] console - Executing (926be2a6-1602-4333-aaeb-b590d677d9c7): START TRANSACTION;
[2016-10-21 10:20:19.619] [INFO] console - Executing (926be2a6-1602-4333-aaeb-b590d677d9c7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.630] [INFO] console - Executing (926be2a6-1602-4333-aaeb-b590d677d9c7): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027216031',0,0,'2016-10-21 05:20:19.623 +00:00','2016-10-21 05:20:19.623 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:19.634] [INFO] console - Executing (926be2a6-1602-4333-aaeb-b590d677d9c7): COMMIT;
[2016-10-21 10:20:19.636] [INFO] console - [ 70, 793, {}, [ '44' ] ]
[2016-10-21 10:20:19.639] [INFO] console - [ 16,
  3829651396886528,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '44' ] ]
[2016-10-21 10:20:19.788] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:20:19.791] [INFO] console - Executing (78c24032-4a95-4a1e-abd9-510f36f2c7e9): START TRANSACTION;
[2016-10-21 10:20:19.793] [INFO] console - Executing (78c24032-4a95-4a1e-abd9-510f36f2c7e9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.799] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:20:19.815] [INFO] console - Executing (78c24032-4a95-4a1e-abd9-510f36f2c7e9): COMMIT;
[2016-10-21 10:20:19.817] [INFO] console - [ 70,
  795,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:20:19.839] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:20:19.841] [INFO] console - Executing (e7dad7f2-2089-430c-be54-96a5f814781b): START TRANSACTION;
[2016-10-21 10:20:19.847] [INFO] console - Executing (e7dad7f2-2089-430c-be54-96a5f814781b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.858] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:20:19.867] [INFO] console - Executing (e7dad7f2-2089-430c-be54-96a5f814781b): COMMIT;
[2016-10-21 10:20:19.869] [INFO] console - [ 70,
  796,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:19.896] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:19.905] [INFO] console - Executing (379ec0d5-d7f0-4b83-a0ab-66bba859cb0c): START TRANSACTION;
[2016-10-21 10:20:19.907] [INFO] console - Executing (379ec0d5-d7f0-4b83-a0ab-66bba859cb0c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.918] [INFO] console - Executing (379ec0d5-d7f0-4b83-a0ab-66bba859cb0c): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:20:19.910 +00:00','2016-10-21 05:20:19.910 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:19.922] [INFO] console - Executing (379ec0d5-d7f0-4b83-a0ab-66bba859cb0c): COMMIT;
[2016-10-21 10:20:19.925] [INFO] console - [ 70, 797, {}, [ '34' ] ]
[2016-10-21 10:20:19.931] [INFO] console - [ 16,
  1609863320829952,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '34' ] ]
[2016-10-21 10:20:19.941] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 34 }
[2016-10-21 10:20:19.959] [INFO] console - Executing (5d204dd2-7fe3-41c7-826b-0d29cab66aec): START TRANSACTION;
[2016-10-21 10:20:19.962] [INFO] console - Executing (5d204dd2-7fe3-41c7-826b-0d29cab66aec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:19.973] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 34);
[2016-10-21 10:20:19.993] [INFO] console - Executing (5d204dd2-7fe3-41c7-826b-0d29cab66aec): COMMIT;
[2016-10-21 10:20:19.995] [INFO] console - [ 70,
  798,
  {},
  [ { id: '34',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:20:19 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:19 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:20:20.095] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.100] [INFO] console - Executing (7a395cd5-8651-483b-a1b7-58ecf74a1bdf): START TRANSACTION;
[2016-10-21 10:20:20.103] [INFO] console - Executing (7a395cd5-8651-483b-a1b7-58ecf74a1bdf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.110] [INFO] console - Executing (7a395cd5-8651-483b-a1b7-58ecf74a1bdf): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027220081','2016-10-21 05:20:20.105 +00:00','2016-10-21 05:20:20.105 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:20.112] [INFO] console - Executing (7a395cd5-8651-483b-a1b7-58ecf74a1bdf): COMMIT;
[2016-10-21 10:20:20.117] [INFO] console - [ 70, 799, {}, [ '35' ] ]
[2016-10-21 10:20:20.120] [INFO] console - [ 16,
  6864327908786176,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '35' ] ]
[2016-10-21 10:20:20.131] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:20:20.134] [INFO] console - Executing (998eec76-f56e-4f63-8921-28e265f5bffb): START TRANSACTION;
[2016-10-21 10:20:20.135] [INFO] console - Executing (998eec76-f56e-4f63-8921-28e265f5bffb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.143] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.148] [INFO] console - Executing (998eec76-f56e-4f63-8921-28e265f5bffb): COMMIT;
[2016-10-21 10:20:20.149] [INFO] console - [ 70,
  800,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027079698',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:18:03 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:20.173] [INFO] console - Executing (846abb4d-0a8e-4aee-a4d2-697d3a04f733): START TRANSACTION;
[2016-10-21 10:20:20.177] [INFO] console - Executing (846abb4d-0a8e-4aee-a4d2-697d3a04f733): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.181] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.197] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027216073',"updated_at"='2016-10-21 05:20:20.185 +00:00' WHERE "id" = '2'
[2016-10-21 10:20:20.200] [INFO] console - Executing (846abb4d-0a8e-4aee-a4d2-697d3a04f733): COMMIT;
[2016-10-21 10:20:20.201] [INFO] console - [ 16,
  8689705551921152,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:20:20.207] [INFO] console - [ 70, 801, {}, [ undefined ] ]
[2016-10-21 10:20:20.214] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:20:20.216] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:20:20.219] [INFO] console - Executing (7f1fbcd8-2d25-4e56-b42e-20fa9dc6c329): START TRANSACTION;
[2016-10-21 10:20:20.220] [INFO] console - Executing (5c6a85ee-de67-434b-b54f-5aafa70baeac): START TRANSACTION;
[2016-10-21 10:20:20.222] [INFO] console - Executing (7f1fbcd8-2d25-4e56-b42e-20fa9dc6c329): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.222] [INFO] console - Executing (5c6a85ee-de67-434b-b54f-5aafa70baeac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.233] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.237] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.244] [INFO] console - Executing (7f1fbcd8-2d25-4e56-b42e-20fa9dc6c329): COMMIT;
[2016-10-21 10:20:20.244] [INFO] console - Executing (5c6a85ee-de67-434b-b54f-5aafa70baeac): COMMIT;
[2016-10-21 10:20:20.246] [INFO] console - [ 70,
  802,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027216073',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:20.250] [INFO] console - [ 70,
  803,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027216073',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:20.329] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:20:20.331] [INFO] console - Executing (e076bc5e-8157-45cf-aec7-31cb36d5946b): START TRANSACTION;
[2016-10-21 10:20:20.333] [INFO] console - Executing (e076bc5e-8157-45cf-aec7-31cb36d5946b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.337] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:20:20.344] [INFO] console - Executing (e076bc5e-8157-45cf-aec7-31cb36d5946b): COMMIT;
[2016-10-21 10:20:20.345] [INFO] console - [ 70,
  805,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:20.364] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.367] [INFO] console - Executing (101d7e83-2267-4bb6-88b9-cca86675e4e1): START TRANSACTION;
[2016-10-21 10:20:20.368] [INFO] console - Executing (101d7e83-2267-4bb6-88b9-cca86675e4e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.377] [INFO] console - Executing (101d7e83-2267-4bb6-88b9-cca86675e4e1): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:20:20.370 +00:00','2016-10-21 05:20:20.370 +00:00',2,3) RETURNING *;
[2016-10-21 10:20:20.381] [INFO] console - Executing (101d7e83-2267-4bb6-88b9-cca86675e4e1): COMMIT;
[2016-10-21 10:20:20.383] [INFO] console - [ 70, 806, {}, [ '36' ] ]
[2016-10-21 10:20:20.385] [INFO] console - [ 16,
  2398948945821696,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '36' ] ]
[2016-10-21 10:20:20.397] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:20:20.399] [INFO] console - Executing (7a75757f-51df-40e3-8bca-05ca311a1973): START TRANSACTION;
[2016-10-21 10:20:20.401] [INFO] console - Executing (7a75757f-51df-40e3-8bca-05ca311a1973): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.410] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:20:20.415] [INFO] console - Executing (7a75757f-51df-40e3-8bca-05ca311a1973): COMMIT;
[2016-10-21 10:20:20.416] [INFO] console - [ 70,
  807,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:20:20.473] [INFO] console - [ 70, 809, {}, [ undefined ] ]
[2016-10-21 10:20:20.477] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:20:20.485] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:20:20.486] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:20:20.490] [INFO] console - Executing (c7f710e3-bd70-42a0-a53f-d90b06190a98): START TRANSACTION;
[2016-10-21 10:20:20.492] [INFO] console - Executing (c7f710e3-bd70-42a0-a53f-d90b06190a98): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.497] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.502] [INFO] console - Executing (c7f710e3-bd70-42a0-a53f-d90b06190a98): COMMIT;
[2016-10-21 10:20:20.504] [INFO] console - [ 70,
  810,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027216073',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:20.524] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.529] [INFO] console - Executing (fb2457dc-8945-4338-ac96-8ed8d5c9c7ba): START TRANSACTION;
[2016-10-21 10:20:20.530] [INFO] console - Executing (fb2457dc-8945-4338-ac96-8ed8d5c9c7ba): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.536] [INFO] console - Executing (fb2457dc-8945-4338-ac96-8ed8d5c9c7ba): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:20:20.532 +00:00','2016-10-21 05:20:20.532 +00:00',2,2) RETURNING *;
[2016-10-21 10:20:20.554] [INFO] console - Executing (fb2457dc-8945-4338-ac96-8ed8d5c9c7ba): COMMIT;
[2016-10-21 10:20:20.556] [INFO] console - [ 70, 811, {}, [ '25' ] ]
[2016-10-21 10:20:20.568] [INFO] console - Executing (bbb78b12-37c6-4f53-b5a7-16b8f9f87cee): START TRANSACTION;
[2016-10-21 10:20:20.569] [INFO] console - Executing (bbb78b12-37c6-4f53-b5a7-16b8f9f87cee): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.573] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 25);
[2016-10-21 10:20:20.581] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:20:20.575 +00:00',"updated_at"='2016-10-21 05:20:20.575 +00:00' WHERE "id" = '25'
[2016-10-21 10:20:20.587] [INFO] console - Executing (bbb78b12-37c6-4f53-b5a7-16b8f9f87cee): COMMIT;
[2016-10-21 10:20:20.590] [INFO] console - [ 70, 812, {}, [ undefined ] ]
[2016-10-21 10:20:20.592] [INFO] console - [ 16, 1507666417418240, {}, 'ru.kopa.model.Kopa.id25.change' ]
[2016-10-21 10:20:20.593] [INFO] console - [ 16,
  6087163632418816,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 25 ] ]
[2016-10-21 10:20:20.608] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 25 }
[2016-10-21 10:20:20.611] [INFO] console - Executing (c0700c7c-6a3e-416c-b955-c5e7b691206d): START TRANSACTION;
[2016-10-21 10:20:20.613] [INFO] console - Executing (c0700c7c-6a3e-416c-b955-c5e7b691206d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.623] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 25);
[2016-10-21 10:20:20.631] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.633] [INFO] console - Executing (c0700c7c-6a3e-416c-b955-c5e7b691206d): COMMIT;
[2016-10-21 10:20:20.636] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): START TRANSACTION;
[2016-10-21 10:20:20.638] [INFO] console - [ 70,
  813,
  {},
  [ { id: '25',
      question: 'temp',
      invited: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:20:20.646] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.651] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:20:20.656] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:20:20.662] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:20:20.648 +00:00','2016-10-21 05:20:20.648 +00:00',2) RETURNING *;
[2016-10-21 10:20:20.665] [INFO] console - Executing (c87c499d-4b8e-4244-92c9-3c902a4b1058): COMMIT;
[2016-10-21 10:20:20.667] [INFO] console - [ 70, 814, {}, [ '25' ] ]
[2016-10-21 10:20:20.678] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:20:20.685] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.691] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:20.695] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): START TRANSACTION;
[2016-10-21 10:20:20.697] [INFO] console - [ 16,
  6791184309551104,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:20:20.703] [INFO] console - [ 16,
  3699438656684032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 83 } ]
[2016-10-21 10:20:20.706] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.713] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 25);
[2016-10-21 10:20:20.717] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/25/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:20:20.722] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/25/','2016-10-21 05:20:20.709 +00:00','2016-10-21 05:20:20.709 +00:00',25) RETURNING *;
[2016-10-21 10:20:20.729] [INFO] console - Executing (9adb4f48-065c-4b94-ae92-d529f9041ff6): COMMIT;
[2016-10-21 10:20:20.735] [INFO] console - [ 70, 815, {}, [ '26' ] ]
[2016-10-21 10:20:20.739] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/25/' like z.path||z.id||'/%'
[2016-10-21 10:20:20.752] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '25')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:20.757] [INFO] console - [ 16,
  942032562421760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id25.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:20:20.763] [INFO] console - [ 16,
  5837288422506496,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:20:20.767] [INFO] console - [ 16,
  4216497645813760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 83 } ]
[2016-10-21 10:20:20.783] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:20:20.786] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): START TRANSACTION;
[2016-10-21 10:20:20.787] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.795] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:20:20.789 +00:00','2016-10-21 05:20:20.789 +00:00',26,NULL) RETURNING *;
[2016-10-21 10:20:20.799] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:20:20.812] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '26');
[2016-10-21 10:20:20.815] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/25/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 26
                                    )
[2016-10-21 10:20:20.819] [INFO] console - Executing (00b254f6-938d-429e-9a62-41393d989b58): COMMIT;
[2016-10-21 10:20:20.822] [INFO] console - [ 70, 816, {}, [ '84' ] ]
[2016-10-21 10:20:20.827] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '26');
[2016-10-21 10:20:20.831] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/25/' like z.path||z.id||'/%'
[2016-10-21 10:20:20.836] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '25')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:20.842] [INFO] console - [ 16,
  1183377084383232,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id26.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:20:20.847] [INFO] console - [ 16,
  5340605714530304,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id25.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:20:20.852] [INFO] console - [ 16,
  2004079991586816,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:20:20.858] [INFO] console - [ 16,
  1538068666384384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 84 } ]
[2016-10-21 10:20:20.866] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:20:20.868] [INFO] console - Executing (a7121180-5f74-4fcf-b18d-c6d40ff5b4ff): START TRANSACTION;
[2016-10-21 10:20:20.870] [INFO] console - Executing (a7121180-5f74-4fcf-b18d-c6d40ff5b4ff): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.877] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:20:20.881] [INFO] console - Executing (a7121180-5f74-4fcf-b18d-c6d40ff5b4ff): COMMIT;
[2016-10-21 10:20:20.883] [INFO] console - [ 70,
  817,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:20:20.908] [INFO] console - Executing (fb8f3be1-ecf7-44b6-afdf-227fce9f148a): START TRANSACTION;
[2016-10-21 10:20:20.909] [INFO] console - Executing (fb8f3be1-ecf7-44b6-afdf-227fce9f148a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:20:20.914] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 25);
[2016-10-21 10:20:20.919] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:20:20.922] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:20:20.930] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:20.935] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 25
                                    )
[2016-10-21 10:20:20.942] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:20:20.937 +00:00' WHERE "id" = '25'
[2016-10-21 10:20:20.946] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '25'
                                    or path like '/1/2/25/'||'%'
[2016-10-21 10:20:20.949] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 25
                                    )
[2016-10-21 10:20:20.953] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:20:20.964] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:20:20.968] [INFO] console - Executing (fb8f3be1-ecf7-44b6-afdf-227fce9f148a): COMMIT;
[2016-10-21 10:20:20.970] [INFO] console - [ 70, 818, {}, [ undefined ] ]
[2016-10-21 10:20:20.972] [INFO] console - [ 16,
  8763527963607040,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:20:20.979] [INFO] console - [ 16,
  3145776255467520,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 83 } ]
[2016-10-21 10:20:20.994] [INFO] console - [ 16,
  980128356106240,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:20:20.999] [INFO] console - [ 16,
  1710378448846848,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 84 } ]
[2016-10-21 10:26:04.385] [INFO] console - [ 70, 820, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:26:04.403] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:26:04.412] [INFO] console - [ 70, 821, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:26:04.496] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:26:04.500] [INFO] console - [ 70, 822, {}, [ 'КОПА' ] ]
[2016-10-21 10:26:04.508] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:26:04.515] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:26:04.551] [INFO] console - [ 8,
  68,
  823,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:26:04.658] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:04.665] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:26:04.673] [INFO] console - [ 8,
  68,
  825,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:26:04.739] [INFO] console - [ 70, 827, {}, [ undefined ] ]
[2016-10-21 10:26:04.757] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:26:04.760] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:26:04.771] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:26:04.774] [INFO] console - Executing (bcb61b86-944f-4fea-945c-9943c97ca19c): START TRANSACTION;
[2016-10-21 10:26:04.779] [INFO] console - Executing (bcb61b86-944f-4fea-945c-9943c97ca19c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:04.824] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:26:04.834] [INFO] console - Executing (bcb61b86-944f-4fea-945c-9943c97ca19c): COMMIT;
[2016-10-21 10:26:04.836] [INFO] console - [ 70,
  828,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:04.853] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:26:04.860] [INFO] console - Executing (37e9ba0d-b738-4c04-8376-9b97ced3b293): START TRANSACTION;
[2016-10-21 10:26:04.876] [INFO] console - Executing (37e9ba0d-b738-4c04-8376-9b97ced3b293): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:04.883] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:04.891] [INFO] console - Executing (37e9ba0d-b738-4c04-8376-9b97ced3b293): COMMIT;
[2016-10-21 10:26:04.893] [INFO] console - [ 70,
  829,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027216073',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:04.917] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:04.921] [INFO] console - Executing (dbe6af35-733d-4231-8f1b-be5445ed942e): START TRANSACTION;
[2016-10-21 10:26:04.924] [INFO] console - Executing (dbe6af35-733d-4231-8f1b-be5445ed942e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:04.938] [INFO] console - Executing (dbe6af35-733d-4231-8f1b-be5445ed942e): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:26:04.927 +00:00','2016-10-21 05:26:04.927 +00:00',2,2) RETURNING *;
[2016-10-21 10:26:04.942] [INFO] console - Executing (dbe6af35-733d-4231-8f1b-be5445ed942e): COMMIT;
[2016-10-21 10:26:04.944] [INFO] console - [ 70, 830, {}, [ '26' ] ]
[2016-10-21 10:26:04.969] [INFO] console - Executing (45bdc810-9a92-4f37-aa44-dd58c061ce4c): START TRANSACTION;
[2016-10-21 10:26:04.971] [INFO] console - Executing (45bdc810-9a92-4f37-aa44-dd58c061ce4c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:04.976] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 26);
[2016-10-21 10:26:04.985] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:26:04.978 +00:00',"updated_at"='2016-10-21 05:26:04.979 +00:00' WHERE "id" = '26'
[2016-10-21 10:26:04.989] [INFO] console - Executing (45bdc810-9a92-4f37-aa44-dd58c061ce4c): COMMIT;
[2016-10-21 10:26:04.991] [INFO] console - [ 70, 831, {}, [ undefined ] ]
[2016-10-21 10:26:04.994] [INFO] console - [ 16, 3284549580619776, {}, 'ru.kopa.model.Kopa.id26.change' ]
[2016-10-21 10:26:04.996] [INFO] console - [ 16,
  2755386918567936,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 26 ] ]
[2016-10-21 10:26:05.005] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 26 }
[2016-10-21 10:26:05.009] [INFO] console - Executing (a3f19caf-e308-44b5-9d1a-d9608cf8d6fa): START TRANSACTION;
[2016-10-21 10:26:05.012] [INFO] console - Executing (a3f19caf-e308-44b5-9d1a-d9608cf8d6fa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.020] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:26:05.030] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 26);
[2016-10-21 10:26:05.040] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:26:05.042] [INFO] console - Executing (a3f19caf-e308-44b5-9d1a-d9608cf8d6fa): COMMIT;
[2016-10-21 10:26:05.048] [INFO] console - [ 70,
  832,
  {},
  [ { id: '26',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:26:04 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:26:04 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:04 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:05.054] [INFO] console - [ 70, 833, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:26:05.096] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:26:05.104] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:26:05.109] [INFO] console - [ 70, 834, {}, [ [ [Object] ] ] ]
[2016-10-21 10:26:05.122] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:26:05.138] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:26:05.143] [INFO] console - [ 70, 835, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:26:05.182] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:26:05.189] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:26:05.193] [INFO] console - [ 70, 836, {}, [ [ [Object] ] ] ]
[2016-10-21 10:26:05.211] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:26:05.214] [INFO] console - Executing (44cb1f94-e265-4517-8083-0cc0467a5534): START TRANSACTION;
[2016-10-21 10:26:05.217] [INFO] console - Executing (44cb1f94-e265-4517-8083-0cc0467a5534): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.230] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:26:05.237] [INFO] console - Executing (44cb1f94-e265-4517-8083-0cc0467a5534): COMMIT;
[2016-10-21 10:26:05.238] [INFO] console - [ 70,
  837,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:26:05.267] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:05.271] [INFO] console - Executing (cecf7299-f046-4812-a1fd-278a981e0b6b): START TRANSACTION;
[2016-10-21 10:26:05.274] [INFO] console - Executing (cecf7299-f046-4812-a1fd-278a981e0b6b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.280] [INFO] console - Executing (cecf7299-f046-4812-a1fd-278a981e0b6b): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027565255 temp','2016-10-21 05:26:05.276 +00:00','2016-10-21 05:26:05.276 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:05.286] [INFO] console - Executing (cecf7299-f046-4812-a1fd-278a981e0b6b): COMMIT;
[2016-10-21 10:26:05.288] [INFO] console - [ 70, 838, {}, [ '37' ] ]
[2016-10-21 10:26:05.292] [INFO] console - [ 16,
  6558451800997888,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '37' ] ]
[2016-10-21 10:26:05.320] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:05.325] [INFO] console - Executing (de4da6c9-f3f4-4a9e-9b77-b3aec2fbcd8f): START TRANSACTION;
[2016-10-21 10:26:05.327] [INFO] console - Executing (de4da6c9-f3f4-4a9e-9b77-b3aec2fbcd8f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.337] [INFO] console - Executing (de4da6c9-f3f4-4a9e-9b77-b3aec2fbcd8f): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027565305temp',0,0,'2016-10-21 05:26:05.333 +00:00','2016-10-21 05:26:05.333 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:05.343] [INFO] console - Executing (de4da6c9-f3f4-4a9e-9b77-b3aec2fbcd8f): COMMIT;
[2016-10-21 10:26:05.345] [INFO] console - [ 70, 839, {}, [ '45' ] ]
[2016-10-21 10:26:05.348] [INFO] console - [ 16,
  660357242683392,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '45' ] ]
[2016-10-21 10:26:05.417] [INFO] console - [ 70, 841, {}, [ undefined ] ]
[2016-10-21 10:26:05.432] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:26:05.439] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:26:05.442] [INFO] console - Executing (c4c1c856-a0df-4a8f-bb07-e378a84953e7): START TRANSACTION;
[2016-10-21 10:26:05.449] [INFO] console - Executing (c4c1c856-a0df-4a8f-bb07-e378a84953e7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.451] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:26:05.461] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:26:05.468] [INFO] console - Executing (c4c1c856-a0df-4a8f-bb07-e378a84953e7): COMMIT;
[2016-10-21 10:26:05.471] [INFO] console - [ 70,
  842,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:26:05.497] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:26:05.507] [INFO] console - [ 70, 843, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:26:05.532] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:05.537] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): START TRANSACTION;
[2016-10-21 10:26:05.543] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.551] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:26:05.545 +00:00','2016-10-21 05:26:05.545 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:26:05.558] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:05.563] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:05.567] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:26:05.571] [INFO] console - Executing (56d7dd2f-450f-469f-a65a-d999bd068c97): COMMIT;
[2016-10-21 10:26:05.574] [INFO] console - [ 70, 844, {}, [ '85' ] ]
[2016-10-21 10:26:05.582] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:05.590] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:26:05.593] [INFO] console - Executing (84cf6ad6-a74e-46ac-9975-2f1541646609): START TRANSACTION;
[2016-10-21 10:26:05.595] [INFO] console - Executing (84cf6ad6-a74e-46ac-9975-2f1541646609): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.604] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:05.608] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 85);
[2016-10-21 10:26:05.611] [INFO] console - [ 16,
  516601694650368,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:26:05.621] [INFO] console - [ 16,
  220792866471936,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 85 } ]
[2016-10-21 10:26:05.633] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:26:05.638] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:05.646] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:05.649] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:05.659] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:26:05.651 +00:00' WHERE "id" = '85'
[2016-10-21 10:26:05.665] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '85'
                                    or path like '/85/'||'%'
[2016-10-21 10:26:05.668] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:26:05.683] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:26:05.696] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:05.701] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/85/'||'%'
[2016-10-21 10:26:05.705] [INFO] console - Executing (84cf6ad6-a74e-46ac-9975-2f1541646609): COMMIT;
[2016-10-21 10:26:05.726] [INFO] console - [ 70, 845, {}, [ undefined ] ]
[2016-10-21 10:26:05.745] [INFO] console - [ 16,
  3812118589603840,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/85/',
       id: '85',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:26:05.754] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:05.762] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): START TRANSACTION;
[2016-10-21 10:26:05.764] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.777] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:26:05.766 +00:00','2016-10-21 05:26:05.766 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:26:05.779] [INFO] console - [ 16,
  5048449495990272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:26:05.786] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:05.795] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:05.798] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:26:05.801] [INFO] console - Executing (d1bc0c0c-b60c-49b0-92d8-aa62d60a5491): COMMIT;
[2016-10-21 10:26:05.808] [INFO] console - [ 70, 846, {}, [ '86' ] ]
[2016-10-21 10:26:05.814] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:05.818] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:26:05.824] [INFO] console - Executing (6dcce34a-1c79-47fd-9aba-29086e315607): START TRANSACTION;
[2016-10-21 10:26:05.827] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:05.831] [INFO] console - Executing (6dcce34a-1c79-47fd-9aba-29086e315607): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.835] [INFO] console - [ 16,
  3371633406377984,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 10:26:05.840] [INFO] console - [ 16,
  1193159467991040,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 86 } ]
[2016-10-21 10:26:05.848] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 86);
[2016-10-21 10:26:05.855] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 85);
[2016-10-21 10:26:05.858] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:05.863] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:05.866] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:05.874] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='85',"updated_at"='2016-10-21 05:26:05.868 +00:00' WHERE "id" = '86'
[2016-10-21 10:26:05.879] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/85/')
                                where
                                    id = '86'
                                    or path like '/86/'||'%'
[2016-10-21 10:26:05.882] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/85/' like path||id||'/%'
[2016-10-21 10:26:05.887] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/85/' like k.path||k.id||'/%'
[2016-10-21 10:26:05.892] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('85', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:05.899] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/85/86/'||'%'
[2016-10-21 10:26:05.902] [INFO] console - Executing (6dcce34a-1c79-47fd-9aba-29086e315607): COMMIT;
[2016-10-21 10:26:05.904] [INFO] console - [ 70, 847, {}, [ undefined ] ]
[2016-10-21 10:26:05.906] [INFO] console - [ 16,
  4270382404075520,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id85.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/85/86/',
       id: '86',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/85/',
       note: null,
       created_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '85' } } ]
[2016-10-21 10:26:05.918] [INFO] console - [ 16,
  5457131710971904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id85.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:26:05.924] [INFO] console - [ 16,
  5612641720467456,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:26:05.934] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:26:05.938] [INFO] console - Executing (109dd084-ad83-43d2-b367-f07207c6dbd4): START TRANSACTION;
[2016-10-21 10:26:05.940] [INFO] console - Executing (109dd084-ad83-43d2-b367-f07207c6dbd4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.952] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:26:05.958] [INFO] console - Executing (109dd084-ad83-43d2-b367-f07207c6dbd4): COMMIT;
[2016-10-21 10:26:05.965] [INFO] console - [ 70,
  848,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:26:05.986] [INFO] console - Executing (962ce0ee-7cef-4d9f-82e1-4d80ec56c26b): START TRANSACTION;
[2016-10-21 10:26:05.988] [INFO] console - Executing (962ce0ee-7cef-4d9f-82e1-4d80ec56c26b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:05.993] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 85);
[2016-10-21 10:26:06.000] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:26:06.004] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.010] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.014] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:26:06.023] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:26:06.017 +00:00' WHERE "id" = '85'
[2016-10-21 10:26:06.027] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '85'
                                    or path like '/2/85/'||'%'
[2016-10-21 10:26:06.031] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:26:06.034] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.039] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.044] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/85/'||'%'
[2016-10-21 10:26:06.048] [INFO] console - Executing (962ce0ee-7cef-4d9f-82e1-4d80ec56c26b): COMMIT;
[2016-10-21 10:26:06.049] [INFO] console - [ 70, 849, {}, [ undefined ] ]
[2016-10-21 10:26:06.052] [INFO] console - [ 16,
  130646619979776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 85 } ]
[2016-10-21 10:26:06.060] [INFO] console - [ 16,
  8575361484849152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/85/',
       id: '85',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:26:06.070] [INFO] console - [ 16,
  6053185296793600,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:26:06.075] [INFO] console - [ 16,
  1960401669455872,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:26:06.080] [INFO] console - [ 16,
  2275056898015232,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id86.starshinaChange',
  [],
  {} ]
[2016-10-21 10:26:06.088] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 86 }
[2016-10-21 10:26:06.092] [INFO] console - Executing (e50eff28-3063-4f3a-b118-df0aa36750b2): START TRANSACTION;
[2016-10-21 10:26:06.094] [INFO] console - Executing (e50eff28-3063-4f3a-b118-df0aa36750b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.101] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 86);
[2016-10-21 10:26:06.108] [INFO] console - Executing (e50eff28-3063-4f3a-b118-df0aa36750b2): COMMIT;
[2016-10-21 10:26:06.110] [INFO] console - [ 70,
  850,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/85/86/',
      id: '86',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/85/',
      note: null,
      created_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '85',
      attachments: [] } ] ]
[2016-10-21 10:26:06.123] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 85 }
[2016-10-21 10:26:06.126] [INFO] console - Executing (5e13e207-6f5d-4cc1-98a4-9ae351b4d9b0): START TRANSACTION;
[2016-10-21 10:26:06.128] [INFO] console - Executing (5e13e207-6f5d-4cc1-98a4-9ae351b4d9b0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.136] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 85);
[2016-10-21 10:26:06.143] [INFO] console - Executing (5e13e207-6f5d-4cc1-98a4-9ae351b4d9b0): COMMIT;
[2016-10-21 10:26:06.145] [INFO] console - [ 70,
  851,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/85/',
      id: '85',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:26:05 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:26:06.160] [INFO] console - Executing (ea37aa37-481d-4027-9671-d93ab3cc1ad3): START TRANSACTION;
[2016-10-21 10:26:06.164] [INFO] console - Executing (ea37aa37-481d-4027-9671-d93ab3cc1ad3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.171] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 85);
[2016-10-21 10:26:06.179] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.185] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.192] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:26:06.201] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:26:06.195 +00:00' WHERE "id" = '85'
[2016-10-21 10:26:06.204] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '85'
                                    or path like '/4/85/'||'%'
[2016-10-21 10:26:06.209] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:06.212] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.217] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.219] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/85/'||'%'
[2016-10-21 10:26:06.222] [INFO] console - Executing (ea37aa37-481d-4027-9671-d93ab3cc1ad3): COMMIT;
[2016-10-21 10:26:06.224] [INFO] console - [ 70, 852, {}, [ undefined ] ]
[2016-10-21 10:26:06.228] [INFO] console - [ 16,
  7335560748204032,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 85 } ]
[2016-10-21 10:26:06.235] [INFO] console - [ 16,
  3054080157024256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:26:06.239] [INFO] console - [ 16,
  3953554400215040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id86.starshinaChange',
  [],
  {} ]
[2016-10-21 10:26:06.251] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:06.256] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): START TRANSACTION;
[2016-10-21 10:26:06.262] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.277] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:26:06.265 +00:00','2016-10-21 05:26:06.265 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:26:06.289] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:06.295] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.301] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:26:06.304] [INFO] console - Executing (8e77d402-fd01-4a0f-81a9-5c006cd02000): COMMIT;
[2016-10-21 10:26:06.306] [INFO] console - [ 70, 853, {}, [ '87' ] ]
[2016-10-21 10:26:06.312] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.316] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:26:06.321] [INFO] console - Executing (9c24e819-8ecd-4991-9685-6862bd927201): START TRANSACTION;
[2016-10-21 10:26:06.323] [INFO] console - Executing (9c24e819-8ecd-4991-9685-6862bd927201): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.328] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:06.331] [INFO] console - [ 16,
  8336020309278720,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 10:26:06.341] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 87);
[2016-10-21 10:26:06.343] [INFO] console - [ 16,
  8079740162277376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 87 } ]
[2016-10-21 10:26:06.356] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:26:06.362] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.368] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.371] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:06.380] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:26:06.373 +00:00' WHERE "id" = '87'
[2016-10-21 10:26:06.385] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '87'
                                    or path like '/87/'||'%'
[2016-10-21 10:26:06.391] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:26:06.395] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.405] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.410] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/87/'||'%'
[2016-10-21 10:26:06.413] [INFO] console - Executing (9c24e819-8ecd-4991-9685-6862bd927201): COMMIT;
[2016-10-21 10:26:06.416] [INFO] console - [ 70, 854, {}, [ undefined ] ]
[2016-10-21 10:26:06.421] [INFO] console - [ 16,
  1169141612412928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/87/',
       id: '87',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:26:06.433] [INFO] console - [ 16,
  5394227865321472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:26:06.440] [INFO] console - Executing (d1c8a727-7745-4a82-b67f-440c7097b27f): START TRANSACTION;
[2016-10-21 10:26:06.442] [INFO] console - Executing (d1c8a727-7745-4a82-b67f-440c7097b27f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.445] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 87);
[2016-10-21 10:26:06.449] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.454] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.458] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:26:06.467] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:26:06.460 +00:00' WHERE "id" = '87'
[2016-10-21 10:26:06.470] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '87'
                                    or path like '/2/87/'||'%'
[2016-10-21 10:26:06.473] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:06.476] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.481] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.485] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/87/'||'%'
[2016-10-21 10:26:06.487] [INFO] console - Executing (d1c8a727-7745-4a82-b67f-440c7097b27f): COMMIT;
[2016-10-21 10:26:06.489] [INFO] console - [ 70, 855, {}, [ undefined ] ]
[2016-10-21 10:26:06.491] [INFO] console - [ 16,
  2384461681393664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 87 } ]
[2016-10-21 10:26:06.498] [INFO] console - [ 16,
  3655725651853312,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:26:06.515] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:26:06.522] [INFO] console - Executing (29c3245a-46b7-4eed-be64-e69ddf138ec6): START TRANSACTION;
[2016-10-21 10:26:06.524] [INFO] console - Executing (29c3245a-46b7-4eed-be64-e69ddf138ec6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.534] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:26:06.543] [INFO] console - Executing (29c3245a-46b7-4eed-be64-e69ddf138ec6): COMMIT;
[2016-10-21 10:26:06.545] [INFO] console - [ 70,
  856,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:06.644] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:06.649] [INFO] console - Executing (b2f621a0-8f47-47f2-9798-5ce9d5805902): START TRANSACTION;
[2016-10-21 10:26:06.652] [INFO] console - Executing (b2f621a0-8f47-47f2-9798-5ce9d5805902): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.664] [INFO] console - Executing (b2f621a0-8f47-47f2-9798-5ce9d5805902): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT)',0,0,'2016-10-21 05:26:06.654 +00:00','2016-10-21 05:26:06.654 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:06.669] [INFO] console - Executing (b2f621a0-8f47-47f2-9798-5ce9d5805902): COMMIT;
[2016-10-21 10:26:06.677] [INFO] console - [ 70, 857, {}, [ '46' ] ]
[2016-10-21 10:26:06.684] [INFO] console - [ 16,
  562002609045504,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '46' ] ]
[2016-10-21 10:26:06.696] [INFO] console - Executing (a5eb1a9a-8af7-4527-bfce-8805a507bc12): START TRANSACTION;
[2016-10-21 10:26:06.698] [INFO] console - Executing (a5eb1a9a-8af7-4527-bfce-8805a507bc12): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.704] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:06.716] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 46);
[2016-10-21 10:26:06.722] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:26:06.729] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.735] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.739] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.754] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.758] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '46' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:26:06.766] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:26:06.762 +00:00','2016-10-21 05:26:06.762 +00:00','46','2') RETURNING *;
[2016-10-21 10:26:06.771] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 46, 1, k.id, 92, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:26:06.779] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 46 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 46 and value=-1) "protiv"
[2016-10-21 10:26:06.785] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:26:06.781 +00:00' WHERE "id" = '46'
[2016-10-21 10:26:06.788] [INFO] console - Executing (a5eb1a9a-8af7-4527-bfce-8805a507bc12): COMMIT;
[2016-10-21 10:26:06.790] [INFO] console - [ 70, 858, {}, [ undefined ] ]
[2016-10-21 10:26:06.793] [INFO] console - [ 16,
  4122559043862528,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id46.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '92',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:26:06.806] [INFO] console - Executing (4fcf1137-6ff8-49c0-bba7-e0224297523f): START TRANSACTION;
[2016-10-21 10:26:06.808] [INFO] console - Executing (4fcf1137-6ff8-49c0-bba7-e0224297523f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.809] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 92 }
[2016-10-21 10:26:06.811] [INFO] console - Executing (a25443bb-d0e6-4aff-b004-9e35d564e0d5): START TRANSACTION;
[2016-10-21 10:26:06.814] [INFO] console - Executing (a25443bb-d0e6-4aff-b004-9e35d564e0d5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.816] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:06.828] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 92);
[2016-10-21 10:26:06.836] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 46);
[2016-10-21 10:26:06.838] [INFO] console - Executing (a25443bb-d0e6-4aff-b004-9e35d564e0d5): COMMIT;
[2016-10-21 10:26:06.845] [INFO] console - [ 70,
  860,
  {},
  [ { id: '92',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:06 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '46',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:26:06.854] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:26:06.863] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.870] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:26:06.875] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:26:06.884] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:26:06.892] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '46' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:26:06.902] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 46
                                and (
                                    id= 92
                                    or parent_id = 92
                                )
[2016-10-21 10:26:06.909] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 46 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 46 and value=-1) "protiv"
[2016-10-21 10:26:06.919] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:26:06.913 +00:00' WHERE "id" = '46'
[2016-10-21 10:26:06.939] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:26:06.946] [INFO] console - Executing (6bb6d5b5-2cae-4a85-97d8-32abcad718f1): START TRANSACTION;
[2016-10-21 10:26:06.950] [INFO] console - Executing (6bb6d5b5-2cae-4a85-97d8-32abcad718f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:06.953] [INFO] console - Executing (4fcf1137-6ff8-49c0-bba7-e0224297523f): COMMIT;
[2016-10-21 10:26:06.964] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:26:06.965] [INFO] console - [ 70, 859, {}, [ undefined ] ]
[2016-10-21 10:26:06.971] [INFO] console - [ 16,
  3849026027913216,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id46.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '92',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:26:06.982] [INFO] console - Executing (6bb6d5b5-2cae-4a85-97d8-32abcad718f1): COMMIT;
[2016-10-21 10:26:06.983] [INFO] console - [ 70,
  862,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:07.007] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.013] [INFO] console - Executing (e07bd6e4-a5b3-4aeb-bb65-6ce400cf317b): START TRANSACTION;
[2016-10-21 10:26:07.015] [INFO] console - Executing (e07bd6e4-a5b3-4aeb-bb65-6ce400cf317b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.034] [INFO] console - Executing (e07bd6e4-a5b3-4aeb-bb65-6ce400cf317b): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027561993',0,0,'2016-10-21 05:26:07.018 +00:00','2016-10-21 05:26:07.018 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:07.038] [INFO] console - Executing (e07bd6e4-a5b3-4aeb-bb65-6ce400cf317b): COMMIT;
[2016-10-21 10:26:07.040] [INFO] console - [ 70, 863, {}, [ '47' ] ]
[2016-10-21 10:26:07.050] [INFO] console - [ 16,
  5704213162098688,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '47' ] ]
[2016-10-21 10:26:07.106] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:26:07.109] [INFO] console - Executing (2cacbbf6-c2ef-4f8e-a2c4-89acb6567d87): START TRANSACTION;
[2016-10-21 10:26:07.111] [INFO] console - Executing (2cacbbf6-c2ef-4f8e-a2c4-89acb6567d87): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.119] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:26:07.128] [INFO] console - Executing (2cacbbf6-c2ef-4f8e-a2c4-89acb6567d87): COMMIT;
[2016-10-21 10:26:07.129] [INFO] console - [ 70,
  865,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:26:07.153] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:26:07.155] [INFO] console - Executing (1f888a64-19f9-445f-b238-bbe0902a5f2f): START TRANSACTION;
[2016-10-21 10:26:07.165] [INFO] console - Executing (1f888a64-19f9-445f-b238-bbe0902a5f2f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.172] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:26:07.177] [INFO] console - Executing (1f888a64-19f9-445f-b238-bbe0902a5f2f): COMMIT;
[2016-10-21 10:26:07.179] [INFO] console - [ 70,
  866,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:07.201] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.212] [INFO] console - Executing (fbcd2564-b50f-4142-a4ad-842a8371c191): START TRANSACTION;
[2016-10-21 10:26:07.213] [INFO] console - Executing (fbcd2564-b50f-4142-a4ad-842a8371c191): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.224] [INFO] console - Executing (fbcd2564-b50f-4142-a4ad-842a8371c191): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:26:07.216 +00:00','2016-10-21 05:26:07.216 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:07.228] [INFO] console - Executing (fbcd2564-b50f-4142-a4ad-842a8371c191): COMMIT;
[2016-10-21 10:26:07.232] [INFO] console - [ 70, 867, {}, [ '38' ] ]
[2016-10-21 10:26:07.240] [INFO] console - [ 16,
  2487716702846976,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '38' ] ]
[2016-10-21 10:26:07.249] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 38 }
[2016-10-21 10:26:07.253] [INFO] console - Executing (9bed454b-6751-42df-ab70-d0c9828338d5): START TRANSACTION;
[2016-10-21 10:26:07.255] [INFO] console - Executing (9bed454b-6751-42df-ab70-d0c9828338d5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.266] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 38);
[2016-10-21 10:26:07.272] [INFO] console - Executing (9bed454b-6751-42df-ab70-d0c9828338d5): COMMIT;
[2016-10-21 10:26:07.274] [INFO] console - [ 70,
  868,
  {},
  [ { id: '38',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:26:07.296] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.300] [INFO] console - Executing (f08f24d2-2535-41a4-9100-94b56acbdafe): START TRANSACTION;
[2016-10-21 10:26:07.302] [INFO] console - Executing (f08f24d2-2535-41a4-9100-94b56acbdafe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.309] [INFO] console - Executing (f08f24d2-2535-41a4-9100-94b56acbdafe): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027567288','2016-10-21 05:26:07.306 +00:00','2016-10-21 05:26:07.306 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:07.313] [INFO] console - Executing (f08f24d2-2535-41a4-9100-94b56acbdafe): COMMIT;
[2016-10-21 10:26:07.316] [INFO] console - [ 70, 869, {}, [ '39' ] ]
[2016-10-21 10:26:07.318] [INFO] console - [ 16,
  8255470164770816,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '39' ] ]
[2016-10-21 10:26:07.335] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:26:07.338] [INFO] console - Executing (ecf53052-5d89-401c-866b-3d7e29349986): START TRANSACTION;
[2016-10-21 10:26:07.346] [INFO] console - Executing (ecf53052-5d89-401c-866b-3d7e29349986): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.352] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.360] [INFO] console - Executing (ecf53052-5d89-401c-866b-3d7e29349986): COMMIT;
[2016-10-21 10:26:07.362] [INFO] console - [ 70,
  870,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027216073',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:20:20 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:07.392] [INFO] console - Executing (39a9cbf4-372f-4033-8582-e6909d5b2f8c): START TRANSACTION;
[2016-10-21 10:26:07.394] [INFO] console - Executing (39a9cbf4-372f-4033-8582-e6909d5b2f8c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.399] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.409] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027562028',"updated_at"='2016-10-21 05:26:07.403 +00:00' WHERE "id" = '2'
[2016-10-21 10:26:07.413] [INFO] console - Executing (39a9cbf4-372f-4033-8582-e6909d5b2f8c): COMMIT;
[2016-10-21 10:26:07.415] [INFO] console - [ 16,
  6943689230254080,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:26:07.422] [INFO] console - [ 70, 871, {}, [ undefined ] ]
[2016-10-21 10:26:07.427] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:26:07.431] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:26:07.434] [INFO] console - Executing (0e6f5f09-3d65-4089-bfbc-128ac35b7116): START TRANSACTION;
[2016-10-21 10:26:07.435] [INFO] console - Executing (13edc228-0f1f-4efa-8dd9-91607f300ce2): START TRANSACTION;
[2016-10-21 10:26:07.440] [INFO] console - Executing (0e6f5f09-3d65-4089-bfbc-128ac35b7116): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.440] [INFO] console - Executing (13edc228-0f1f-4efa-8dd9-91607f300ce2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.451] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.452] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.459] [INFO] console - Executing (0e6f5f09-3d65-4089-bfbc-128ac35b7116): COMMIT;
[2016-10-21 10:26:07.463] [INFO] console - Executing (13edc228-0f1f-4efa-8dd9-91607f300ce2): COMMIT;
[2016-10-21 10:26:07.463] [INFO] console - [ 70,
  872,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027562028',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:07.472] [INFO] console - [ 70,
  873,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027562028',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:07.526] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:26:07.533] [INFO] console - Executing (aaa23742-ab30-45ff-a34e-6ce9565175a0): START TRANSACTION;
[2016-10-21 10:26:07.535] [INFO] console - Executing (aaa23742-ab30-45ff-a34e-6ce9565175a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.541] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:26:07.549] [INFO] console - Executing (aaa23742-ab30-45ff-a34e-6ce9565175a0): COMMIT;
[2016-10-21 10:26:07.550] [INFO] console - [ 70,
  875,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:07.568] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.571] [INFO] console - Executing (39d3a91e-2f2f-4f46-8e54-bdc0911b084b): START TRANSACTION;
[2016-10-21 10:26:07.573] [INFO] console - Executing (39d3a91e-2f2f-4f46-8e54-bdc0911b084b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.577] [INFO] console - Executing (39d3a91e-2f2f-4f46-8e54-bdc0911b084b): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:26:07.574 +00:00','2016-10-21 05:26:07.574 +00:00',2,3) RETURNING *;
[2016-10-21 10:26:07.580] [INFO] console - Executing (39d3a91e-2f2f-4f46-8e54-bdc0911b084b): COMMIT;
[2016-10-21 10:26:07.583] [INFO] console - [ 70, 876, {}, [ '40' ] ]
[2016-10-21 10:26:07.585] [INFO] console - [ 16,
  6812648953872384,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '40' ] ]
[2016-10-21 10:26:07.599] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:26:07.602] [INFO] console - Executing (a80888dc-c409-472e-ba2e-98780277c730): START TRANSACTION;
[2016-10-21 10:26:07.603] [INFO] console - Executing (a80888dc-c409-472e-ba2e-98780277c730): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.611] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:26:07.615] [INFO] console - Executing (a80888dc-c409-472e-ba2e-98780277c730): COMMIT;
[2016-10-21 10:26:07.617] [INFO] console - [ 70,
  877,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:26:07.694] [INFO] console - [ 70, 879, {}, [ undefined ] ]
[2016-10-21 10:26:07.700] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:26:07.702] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:26:07.705] [INFO] console - Executing (47d9fa95-717a-40d4-bc36-418a26b88b6e): START TRANSACTION;
[2016-10-21 10:26:07.709] [INFO] console - Executing (47d9fa95-717a-40d4-bc36-418a26b88b6e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.711] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:26:07.720] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.725] [INFO] console - Executing (47d9fa95-717a-40d4-bc36-418a26b88b6e): COMMIT;
[2016-10-21 10:26:07.728] [INFO] console - [ 70,
  880,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027562028',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:07.746] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.751] [INFO] console - Executing (42a32d4e-c5b0-4b3b-b609-f3b3a44c25b1): START TRANSACTION;
[2016-10-21 10:26:07.753] [INFO] console - Executing (42a32d4e-c5b0-4b3b-b609-f3b3a44c25b1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.760] [INFO] console - Executing (42a32d4e-c5b0-4b3b-b609-f3b3a44c25b1): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:26:07.755 +00:00','2016-10-21 05:26:07.755 +00:00',2,2) RETURNING *;
[2016-10-21 10:26:07.765] [INFO] console - Executing (42a32d4e-c5b0-4b3b-b609-f3b3a44c25b1): COMMIT;
[2016-10-21 10:26:07.768] [INFO] console - [ 70, 881, {}, [ '27' ] ]
[2016-10-21 10:26:07.823] [INFO] console - Executing (ee617576-efa3-418c-a5aa-3cf12c265730): START TRANSACTION;
[2016-10-21 10:26:07.825] [INFO] console - Executing (ee617576-efa3-418c-a5aa-3cf12c265730): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.830] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 27);
[2016-10-21 10:26:07.837] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:26:07.833 +00:00',"updated_at"='2016-10-21 05:26:07.833 +00:00' WHERE "id" = '27'
[2016-10-21 10:26:07.841] [INFO] console - Executing (ee617576-efa3-418c-a5aa-3cf12c265730): COMMIT;
[2016-10-21 10:26:07.842] [INFO] console - [ 70, 882, {}, [ undefined ] ]
[2016-10-21 10:26:07.845] [INFO] console - [ 16, 4907945659727872, {}, 'ru.kopa.model.Kopa.id27.change' ]
[2016-10-21 10:26:07.847] [INFO] console - [ 16,
  3162066347098112,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 27 ] ]
[2016-10-21 10:26:07.947] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 27 }
[2016-10-21 10:26:07.949] [INFO] console - Executing (7b93e7ae-025b-412b-b187-c0f2b68e4af9): START TRANSACTION;
[2016-10-21 10:26:07.954] [INFO] console - Executing (7b93e7ae-025b-412b-b187-c0f2b68e4af9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.963] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:07.973] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 27);
[2016-10-21 10:26:07.975] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): START TRANSACTION;
[2016-10-21 10:26:07.979] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:07.981] [INFO] console - Executing (7b93e7ae-025b-412b-b187-c0f2b68e4af9): COMMIT;
[2016-10-21 10:26:07.988] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:26:07.989] [INFO] console - [ 70,
  883,
  {},
  [ { id: '27',
      question: 'temp',
      invited: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:26:07.998] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:26:08.004] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:26:07.983 +00:00','2016-10-21 05:26:07.983 +00:00',2) RETURNING *;
[2016-10-21 10:26:08.009] [INFO] console - Executing (42d6ff37-6016-4931-ab38-4f364a010eef): COMMIT;
[2016-10-21 10:26:08.012] [INFO] console - [ 70, 884, {}, [ '27' ] ]
[2016-10-21 10:26:08.016] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:26:08.021] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:08.038] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:08.039] [INFO] console - [ 16,
  6888765079420928,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:26:08.045] [INFO] console - [ 16,
  4726735706783744,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 87 } ]
[2016-10-21 10:26:08.058] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): START TRANSACTION;
[2016-10-21 10:26:08.059] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:08.069] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 27);
[2016-10-21 10:26:08.073] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/27/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:26:08.080] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/27/','2016-10-21 05:26:08.062 +00:00','2016-10-21 05:26:08.062 +00:00',27) RETURNING *;
[2016-10-21 10:26:08.083] [INFO] console - Executing (fc560003-35f5-4cef-b26e-3bd6bc890d31): COMMIT;
[2016-10-21 10:26:08.085] [INFO] console - [ 70, 885, {}, [ '28' ] ]
[2016-10-21 10:26:08.092] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/27/' like z.path||z.id||'/%'
[2016-10-21 10:26:08.098] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '27')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:08.101] [INFO] console - [ 16,
  7092320488914944,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id27.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:26:08.105] [INFO] console - [ 16,
  2036146836078592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:26:08.121] [INFO] console - [ 16,
  4471691254169600,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 87 } ]
[2016-10-21 10:26:08.132] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:26:08.137] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): START TRANSACTION;
[2016-10-21 10:26:08.140] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:08.150] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:26:08.142 +00:00','2016-10-21 05:26:08.142 +00:00',28,NULL) RETURNING *;
[2016-10-21 10:26:08.154] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:26:08.159] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '28');
[2016-10-21 10:26:08.163] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/27/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 28
                                    )
[2016-10-21 10:26:08.168] [INFO] console - Executing (73e0a666-fc58-48b8-95ea-3ed38f3fc17e): COMMIT;
[2016-10-21 10:26:08.170] [INFO] console - [ 70, 886, {}, [ '88' ] ]
[2016-10-21 10:26:08.176] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '28');
[2016-10-21 10:26:08.180] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/27/' like z.path||z.id||'/%'
[2016-10-21 10:26:08.187] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '27')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:08.189] [INFO] console - [ 16,
  6420766960648192,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id28.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:26:08.195] [INFO] console - [ 16,
  3923679761137664,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id27.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:26:08.199] [INFO] console - [ 16,
  4849354626039808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:26:08.204] [INFO] console - [ 16,
  5660404931887104,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 88 } ]
[2016-10-21 10:26:08.207] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:26:08.211] [INFO] console - Executing (44bbbd55-45ab-4bca-977d-1817f3168346): START TRANSACTION;
[2016-10-21 10:26:08.216] [INFO] console - Executing (44bbbd55-45ab-4bca-977d-1817f3168346): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:08.315] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:26:08.325] [INFO] console - Executing (44bbbd55-45ab-4bca-977d-1817f3168346): COMMIT;
[2016-10-21 10:26:08.328] [INFO] console - [ 70,
  887,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:26:08.344] [INFO] console - Executing (610b6274-8fbf-4a7d-b007-dc386bef54ce): START TRANSACTION;
[2016-10-21 10:26:08.345] [INFO] console - Executing (610b6274-8fbf-4a7d-b007-dc386bef54ce): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:26:08.349] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 27);
[2016-10-21 10:26:08.353] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:26:08.356] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:26:08.361] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:08.365] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 27
                                    )
[2016-10-21 10:26:08.371] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:26:08.367 +00:00' WHERE "id" = '27'
[2016-10-21 10:26:08.377] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '27'
                                    or path like '/1/2/27/'||'%'
[2016-10-21 10:26:08.381] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 27
                                    )
[2016-10-21 10:26:08.384] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:26:08.388] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:26:08.391] [INFO] console - Executing (610b6274-8fbf-4a7d-b007-dc386bef54ce): COMMIT;
[2016-10-21 10:26:08.393] [INFO] console - [ 70, 888, {}, [ undefined ] ]
[2016-10-21 10:26:08.395] [INFO] console - [ 16,
  6552818173345792,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:26:08.399] [INFO] console - [ 16,
  7602180271898624,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 87 } ]
[2016-10-21 10:26:08.404] [INFO] console - [ 16,
  3029669486002176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:26:08.408] [INFO] console - [ 16,
  8188755965902848,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 88 } ]
[2016-10-21 10:27:04.302] [INFO] console - [ 70, 890, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:27:04.322] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:27:04.325] [INFO] console - [ 70, 891, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:27:04.373] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:27:04.376] [INFO] console - [ 70, 892, {}, [ 'КОПА' ] ]
[2016-10-21 10:27:04.384] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:27:04.388] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:27:04.401] [INFO] console - [ 8,
  68,
  893,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:27:04.495] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:04.500] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:27:04.508] [INFO] console - [ 8,
  68,
  895,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:27:04.570] [INFO] console - [ 70, 897, {}, [ undefined ] ]
[2016-10-21 10:27:04.577] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:27:04.580] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:04.589] [INFO] console - Executing (baeeccb2-96eb-4033-a10a-7bcbef6e4064): START TRANSACTION;
[2016-10-21 10:27:04.593] [INFO] console - Executing (baeeccb2-96eb-4033-a10a-7bcbef6e4064): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:04.635] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:27:04.651] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:04.664] [INFO] console - Executing (baeeccb2-96eb-4033-a10a-7bcbef6e4064): COMMIT;
[2016-10-21 10:27:04.670] [INFO] console - [ 70,
  898,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:04.687] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:04.690] [INFO] console - Executing (b347fd6e-ddc1-4c1e-891d-e1f586971726): START TRANSACTION;
[2016-10-21 10:27:04.693] [INFO] console - Executing (b347fd6e-ddc1-4c1e-891d-e1f586971726): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:04.712] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:04.717] [INFO] console - Executing (b347fd6e-ddc1-4c1e-891d-e1f586971726): COMMIT;
[2016-10-21 10:27:04.719] [INFO] console - [ 70,
  899,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027562028',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:04.741] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:04.749] [INFO] console - Executing (e9313267-0f2e-44cc-becc-54422002fd38): START TRANSACTION;
[2016-10-21 10:27:04.751] [INFO] console - Executing (e9313267-0f2e-44cc-becc-54422002fd38): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:04.758] [INFO] console - Executing (e9313267-0f2e-44cc-becc-54422002fd38): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:27:04.753 +00:00','2016-10-21 05:27:04.753 +00:00',2,2) RETURNING *;
[2016-10-21 10:27:04.773] [INFO] console - Executing (e9313267-0f2e-44cc-becc-54422002fd38): COMMIT;
[2016-10-21 10:27:04.776] [INFO] console - [ 70, 900, {}, [ '28' ] ]
[2016-10-21 10:27:04.788] [INFO] console - Executing (a01a94d6-0e33-4510-a5c6-02ceb8a1c0b7): START TRANSACTION;
[2016-10-21 10:27:04.790] [INFO] console - Executing (a01a94d6-0e33-4510-a5c6-02ceb8a1c0b7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:04.797] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 28);
[2016-10-21 10:27:04.804] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:27:04.800 +00:00',"updated_at"='2016-10-21 05:27:04.800 +00:00' WHERE "id" = '28'
[2016-10-21 10:27:04.809] [INFO] console - Executing (a01a94d6-0e33-4510-a5c6-02ceb8a1c0b7): COMMIT;
[2016-10-21 10:27:04.811] [INFO] console - [ 70, 901, {}, [ undefined ] ]
[2016-10-21 10:27:04.813] [INFO] console - [ 16, 8340725232041984, {}, 'ru.kopa.model.Kopa.id28.change' ]
[2016-10-21 10:27:04.816] [INFO] console - [ 16,
  4695635691307008,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 28 ] ]
[2016-10-21 10:27:04.822] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 28 }
[2016-10-21 10:27:04.828] [INFO] console - Executing (33a517b3-0f12-4a44-a816-f57f0363e5c8): START TRANSACTION;
[2016-10-21 10:27:04.830] [INFO] console - Executing (33a517b3-0f12-4a44-a816-f57f0363e5c8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:04.837] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:27:04.845] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 28);
[2016-10-21 10:27:04.852] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:27:04.863] [INFO] console - [ 70, 903, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:27:04.866] [INFO] console - Executing (33a517b3-0f12-4a44-a816-f57f0363e5c8): COMMIT;
[2016-10-21 10:27:04.868] [INFO] console - [ 70,
  902,
  {},
  [ { id: '28',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:27:04 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:27:04 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:04 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:04.897] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:27:04.902] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:27:04.911] [INFO] console - [ 70, 904, {}, [ [ [Object] ] ] ]
[2016-10-21 10:27:04.928] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:27:04.939] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:27:04.943] [INFO] console - [ 70, 905, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:27:04.974] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:27:04.980] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:27:04.984] [INFO] console - [ 70, 906, {}, [ [ [Object] ] ] ]
[2016-10-21 10:27:04.997] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:05.000] [INFO] console - Executing (173bb77b-1b7b-40f8-9f39-5672dff446a8): START TRANSACTION;
[2016-10-21 10:27:05.002] [INFO] console - Executing (173bb77b-1b7b-40f8-9f39-5672dff446a8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.009] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:05.021] [INFO] console - Executing (173bb77b-1b7b-40f8-9f39-5672dff446a8): COMMIT;
[2016-10-21 10:27:05.023] [INFO] console - [ 70,
  907,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:05.053] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:05.061] [INFO] console - Executing (d3fb9f50-8d7c-4eab-9789-2f42f78bffed): START TRANSACTION;
[2016-10-21 10:27:05.063] [INFO] console - Executing (d3fb9f50-8d7c-4eab-9789-2f42f78bffed): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.069] [INFO] console - Executing (d3fb9f50-8d7c-4eab-9789-2f42f78bffed): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027625042 temp','2016-10-21 05:27:05.065 +00:00','2016-10-21 05:27:05.065 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:05.073] [INFO] console - Executing (d3fb9f50-8d7c-4eab-9789-2f42f78bffed): COMMIT;
[2016-10-21 10:27:05.075] [INFO] console - [ 70, 908, {}, [ '41' ] ]
[2016-10-21 10:27:05.079] [INFO] console - [ 16,
  978588142665728,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '41' ] ]
[2016-10-21 10:27:05.100] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:05.106] [INFO] console - Executing (e9b8da06-7766-41c5-a0ba-8054c0ebd2e9): START TRANSACTION;
[2016-10-21 10:27:05.108] [INFO] console - Executing (e9b8da06-7766-41c5-a0ba-8054c0ebd2e9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.118] [INFO] console - Executing (e9b8da06-7766-41c5-a0ba-8054c0ebd2e9): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027625092temp',0,0,'2016-10-21 05:27:05.112 +00:00','2016-10-21 05:27:05.112 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:05.124] [INFO] console - Executing (e9b8da06-7766-41c5-a0ba-8054c0ebd2e9): COMMIT;
[2016-10-21 10:27:05.126] [INFO] console - [ 70, 909, {}, [ '48' ] ]
[2016-10-21 10:27:05.131] [INFO] console - [ 16,
  8402549333819392,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '48' ] ]
[2016-10-21 10:27:05.191] [INFO] console - [ 70, 911, {}, [ undefined ] ]
[2016-10-21 10:27:05.199] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:27:05.206] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:05.209] [INFO] console - Executing (cd6afdaf-8f1f-4f0e-b070-cbe8e2c124ef): START TRANSACTION;
[2016-10-21 10:27:05.215] [INFO] console - Executing (cd6afdaf-8f1f-4f0e-b070-cbe8e2c124ef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.218] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:27:05.226] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:05.232] [INFO] console - Executing (cd6afdaf-8f1f-4f0e-b070-cbe8e2c124ef): COMMIT;
[2016-10-21 10:27:05.233] [INFO] console - [ 70,
  912,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:05.261] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:27:05.269] [INFO] console - [ 70, 913, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:27:05.291] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:05.296] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): START TRANSACTION;
[2016-10-21 10:27:05.299] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.311] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:05.301 +00:00','2016-10-21 05:27:05.301 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:05.316] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.323] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:05.328] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:05.339] [INFO] console - Executing (bc17fe7a-c5d4-434f-bf0b-55ac0a86ab54): COMMIT;
[2016-10-21 10:27:05.341] [INFO] console - [ 70, 914, {}, [ '89' ] ]
[2016-10-21 10:27:05.347] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:05.356] [INFO] console - Executing (14999ef3-79b9-4ece-ae9a-9126d068341d): START TRANSACTION;
[2016-10-21 10:27:05.364] [INFO] console - Executing (14999ef3-79b9-4ece-ae9a-9126d068341d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.367] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:05.374] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 89);
[2016-10-21 10:27:05.384] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:05.392] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:05.397] [INFO] console - [ 16,
  7015325755244544,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:27:05.409] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.412] [INFO] console - [ 16,
  5554839201251328,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 89 } ]
[2016-10-21 10:27:05.419] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.423] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.431] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:27:05.425 +00:00' WHERE "id" = '89'
[2016-10-21 10:27:05.438] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '89'
                                    or path like '/89/'||'%'
[2016-10-21 10:27:05.442] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:05.446] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.451] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.456] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/89/'||'%'
[2016-10-21 10:27:05.461] [INFO] console - Executing (14999ef3-79b9-4ece-ae9a-9126d068341d): COMMIT;
[2016-10-21 10:27:05.463] [INFO] console - [ 70, 915, {}, [ undefined ] ]
[2016-10-21 10:27:05.466] [INFO] console - [ 16,
  6096655963127808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/89/',
       id: '89',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:27:05.479] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:05.481] [INFO] console - [ 16,
  5821091928866816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:27:05.489] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): START TRANSACTION;
[2016-10-21 10:27:05.493] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.501] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:05.495 +00:00','2016-10-21 05:27:05.495 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:05.509] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.517] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:05.521] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:05.525] [INFO] console - Executing (fc01e8f7-d188-417a-9b22-10436a7bb9f4): COMMIT;
[2016-10-21 10:27:05.527] [INFO] console - [ 70, 916, {}, [ '90' ] ]
[2016-10-21 10:27:05.533] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:05.539] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:05.543] [INFO] console - Executing (d4df34bf-b3dc-477b-977b-f3b169b86560): START TRANSACTION;
[2016-10-21 10:27:05.546] [INFO] console - Executing (d4df34bf-b3dc-477b-977b-f3b169b86560): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.549] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:05.555] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 90);
[2016-10-21 10:27:05.556] [INFO] console - [ 16,
  8735751256670208,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 10:27:05.562] [INFO] console - [ 16,
  3047726524661760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 90 } ]
[2016-10-21 10:27:05.572] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 89);
[2016-10-21 10:27:05.575] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.581] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.583] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.595] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='89',"updated_at"='2016-10-21 05:27:05.585 +00:00' WHERE "id" = '90'
[2016-10-21 10:27:05.598] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/89/')
                                where
                                    id = '90'
                                    or path like '/90/'||'%'
[2016-10-21 10:27:05.602] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/89/' like path||id||'/%'
[2016-10-21 10:27:05.608] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/89/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.613] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('89', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.617] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/89/90/'||'%'
[2016-10-21 10:27:05.619] [INFO] console - Executing (d4df34bf-b3dc-477b-977b-f3b169b86560): COMMIT;
[2016-10-21 10:27:05.622] [INFO] console - [ 70, 917, {}, [ undefined ] ]
[2016-10-21 10:27:05.628] [INFO] console - [ 16,
  6615450553155584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id89.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/89/90/',
       id: '90',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/89/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '89' } } ]
[2016-10-21 10:27:05.637] [INFO] console - [ 16,
  1878577914052608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id89.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:27:05.645] [INFO] console - [ 16,
  6584676302979072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:27:05.656] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:27:05.662] [INFO] console - Executing (91bbeb1d-8c21-48a9-9bdc-64d050c6fe11): START TRANSACTION;
[2016-10-21 10:27:05.664] [INFO] console - Executing (91bbeb1d-8c21-48a9-9bdc-64d050c6fe11): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.675] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:27:05.682] [INFO] console - Executing (91bbeb1d-8c21-48a9-9bdc-64d050c6fe11): COMMIT;
[2016-10-21 10:27:05.684] [INFO] console - [ 70,
  918,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:05.703] [INFO] console - Executing (0f905397-50c2-4e4f-b441-25e1458871d8): START TRANSACTION;
[2016-10-21 10:27:05.705] [INFO] console - Executing (0f905397-50c2-4e4f-b441-25e1458871d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.710] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 89);
[2016-10-21 10:27:05.715] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:27:05.721] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.727] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.731] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:05.751] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:27:05.745 +00:00' WHERE "id" = '89'
[2016-10-21 10:27:05.756] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '89'
                                    or path like '/2/89/'||'%'
[2016-10-21 10:27:05.760] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:27:05.767] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.775] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.780] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/89/'||'%'
[2016-10-21 10:27:05.782] [INFO] console - Executing (0f905397-50c2-4e4f-b441-25e1458871d8): COMMIT;
[2016-10-21 10:27:05.784] [INFO] console - [ 70, 919, {}, [ undefined ] ]
[2016-10-21 10:27:05.787] [INFO] console - [ 16,
  1747289578143744,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 89 } ]
[2016-10-21 10:27:05.793] [INFO] console - [ 16,
  4627775463882752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/89/',
       id: '89',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:27:05.800] [INFO] console - [ 16,
  4817599093276672,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:27:05.805] [INFO] console - [ 16,
  7499457725726720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:27:05.810] [INFO] console - [ 16,
  5840312844943360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id90.starshinaChange',
  [],
  {} ]
[2016-10-21 10:27:05.817] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 90 }
[2016-10-21 10:27:05.820] [INFO] console - Executing (4a1c928f-1204-4d74-b6a6-af7b279e52d6): START TRANSACTION;
[2016-10-21 10:27:05.822] [INFO] console - Executing (4a1c928f-1204-4d74-b6a6-af7b279e52d6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.828] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 90);
[2016-10-21 10:27:05.835] [INFO] console - Executing (4a1c928f-1204-4d74-b6a6-af7b279e52d6): COMMIT;
[2016-10-21 10:27:05.836] [INFO] console - [ 70,
  920,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/89/90/',
      id: '90',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/89/',
      note: null,
      created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '89',
      attachments: [] } ] ]
[2016-10-21 10:27:05.849] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 89 }
[2016-10-21 10:27:05.852] [INFO] console - Executing (b758f9bc-fb14-4d78-b2ec-62b13d9aa746): START TRANSACTION;
[2016-10-21 10:27:05.854] [INFO] console - Executing (b758f9bc-fb14-4d78-b2ec-62b13d9aa746): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.862] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 89);
[2016-10-21 10:27:05.869] [INFO] console - Executing (b758f9bc-fb14-4d78-b2ec-62b13d9aa746): COMMIT;
[2016-10-21 10:27:05.872] [INFO] console - [ 70,
  921,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/89/',
      id: '89',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:27:05.886] [INFO] console - Executing (5c1c1a41-4341-477f-b839-bd43c80a3cd5): START TRANSACTION;
[2016-10-21 10:27:05.889] [INFO] console - Executing (5c1c1a41-4341-477f-b839-bd43c80a3cd5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.893] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 89);
[2016-10-21 10:27:05.897] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.905] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.908] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:27:05.917] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:27:05.912 +00:00' WHERE "id" = '89'
[2016-10-21 10:27:05.920] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '89'
                                    or path like '/4/89/'||'%'
[2016-10-21 10:27:05.924] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.927] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:05.932] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:05.936] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/89/'||'%'
[2016-10-21 10:27:05.938] [INFO] console - Executing (5c1c1a41-4341-477f-b839-bd43c80a3cd5): COMMIT;
[2016-10-21 10:27:05.940] [INFO] console - [ 70, 922, {}, [ undefined ] ]
[2016-10-21 10:27:05.944] [INFO] console - [ 16,
  394906071728128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 89 } ]
[2016-10-21 10:27:05.949] [INFO] console - [ 16,
  6742796834701312,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:27:05.954] [INFO] console - [ 16,
  97016776491008,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id90.starshinaChange',
  [],
  {} ]
[2016-10-21 10:27:05.965] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:05.969] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): START TRANSACTION;
[2016-10-21 10:27:05.971] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:05.980] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:05.973 +00:00','2016-10-21 05:27:05.973 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:05.984] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:05.988] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:05.994] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:05.997] [INFO] console - Executing (10bdc9e4-1afa-4fbe-88c6-62a024e8d3f7): COMMIT;
[2016-10-21 10:27:06.001] [INFO] console - [ 70, 923, {}, [ '91' ] ]
[2016-10-21 10:27:06.012] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:06.016] [INFO] console - Executing (034fb899-e09e-4af5-bb91-19d38d1b2277): START TRANSACTION;
[2016-10-21 10:27:06.018] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:06.020] [INFO] console - Executing (034fb899-e09e-4af5-bb91-19d38d1b2277): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.028] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:06.031] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 91);
[2016-10-21 10:27:06.036] [INFO] console - [ 16,
  8427267910795264,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 10:27:06.041] [INFO] console - [ 16,
  4566172087353344,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 91 } ]
[2016-10-21 10:27:06.046] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:06.051] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.058] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.060] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:06.071] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:27:06.062 +00:00' WHERE "id" = '91'
[2016-10-21 10:27:06.088] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '91'
                                    or path like '/91/'||'%'
[2016-10-21 10:27:06.097] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:06.100] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.106] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.113] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/91/'||'%'
[2016-10-21 10:27:06.118] [INFO] console - Executing (034fb899-e09e-4af5-bb91-19d38d1b2277): COMMIT;
[2016-10-21 10:27:06.120] [INFO] console - [ 70, 924, {}, [ undefined ] ]
[2016-10-21 10:27:06.122] [INFO] console - [ 16,
  6969982296522752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/91/',
       id: '91',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:05 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:06 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:27:06.133] [INFO] console - Executing (6886a1ec-62d2-4d84-a8dd-00398324672c): START TRANSACTION;
[2016-10-21 10:27:06.134] [INFO] console - [ 16,
  1270981360353280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:27:06.137] [INFO] console - Executing (6886a1ec-62d2-4d84-a8dd-00398324672c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.142] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 91);
[2016-10-21 10:27:06.146] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.152] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.156] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:06.165] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:27:06.159 +00:00' WHERE "id" = '91'
[2016-10-21 10:27:06.170] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '91'
                                    or path like '/2/91/'||'%'
[2016-10-21 10:27:06.175] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:06.181] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.185] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.191] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/91/'||'%'
[2016-10-21 10:27:06.194] [INFO] console - Executing (6886a1ec-62d2-4d84-a8dd-00398324672c): COMMIT;
[2016-10-21 10:27:06.196] [INFO] console - [ 70, 925, {}, [ undefined ] ]
[2016-10-21 10:27:06.201] [INFO] console - [ 16,
  3007270866649088,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 91 } ]
[2016-10-21 10:27:06.213] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:06.217] [INFO] console - [ 16,
  5206537855303680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:27:06.223] [INFO] console - Executing (b4147bbd-0ce0-4898-9cc3-e5d4d5555d53): START TRANSACTION;
[2016-10-21 10:27:06.225] [INFO] console - Executing (b4147bbd-0ce0-4898-9cc3-e5d4d5555d53): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.238] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:06.244] [INFO] console - Executing (b4147bbd-0ce0-4898-9cc3-e5d4d5555d53): COMMIT;
[2016-10-21 10:27:06.246] [INFO] console - [ 70,
  926,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:06.266] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:06.271] [INFO] console - Executing (416ff369-7213-409c-93be-f3c5e38884a1): START TRANSACTION;
[2016-10-21 10:27:06.274] [INFO] console - Executing (416ff369-7213-409c-93be-f3c5e38884a1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.282] [INFO] console - Executing (416ff369-7213-409c-93be-f3c5e38884a1): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:27:06 GMT+0500 (YEKT)',0,0,'2016-10-21 05:27:06.276 +00:00','2016-10-21 05:27:06.276 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:06.288] [INFO] console - Executing (416ff369-7213-409c-93be-f3c5e38884a1): COMMIT;
[2016-10-21 10:27:06.290] [INFO] console - [ 70, 927, {}, [ '49' ] ]
[2016-10-21 10:27:06.300] [INFO] console - [ 16,
  778598822707200,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '49' ] ]
[2016-10-21 10:27:06.310] [INFO] console - Executing (39f47ef7-262c-48de-aeb0-ea58bee8a6ca): START TRANSACTION;
[2016-10-21 10:27:06.312] [INFO] console - Executing (39f47ef7-262c-48de-aeb0-ea58bee8a6ca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.318] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:06.326] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 49);
[2016-10-21 10:27:06.333] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:27:06.339] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:06.352] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:06.357] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.365] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.374] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '49' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:27:06.390] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:27:06.376 +00:00','2016-10-21 05:27:06.376 +00:00','49','2') RETURNING *;
[2016-10-21 10:27:06.404] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 49, 1, k.id, 95, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:27:06.411] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 49 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 49 and value=-1) "protiv"
[2016-10-21 10:27:06.418] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:27:06.412 +00:00' WHERE "id" = '49'
[2016-10-21 10:27:06.422] [INFO] console - Executing (39f47ef7-262c-48de-aeb0-ea58bee8a6ca): COMMIT;
[2016-10-21 10:27:06.425] [INFO] console - [ 70, 928, {}, [ undefined ] ]
[2016-10-21 10:27:06.432] [INFO] console - [ 16,
  7919215260467200,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id49.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '95',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:27:06.443] [INFO] console - Executing (63d7fe38-f652-4efb-8835-2504e979f603): START TRANSACTION;
[2016-10-21 10:27:06.444] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 95 }
[2016-10-21 10:27:06.448] [INFO] console - Executing (e2fec3a0-5a0d-4ad3-b35b-68d3ef9c5ddd): START TRANSACTION;
[2016-10-21 10:27:06.449] [INFO] console - Executing (63d7fe38-f652-4efb-8835-2504e979f603): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.451] [INFO] console - Executing (e2fec3a0-5a0d-4ad3-b35b-68d3ef9c5ddd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.457] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:06.465] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 95);
[2016-10-21 10:27:06.473] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 49);
[2016-10-21 10:27:06.476] [INFO] console - Executing (e2fec3a0-5a0d-4ad3-b35b-68d3ef9c5ddd): COMMIT;
[2016-10-21 10:27:06.481] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:27:06.482] [INFO] console - [ 70,
  930,
  {},
  [ { id: '95',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:27:06 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:06 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '49',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:06.503] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:06.516] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:06.520] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:06.530] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:06.536] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '49' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:27:06.539] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 49
                                and (
                                    id= 95
                                    or parent_id = 95
                                )
[2016-10-21 10:27:06.545] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 49 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 49 and value=-1) "protiv"
[2016-10-21 10:27:06.565] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:27:06.547 +00:00' WHERE "id" = '49'
[2016-10-21 10:27:06.568] [INFO] console - Executing (63d7fe38-f652-4efb-8835-2504e979f603): COMMIT;
[2016-10-21 10:27:06.570] [INFO] console - [ 70, 929, {}, [ undefined ] ]
[2016-10-21 10:27:06.578] [INFO] console - [ 16,
  1455110903300096,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id49.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '95',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:27:06.612] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:06.614] [INFO] console - Executing (2224c1e0-5d76-4108-b2cb-290c619fdf47): START TRANSACTION;
[2016-10-21 10:27:06.615] [INFO] console - Executing (2224c1e0-5d76-4108-b2cb-290c619fdf47): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.624] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:06.629] [INFO] console - Executing (2224c1e0-5d76-4108-b2cb-290c619fdf47): COMMIT;
[2016-10-21 10:27:06.635] [INFO] console - [ 70,
  932,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:06.853] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:06.858] [INFO] console - Executing (b050435e-13a7-4a89-b32e-d3871faed2a1): START TRANSACTION;
[2016-10-21 10:27:06.860] [INFO] console - Executing (b050435e-13a7-4a89-b32e-d3871faed2a1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.868] [INFO] console - Executing (b050435e-13a7-4a89-b32e-d3871faed2a1): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027623520',0,0,'2016-10-21 05:27:06.862 +00:00','2016-10-21 05:27:06.862 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:06.872] [INFO] console - Executing (b050435e-13a7-4a89-b32e-d3871faed2a1): COMMIT;
[2016-10-21 10:27:06.875] [INFO] console - [ 70, 933, {}, [ '50' ] ]
[2016-10-21 10:27:06.889] [INFO] console - [ 16,
  3847155196362752,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '50' ] ]
[2016-10-21 10:27:06.948] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:06.950] [INFO] console - Executing (b05b84f8-46a9-4689-9218-bc76aa851507): START TRANSACTION;
[2016-10-21 10:27:06.952] [INFO] console - Executing (b05b84f8-46a9-4689-9218-bc76aa851507): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:06.956] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:07.065] [INFO] console - Executing (b05b84f8-46a9-4689-9218-bc76aa851507): COMMIT;
[2016-10-21 10:27:07.066] [INFO] console - [ 70,
  935,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:07.086] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:27:07.088] [INFO] console - Executing (bca85321-f7c6-4e05-9b18-721d040ae435): START TRANSACTION;
[2016-10-21 10:27:07.089] [INFO] console - Executing (bca85321-f7c6-4e05-9b18-721d040ae435): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.098] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:27:07.108] [INFO] console - Executing (bca85321-f7c6-4e05-9b18-721d040ae435): COMMIT;
[2016-10-21 10:27:07.109] [INFO] console - [ 70,
  936,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:07.129] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.139] [INFO] console - Executing (f2ff76a1-48d0-4a8a-b9d4-76ce7f13ea18): START TRANSACTION;
[2016-10-21 10:27:07.141] [INFO] console - Executing (f2ff76a1-48d0-4a8a-b9d4-76ce7f13ea18): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.149] [INFO] console - Executing (f2ff76a1-48d0-4a8a-b9d4-76ce7f13ea18): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:27:07.143 +00:00','2016-10-21 05:27:07.143 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:07.154] [INFO] console - Executing (f2ff76a1-48d0-4a8a-b9d4-76ce7f13ea18): COMMIT;
[2016-10-21 10:27:07.156] [INFO] console - [ 70, 937, {}, [ '42' ] ]
[2016-10-21 10:27:07.168] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 42 }
[2016-10-21 10:27:07.170] [INFO] console - [ 16,
  1825269637709824,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '42' ] ]
[2016-10-21 10:27:07.179] [INFO] console - Executing (c7c8468a-b696-44d7-acc5-2ad1812da01d): START TRANSACTION;
[2016-10-21 10:27:07.182] [INFO] console - Executing (c7c8468a-b696-44d7-acc5-2ad1812da01d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.190] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 42);
[2016-10-21 10:27:07.198] [INFO] console - Executing (c7c8468a-b696-44d7-acc5-2ad1812da01d): COMMIT;
[2016-10-21 10:27:07.200] [INFO] console - [ 70,
  938,
  {},
  [ { id: '42',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:27:07.215] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.220] [INFO] console - Executing (b652ece3-cc9e-4c8e-8560-4df8257fdd61): START TRANSACTION;
[2016-10-21 10:27:07.222] [INFO] console - Executing (b652ece3-cc9e-4c8e-8560-4df8257fdd61): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.229] [INFO] console - Executing (b652ece3-cc9e-4c8e-8560-4df8257fdd61): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027627209','2016-10-21 05:27:07.224 +00:00','2016-10-21 05:27:07.224 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:07.232] [INFO] console - Executing (b652ece3-cc9e-4c8e-8560-4df8257fdd61): COMMIT;
[2016-10-21 10:27:07.236] [INFO] console - [ 70, 939, {}, [ '43' ] ]
[2016-10-21 10:27:07.246] [INFO] console - [ 16,
  7458684068167680,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '43' ] ]
[2016-10-21 10:27:07.253] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:07.256] [INFO] console - Executing (9919fc3e-7037-4f0c-97d2-d79b35378946): START TRANSACTION;
[2016-10-21 10:27:07.259] [INFO] console - Executing (9919fc3e-7037-4f0c-97d2-d79b35378946): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.265] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.270] [INFO] console - Executing (9919fc3e-7037-4f0c-97d2-d79b35378946): COMMIT;
[2016-10-21 10:27:07.274] [INFO] console - [ 70,
  940,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027562028',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:26:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:07.298] [INFO] console - Executing (a34f8ec7-f9d3-4619-87b0-eebd3f3b1142): START TRANSACTION;
[2016-10-21 10:27:07.300] [INFO] console - Executing (a34f8ec7-f9d3-4619-87b0-eebd3f3b1142): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.307] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.320] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027623566',"updated_at"='2016-10-21 05:27:07.312 +00:00' WHERE "id" = '2'
[2016-10-21 10:27:07.325] [INFO] console - Executing (a34f8ec7-f9d3-4619-87b0-eebd3f3b1142): COMMIT;
[2016-10-21 10:27:07.326] [INFO] console - [ 16,
  7402905707479040,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:27:07.331] [INFO] console - [ 70, 941, {}, [ undefined ] ]
[2016-10-21 10:27:07.336] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:07.342] [INFO] console - Executing (ae604346-b497-45dd-8a4b-44c8df027fa6): START TRANSACTION;
[2016-10-21 10:27:07.343] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:07.346] [INFO] console - Executing (a03ffe3a-04aa-435b-b068-6acde73e5001): START TRANSACTION;
[2016-10-21 10:27:07.347] [INFO] console - Executing (ae604346-b497-45dd-8a4b-44c8df027fa6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.349] [INFO] console - Executing (a03ffe3a-04aa-435b-b068-6acde73e5001): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.357] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.364] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.367] [INFO] console - Executing (ae604346-b497-45dd-8a4b-44c8df027fa6): COMMIT;
[2016-10-21 10:27:07.371] [INFO] console - Executing (a03ffe3a-04aa-435b-b068-6acde73e5001): COMMIT;
[2016-10-21 10:27:07.373] [INFO] console - [ 70,
  942,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027623566',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:07.380] [INFO] console - [ 70,
  943,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027623566',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:07.464] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:07.469] [INFO] console - Executing (3d70e98a-410a-4382-827d-5bbc7b4da530): START TRANSACTION;
[2016-10-21 10:27:07.471] [INFO] console - Executing (3d70e98a-410a-4382-827d-5bbc7b4da530): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.476] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:07.485] [INFO] console - Executing (3d70e98a-410a-4382-827d-5bbc7b4da530): COMMIT;
[2016-10-21 10:27:07.486] [INFO] console - [ 70,
  945,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:07.508] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.512] [INFO] console - Executing (b7d35425-c8c3-4a7e-8402-ad36833f392b): START TRANSACTION;
[2016-10-21 10:27:07.513] [INFO] console - Executing (b7d35425-c8c3-4a7e-8402-ad36833f392b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.519] [INFO] console - Executing (b7d35425-c8c3-4a7e-8402-ad36833f392b): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:27:07.515 +00:00','2016-10-21 05:27:07.515 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:07.522] [INFO] console - Executing (b7d35425-c8c3-4a7e-8402-ad36833f392b): COMMIT;
[2016-10-21 10:27:07.524] [INFO] console - [ 70, 946, {}, [ '44' ] ]
[2016-10-21 10:27:07.526] [INFO] console - [ 16,
  4634309591826432,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '44' ] ]
[2016-10-21 10:27:07.539] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:27:07.541] [INFO] console - Executing (9ba513f2-ab38-4ef2-b7d1-0ba64b1ae595): START TRANSACTION;
[2016-10-21 10:27:07.543] [INFO] console - Executing (9ba513f2-ab38-4ef2-b7d1-0ba64b1ae595): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.551] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:27:07.556] [INFO] console - Executing (9ba513f2-ab38-4ef2-b7d1-0ba64b1ae595): COMMIT;
[2016-10-21 10:27:07.558] [INFO] console - [ 70,
  947,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:27:07.730] [INFO] console - [ 70, 949, {}, [ undefined ] ]
[2016-10-21 10:27:07.732] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:27:07.737] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:27:07.745] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:07.747] [INFO] console - Executing (3e1a3cf2-0090-493b-a399-b3e10eeabb77): START TRANSACTION;
[2016-10-21 10:27:07.749] [INFO] console - Executing (3e1a3cf2-0090-493b-a399-b3e10eeabb77): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.756] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.761] [INFO] console - Executing (3e1a3cf2-0090-493b-a399-b3e10eeabb77): COMMIT;
[2016-10-21 10:27:07.763] [INFO] console - [ 70,
  950,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027623566',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:07.781] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.785] [INFO] console - Executing (204d8c9b-89f4-4b3e-a720-08a02fb8101a): START TRANSACTION;
[2016-10-21 10:27:07.786] [INFO] console - Executing (204d8c9b-89f4-4b3e-a720-08a02fb8101a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.793] [INFO] console - Executing (204d8c9b-89f4-4b3e-a720-08a02fb8101a): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:27:07.789 +00:00','2016-10-21 05:27:07.789 +00:00',2,2) RETURNING *;
[2016-10-21 10:27:07.796] [INFO] console - Executing (204d8c9b-89f4-4b3e-a720-08a02fb8101a): COMMIT;
[2016-10-21 10:27:07.799] [INFO] console - [ 70, 951, {}, [ '29' ] ]
[2016-10-21 10:27:07.820] [INFO] console - Executing (a7b8e23f-df9e-42a9-bff5-bd362a7fb870): START TRANSACTION;
[2016-10-21 10:27:07.821] [INFO] console - Executing (a7b8e23f-df9e-42a9-bff5-bd362a7fb870): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.826] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 29);
[2016-10-21 10:27:07.833] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:27:07.828 +00:00',"updated_at"='2016-10-21 05:27:07.829 +00:00' WHERE "id" = '29'
[2016-10-21 10:27:07.841] [INFO] console - Executing (a7b8e23f-df9e-42a9-bff5-bd362a7fb870): COMMIT;
[2016-10-21 10:27:07.843] [INFO] console - [ 70, 952, {}, [ undefined ] ]
[2016-10-21 10:27:07.852] [INFO] console - [ 16, 1952279341039616, {}, 'ru.kopa.model.Kopa.id29.change' ]
[2016-10-21 10:27:07.854] [INFO] console - [ 16,
  6073852012527616,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 29 ] ]
[2016-10-21 10:27:07.869] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 29 }
[2016-10-21 10:27:07.872] [INFO] console - Executing (5fea80a9-862d-41d8-abd4-a8ed8e1b54e8): START TRANSACTION;
[2016-10-21 10:27:07.879] [INFO] console - Executing (5fea80a9-862d-41d8-abd4-a8ed8e1b54e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.883] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.889] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): START TRANSACTION;
[2016-10-21 10:27:07.898] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 29);
[2016-10-21 10:27:07.903] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.905] [INFO] console - Executing (5fea80a9-862d-41d8-abd4-a8ed8e1b54e8): COMMIT;
[2016-10-21 10:27:07.912] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:07.913] [INFO] console - [ 70,
  953,
  {},
  [ { id: '29',
      question: 'temp',
      invited: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:07.923] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:27:07.932] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:27:07.907 +00:00','2016-10-21 05:27:07.907 +00:00',2) RETURNING *;
[2016-10-21 10:27:07.936] [INFO] console - Executing (f4175d85-7cfc-4255-a7bd-dc1e79926f43): COMMIT;
[2016-10-21 10:27:07.938] [INFO] console - [ 70, 954, {}, [ '29' ] ]
[2016-10-21 10:27:07.942] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:27:07.948] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:07.951] [INFO] console - [ 16,
  4291015464714240,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:07.958] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:07.960] [INFO] console - [ 16,
  6831419252801536,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 91 } ]
[2016-10-21 10:27:07.966] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): START TRANSACTION;
[2016-10-21 10:27:07.968] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:07.974] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 29);
[2016-10-21 10:27:07.979] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/29/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:27:07.984] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/29/','2016-10-21 05:27:07.970 +00:00','2016-10-21 05:27:07.970 +00:00',29) RETURNING *;
[2016-10-21 10:27:07.990] [INFO] console - Executing (26a72255-1bb2-4966-a2b5-88f7c75ee5f1): COMMIT;
[2016-10-21 10:27:07.992] [INFO] console - [ 70, 955, {}, [ '30' ] ]
[2016-10-21 10:27:07.996] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/29/' like z.path||z.id||'/%'
[2016-10-21 10:27:08.002] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '29')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:08.005] [INFO] console - [ 16,
  7832312605573120,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id29.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:27:08.010] [INFO] console - [ 16,
  3289539906895872,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:08.015] [INFO] console - [ 16,
  5335871920275456,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 91 } ]
[2016-10-21 10:27:08.030] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:08.043] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): START TRANSACTION;
[2016-10-21 10:27:08.044] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:08.059] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:08.047 +00:00','2016-10-21 05:27:08.047 +00:00',30,NULL) RETURNING *;
[2016-10-21 10:27:08.063] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:08.067] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '30');
[2016-10-21 10:27:08.070] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/29/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 30
                                    )
[2016-10-21 10:27:08.074] [INFO] console - Executing (6a5e750d-3ec8-4841-9623-b784bfb8ed8d): COMMIT;
[2016-10-21 10:27:08.077] [INFO] console - [ 70, 956, {}, [ '92' ] ]
[2016-10-21 10:27:08.082] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '30');
[2016-10-21 10:27:08.089] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/29/' like z.path||z.id||'/%'
[2016-10-21 10:27:08.095] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '29')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:08.098] [INFO] console - [ 16,
  507744173948928,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id30.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:27:08.104] [INFO] console - [ 16,
  7297523494420480,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id29.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:27:08.110] [INFO] console - [ 16,
  8367900050063360,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:27:08.115] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:27:08.121] [INFO] console - Executing (7afc3ccd-0444-4a67-a97c-8bae826b3f4c): START TRANSACTION;
[2016-10-21 10:27:08.122] [INFO] console - [ 16,
  8722626327347200,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 92 } ]
[2016-10-21 10:27:08.127] [INFO] console - Executing (7afc3ccd-0444-4a67-a97c-8bae826b3f4c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:08.135] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:27:08.141] [INFO] console - Executing (7afc3ccd-0444-4a67-a97c-8bae826b3f4c): COMMIT;
[2016-10-21 10:27:08.142] [INFO] console - [ 70,
  957,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:08.177] [INFO] console - Executing (c038b205-2f9e-48bd-b071-6abf5edbe96a): START TRANSACTION;
[2016-10-21 10:27:08.178] [INFO] console - Executing (c038b205-2f9e-48bd-b071-6abf5edbe96a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:08.234] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 29);
[2016-10-21 10:27:08.239] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:27:08.243] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:27:08.247] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:08.250] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 29
                                    )
[2016-10-21 10:27:08.258] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:27:08.253 +00:00' WHERE "id" = '29'
[2016-10-21 10:27:08.261] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '29'
                                    or path like '/1/2/29/'||'%'
[2016-10-21 10:27:08.265] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 29
                                    )
[2016-10-21 10:27:08.272] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:27:08.277] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:08.280] [INFO] console - Executing (c038b205-2f9e-48bd-b071-6abf5edbe96a): COMMIT;
[2016-10-21 10:27:08.281] [INFO] console - [ 70, 958, {}, [ undefined ] ]
[2016-10-21 10:27:08.284] [INFO] console - [ 16,
  7105458640781312,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:08.289] [INFO] console - [ 16,
  5950615754637312,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 91 } ]
[2016-10-21 10:27:08.293] [INFO] console - [ 16,
  2049558280404992,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:27:08.299] [INFO] console - [ 16,
  6176254361337856,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 92 } ]
[2016-10-21 10:27:45.320] [INFO] console - [ 70, 960, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:27:45.334] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:27:45.336] [INFO] console - [ 70, 961, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:27:45.398] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:27:45.401] [INFO] console - [ 70, 962, {}, [ 'КОПА' ] ]
[2016-10-21 10:27:45.409] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:27:45.412] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:27:45.419] [INFO] console - [ 8,
  68,
  963,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:27:45.531] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:45.538] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:27:45.542] [INFO] console - [ 8,
  68,
  965,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:27:45.601] [INFO] console - [ 70, 967, {}, [ undefined ] ]
[2016-10-21 10:27:45.607] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:27:45.610] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:45.623] [INFO] console - Executing (c1d19ee9-8038-4a29-83cd-53dd64323122): START TRANSACTION;
[2016-10-21 10:27:45.629] [INFO] console - Executing (c1d19ee9-8038-4a29-83cd-53dd64323122): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:45.674] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:27:45.691] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:45.706] [INFO] console - Executing (c1d19ee9-8038-4a29-83cd-53dd64323122): COMMIT;
[2016-10-21 10:27:45.708] [INFO] console - [ 70,
  968,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:45.731] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:45.734] [INFO] console - Executing (4ba9f807-1dac-4a73-b92f-79568dec45ac): START TRANSACTION;
[2016-10-21 10:27:45.740] [INFO] console - Executing (4ba9f807-1dac-4a73-b92f-79568dec45ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:45.764] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:45.773] [INFO] console - Executing (4ba9f807-1dac-4a73-b92f-79568dec45ac): COMMIT;
[2016-10-21 10:27:45.774] [INFO] console - [ 70,
  969,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027623566',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:45.796] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:45.803] [INFO] console - Executing (b6219bee-43f5-4d9c-9d14-1ed8de5caa60): START TRANSACTION;
[2016-10-21 10:27:45.805] [INFO] console - Executing (b6219bee-43f5-4d9c-9d14-1ed8de5caa60): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:45.810] [INFO] console - Executing (b6219bee-43f5-4d9c-9d14-1ed8de5caa60): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:27:45.807 +00:00','2016-10-21 05:27:45.807 +00:00',2,2) RETURNING *;
[2016-10-21 10:27:45.821] [INFO] console - Executing (b6219bee-43f5-4d9c-9d14-1ed8de5caa60): COMMIT;
[2016-10-21 10:27:45.823] [INFO] console - [ 70, 970, {}, [ '30' ] ]
[2016-10-21 10:27:45.834] [INFO] console - Executing (0560f8cc-0593-4143-9462-2425eaa5264f): START TRANSACTION;
[2016-10-21 10:27:45.836] [INFO] console - Executing (0560f8cc-0593-4143-9462-2425eaa5264f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:45.840] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 30);
[2016-10-21 10:27:45.846] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:27:45.842 +00:00',"updated_at"='2016-10-21 05:27:45.842 +00:00' WHERE "id" = '30'
[2016-10-21 10:27:45.851] [INFO] console - Executing (0560f8cc-0593-4143-9462-2425eaa5264f): COMMIT;
[2016-10-21 10:27:45.852] [INFO] console - [ 70, 971, {}, [ undefined ] ]
[2016-10-21 10:27:45.855] [INFO] console - [ 16, 4171634319556608, {}, 'ru.kopa.model.Kopa.id30.change' ]
[2016-10-21 10:27:45.859] [INFO] console - [ 16,
  6868104353153024,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 30 ] ]
[2016-10-21 10:27:45.873] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 30 }
[2016-10-21 10:27:45.879] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:27:45.881] [INFO] console - Executing (ecc7de31-0f51-46a5-a149-61f9e59cff7b): START TRANSACTION;
[2016-10-21 10:27:45.882] [INFO] console - Executing (ecc7de31-0f51-46a5-a149-61f9e59cff7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:45.902] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:27:45.905] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 30);
[2016-10-21 10:27:45.913] [INFO] console - [ 70, 973, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:27:45.919] [INFO] console - Executing (ecc7de31-0f51-46a5-a149-61f9e59cff7b): COMMIT;
[2016-10-21 10:27:45.921] [INFO] console - [ 70,
  972,
  {},
  [ { id: '30',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:27:45 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:27:45 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:45 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:45.937] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:27:45.943] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:27:45.946] [INFO] console - [ 70, 974, {}, [ [ [Object] ] ] ]
[2016-10-21 10:27:45.964] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:27:45.969] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:27:45.979] [INFO] console - [ 70, 975, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:27:46.010] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:27:46.022] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:27:46.024] [INFO] console - [ 70, 976, {}, [ [ [Object] ] ] ]
[2016-10-21 10:27:46.037] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:46.040] [INFO] console - Executing (8c1aa0c7-89fe-4dbe-9375-cf5035aca7f0): START TRANSACTION;
[2016-10-21 10:27:46.047] [INFO] console - Executing (8c1aa0c7-89fe-4dbe-9375-cf5035aca7f0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.057] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:46.066] [INFO] console - Executing (8c1aa0c7-89fe-4dbe-9375-cf5035aca7f0): COMMIT;
[2016-10-21 10:27:46.068] [INFO] console - [ 70,
  977,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:46.098] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:46.106] [INFO] console - Executing (66c833a0-7efb-4cb4-9f22-4641967ae769): START TRANSACTION;
[2016-10-21 10:27:46.109] [INFO] console - Executing (66c833a0-7efb-4cb4-9f22-4641967ae769): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.120] [INFO] console - Executing (66c833a0-7efb-4cb4-9f22-4641967ae769): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027666081 temp','2016-10-21 05:27:46.110 +00:00','2016-10-21 05:27:46.110 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:46.130] [INFO] console - Executing (66c833a0-7efb-4cb4-9f22-4641967ae769): COMMIT;
[2016-10-21 10:27:46.133] [INFO] console - [ 70, 978, {}, [ '45' ] ]
[2016-10-21 10:27:46.136] [INFO] console - [ 16,
  4086383851339776,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '45' ] ]
[2016-10-21 10:27:46.161] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:46.167] [INFO] console - Executing (5215a855-3b65-4b62-8073-0687465ac5a8): START TRANSACTION;
[2016-10-21 10:27:46.168] [INFO] console - Executing (5215a855-3b65-4b62-8073-0687465ac5a8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.174] [INFO] console - Executing (5215a855-3b65-4b62-8073-0687465ac5a8): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027666148temp',0,0,'2016-10-21 05:27:46.171 +00:00','2016-10-21 05:27:46.171 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:46.184] [INFO] console - Executing (5215a855-3b65-4b62-8073-0687465ac5a8): COMMIT;
[2016-10-21 10:27:46.190] [INFO] console - [ 70, 979, {}, [ '51' ] ]
[2016-10-21 10:27:46.198] [INFO] console - [ 16,
  5432716793217024,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '51' ] ]
[2016-10-21 10:27:46.325] [INFO] console - [ 70, 981, {}, [ undefined ] ]
[2016-10-21 10:27:46.338] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:27:46.346] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:46.351] [INFO] console - Executing (646f910d-c328-4d2d-93fc-b02cf6f2de69): START TRANSACTION;
[2016-10-21 10:27:46.353] [INFO] console - Executing (646f910d-c328-4d2d-93fc-b02cf6f2de69): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.359] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:27:46.375] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:46.382] [INFO] console - Executing (646f910d-c328-4d2d-93fc-b02cf6f2de69): COMMIT;
[2016-10-21 10:27:46.387] [INFO] console - [ 70,
  982,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:46.420] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:27:46.427] [INFO] console - [ 70, 983, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:27:46.456] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:46.466] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): START TRANSACTION;
[2016-10-21 10:27:46.470] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.481] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:46.471 +00:00','2016-10-21 05:27:46.471 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:46.489] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:46.495] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:46.499] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:46.502] [INFO] console - Executing (b60aa3b4-03c0-40e0-b773-9fbf48f3af68): COMMIT;
[2016-10-21 10:27:46.504] [INFO] console - [ 70, 984, {}, [ '93' ] ]
[2016-10-21 10:27:46.512] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:46.527] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:46.529] [INFO] console - Executing (88d15284-0b70-4f1c-a4fa-e8fb70972f8a): START TRANSACTION;
[2016-10-21 10:27:46.531] [INFO] console - Executing (88d15284-0b70-4f1c-a4fa-e8fb70972f8a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.538] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:46.543] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 93);
[2016-10-21 10:27:46.550] [INFO] console - [ 16,
  8477929128329216,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:27:46.556] [INFO] console - [ 16,
  3846388242710528,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 93 } ]
[2016-10-21 10:27:46.562] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:46.568] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:46.576] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:46.583] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:46.598] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:27:46.586 +00:00' WHERE "id" = '93'
[2016-10-21 10:27:46.611] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '93'
                                    or path like '/93/'||'%'
[2016-10-21 10:27:46.618] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:46.621] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:46.629] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:46.634] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/93/'||'%'
[2016-10-21 10:27:46.637] [INFO] console - Executing (88d15284-0b70-4f1c-a4fa-e8fb70972f8a): COMMIT;
[2016-10-21 10:27:46.639] [INFO] console - [ 70, 985, {}, [ undefined ] ]
[2016-10-21 10:27:46.643] [INFO] console - [ 16,
  5210213307121664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/93/',
       id: '93',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:27:46.659] [INFO] console - [ 16,
  2115306289889280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:27:46.668] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:46.675] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): START TRANSACTION;
[2016-10-21 10:27:46.678] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.695] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:46.682 +00:00','2016-10-21 05:27:46.682 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:46.704] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:46.715] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:46.719] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:46.724] [INFO] console - Executing (0a464422-37e5-4768-8ff9-ba0f9187329f): COMMIT;
[2016-10-21 10:27:46.726] [INFO] console - [ 70, 986, {}, [ '94' ] ]
[2016-10-21 10:27:46.737] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:46.741] [INFO] console - Executing (23cb2420-0890-44f2-8ca1-8f4859787317): START TRANSACTION;
[2016-10-21 10:27:46.743] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:46.745] [INFO] console - Executing (23cb2420-0890-44f2-8ca1-8f4859787317): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.758] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:46.763] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 94);
[2016-10-21 10:27:46.767] [INFO] console - [ 16,
  2802237141155840,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 10:27:46.775] [INFO] console - [ 16,
  8514444531335168,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 94 } ]
[2016-10-21 10:27:46.783] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 93);
[2016-10-21 10:27:46.794] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:46.800] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:46.805] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:46.819] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='93',"updated_at"='2016-10-21 05:27:46.808 +00:00' WHERE "id" = '94'
[2016-10-21 10:27:46.825] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/93/')
                                where
                                    id = '94'
                                    or path like '/94/'||'%'
[2016-10-21 10:27:46.835] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/93/' like path||id||'/%'
[2016-10-21 10:27:46.839] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/93/' like k.path||k.id||'/%'
[2016-10-21 10:27:46.849] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('93', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:46.854] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/93/94/'||'%'
[2016-10-21 10:27:46.859] [INFO] console - Executing (23cb2420-0890-44f2-8ca1-8f4859787317): COMMIT;
[2016-10-21 10:27:46.861] [INFO] console - [ 70, 987, {}, [ undefined ] ]
[2016-10-21 10:27:46.864] [INFO] console - [ 16,
  850202109935616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id93.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/93/94/',
       id: '94',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/93/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '93' } } ]
[2016-10-21 10:27:46.875] [INFO] console - [ 16,
  7607666633342976,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id93.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:27:46.881] [INFO] console - [ 16,
  5360922071662592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:27:46.900] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:27:46.908] [INFO] console - Executing (faf3844c-3237-4d5e-bf1a-2d26911a823f): START TRANSACTION;
[2016-10-21 10:27:46.917] [INFO] console - Executing (faf3844c-3237-4d5e-bf1a-2d26911a823f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.929] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:27:46.936] [INFO] console - Executing (faf3844c-3237-4d5e-bf1a-2d26911a823f): COMMIT;
[2016-10-21 10:27:46.938] [INFO] console - [ 70,
  988,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:46.961] [INFO] console - Executing (f7936be7-58ad-4bec-b3c2-dab02001c768): START TRANSACTION;
[2016-10-21 10:27:46.962] [INFO] console - Executing (f7936be7-58ad-4bec-b3c2-dab02001c768): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:46.966] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 93);
[2016-10-21 10:27:46.975] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:27:46.980] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:46.989] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:46.997] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:47.009] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:27:46.999 +00:00' WHERE "id" = '93'
[2016-10-21 10:27:47.018] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '93'
                                    or path like '/2/93/'||'%'
[2016-10-21 10:27:47.022] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:27:47.025] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.032] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.037] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/93/'||'%'
[2016-10-21 10:27:47.040] [INFO] console - Executing (f7936be7-58ad-4bec-b3c2-dab02001c768): COMMIT;
[2016-10-21 10:27:47.042] [INFO] console - [ 70, 989, {}, [ undefined ] ]
[2016-10-21 10:27:47.044] [INFO] console - [ 16,
  1731867034255360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 93 } ]
[2016-10-21 10:27:47.050] [INFO] console - [ 16,
  3268968234090496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/93/',
       id: '93',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:27:47.061] [INFO] console - [ 16,
  8559873864237056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:27:47.066] [INFO] console - [ 16,
  461258220371968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:27:47.072] [INFO] console - [ 16,
  4355864716640256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id94.starshinaChange',
  [],
  {} ]
[2016-10-21 10:27:47.080] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 94 }
[2016-10-21 10:27:47.084] [INFO] console - Executing (ef301e61-666e-4bdd-ab5e-de1e185c7873): START TRANSACTION;
[2016-10-21 10:27:47.085] [INFO] console - Executing (ef301e61-666e-4bdd-ab5e-de1e185c7873): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.092] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 94);
[2016-10-21 10:27:47.096] [INFO] console - Executing (ef301e61-666e-4bdd-ab5e-de1e185c7873): COMMIT;
[2016-10-21 10:27:47.098] [INFO] console - [ 70,
  990,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/93/94/',
      id: '94',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/93/',
      note: null,
      created_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '93',
      attachments: [] } ] ]
[2016-10-21 10:27:47.109] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 93 }
[2016-10-21 10:27:47.111] [INFO] console - Executing (ac761b1d-ab69-44c9-a648-62ddfc85a511): START TRANSACTION;
[2016-10-21 10:27:47.113] [INFO] console - Executing (ac761b1d-ab69-44c9-a648-62ddfc85a511): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.125] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 93);
[2016-10-21 10:27:47.136] [INFO] console - Executing (ac761b1d-ab69-44c9-a648-62ddfc85a511): COMMIT;
[2016-10-21 10:27:47.138] [INFO] console - [ 70,
  991,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/93/',
      id: '93',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:46 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:27:47.154] [INFO] console - Executing (765f48c9-c1f0-413a-a29e-1de9ed5f4ca6): START TRANSACTION;
[2016-10-21 10:27:47.157] [INFO] console - Executing (765f48c9-c1f0-413a-a29e-1de9ed5f4ca6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.164] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 93);
[2016-10-21 10:27:47.168] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.178] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.185] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:27:47.195] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:27:47.190 +00:00' WHERE "id" = '93'
[2016-10-21 10:27:47.200] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '93'
                                    or path like '/4/93/'||'%'
[2016-10-21 10:27:47.204] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:47.206] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.210] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.213] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/93/'||'%'
[2016-10-21 10:27:47.216] [INFO] console - Executing (765f48c9-c1f0-413a-a29e-1de9ed5f4ca6): COMMIT;
[2016-10-21 10:27:47.219] [INFO] console - [ 70, 992, {}, [ undefined ] ]
[2016-10-21 10:27:47.222] [INFO] console - [ 16,
  7372514592292864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 93 } ]
[2016-10-21 10:27:47.229] [INFO] console - [ 16,
  365243142242304,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:27:47.233] [INFO] console - [ 16,
  2874330276954112,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id94.starshinaChange',
  [],
  {} ]
[2016-10-21 10:27:47.245] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:47.249] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): START TRANSACTION;
[2016-10-21 10:27:47.251] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.259] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:47.253 +00:00','2016-10-21 05:27:47.253 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:27:47.268] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:47.273] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.277] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:27:47.280] [INFO] console - Executing (54bd9a62-80bc-4412-8b61-7ec450277dcd): COMMIT;
[2016-10-21 10:27:47.283] [INFO] console - [ 70, 993, {}, [ '95' ] ]
[2016-10-21 10:27:47.291] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.300] [INFO] console - Executing (3e376b0d-59bd-4292-b66c-a1533529fbfa): START TRANSACTION;
[2016-10-21 10:27:47.302] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:27:47.304] [INFO] console - Executing (3e376b0d-59bd-4292-b66c-a1533529fbfa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.317] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:47.320] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 95);
[2016-10-21 10:27:47.330] [INFO] console - [ 16,
  2638046195351552,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 10:27:47.334] [INFO] console - [ 16,
  440426205020160,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 95 } ]
[2016-10-21 10:27:47.340] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:47.345] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.350] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.353] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:47.361] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:27:47.355 +00:00' WHERE "id" = '95'
[2016-10-21 10:27:47.368] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '95'
                                    or path like '/95/'||'%'
[2016-10-21 10:27:47.370] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:47.374] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.379] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.382] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/95/'||'%'
[2016-10-21 10:27:47.385] [INFO] console - Executing (3e376b0d-59bd-4292-b66c-a1533529fbfa): COMMIT;
[2016-10-21 10:27:47.388] [INFO] console - [ 70, 994, {}, [ undefined ] ]
[2016-10-21 10:27:47.395] [INFO] console - [ 16,
  1481225831186432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/95/',
       id: '95',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:27:47.406] [INFO] console - Executing (899f5ebd-3a68-424c-943a-ee44efdb7f9d): START TRANSACTION;
[2016-10-21 10:27:47.407] [INFO] console - [ 16,
  3616086977150976,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:27:47.410] [INFO] console - Executing (899f5ebd-3a68-424c-943a-ee44efdb7f9d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.416] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 95);
[2016-10-21 10:27:47.423] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.428] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.431] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:27:47.439] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:27:47.434 +00:00' WHERE "id" = '95'
[2016-10-21 10:27:47.444] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '95'
                                    or path like '/2/95/'||'%'
[2016-10-21 10:27:47.448] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:47.452] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.456] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.459] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/95/'||'%'
[2016-10-21 10:27:47.463] [INFO] console - Executing (899f5ebd-3a68-424c-943a-ee44efdb7f9d): COMMIT;
[2016-10-21 10:27:47.467] [INFO] console - [ 70, 995, {}, [ undefined ] ]
[2016-10-21 10:27:47.469] [INFO] console - [ 16,
  4244349537746944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 95 } ]
[2016-10-21 10:27:47.474] [INFO] console - [ 16,
  6694853446467584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:27:47.490] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:47.493] [INFO] console - Executing (c5408b03-4a34-4a88-9b45-334c323e5e1b): START TRANSACTION;
[2016-10-21 10:27:47.495] [INFO] console - Executing (c5408b03-4a34-4a88-9b45-334c323e5e1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.502] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:47.508] [INFO] console - Executing (c5408b03-4a34-4a88-9b45-334c323e5e1b): COMMIT;
[2016-10-21 10:27:47.510] [INFO] console - [ 70,
  996,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:47.531] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:47.535] [INFO] console - Executing (c6c467ac-9888-446f-88bc-9c0895a7a2c6): START TRANSACTION;
[2016-10-21 10:27:47.536] [INFO] console - Executing (c6c467ac-9888-446f-88bc-9c0895a7a2c6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.543] [INFO] console - Executing (c6c467ac-9888-446f-88bc-9c0895a7a2c6): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT)',0,0,'2016-10-21 05:27:47.539 +00:00','2016-10-21 05:27:47.539 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:47.548] [INFO] console - Executing (c6c467ac-9888-446f-88bc-9c0895a7a2c6): COMMIT;
[2016-10-21 10:27:47.552] [INFO] console - [ 70, 997, {}, [ '52' ] ]
[2016-10-21 10:27:47.555] [INFO] console - [ 16,
  7188284857909248,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '52' ] ]
[2016-10-21 10:27:47.571] [INFO] console - Executing (ed6f5b16-b2e9-44e0-97b0-8fecbdcd69ec): START TRANSACTION;
[2016-10-21 10:27:47.572] [INFO] console - Executing (ed6f5b16-b2e9-44e0-97b0-8fecbdcd69ec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.578] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:47.584] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 52);
[2016-10-21 10:27:47.591] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:27:47.596] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.600] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.603] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.608] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.612] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '52' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:27:47.618] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:27:47.614 +00:00','2016-10-21 05:27:47.614 +00:00','52','2') RETURNING *;
[2016-10-21 10:27:47.627] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 52, 1, k.id, 98, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:27:47.630] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 52 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 52 and value=-1) "protiv"
[2016-10-21 10:27:47.636] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:27:47.632 +00:00' WHERE "id" = '52'
[2016-10-21 10:27:47.639] [INFO] console - Executing (ed6f5b16-b2e9-44e0-97b0-8fecbdcd69ec): COMMIT;
[2016-10-21 10:27:47.641] [INFO] console - [ 70, 998, {}, [ undefined ] ]
[2016-10-21 10:27:47.645] [INFO] console - [ 16,
  4864077371277312,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id52.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '98',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:27:47.652] [INFO] console - Executing (c247b09f-d715-483e-a436-0ae3c08af192): START TRANSACTION;
[2016-10-21 10:27:47.654] [INFO] console - Executing (c247b09f-d715-483e-a436-0ae3c08af192): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.659] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:47.661] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 98 }
[2016-10-21 10:27:47.665] [INFO] console - Executing (e7cb0884-9b44-4dab-bc5d-ca55cbfc967c): START TRANSACTION;
[2016-10-21 10:27:47.669] [INFO] console - Executing (e7cb0884-9b44-4dab-bc5d-ca55cbfc967c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.674] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 52);
[2016-10-21 10:27:47.690] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 98);
[2016-10-21 10:27:47.691] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:27:47.700] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.702] [INFO] console - Executing (e7cb0884-9b44-4dab-bc5d-ca55cbfc967c): COMMIT;
[2016-10-21 10:27:47.706] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:27:47.707] [INFO] console - [ 70,
  1000,
  {},
  [ { id: '98',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '52',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:47.713] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:27:47.724] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:27:47.728] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '52' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:27:47.739] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 52
                                and (
                                    id= 98
                                    or parent_id = 98
                                )
[2016-10-21 10:27:47.742] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 52 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 52 and value=-1) "protiv"
[2016-10-21 10:27:47.759] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:27:47.746 +00:00' WHERE "id" = '52'
[2016-10-21 10:27:47.765] [INFO] console - Executing (c247b09f-d715-483e-a436-0ae3c08af192): COMMIT;
[2016-10-21 10:27:47.769] [INFO] console - [ 70, 999, {}, [ undefined ] ]
[2016-10-21 10:27:47.775] [INFO] console - [ 16,
  1999710392942592,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id52.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '98',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:27:47.794] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:47.797] [INFO] console - Executing (40acfb1c-ffe7-4f57-8e96-6775d1c772a4): START TRANSACTION;
[2016-10-21 10:27:47.799] [INFO] console - Executing (40acfb1c-ffe7-4f57-8e96-6775d1c772a4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.804] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:47.809] [INFO] console - Executing (40acfb1c-ffe7-4f57-8e96-6775d1c772a4): COMMIT;
[2016-10-21 10:27:47.811] [INFO] console - [ 70,
  1002,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:47.829] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:47.834] [INFO] console - Executing (a141251c-aca2-4d3a-9b05-0099dd2c8ff8): START TRANSACTION;
[2016-10-21 10:27:47.836] [INFO] console - Executing (a141251c-aca2-4d3a-9b05-0099dd2c8ff8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.842] [INFO] console - Executing (a141251c-aca2-4d3a-9b05-0099dd2c8ff8): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027663155',0,0,'2016-10-21 05:27:47.838 +00:00','2016-10-21 05:27:47.838 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:47.845] [INFO] console - Executing (a141251c-aca2-4d3a-9b05-0099dd2c8ff8): COMMIT;
[2016-10-21 10:27:47.848] [INFO] console - [ 70, 1003, {}, [ '53' ] ]
[2016-10-21 10:27:47.851] [INFO] console - [ 16,
  3248413680336896,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '53' ] ]
[2016-10-21 10:27:47.880] [DEBUG] Server - #promiseModel() [] { model: 'Predlozhenie', id: 53 }
[2016-10-21 10:27:47.882] [INFO] console - Executing (3f369c5e-4525-4dfb-9981-69593167ec39): START TRANSACTION;
[2016-10-21 10:27:47.884] [INFO] console - Executing (3f369c5e-4525-4dfb-9981-69593167ec39): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.893] [INFO] console - Executing (default): SELECT "Predlozhenie"."id", "Predlozhenie"."value", "Predlozhenie"."totalZa", "Predlozhenie"."totalProtiv", "Predlozhenie"."state", "Predlozhenie"."note", "Predlozhenie"."created_at", "Predlozhenie"."updated_at", "Predlozhenie"."deleted_at", "Predlozhenie"."author_id", "Predlozhenie"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Predlozhenie" AS "Predlozhenie" LEFT OUTER JOIN "File" AS "attachments" ON "Predlozhenie"."id" = "attachments"."predlozhenie_id" AND "attachments"."deleted_at" IS NULL WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 53);
[2016-10-21 10:27:47.900] [INFO] console - Executing (3f369c5e-4525-4dfb-9981-69593167ec39): COMMIT;
[2016-10-21 10:27:47.903] [INFO] console - [ 70,
  1004,
  {},
  [ { id: '53',
      value: 'temp predlozhenie1477027663155',
      totalZa: 0,
      totalProtiv: 0,
      state: null,
      note: null,
      created_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:47 GMT+0500 (YEKT),
      deleted_at: null,
      author_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:27:47.973] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:27:47.977] [INFO] console - Executing (e3ebb1dc-84b5-4e1b-824a-9d9ad1b86cba): START TRANSACTION;
[2016-10-21 10:27:47.979] [INFO] console - Executing (e3ebb1dc-84b5-4e1b-824a-9d9ad1b86cba): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:47.994] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:27:47.999] [INFO] console - Executing (e3ebb1dc-84b5-4e1b-824a-9d9ad1b86cba): COMMIT;
[2016-10-21 10:27:48.000] [INFO] console - [ 70,
  1006,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:27:48.015] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:27:48.017] [INFO] console - Executing (da88c30d-1155-4ff5-9d86-de8a8dcb336e): START TRANSACTION;
[2016-10-21 10:27:48.018] [INFO] console - Executing (da88c30d-1155-4ff5-9d86-de8a8dcb336e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.023] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:27:48.030] [INFO] console - Executing (da88c30d-1155-4ff5-9d86-de8a8dcb336e): COMMIT;
[2016-10-21 10:27:48.031] [INFO] console - [ 70,
  1007,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:48.064] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.070] [INFO] console - Executing (0752f687-4b10-4636-b968-11499108a64f): START TRANSACTION;
[2016-10-21 10:27:48.071] [INFO] console - Executing (0752f687-4b10-4636-b968-11499108a64f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.079] [INFO] console - Executing (0752f687-4b10-4636-b968-11499108a64f): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:27:48.073 +00:00','2016-10-21 05:27:48.073 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:48.083] [INFO] console - Executing (0752f687-4b10-4636-b968-11499108a64f): COMMIT;
[2016-10-21 10:27:48.085] [INFO] console - [ 70, 1008, {}, [ '46' ] ]
[2016-10-21 10:27:48.089] [INFO] console - [ 16,
  7311924907737088,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '46' ] ]
[2016-10-21 10:27:48.099] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 46 }
[2016-10-21 10:27:48.101] [INFO] console - Executing (c7ded232-bed6-4f87-9477-14adceceab18): START TRANSACTION;
[2016-10-21 10:27:48.103] [INFO] console - Executing (c7ded232-bed6-4f87-9477-14adceceab18): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.112] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 46);
[2016-10-21 10:27:48.119] [INFO] console - Executing (c7ded232-bed6-4f87-9477-14adceceab18): COMMIT;
[2016-10-21 10:27:48.121] [INFO] console - [ 70,
  1009,
  {},
  [ { id: '46',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:27:48.135] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.139] [INFO] console - Executing (a67c9d7a-e3a8-4b3d-a9aa-5c6dbb183cb2): START TRANSACTION;
[2016-10-21 10:27:48.141] [INFO] console - Executing (a67c9d7a-e3a8-4b3d-a9aa-5c6dbb183cb2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.148] [INFO] console - Executing (a67c9d7a-e3a8-4b3d-a9aa-5c6dbb183cb2): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027668129','2016-10-21 05:27:48.142 +00:00','2016-10-21 05:27:48.142 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:48.152] [INFO] console - Executing (a67c9d7a-e3a8-4b3d-a9aa-5c6dbb183cb2): COMMIT;
[2016-10-21 10:27:48.154] [INFO] console - [ 70, 1010, {}, [ '47' ] ]
[2016-10-21 10:27:48.159] [INFO] console - [ 16,
  481090315747328,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '47' ] ]
[2016-10-21 10:27:48.168] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:48.170] [INFO] console - Executing (d53bc950-eb3e-45a8-b9cb-8988481446ac): START TRANSACTION;
[2016-10-21 10:27:48.172] [INFO] console - Executing (d53bc950-eb3e-45a8-b9cb-8988481446ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.177] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.183] [INFO] console - Executing (d53bc950-eb3e-45a8-b9cb-8988481446ac): COMMIT;
[2016-10-21 10:27:48.185] [INFO] console - [ 70,
  1011,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027623566',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:07 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:48.202] [INFO] console - Executing (8f83b8ac-8918-406a-9672-ea1e654e31d8): START TRANSACTION;
[2016-10-21 10:27:48.206] [INFO] console - Executing (8f83b8ac-8918-406a-9672-ea1e654e31d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.209] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.226] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027663197',"updated_at"='2016-10-21 05:27:48.221 +00:00' WHERE "id" = '2'
[2016-10-21 10:27:48.228] [INFO] console - Executing (8f83b8ac-8918-406a-9672-ea1e654e31d8): COMMIT;
[2016-10-21 10:27:48.229] [INFO] console - [ 16,
  2208791443537920,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:27:48.238] [INFO] console - [ 70, 1012, {}, [ undefined ] ]
[2016-10-21 10:27:48.245] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:48.248] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:48.255] [INFO] console - Executing (1de66127-4c8c-4df5-8411-1b3750db05b6): START TRANSACTION;
[2016-10-21 10:27:48.256] [INFO] console - Executing (b9e10e0f-5865-49c6-9db6-daa3bf7f46cf): START TRANSACTION;
[2016-10-21 10:27:48.258] [INFO] console - Executing (1de66127-4c8c-4df5-8411-1b3750db05b6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.258] [INFO] console - Executing (b9e10e0f-5865-49c6-9db6-daa3bf7f46cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.269] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.270] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.274] [INFO] console - Executing (1de66127-4c8c-4df5-8411-1b3750db05b6): COMMIT;
[2016-10-21 10:27:48.278] [INFO] console - Executing (b9e10e0f-5865-49c6-9db6-daa3bf7f46cf): COMMIT;
[2016-10-21 10:27:48.278] [INFO] console - [ 70,
  1013,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027663197',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:48.283] [INFO] console - [ 70,
  1014,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027663197',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:48.345] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:27:48.347] [INFO] console - Executing (5642dcd0-108b-4aed-a6ed-9f0d99aab4e3): START TRANSACTION;
[2016-10-21 10:27:48.349] [INFO] console - Executing (5642dcd0-108b-4aed-a6ed-9f0d99aab4e3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.355] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:27:48.361] [INFO] console - Executing (5642dcd0-108b-4aed-a6ed-9f0d99aab4e3): COMMIT;
[2016-10-21 10:27:48.363] [INFO] console - [ 70,
  1016,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:48.385] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.388] [INFO] console - Executing (cee17b06-09d7-4a73-8981-33d9942c4695): START TRANSACTION;
[2016-10-21 10:27:48.389] [INFO] console - Executing (cee17b06-09d7-4a73-8981-33d9942c4695): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.394] [INFO] console - Executing (cee17b06-09d7-4a73-8981-33d9942c4695): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:27:48.391 +00:00','2016-10-21 05:27:48.391 +00:00',2,3) RETURNING *;
[2016-10-21 10:27:48.398] [INFO] console - Executing (cee17b06-09d7-4a73-8981-33d9942c4695): COMMIT;
[2016-10-21 10:27:48.400] [INFO] console - [ 70, 1017, {}, [ '48' ] ]
[2016-10-21 10:27:48.403] [INFO] console - [ 16,
  6127203207086080,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '48' ] ]
[2016-10-21 10:27:48.418] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:27:48.422] [INFO] console - Executing (d7d1c761-58f6-48cc-b957-bbf4e72ab1b9): START TRANSACTION;
[2016-10-21 10:27:48.423] [INFO] console - Executing (d7d1c761-58f6-48cc-b957-bbf4e72ab1b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.430] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:27:48.435] [INFO] console - Executing (d7d1c761-58f6-48cc-b957-bbf4e72ab1b9): COMMIT;
[2016-10-21 10:27:48.440] [INFO] console - [ 70,
  1018,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:27:48.492] [INFO] console - [ 70, 1020, {}, [ undefined ] ]
[2016-10-21 10:27:48.494] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:27:48.505] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:27:48.506] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:27:48.510] [INFO] console - Executing (17e20b0b-8580-4ee5-9502-2ec3f7251801): START TRANSACTION;
[2016-10-21 10:27:48.512] [INFO] console - Executing (17e20b0b-8580-4ee5-9502-2ec3f7251801): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.522] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.527] [INFO] console - Executing (17e20b0b-8580-4ee5-9502-2ec3f7251801): COMMIT;
[2016-10-21 10:27:48.529] [INFO] console - [ 70,
  1021,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027663197',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:48.546] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.550] [INFO] console - Executing (3aa3874d-3eb4-4be9-be9a-6205eb1c2fb4): START TRANSACTION;
[2016-10-21 10:27:48.551] [INFO] console - Executing (3aa3874d-3eb4-4be9-be9a-6205eb1c2fb4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.557] [INFO] console - Executing (3aa3874d-3eb4-4be9-be9a-6205eb1c2fb4): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:27:48.553 +00:00','2016-10-21 05:27:48.553 +00:00',2,2) RETURNING *;
[2016-10-21 10:27:48.559] [INFO] console - Executing (3aa3874d-3eb4-4be9-be9a-6205eb1c2fb4): COMMIT;
[2016-10-21 10:27:48.561] [INFO] console - [ 70, 1022, {}, [ '31' ] ]
[2016-10-21 10:27:48.571] [INFO] console - Executing (a38d55c5-1988-418e-9f29-9df11f16c94f): START TRANSACTION;
[2016-10-21 10:27:48.573] [INFO] console - Executing (a38d55c5-1988-418e-9f29-9df11f16c94f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.576] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 31);
[2016-10-21 10:27:48.582] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:27:48.578 +00:00',"updated_at"='2016-10-21 05:27:48.578 +00:00' WHERE "id" = '31'
[2016-10-21 10:27:48.585] [INFO] console - Executing (a38d55c5-1988-418e-9f29-9df11f16c94f): COMMIT;
[2016-10-21 10:27:48.587] [INFO] console - [ 70, 1023, {}, [ undefined ] ]
[2016-10-21 10:27:48.588] [INFO] console - [ 16, 7966879628918784, {}, 'ru.kopa.model.Kopa.id31.change' ]
[2016-10-21 10:27:48.590] [INFO] console - [ 16,
  1632984643928064,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 31 ] ]
[2016-10-21 10:27:48.601] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 31 }
[2016-10-21 10:27:48.605] [INFO] console - Executing (4ce3cec2-daaa-4683-a966-672771b2821c): START TRANSACTION;
[2016-10-21 10:27:48.607] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.608] [INFO] console - Executing (4ce3cec2-daaa-4683-a966-672771b2821c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.613] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): START TRANSACTION;
[2016-10-21 10:27:48.617] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 31);
[2016-10-21 10:27:48.619] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.624] [INFO] console - Executing (4ce3cec2-daaa-4683-a966-672771b2821c): COMMIT;
[2016-10-21 10:27:48.627] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:27:48.630] [INFO] console - [ 70,
  1024,
  {},
  [ { id: '31',
      question: 'temp',
      invited: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:27:48.637] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:27:48.643] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:27:48.623 +00:00','2016-10-21 05:27:48.623 +00:00',2) RETURNING *;
[2016-10-21 10:27:48.647] [INFO] console - Executing (2b1120a0-3ee6-4b8f-ab7c-0b958df93f6d): COMMIT;
[2016-10-21 10:27:48.649] [INFO] console - [ 70, 1025, {}, [ '31' ] ]
[2016-10-21 10:27:48.654] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:27:48.662] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:48.667] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.671] [INFO] console - [ 16,
  5534010776223744,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:48.676] [INFO] console - [ 16,
  429011903709184,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 95 } ]
[2016-10-21 10:27:48.679] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): START TRANSACTION;
[2016-10-21 10:27:48.681] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.685] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 31);
[2016-10-21 10:27:48.690] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/31/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:27:48.694] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/31/','2016-10-21 05:27:48.682 +00:00','2016-10-21 05:27:48.682 +00:00',31) RETURNING *;
[2016-10-21 10:27:48.697] [INFO] console - Executing (8bdcddd0-a15d-4116-921e-c5a2f571355a): COMMIT;
[2016-10-21 10:27:48.699] [INFO] console - [ 70, 1026, {}, [ '32' ] ]
[2016-10-21 10:27:48.703] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/31/' like z.path||z.id||'/%'
[2016-10-21 10:27:48.711] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '31')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:48.713] [INFO] console - [ 16,
  7235057148231680,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id31.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:27:48.720] [INFO] console - [ 16,
  8060401015062528,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:48.724] [INFO] console - [ 16,
  4106200834637824,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 95 } ]
[2016-10-21 10:27:48.737] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:27:48.741] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): START TRANSACTION;
[2016-10-21 10:27:48.743] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.752] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:27:48.745 +00:00','2016-10-21 05:27:48.745 +00:00',32,NULL) RETURNING *;
[2016-10-21 10:27:48.757] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:27:48.760] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '32');
[2016-10-21 10:27:48.763] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/31/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 32
                                    )
[2016-10-21 10:27:48.766] [INFO] console - Executing (46f97b2e-27f8-45e2-b6c6-7fec7ba2697b): COMMIT;
[2016-10-21 10:27:48.768] [INFO] console - [ 70, 1027, {}, [ '96' ] ]
[2016-10-21 10:27:48.774] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '32');
[2016-10-21 10:27:48.778] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/31/' like z.path||z.id||'/%'
[2016-10-21 10:27:48.781] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2', '31')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:48.784] [INFO] console - [ 16,
  2038236578840576,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id32.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:27:48.789] [INFO] console - [ 16,
  8886618117111808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id31.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:27:48.797] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:27:48.799] [INFO] console - [ 16,
  4197488156213248,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:27:48.808] [INFO] console - Executing (e69001b1-ee75-4f64-bdba-ff187298ef85): START TRANSACTION;
[2016-10-21 10:27:48.809] [INFO] console - [ 16,
  2512513692336128,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 96 } ]
[2016-10-21 10:27:48.813] [INFO] console - Executing (e69001b1-ee75-4f64-bdba-ff187298ef85): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.820] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:27:48.825] [INFO] console - Executing (e69001b1-ee75-4f64-bdba-ff187298ef85): COMMIT;
[2016-10-21 10:27:48.826] [INFO] console - [ 70,
  1028,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:27:48.843] [INFO] console - Executing (d5d6e71c-9c11-48bc-aa70-d70be0ab6c6b): START TRANSACTION;
[2016-10-21 10:27:48.845] [INFO] console - Executing (d5d6e71c-9c11-48bc-aa70-d70be0ab6c6b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:27:48.849] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 31);
[2016-10-21 10:27:48.862] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:27:48.865] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:27:48.872] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1', '2')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:48.875] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 31
                                    )
[2016-10-21 10:27:48.882] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:27:48.877 +00:00' WHERE "id" = '31'
[2016-10-21 10:27:48.885] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '31'
                                    or path like '/1/2/31/'||'%'
[2016-10-21 10:27:48.887] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 31
                                    )
[2016-10-21 10:27:48.890] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:27:48.894] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:27:48.897] [INFO] console - Executing (d5d6e71c-9c11-48bc-aa70-d70be0ab6c6b): COMMIT;
[2016-10-21 10:27:48.899] [INFO] console - [ 70, 1029, {}, [ undefined ] ]
[2016-10-21 10:27:48.903] [INFO] console - [ 16,
  8906379360206848,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:27:48.909] [INFO] console - [ 16,
  1439251784794112,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 95 } ]
[2016-10-21 10:27:48.913] [INFO] console - [ 16,
  636649660743680,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:27:48.918] [INFO] console - [ 16,
  1492945148575744,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 96 } ]
[2016-10-21 10:28:00.037] [INFO] console - [ 70, 1031, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 10:28:00.057] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 10:28:00.058] [INFO] console - [ 70, 1032, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 10:28:00.097] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 10:28:00.101] [INFO] console - [ 70, 1033, {}, [ 'КОПА' ] ]
[2016-10-21 10:28:00.107] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 10:28:00.108] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:701:9)
    at Server.js:706:19
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:705:16)
    at Object.<anonymous> (Server.js:777:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:774:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
[2016-10-21 10:28:00.112] [INFO] console - [ 8,
  68,
  1034,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:701:9)',
       '    at Server.js:706:19',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:705:16)',
       '    at Object.<anonymous> (Server.js:777:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:774:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)',
       '    at Fulfilled.fold (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:588:4)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:34:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)' ] } ]
[2016-10-21 10:28:00.216] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:00.227] [ERROR] Server - [Error: Golos can't be created by direct]
Error: Golos can't be created by direct
    at Server.js:427:23
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith0Args (node.js:420:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)
[2016-10-21 10:28:00.231] [INFO] console - [ 8,
  68,
  1036,
  {},
  'Error',
  [ 'Golos can\'t be created by direct' ],
  { stack: 
     [ 'Error: Golos can\'t be created by direct',
       '    at Server.js:427:23',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28',
       '    at flush (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/_microtask.js:18:9)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith0Args (node.js:420:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:390:13)' ] } ]
[2016-10-21 10:28:00.311] [INFO] console - [ 70, 1038, {}, [ undefined ] ]
[2016-10-21 10:28:00.320] [INFO] console - Executing (default): delete from "Slovo"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:28:00.363] [INFO] console - Executing (default): delete from "Predlozhenie"
                where
                    place_id<5
                    and (
                        value like '%temp'
                        or value like 'temp%'
                    )
[2016-10-21 10:28:00.406] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:28:00.409] [INFO] console - Executing (d0e861de-93c5-4973-93d8-8e98b28b26f1): START TRANSACTION;
[2016-10-21 10:28:00.411] [INFO] console - Executing (d0e861de-93c5-4973-93d8-8e98b28b26f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.465] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:28:00.476] [INFO] console - Executing (d0e861de-93c5-4973-93d8-8e98b28b26f1): COMMIT;
[2016-10-21 10:28:00.478] [INFO] console - [ 70,
  1039,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:00.505] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:28:00.507] [INFO] console - Executing (b959839f-e13f-4ad8-85c7-804f03d3e1f1): START TRANSACTION;
[2016-10-21 10:28:00.509] [INFO] console - Executing (b959839f-e13f-4ad8-85c7-804f03d3e1f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.523] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:00.536] [INFO] console - Executing (b959839f-e13f-4ad8-85c7-804f03d3e1f1): COMMIT;
[2016-10-21 10:28:00.537] [INFO] console - [ 70,
  1040,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027663197',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:00.556] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:00.559] [INFO] console - Executing (28fd6b62-a616-4a55-b6df-1fddc1ca96d4): START TRANSACTION;
[2016-10-21 10:28:00.560] [INFO] console - Executing (28fd6b62-a616-4a55-b6df-1fddc1ca96d4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.565] [INFO] console - Executing (28fd6b62-a616-4a55-b6df-1fddc1ca96d4): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'some Kopa temp','2016-10-21 05:28:00.562 +00:00','2016-10-21 05:28:00.562 +00:00',2,2) RETURNING *;
[2016-10-21 10:28:00.571] [INFO] console - Executing (28fd6b62-a616-4a55-b6df-1fddc1ca96d4): COMMIT;
[2016-10-21 10:28:00.575] [INFO] console - [ 70, 1041, {}, [ '32' ] ]
[2016-10-21 10:28:00.586] [INFO] console - Executing (5d1d0aaf-898a-4ca6-8868-62c760bc4bcd): START TRANSACTION;
[2016-10-21 10:28:00.588] [INFO] console - Executing (5d1d0aaf-898a-4ca6-8868-62c760bc4bcd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.598] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 32);
[2016-10-21 10:28:00.607] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:28:00.600 +00:00',"updated_at"='2016-10-21 05:28:00.601 +00:00' WHERE "id" = '32'
[2016-10-21 10:28:00.610] [INFO] console - Executing (5d1d0aaf-898a-4ca6-8868-62c760bc4bcd): COMMIT;
[2016-10-21 10:28:00.611] [INFO] console - [ 70, 1042, {}, [ undefined ] ]
[2016-10-21 10:28:00.614] [INFO] console - [ 16, 4935984011542528, {}, 'ru.kopa.model.Kopa.id32.change' ]
[2016-10-21 10:28:00.616] [INFO] console - [ 16,
  2445478155255808,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 32 ] ]
[2016-10-21 10:28:00.625] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 32 }
[2016-10-21 10:28:00.628] [INFO] console - Executing (b4f3d84b-7d35-4817-a385-c7aac964792f): START TRANSACTION;
[2016-10-21 10:28:00.629] [INFO] console - Executing (b4f3d84b-7d35-4817-a385-c7aac964792f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.641] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 32);
[2016-10-21 10:28:00.647] [INFO] console - Executing (b4f3d84b-7d35-4817-a385-c7aac964792f): COMMIT;
[2016-10-21 10:28:00.648] [INFO] console - [ 70,
  1043,
  {},
  [ { id: '32',
      question: 'some Kopa temp',
      invited: Fri Oct 21 2016 10:28:00 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:28:00 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:00 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:00.662] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:28:00.674] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:28:00.677] [INFO] console - [ 70, 1044, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:28:00.698] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and slovo.created_at <  to_timestamp(1476955857.582)
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:28:00.706] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:28:00.710] [INFO] console - [ 70, 1045, {}, [ [ [Object] ] ] ]
[2016-10-21 10:28:00.731] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:28:00.739] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:28:00.749] [INFO] console - [ 70, 1046, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:28:00.790] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and predlozhenie.created_at <  to_timestamp(1476955857.621)
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:28:00.795] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:28:00.799] [INFO] console - [ 70, 1047, {}, [ [ [Object] ] ] ]
[2016-10-21 10:28:00.809] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:28:00.811] [INFO] console - Executing (36ff77b9-c4ec-4624-9308-5dcd886be5d1): START TRANSACTION;
[2016-10-21 10:28:00.813] [INFO] console - Executing (36ff77b9-c4ec-4624-9308-5dcd886be5d1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.818] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:28:00.830] [INFO] console - Executing (36ff77b9-c4ec-4624-9308-5dcd886be5d1): COMMIT;
[2016-10-21 10:28:00.831] [INFO] console - [ 70,
  1048,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:28:00.911] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:00.922] [INFO] console - Executing (ae61d132-7b81-4e7d-bd0a-6202797adb06): START TRANSACTION;
[2016-10-21 10:28:00.924] [INFO] console - Executing (ae61d132-7b81-4e7d-bd0a-6202797adb06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.930] [INFO] console - Executing (ae61d132-7b81-4e7d-bd0a-6202797adb06): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'1477027680899 temp','2016-10-21 05:28:00.926 +00:00','2016-10-21 05:28:00.926 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:00.935] [INFO] console - Executing (ae61d132-7b81-4e7d-bd0a-6202797adb06): COMMIT;
[2016-10-21 10:28:00.939] [INFO] console - [ 70, 1049, {}, [ '49' ] ]
[2016-10-21 10:28:00.941] [INFO] console - [ 16,
  2130333522722816,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '49' ] ]
[2016-10-21 10:28:00.973] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:00.982] [INFO] console - Executing (2cf5c840-4043-4593-8270-39912d88694a): START TRANSACTION;
[2016-10-21 10:28:00.984] [INFO] console - Executing (2cf5c840-4043-4593-8270-39912d88694a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:00.994] [INFO] console - Executing (2cf5c840-4043-4593-8270-39912d88694a): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'1477027680966temp',0,0,'2016-10-21 05:28:00.985 +00:00','2016-10-21 05:28:00.985 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:01.008] [INFO] console - Executing (2cf5c840-4043-4593-8270-39912d88694a): COMMIT;
[2016-10-21 10:28:01.010] [INFO] console - [ 70, 1050, {}, [ '54' ] ]
[2016-10-21 10:28:01.012] [INFO] console - [ 16,
  2662161016946688,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '54' ] ]
[2016-10-21 10:28:01.094] [INFO] console - [ 70, 1052, {}, [ undefined ] ]
[2016-10-21 10:28:01.101] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:28:01.103] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:28:01.112] [INFO] console - Executing (2c905c4a-fee9-4a2a-ae44-73a7f943bb37): START TRANSACTION;
[2016-10-21 10:28:01.114] [INFO] console - Executing (2c905c4a-fee9-4a2a-ae44-73a7f943bb37): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.119] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 10:28:01.133] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:28:01.140] [INFO] console - Executing (2c905c4a-fee9-4a2a-ae44-73a7f943bb37): COMMIT;
[2016-10-21 10:28:01.142] [INFO] console - [ 70,
  1053,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:28:01.180] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:28:01.185] [INFO] console - [ 70, 1054, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:28:01.211] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:01.216] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): START TRANSACTION;
[2016-10-21 10:28:01.218] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.229] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:28:01.221 +00:00','2016-10-21 05:28:01.221 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:28:01.234] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.240] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.245] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:28:01.251] [INFO] console - Executing (427422f9-bfa3-416d-8d7b-3ce225579af0): COMMIT;
[2016-10-21 10:28:01.253] [INFO] console - [ 70, 1055, {}, [ '97' ] ]
[2016-10-21 10:28:01.261] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.265] [INFO] console - Executing (1fc2af98-0bfc-4161-ba0c-986cda595963): START TRANSACTION;
[2016-10-21 10:28:01.268] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:28:01.270] [INFO] console - Executing (1fc2af98-0bfc-4161-ba0c-986cda595963): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.277] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:01.287] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 97);
[2016-10-21 10:28:01.288] [INFO] console - [ 16,
  7577880510857216,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:28:01.297] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:28:01.299] [INFO] console - [ 16,
  1001527940481024,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 97 } ]
[2016-10-21 10:28:01.304] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.310] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.313] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.321] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:28:01.315 +00:00' WHERE "id" = '97'
[2016-10-21 10:28:01.324] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '97'
                                    or path like '/97/'||'%'
[2016-10-21 10:28:01.330] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:28:01.344] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.348] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.355] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/97/'||'%'
[2016-10-21 10:28:01.360] [INFO] console - Executing (1fc2af98-0bfc-4161-ba0c-986cda595963): COMMIT;
[2016-10-21 10:28:01.361] [INFO] console - [ 70, 1056, {}, [ undefined ] ]
[2016-10-21 10:28:01.371] [INFO] console - [ 16,
  7163773875912704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/97/',
       id: '97',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:28:01.386] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:01.387] [INFO] console - [ 16,
  5976901451513856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:28:01.392] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): START TRANSACTION;
[2016-10-21 10:28:01.394] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.401] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:28:01.396 +00:00','2016-10-21 05:28:01.396 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:28:01.405] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.408] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.415] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:28:01.419] [INFO] console - Executing (a9ebbd64-817c-40ac-9f19-285cf15bb2ea): COMMIT;
[2016-10-21 10:28:01.420] [INFO] console - [ 70, 1057, {}, [ '98' ] ]
[2016-10-21 10:28:01.429] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.438] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:28:01.440] [INFO] console - Executing (e5f99dc4-7ce7-462d-a186-384814a7960a): START TRANSACTION;
[2016-10-21 10:28:01.442] [INFO] console - Executing (e5f99dc4-7ce7-462d-a186-384814a7960a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.452] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:01.455] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 98);
[2016-10-21 10:28:01.457] [INFO] console - [ 16,
  3207547328659456,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 10:28:01.463] [INFO] console - [ 16,
  1749882800963584,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 98 } ]
[2016-10-21 10:28:01.471] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 97);
[2016-10-21 10:28:01.474] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.477] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.479] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.485] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='97',"updated_at"='2016-10-21 05:28:01.481 +00:00' WHERE "id" = '98'
[2016-10-21 10:28:01.489] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/97/')
                                where
                                    id = '98'
                                    or path like '/98/'||'%'
[2016-10-21 10:28:01.492] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/97/' like path||id||'/%'
[2016-10-21 10:28:01.495] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/97/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.499] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('97', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.503] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/97/98/'||'%'
[2016-10-21 10:28:01.505] [INFO] console - Executing (e5f99dc4-7ce7-462d-a186-384814a7960a): COMMIT;
[2016-10-21 10:28:01.507] [INFO] console - [ 70, 1058, {}, [ undefined ] ]
[2016-10-21 10:28:01.511] [INFO] console - [ 16,
  2073991229472768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id97.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/97/98/',
       id: '98',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/97/',
       note: null,
       created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '97' } } ]
[2016-10-21 10:28:01.518] [INFO] console - [ 16,
  3810394629996544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id97.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 10:28:01.521] [INFO] console - [ 16,
  4782452545421312,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 10:28:01.529] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:28:01.533] [INFO] console - Executing (99a3a0e2-ca93-4fc4-8ef4-9a7749bb11ef): START TRANSACTION;
[2016-10-21 10:28:01.537] [INFO] console - Executing (99a3a0e2-ca93-4fc4-8ef4-9a7749bb11ef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.545] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:28:01.551] [INFO] console - Executing (99a3a0e2-ca93-4fc4-8ef4-9a7749bb11ef): COMMIT;
[2016-10-21 10:28:01.552] [INFO] console - [ 70,
  1059,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:28:01.566] [INFO] console - Executing (8cf3caf1-66c2-44f3-b684-e9962986e292): START TRANSACTION;
[2016-10-21 10:28:01.568] [INFO] console - Executing (8cf3caf1-66c2-44f3-b684-e9962986e292): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.572] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 97);
[2016-10-21 10:28:01.577] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:28:01.581] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.586] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.590] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:28:01.598] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 05:28:01.592 +00:00' WHERE "id" = '97'
[2016-10-21 10:28:01.601] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '97'
                                    or path like '/2/97/'||'%'
[2016-10-21 10:28:01.604] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:28:01.610] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.614] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.618] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/97/'||'%'
[2016-10-21 10:28:01.620] [INFO] console - Executing (8cf3caf1-66c2-44f3-b684-e9962986e292): COMMIT;
[2016-10-21 10:28:01.622] [INFO] console - [ 70, 1060, {}, [ undefined ] ]
[2016-10-21 10:28:01.626] [INFO] console - [ 16,
  7975114536648704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 97 } ]
[2016-10-21 10:28:01.633] [INFO] console - [ 16,
  1907994325417984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/97/',
       id: '97',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 10:28:01.642] [INFO] console - [ 16,
  8642197981233152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:28:01.648] [INFO] console - [ 16,
  7704008554708992,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 10:28:01.653] [INFO] console - [ 16,
  1858075417903104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id98.starshinaChange',
  [],
  {} ]
[2016-10-21 10:28:01.660] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 98 }
[2016-10-21 10:28:01.664] [INFO] console - Executing (97b3ef66-195b-4b97-899e-8c09d5b01398): START TRANSACTION;
[2016-10-21 10:28:01.666] [INFO] console - Executing (97b3ef66-195b-4b97-899e-8c09d5b01398): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.671] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 98);
[2016-10-21 10:28:01.675] [INFO] console - Executing (97b3ef66-195b-4b97-899e-8c09d5b01398): COMMIT;
[2016-10-21 10:28:01.676] [INFO] console - [ 70,
  1061,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/97/98/',
      id: '98',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/4/97/',
      note: null,
      created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '97',
      attachments: [] } ] ]
[2016-10-21 10:28:01.684] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 97 }
[2016-10-21 10:28:01.686] [INFO] console - Executing (13636d9d-b82d-475c-976e-e392d2a8487d): START TRANSACTION;
[2016-10-21 10:28:01.688] [INFO] console - Executing (13636d9d-b82d-475c-976e-e392d2a8487d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.693] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 97);
[2016-10-21 10:28:01.698] [INFO] console - Executing (13636d9d-b82d-475c-976e-e392d2a8487d): COMMIT;
[2016-10-21 10:28:01.699] [INFO] console - [ 70,
  1062,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/4/97/',
      id: '97',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 10:28:01.711] [INFO] console - Executing (b8130cf4-a897-4107-8458-2589ea0858b9): START TRANSACTION;
[2016-10-21 10:28:01.712] [INFO] console - Executing (b8130cf4-a897-4107-8458-2589ea0858b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.716] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 97);
[2016-10-21 10:28:01.720] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.725] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.730] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 10:28:01.744] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:28:01.732 +00:00' WHERE "id" = '97'
[2016-10-21 10:28:01.750] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '97'
                                    or path like '/4/97/'||'%'
[2016-10-21 10:28:01.754] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.757] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.761] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.763] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/97/'||'%'
[2016-10-21 10:28:01.766] [INFO] console - Executing (b8130cf4-a897-4107-8458-2589ea0858b9): COMMIT;
[2016-10-21 10:28:01.769] [INFO] console - [ 70, 1063, {}, [ undefined ] ]
[2016-10-21 10:28:01.773] [INFO] console - [ 16,
  2905836926009344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 97 } ]
[2016-10-21 10:28:01.778] [INFO] console - [ 16,
  4294402155479040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 10:28:01.782] [INFO] console - [ 16,
  5296896595722240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id98.starshinaChange',
  [],
  {} ]
[2016-10-21 10:28:01.794] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:01.797] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): START TRANSACTION;
[2016-10-21 10:28:01.800] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.808] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:28:01.803 +00:00','2016-10-21 05:28:01.803 +00:00',2,NULL) RETURNING *;
[2016-10-21 10:28:01.812] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.816] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.819] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 10:28:01.822] [INFO] console - Executing (a3609aaf-798b-460b-8b71-91c65d4e8125): COMMIT;
[2016-10-21 10:28:01.824] [INFO] console - [ 70, 1064, {}, [ '99' ] ]
[2016-10-21 10:28:01.832] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:01.837] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 10:28:01.839] [INFO] console - Executing (8b3e5fc3-4ff1-4697-8d66-3cf1d9d95630): START TRANSACTION;
[2016-10-21 10:28:01.841] [INFO] console - Executing (8b3e5fc3-4ff1-4697-8d66-3cf1d9d95630): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.844] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:01.848] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 99);
[2016-10-21 10:28:01.849] [INFO] console - [ 16,
  6797437010182144,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 10:28:01.855] [INFO] console - [ 16,
  5296701535420416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 99 } ]
[2016-10-21 10:28:01.864] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:28:01.868] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.872] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.875] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.882] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 05:28:01.876 +00:00' WHERE "id" = '99'
[2016-10-21 10:28:01.885] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '99'
                                    or path like '/99/'||'%'
[2016-10-21 10:28:01.891] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:28:01.895] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.899] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.908] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/99/'||'%'
[2016-10-21 10:28:01.911] [INFO] console - Executing (8b3e5fc3-4ff1-4697-8d66-3cf1d9d95630): COMMIT;
[2016-10-21 10:28:01.912] [INFO] console - [ 70, 1065, {}, [ undefined ] ]
[2016-10-21 10:28:01.919] [INFO] console - [ 16,
  665794040037376,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/99/',
       id: '99',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 10:28:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 10:28:01.928] [INFO] console - Executing (6ab8e144-e4a8-42b8-a5a0-68e9daae4d83): START TRANSACTION;
[2016-10-21 10:28:01.930] [INFO] console - [ 16,
  5275686396755968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 10:28:01.932] [INFO] console - Executing (6ab8e144-e4a8-42b8-a5a0-68e9daae4d83): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:01.936] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 99);
[2016-10-21 10:28:01.940] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.944] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.948] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 10:28:01.955] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 05:28:01.950 +00:00' WHERE "id" = '99'
[2016-10-21 10:28:01.958] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '99'
                                    or path like '/2/99/'||'%'
[2016-10-21 10:28:01.961] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:01.964] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:01.968] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:01.971] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/99/'||'%'
[2016-10-21 10:28:01.972] [INFO] console - Executing (6ab8e144-e4a8-42b8-a5a0-68e9daae4d83): COMMIT;
[2016-10-21 10:28:01.974] [INFO] console - [ 70, 1066, {}, [ undefined ] ]
[2016-10-21 10:28:01.976] [INFO] console - [ 16,
  5786457383895040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 99 } ]
[2016-10-21 10:28:01.986] [INFO] console - [ 16,
  1860443947663360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 10:28:01.990] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:28:01.992] [INFO] console - Executing (6577ec7d-58d8-490a-b435-ac4a3c505cc0): START TRANSACTION;
[2016-10-21 10:28:01.993] [INFO] console - Executing (6577ec7d-58d8-490a-b435-ac4a3c505cc0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.000] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:28:02.004] [INFO] console - Executing (6577ec7d-58d8-490a-b435-ac4a3c505cc0): COMMIT;
[2016-10-21 10:28:02.005] [INFO] console - [ 70,
  1067,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:02.030] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.033] [INFO] console - Executing (277e82c7-20b2-4201-9c5e-69f998067eec): START TRANSACTION;
[2016-10-21 10:28:02.034] [INFO] console - Executing (277e82c7-20b2-4201-9c5e-69f998067eec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.040] [INFO] console - Executing (277e82c7-20b2-4201-9c5e-69f998067eec): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT)',0,0,'2016-10-21 05:28:02.035 +00:00','2016-10-21 05:28:02.035 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:02.043] [INFO] console - Executing (277e82c7-20b2-4201-9c5e-69f998067eec): COMMIT;
[2016-10-21 10:28:02.068] [INFO] console - [ 70, 1068, {}, [ '55' ] ]
[2016-10-21 10:28:02.069] [INFO] console - [ 16,
  1838750021713920,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '55' ] ]
[2016-10-21 10:28:02.087] [INFO] console - Executing (e8284c84-8c7d-4c18-930f-171a6b999bd9): START TRANSACTION;
[2016-10-21 10:28:02.088] [INFO] console - Executing (e8284c84-8c7d-4c18-930f-171a6b999bd9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.091] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.097] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 55);
[2016-10-21 10:28:02.101] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:28:02.105] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:02.109] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:02.111] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:02.115] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:02.118] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '55' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:28:02.126] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 05:28:02.120 +00:00','2016-10-21 05:28:02.120 +00:00','55','2') RETURNING *;
[2016-10-21 10:28:02.145] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 55, 1, k.id, 101, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 10:28:02.151] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 55 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 55 and value=-1) "protiv"
[2016-10-21 10:28:02.158] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 05:28:02.153 +00:00' WHERE "id" = '55'
[2016-10-21 10:28:02.162] [INFO] console - Executing (e8284c84-8c7d-4c18-930f-171a6b999bd9): COMMIT;
[2016-10-21 10:28:02.165] [INFO] console - [ 70, 1069, {}, [ undefined ] ]
[2016-10-21 10:28:02.171] [INFO] console - [ 16,
  2460239697805312,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id55.rebalance',
  [],
  { totalZa: 3,
    totalProtiv: 0,
    GOLOS: '101',
    action: 'add',
    value: 1 } ]
[2016-10-21 10:28:02.180] [INFO] console - Executing (13c4893e-753f-48a5-bf77-7032d4082527): START TRANSACTION;
[2016-10-21 10:28:02.182] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 101 }
[2016-10-21 10:28:02.184] [INFO] console - Executing (dcef3de6-180d-409b-a24e-4a162e9a4ae1): START TRANSACTION;
[2016-10-21 10:28:02.185] [INFO] console - Executing (13c4893e-753f-48a5-bf77-7032d4082527): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.187] [INFO] console - Executing (dcef3de6-180d-409b-a24e-4a162e9a4ae1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.190] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.198] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 101);
[2016-10-21 10:28:02.209] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 55);
[2016-10-21 10:28:02.211] [INFO] console - Executing (dcef3de6-180d-409b-a24e-4a162e9a4ae1): COMMIT;
[2016-10-21 10:28:02.215] [INFO] console - [ 70,
  1071,
  {},
  [ { id: '101',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '55',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:28:02.241] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 10:28:02.250] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:02.259] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 10:28:02.266] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 10:28:02.270] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 10:28:02.276] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '55' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 10:28:02.286] [INFO] console - Executing (default): delete from "Golos" 
                            where
                                subject_id= 55
                                and (
                                    id= 101
                                    or parent_id = 101
                                )
[2016-10-21 10:28:02.289] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 55 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 55 and value=-1) "protiv"
[2016-10-21 10:28:02.297] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=0,"updated_at"='2016-10-21 05:28:02.292 +00:00' WHERE "id" = '55'
[2016-10-21 10:28:02.301] [INFO] console - Executing (13c4893e-753f-48a5-bf77-7032d4082527): COMMIT;
[2016-10-21 10:28:02.304] [INFO] console - [ 70, 1070, {}, [ undefined ] ]
[2016-10-21 10:28:02.306] [INFO] console - [ 16,
  2224332885458944,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id55.rebalance',
  [],
  { totalZa: 0,
    totalProtiv: 0,
    GOLOS: '101',
    action: 'remove',
    value: 1 } ]
[2016-10-21 10:28:02.328] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:28:02.331] [INFO] console - Executing (5989fc3c-0c33-4790-9a1e-733212f5982a): START TRANSACTION;
[2016-10-21 10:28:02.332] [INFO] console - Executing (5989fc3c-0c33-4790-9a1e-733212f5982a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.341] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:28:02.345] [INFO] console - Executing (5989fc3c-0c33-4790-9a1e-733212f5982a): COMMIT;
[2016-10-21 10:28:02.346] [INFO] console - [ 70,
  1073,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:02.366] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.370] [INFO] console - Executing (5603e6fd-d704-4af5-9c38-b3c4ab75adf4): START TRANSACTION;
[2016-10-21 10:28:02.371] [INFO] console - Executing (5603e6fd-d704-4af5-9c38-b3c4ab75adf4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.376] [INFO] console - Executing (5603e6fd-d704-4af5-9c38-b3c4ab75adf4): INSERT INTO "Predlozhenie" ("id","value","totalZa","totalProtiv","created_at","updated_at","author_id","place_id") VALUES (DEFAULT,'temp predlozhenie1477027679243',0,0,'2016-10-21 05:28:02.373 +00:00','2016-10-21 05:28:02.373 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:02.379] [INFO] console - Executing (5603e6fd-d704-4af5-9c38-b3c4ab75adf4): COMMIT;
[2016-10-21 10:28:02.382] [INFO] console - [ 70, 1074, {}, [ '56' ] ]
[2016-10-21 10:28:02.387] [INFO] console - [ 16,
  4371502648524800,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.predlozhenieAdd',
  [ '56' ] ]
[2016-10-21 10:28:02.462] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:28:02.466] [INFO] console - Executing (aae755a1-13d6-4ba6-b049-d533e2a3c0ae): START TRANSACTION;
[2016-10-21 10:28:02.467] [INFO] console - Executing (aae755a1-13d6-4ba6-b049-d533e2a3c0ae): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.474] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:28:02.479] [INFO] console - Executing (aae755a1-13d6-4ba6-b049-d533e2a3c0ae): COMMIT;
[2016-10-21 10:28:02.481] [INFO] console - [ 70,
  1076,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:28:02.505] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 3 }
[2016-10-21 10:28:02.507] [INFO] console - Executing (cf47d1eb-f803-4cdf-aa39-47d218e41082): START TRANSACTION;
[2016-10-21 10:28:02.508] [INFO] console - Executing (cf47d1eb-f803-4cdf-aa39-47d218e41082): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.516] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 3);
[2016-10-21 10:28:02.523] [INFO] console - Executing (cf47d1eb-f803-4cdf-aa39-47d218e41082): COMMIT;
[2016-10-21 10:28:02.525] [INFO] console - [ 70,
  1077,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/3/',
      id: '3',
      email: 'unittest3@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '3',
      voiskoSize: 1,
      birth: 1983,
      path: '/2/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:02.549] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.556] [INFO] console - Executing (68b257c0-bb3e-4e79-b6aa-2032bd030abd): START TRANSACTION;
[2016-10-21 10:28:02.558] [INFO] console - Executing (68b257c0-bb3e-4e79-b6aa-2032bd030abd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.563] [INFO] console - Executing (68b257c0-bb3e-4e79-b6aa-2032bd030abd): INSERT INTO "Slovo" ("id","value","note","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'123 temp','456','2016-10-21 05:28:02.560 +00:00','2016-10-21 05:28:02.560 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:02.567] [INFO] console - Executing (68b257c0-bb3e-4e79-b6aa-2032bd030abd): COMMIT;
[2016-10-21 10:28:02.569] [INFO] console - [ 70, 1078, {}, [ '50' ] ]
[2016-10-21 10:28:02.571] [INFO] console - [ 16,
  3287542155706368,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '50' ] ]
[2016-10-21 10:28:02.583] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 50 }
[2016-10-21 10:28:02.589] [INFO] console - Executing (f96e4255-ee52-400c-8d9b-13b00142a11a): START TRANSACTION;
[2016-10-21 10:28:02.592] [INFO] console - Executing (f96e4255-ee52-400c-8d9b-13b00142a11a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.600] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 50);
[2016-10-21 10:28:02.606] [INFO] console - Executing (f96e4255-ee52-400c-8d9b-13b00142a11a): COMMIT;
[2016-10-21 10:28:02.607] [INFO] console - [ 70,
  1079,
  {},
  [ { id: '50',
      value: '123 temp',
      note: '456',
      created_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:28:02.625] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.629] [INFO] console - Executing (7f0555a0-4cae-4acb-b265-4cb8367ea9bd): START TRANSACTION;
[2016-10-21 10:28:02.634] [INFO] console - Executing (7f0555a0-4cae-4acb-b265-4cb8367ea9bd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.638] [INFO] console - Executing (7f0555a0-4cae-4acb-b265-4cb8367ea9bd): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'temp 1477027682617','2016-10-21 05:28:02.635 +00:00','2016-10-21 05:28:02.635 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:02.641] [INFO] console - Executing (7f0555a0-4cae-4acb-b265-4cb8367ea9bd): COMMIT;
[2016-10-21 10:28:02.642] [INFO] console - [ 70, 1080, {}, [ '51' ] ]
[2016-10-21 10:28:02.644] [INFO] console - [ 16,
  2325151502827520,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '51' ] ]
[2016-10-21 10:28:02.655] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:28:02.657] [INFO] console - Executing (6bd1b719-ff04-4ca1-9a14-52a77a444f0d): START TRANSACTION;
[2016-10-21 10:28:02.658] [INFO] console - Executing (6bd1b719-ff04-4ca1-9a14-52a77a444f0d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.664] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:02.669] [INFO] console - Executing (6bd1b719-ff04-4ca1-9a14-52a77a444f0d): COMMIT;
[2016-10-21 10:28:02.672] [INFO] console - [ 70,
  1081,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027663197',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:27:48 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:02.692] [INFO] console - Executing (c6bc8ee7-45c2-4c15-953d-2d0d2ac0f0c9): START TRANSACTION;
[2016-10-21 10:28:02.693] [INFO] console - Executing (c6bc8ee7-45c2-4c15-953d-2d0d2ac0f0c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.697] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:02.708] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"=1,"note"='unit test 1477027679284',"updated_at"='2016-10-21 05:28:02.701 +00:00' WHERE "id" = '2'
[2016-10-21 10:28:02.711] [INFO] console - Executing (c6bc8ee7-45c2-4c15-953d-2d0d2ac0f0c9): COMMIT;
[2016-10-21 10:28:02.712] [INFO] console - [ 16,
  6634202665582592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.change' ]
[2016-10-21 10:28:02.717] [INFO] console - [ 70, 1082, {}, [ undefined ] ]
[2016-10-21 10:28:02.724] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:28:02.726] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:28:02.728] [INFO] console - Executing (dcab0c80-dfc2-4350-b5e0-bf4ceda5e73b): START TRANSACTION;
[2016-10-21 10:28:02.729] [INFO] console - Executing (fbff1989-d1df-43cb-bd49-ebb84122371d): START TRANSACTION;
[2016-10-21 10:28:02.731] [INFO] console - Executing (dcab0c80-dfc2-4350-b5e0-bf4ceda5e73b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.733] [INFO] console - Executing (fbff1989-d1df-43cb-bd49-ebb84122371d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.760] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:02.761] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:02.769] [INFO] console - Executing (dcab0c80-dfc2-4350-b5e0-bf4ceda5e73b): COMMIT;
[2016-10-21 10:28:02.776] [INFO] console - Executing (fbff1989-d1df-43cb-bd49-ebb84122371d): COMMIT;
[2016-10-21 10:28:02.777] [INFO] console - [ 70,
  1083,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027679284',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:02.783] [INFO] console - [ 70,
  1084,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 8,
      path: '/1/',
      note: 'unit test 1477027679284',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:02.832] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 3 }
[2016-10-21 10:28:02.834] [INFO] console - Executing (0a8247dc-7725-4e65-85ee-526af669e5a7): START TRANSACTION;
[2016-10-21 10:28:02.835] [INFO] console - Executing (0a8247dc-7725-4e65-85ee-526af669e5a7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.840] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 3);
[2016-10-21 10:28:02.861] [INFO] console - Executing (0a8247dc-7725-4e65-85ee-526af669e5a7): COMMIT;
[2016-10-21 10:28:02.863] [INFO] console - [ 70,
  1086,
  {},
  [ { id: '3',
      question: 'CHE',
      invited: Thu Sep 01 2016 00:00:00 GMT+0500 (YEKT),
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:02.885] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:02.888] [INFO] console - Executing (dce8be73-d7a8-481d-b68d-0e7bebbb9fd1): START TRANSACTION;
[2016-10-21 10:28:02.890] [INFO] console - Executing (dce8be73-d7a8-481d-b68d-0e7bebbb9fd1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.894] [INFO] console - Executing (dce8be73-d7a8-481d-b68d-0e7bebbb9fd1): INSERT INTO "Slovo" ("id","value","created_at","updated_at","owner_id","place_id") VALUES (DEFAULT,'some Slovo temp','2016-10-21 05:28:02.891 +00:00','2016-10-21 05:28:02.891 +00:00',2,3) RETURNING *;
[2016-10-21 10:28:02.897] [INFO] console - Executing (dce8be73-d7a8-481d-b68d-0e7bebbb9fd1): COMMIT;
[2016-10-21 10:28:02.899] [INFO] console - [ 70, 1087, {}, [ '52' ] ]
[2016-10-21 10:28:02.902] [INFO] console - [ 16,
  5645350419300352,
  { acknowledge: true },
  'ru.kopa.model.Kopa.id3.slovoAdd',
  [ '52' ] ]
[2016-10-21 10:28:02.915] [DEBUG] Server - #promiseModel() [] { model: 'Slovo', id: 1 }
[2016-10-21 10:28:02.918] [INFO] console - Executing (14fd177b-890a-43d6-8eb1-76eada84844f): START TRANSACTION;
[2016-10-21 10:28:02.920] [INFO] console - Executing (14fd177b-890a-43d6-8eb1-76eada84844f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:02.925] [INFO] console - Executing (default): SELECT "Slovo"."id", "Slovo"."value", "Slovo"."note", "Slovo"."created_at", "Slovo"."updated_at", "Slovo"."deleted_at", "Slovo"."owner_id", "Slovo"."place_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Slovo" AS "Slovo" LEFT OUTER JOIN "File" AS "attachments" ON "Slovo"."id" = "attachments"."slovo_id" AND "attachments"."deleted_at" IS NULL WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" = 1);
[2016-10-21 10:28:02.931] [INFO] console - Executing (14fd177b-890a-43d6-8eb1-76eada84844f): COMMIT;
[2016-10-21 10:28:02.934] [INFO] console - [ 70,
  1088,
  {},
  [ { id: '1',
      value: 'я ЗА!',
      note: null,
      created_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:57 GMT+0500 (YEKT),
      deleted_at: null,
      owner_id: '2',
      place_id: '3',
      attachments: [] } ] ]
[2016-10-21 10:28:03.001] [INFO] console - [ 70, 1090, {}, [ undefined ] ]
[2016-10-21 10:28:03.005] [INFO] console - Executing (default): delete from "Zemla"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 10:28:03.009] [INFO] console - Executing (default): update "Zemla"
                set 
                    "obshinaSize"= case id when 2 then 5 when 4 then 1 ELSE 0 END
                where
                    id in (2,3,4)
[2016-10-21 10:28:03.011] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:28:03.016] [INFO] console - Executing (b7e7443e-a752-4dad-a6fd-4b661870fc22): START TRANSACTION;
[2016-10-21 10:28:03.017] [INFO] console - Executing (b7e7443e-a752-4dad-a6fd-4b661870fc22): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.023] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:03.029] [INFO] console - Executing (b7e7443e-a752-4dad-a6fd-4b661870fc22): COMMIT;
[2016-10-21 10:28:03.030] [INFO] console - [ 70,
  1091,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027679284',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:03.044] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:03.048] [INFO] console - Executing (8d0d8ffe-13ce-458b-b240-4352c487d8cf): START TRANSACTION;
[2016-10-21 10:28:03.049] [INFO] console - Executing (8d0d8ffe-13ce-458b-b240-4352c487d8cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.058] [INFO] console - Executing (8d0d8ffe-13ce-458b-b240-4352c487d8cf): INSERT INTO "Kopa" ("id","question","created_at","updated_at","place_id","inviter_id") VALUES (DEFAULT,'temp','2016-10-21 05:28:03.051 +00:00','2016-10-21 05:28:03.051 +00:00',2,2) RETURNING *;
[2016-10-21 10:28:03.063] [INFO] console - Executing (8d0d8ffe-13ce-458b-b240-4352c487d8cf): COMMIT;
[2016-10-21 10:28:03.065] [INFO] console - [ 70, 1092, {}, [ '33' ] ]
[2016-10-21 10:28:03.076] [INFO] console - Executing (50a02813-6ea6-43bb-ba6f-1608c6fd900f): START TRANSACTION;
[2016-10-21 10:28:03.078] [INFO] console - Executing (50a02813-6ea6-43bb-ba6f-1608c6fd900f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.083] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 33);
[2016-10-21 10:28:03.090] [INFO] console - Executing (default): UPDATE "Kopa" SET "invited"='2016-10-21 05:28:03.086 +00:00',"updated_at"='2016-10-21 05:28:03.086 +00:00' WHERE "id" = '33'
[2016-10-21 10:28:03.098] [INFO] console - Executing (50a02813-6ea6-43bb-ba6f-1608c6fd900f): COMMIT;
[2016-10-21 10:28:03.105] [INFO] console - [ 70, 1093, {}, [ undefined ] ]
[2016-10-21 10:28:03.110] [INFO] console - [ 16, 1307894700048384, {}, 'ru.kopa.model.Kopa.id33.change' ]
[2016-10-21 10:28:03.116] [INFO] console - [ 16,
  1851888003710976,
  {},
  'ru.kopa.model.Zemla.id2.kopaAdd',
  [ 33 ] ]
[2016-10-21 10:28:03.124] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 33 }
[2016-10-21 10:28:03.126] [INFO] console - Executing (4e198e56-9830-433c-80ad-5736b71c1d58): START TRANSACTION;
[2016-10-21 10:28:03.127] [INFO] console - Executing (4e198e56-9830-433c-80ad-5736b71c1d58): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.139] [INFO] console - Executing (default): SELECT "Kopa"."id", "Kopa"."question", "Kopa"."invited", "Kopa"."note", "Kopa"."created_at", "Kopa"."updated_at", "Kopa"."deleted_at", "Kopa"."place_id", "Kopa"."inviter_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopa" AS "Kopa" LEFT OUTER JOIN "File" AS "attachments" ON "Kopa"."id" = "attachments"."kopa_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = 33);
[2016-10-21 10:28:03.144] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:03.155] [INFO] console - Executing (4e198e56-9830-433c-80ad-5736b71c1d58): COMMIT;
[2016-10-21 10:28:03.156] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): START TRANSACTION;
[2016-10-21 10:28:03.163] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.164] [INFO] console - [ 70,
  1094,
  {},
  [ { id: '33',
      question: 'temp',
      invited: Fri Oct 21 2016 10:28:03 GMT+0500 (YEKT),
      note: null,
      created_at: Fri Oct 21 2016 10:28:03 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:03 GMT+0500 (YEKT),
      deleted_at: null,
      place_id: '2',
      inviter_id: '2',
      attachments: [] } ] ]
[2016-10-21 10:28:03.176] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:28:03.181] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:28:03.187] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/','2016-10-21 05:28:03.172 +00:00','2016-10-21 05:28:03.172 +00:00',2) RETURNING *;
[2016-10-21 10:28:03.191] [INFO] console - Executing (2d311a86-f4bb-4756-88bc-aad5824e973b): COMMIT;
[2016-10-21 10:28:03.193] [INFO] console - [ 70, 1095, {}, [ '33' ] ]
[2016-10-21 10:28:03.196] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:28:03.201] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('2', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:03.204] [INFO] console - [ 16,
  1724332048908288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:28:03.213] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:03.214] [INFO] console - [ 16,
  1531862545596416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 99 } ]
[2016-10-21 10:28:03.220] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): START TRANSACTION;
[2016-10-21 10:28:03.221] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.226] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 33);
[2016-10-21 10:28:03.230] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 0
                                where
                                    '/1/2/33/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= null
                                    )
[2016-10-21 10:28:03.235] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): INSERT INTO "Zemla" ("id","name","intensity","obshinaSize","path","created_at","updated_at","parent_id") VALUES (DEFAULT,'temp',1000,0,'/1/2/33/','2016-10-21 05:28:03.223 +00:00','2016-10-21 05:28:03.223 +00:00',33) RETURNING *;
[2016-10-21 10:28:03.239] [INFO] console - Executing (d5936815-181e-4c53-9ea4-d71640fa0607): COMMIT;
[2016-10-21 10:28:03.240] [INFO] console - [ 70, 1096, {}, [ '34' ] ]
[2016-10-21 10:28:03.243] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/33/' like z.path||z.id||'/%'
[2016-10-21 10:28:03.248] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('2', '1', '33')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:03.251] [INFO] console - [ 16,
  5292144768057344,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id33.obshinaChange',
  [],
  { obshinaSize: 0 } ]
[2016-10-21 10:28:03.255] [INFO] console - [ 16,
  7888409462833152,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:28:03.262] [INFO] console - [ 16,
  8993773820313600,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 99 } ]
[2016-10-21 10:28:03.271] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 10:28:03.278] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): START TRANSACTION;
[2016-10-21 10:28:03.279] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.290] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 05:28:03.280 +00:00','2016-10-21 05:28:03.280 +00:00',34,NULL) RETURNING *;
[2016-10-21 10:28:03.293] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 10:28:03.297] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '34');
[2016-10-21 10:28:03.301] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/2/33/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 34
                                    )
[2016-10-21 10:28:03.304] [INFO] console - Executing (605bc3df-73db-43c3-97f5-dfea2dbad090): COMMIT;
[2016-10-21 10:28:03.307] [INFO] console - [ 70, 1097, {}, [ '100' ] ]
[2016-10-21 10:28:03.318] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '34');
[2016-10-21 10:28:03.321] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/33/' like z.path||z.id||'/%'
[2016-10-21 10:28:03.325] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('2', '1', '33')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:03.328] [INFO] console - [ 16,
  7744411626635264,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id34.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:28:03.336] [INFO] console - [ 16,
  7762675259932672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id33.obshinaChange',
  [],
  { obshinaSize: 1 } ]
[2016-10-21 10:28:03.346] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 4 }
[2016-10-21 10:28:03.348] [INFO] console - [ 16,
  7716910011514880,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 10:28:03.356] [INFO] console - Executing (082e916d-fada-4db7-838b-d138eb8b9c1c): START TRANSACTION;
[2016-10-21 10:28:03.358] [INFO] console - [ 16,
  2220552167096320,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 100 } ]
[2016-10-21 10:28:03.367] [INFO] console - Executing (082e916d-fada-4db7-838b-d138eb8b9c1c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.373] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:28:03.378] [INFO] console - Executing (082e916d-fada-4db7-838b-d138eb8b9c1c): COMMIT;
[2016-10-21 10:28:03.379] [INFO] console - [ 70,
  1098,
  {},
  [ { fullPath: '/1/4/',
      id: '4',
      name: 'UnitTest4',
      intensity: 1000,
      obshinaSize: 1,
      path: '/1/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:28:03.394] [INFO] console - Executing (c891b65a-2910-4ce0-ac82-1da751e706b3): START TRANSACTION;
[2016-10-21 10:28:03.395] [INFO] console - Executing (c891b65a-2910-4ce0-ac82-1da751e706b3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:28:03.399] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 33);
[2016-10-21 10:28:03.403] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 4);
[2016-10-21 10:28:03.407] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/2/' like z.path||z.id||'/%'
[2016-10-21 10:28:03.411] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('2', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:03.416] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"- 1
                                where
                                    '/1/2/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 33
                                    )
[2016-10-21 10:28:03.427] [INFO] console - Executing (default): UPDATE "Zemla" SET "parent_id"='4',"updated_at"='2016-10-21 05:28:03.418 +00:00' WHERE "id" = '33'
[2016-10-21 10:28:03.434] [INFO] console - Executing (default): update "Zemla"
                                set
                                    path= replace(path, '/1/2/', '/1/4/')
                                where
                                    id = '33'
                                    or path like '/1/2/33/'||'%'
[2016-10-21 10:28:03.437] [INFO] console - Executing (default): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/4/' like path||id||'/%'
                                    or (
                                        false 
                                        and id= 33
                                    )
[2016-10-21 10:28:03.441] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/4/' like z.path||z.id||'/%'
[2016-10-21 10:28:03.445] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('4', '1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 10:28:03.448] [INFO] console - Executing (c891b65a-2910-4ce0-ac82-1da751e706b3): COMMIT;
[2016-10-21 10:28:03.450] [INFO] console - [ 70, 1099, {}, [ undefined ] ]
[2016-10-21 10:28:03.453] [INFO] console - [ 16,
  4854213318279168,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 5 } ]
[2016-10-21 10:28:03.457] [INFO] console - [ 16,
  7816017275256832,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 99 } ]
[2016-10-21 10:28:03.461] [INFO] console - [ 16,
  5032679504347136,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id4.obshinaChange',
  [],
  { obshinaSize: 2 } ]
[2016-10-21 10:28:03.465] [INFO] console - [ 16,
  884845293076480,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 100 } ]
[2016-10-21 10:35:15.384] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:35:15.449] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:35:15.524] [INFO] console - Executing (12a6048c-aebd-4b47-bd8f-b8b7fc331738): START TRANSACTION;
[2016-10-21 10:35:15.542] [INFO] console - Executing (12a6048c-aebd-4b47-bd8f-b8b7fc331738): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:35:15.543] [INFO] console - Executing (2382bad3-089c-4472-86e1-07e6950a6e5f): START TRANSACTION;
[2016-10-21 10:35:15.546] [INFO] console - Executing (2382bad3-089c-4472-86e1-07e6950a6e5f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:35:15.621] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:35:15.643] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:35:15.650] [INFO] console - Executing (12a6048c-aebd-4b47-bd8f-b8b7fc331738): COMMIT;
[2016-10-21 10:35:15.656] [INFO] console - [ 70,
  1101,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:35:15.690] [INFO] console - Executing (2382bad3-089c-4472-86e1-07e6950a6e5f): COMMIT;
[2016-10-21 10:35:15.693] [INFO] console - [ 70,
  1102,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:56 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:35:15.809] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:35:15.812] [INFO] console - Executing (c65cf904-d455-4078-814b-dc15b7443c13): START TRANSACTION;
[2016-10-21 10:35:15.814] [INFO] console - Executing (c65cf904-d455-4078-814b-dc15b7443c13): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:35:15.826] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:35:15.837] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:35:15.841] [INFO] console - Executing (c65cf904-d455-4078-814b-dc15b7443c13): COMMIT;
[2016-10-21 10:35:15.843] [INFO] console - Executing (87fb8984-d43b-4537-9994-eb4e11f844a0): START TRANSACTION;
[2016-10-21 10:35:15.846] [INFO] console - Executing (87fb8984-d43b-4537-9994-eb4e11f844a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:35:15.848] [INFO] console - [ 70,
  1103,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027679284',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:35:15.869] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:35:15.876] [INFO] console - Executing (87fb8984-d43b-4537-9994-eb4e11f844a0): COMMIT;
[2016-10-21 10:35:15.879] [INFO] console - [ 70,
  1104,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: 'unit test 1477027679284',
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:28:02 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:35:15.998] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 10:35:16.003] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 10:35:16.007] [INFO] console - Executing (cbd22172-6990-41ec-bd06-71716cd50876): START TRANSACTION;
[2016-10-21 10:35:16.011] [INFO] console - Executing (cbd22172-6990-41ec-bd06-71716cd50876): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:35:16.026] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '33', '32', '31', '30', '29', '28', '27', '26', '25', '24', '23', '22', '21', '20', '19', '18', '17', '16', '15', '14', '13', '12', '11', '10')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 10:35:16.051] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 10:35:16.054] [INFO] console - [ 70,
  1105,
  {},
  [ [ [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object],
      [Object] ] ] ]
[2016-10-21 10:35:16.071] [INFO] console - Executing (cbd22172-6990-41ec-bd06-71716cd50876): COMMIT;
[2016-10-21 10:35:16.073] [INFO] console - [ 70,
  1106,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 100,
      path: '/',
      note: null,
      created_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      updated_at: Thu Oct 20 2016 14:30:55 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:36:49.800] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:36:49.867] [INFO] console - Executing (cde61f45-971a-4c97-9f9b-815844211179): START TRANSACTION;
[2016-10-21 10:36:49.873] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:36:49.887] [INFO] console - Executing (cde61f45-971a-4c97-9f9b-815844211179): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:49.944] [INFO] console - Executing (cf041ace-a6c8-4388-b4e9-8b3432f9301f): START TRANSACTION;
[2016-10-21 10:36:49.954] [INFO] console - Executing (cf041ace-a6c8-4388-b4e9-8b3432f9301f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:49.969] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:36:49.983] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:36:49.999] [INFO] console - Executing (cde61f45-971a-4c97-9f9b-815844211179): COMMIT;
[2016-10-21 10:36:50.008] [INFO] console - Executing (cf041ace-a6c8-4388-b4e9-8b3432f9301f): COMMIT;
[2016-10-21 10:36:50.010] [INFO] console - [ 70,
  1108,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:36:50.020] [INFO] console - [ 70,
  1109,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:36:50.068] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:36:50.071] [INFO] console - Executing (e51a5a86-2a16-4c00-b483-0a77dd741d9f): START TRANSACTION;
[2016-10-21 10:36:50.072] [INFO] console - Executing (e51a5a86-2a16-4c00-b483-0a77dd741d9f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:50.078] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:36:50.082] [INFO] console - Executing (c34142ce-88d4-4167-890c-1cdf9d85c678): START TRANSACTION;
[2016-10-21 10:36:50.099] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:36:50.105] [INFO] console - Executing (c34142ce-88d4-4167-890c-1cdf9d85c678): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:50.116] [INFO] console - Executing (e51a5a86-2a16-4c00-b483-0a77dd741d9f): COMMIT;
[2016-10-21 10:36:50.123] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:36:50.126] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:36:50.130] [INFO] console - Executing (3327fd95-8cf5-4569-9a0d-4c21b7c7ad7a): START TRANSACTION;
[2016-10-21 10:36:50.131] [INFO] console - [ 70,
  1110,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:36:50.143] [INFO] console - Executing (3327fd95-8cf5-4569-9a0d-4c21b7c7ad7a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:50.145] [INFO] console - Executing (c34142ce-88d4-4167-890c-1cdf9d85c678): COMMIT;
[2016-10-21 10:36:50.159] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:36:50.166] [INFO] console - [ 70,
  1111,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:36:50.179] [INFO] console - Executing (3327fd95-8cf5-4569-9a0d-4c21b7c7ad7a): COMMIT;
[2016-10-21 10:36:50.181] [INFO] console - [ 70,
  1112,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:36:50.207] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 10:36:50.230] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 10:36:50.236] [INFO] console - [ 70, 1113, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 10:36:50.286] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 10:36:50.290] [INFO] console - Executing (05aa62a4-0367-44e5-9c2a-73c363f188b8): START TRANSACTION;
[2016-10-21 10:36:50.291] [INFO] console - Executing (05aa62a4-0367-44e5-9c2a-73c363f188b8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:36:50.307] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 10:36:50.315] [INFO] console - Executing (05aa62a4-0367-44e5-9c2a-73c363f188b8): COMMIT;
[2016-10-21 10:36:50.319] [INFO] console - [ 70,
  1114,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:36:58.879] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=4
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:36:58.890] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN (NULL)) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:36:58.892] [INFO] console - [ 70, 1115, {}, [ [] ] ]
[2016-10-21 10:36:58.939] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=4
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:36:58.946] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN (NULL)) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:36:58.951] [INFO] console - [ 70, 1116, {}, [ [] ] ]
[2016-10-21 10:37:01.885] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 10:37:01.896] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 10:37:01.900] [INFO] console - [ 70, 1117, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:37:01.941] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 10:37:01.958] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 10:37:01.961] [INFO] console - [ 70, 1118, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 10:37:02.008] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 10:37:02.029] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 10:37:02.031] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 10:37:02.032] [INFO] console - [ 70, 1119, {}, [ [] ] ]
[2016-10-21 10:37:02.043] [INFO] console - [ 70, 1120, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:37:02.054] [INFO] console - [ 70, 1121, {}, [ [] ] ]
[2016-10-21 10:37:02.174] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 10:37:02.177] [INFO] console - Executing (220d65d8-3949-483e-b607-667e414b2ad8): START TRANSACTION;
[2016-10-21 10:37:02.179] [INFO] console - Executing (220d65d8-3949-483e-b607-667e414b2ad8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:02.194] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 10:37:02.196] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 10:37:02.198] [INFO] console - Executing (9d0e3f2d-e947-418b-b28c-3eb1229a3950): START TRANSACTION;
[2016-10-21 10:37:02.209] [INFO] console - Executing (220d65d8-3949-483e-b607-667e414b2ad8): COMMIT;
[2016-10-21 10:37:02.212] [INFO] console - Executing (9d0e3f2d-e947-418b-b28c-3eb1229a3950): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:02.221] [INFO] console - [ 70,
  1122,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:37:02.256] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 10:37:02.267] [INFO] console - Executing (9d0e3f2d-e947-418b-b28c-3eb1229a3950): COMMIT;
[2016-10-21 10:37:02.269] [INFO] console - [ 70,
  1123,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:37:27.576] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:37:27.595] [INFO] console - [ 70, 1124, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:37:31.422] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:37:31.427] [INFO] console - [ 70, 1125, {}, [ [ [Object] ] ] ]
[2016-10-21 10:37:54.276] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:37:54.331] [INFO] console - Executing (7911da26-39ed-43f2-a58b-787e0b25b896): START TRANSACTION;
[2016-10-21 10:37:54.333] [INFO] console - Executing (7911da26-39ed-43f2-a58b-787e0b25b896): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:54.376] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:37:54.391] [INFO] console - Executing (7911da26-39ed-43f2-a58b-787e0b25b896): COMMIT;
[2016-10-21 10:37:54.393] [INFO] console - [ 70,
  1127,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:37:54.422] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:37:54.424] [INFO] console - Executing (a02c2a29-2cf2-4385-9c38-a3336ffbbfb4): START TRANSACTION;
[2016-10-21 10:37:54.426] [INFO] console - Executing (a02c2a29-2cf2-4385-9c38-a3336ffbbfb4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:54.440] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:37:54.444] [INFO] console - Executing (a02c2a29-2cf2-4385-9c38-a3336ffbbfb4): COMMIT;
[2016-10-21 10:37:54.446] [INFO] console - [ 70,
  1128,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:37:54.870] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:37:54.879] [INFO] console - Executing (87d957cb-3ca6-47a4-9cae-281e6c50de15): START TRANSACTION;
[2016-10-21 10:37:54.881] [INFO] console - Executing (87d957cb-3ca6-47a4-9cae-281e6c50de15): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:54.897] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:37:54.907] [INFO] console - Executing (87d957cb-3ca6-47a4-9cae-281e6c50de15): COMMIT;
[2016-10-21 10:37:54.919] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:37:54.926] [INFO] console - Executing (c70e5a30-8188-4668-bda9-825c12512cf2): START TRANSACTION;
[2016-10-21 10:37:54.928] [INFO] console - [ 70,
  1129,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:37:54.940] [INFO] console - Executing (c70e5a30-8188-4668-bda9-825c12512cf2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:54.949] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:37:54.966] [INFO] console - Executing (c70e5a30-8188-4668-bda9-825c12512cf2): COMMIT;
[2016-10-21 10:37:54.967] [INFO] console - [ 70,
  1130,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:37:55.068] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 10:37:55.086] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 10:37:55.094] [INFO] console - [ 70, 1131, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 10:37:55.150] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 10:37:55.152] [INFO] console - Executing (fe1e14ad-c8be-4aff-b857-94bcd018aad0): START TRANSACTION;
[2016-10-21 10:37:55.155] [INFO] console - Executing (fe1e14ad-c8be-4aff-b857-94bcd018aad0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:37:55.168] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 10:37:55.178] [INFO] console - Executing (fe1e14ad-c8be-4aff-b857-94bcd018aad0): COMMIT;
[2016-10-21 10:37:55.182] [INFO] console - [ 70,
  1132,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:38:30.276] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:38:30.331] [INFO] console - Executing (1a47b5e3-c706-4818-af78-c65931ac9efe): START TRANSACTION;
[2016-10-21 10:38:30.334] [INFO] console - Executing (1a47b5e3-c706-4818-af78-c65931ac9efe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:38:30.384] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:38:30.395] [INFO] console - Executing (1a47b5e3-c706-4818-af78-c65931ac9efe): COMMIT;
[2016-10-21 10:38:30.402] [INFO] console - [ 70,
  1134,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:38:30.533] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:38:30.540] [INFO] console - Executing (885316be-92c1-437b-995f-f91cdb393409): START TRANSACTION;
[2016-10-21 10:38:30.552] [INFO] console - Executing (885316be-92c1-437b-995f-f91cdb393409): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:38:30.560] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:38:30.570] [INFO] console - Executing (885316be-92c1-437b-995f-f91cdb393409): COMMIT;
[2016-10-21 10:38:30.572] [INFO] console - [ 70,
  1135,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:38:30.837] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:38:30.840] [INFO] console - Executing (556f8f40-60cc-4bfa-a243-3cadbfbb14d8): START TRANSACTION;
[2016-10-21 10:38:30.841] [INFO] console - Executing (556f8f40-60cc-4bfa-a243-3cadbfbb14d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:38:30.847] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:38:30.873] [INFO] console - Executing (556f8f40-60cc-4bfa-a243-3cadbfbb14d8): COMMIT;
[2016-10-21 10:38:30.875] [INFO] console - [ 70,
  1136,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:38:30.884] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:38:30.887] [INFO] console - Executing (2b34a081-85c9-4bb0-8bd7-c7cc911d07d8): START TRANSACTION;
[2016-10-21 10:38:30.889] [INFO] console - Executing (2b34a081-85c9-4bb0-8bd7-c7cc911d07d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:38:30.901] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:38:30.910] [INFO] console - Executing (2b34a081-85c9-4bb0-8bd7-c7cc911d07d8): COMMIT;
[2016-10-21 10:38:30.912] [INFO] console - [ 70,
  1137,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:38:31.199] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 10:38:31.202] [INFO] console - Executing (566d7710-6514-405c-987b-be6579ad30ca): START TRANSACTION;
[2016-10-21 10:38:31.204] [INFO] console - Executing (566d7710-6514-405c-987b-be6579ad30ca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:38:31.217] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 10:38:31.226] [INFO] console - Executing (566d7710-6514-405c-987b-be6579ad30ca): COMMIT;
[2016-10-21 10:38:31.227] [INFO] console - [ 70,
  1138,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:38:51.658] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:38:51.674] [INFO] console - [ 70, 1139, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:39:10.234] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:39:10.250] [INFO] console - [ 70, 1140, {}, [ [ [Object] ] ] ]
[2016-10-21 10:56:33.282] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:56:33.416] [INFO] console - Executing (3fdd7749-232e-4942-8cd4-20fa008a5ec0): START TRANSACTION;
[2016-10-21 10:56:33.421] [INFO] console - Executing (3fdd7749-232e-4942-8cd4-20fa008a5ec0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:56:33.483] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:56:33.497] [INFO] console - Executing (3fdd7749-232e-4942-8cd4-20fa008a5ec0): COMMIT;
[2016-10-21 10:56:33.503] [INFO] console - [ 70,
  1142,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:56:33.519] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 10:56:33.524] [INFO] console - Executing (c93efaa2-3426-4e08-81ac-56b839455b29): START TRANSACTION;
[2016-10-21 10:56:33.529] [INFO] console - Executing (c93efaa2-3426-4e08-81ac-56b839455b29): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:56:33.536] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 10:56:33.546] [INFO] console - Executing (c93efaa2-3426-4e08-81ac-56b839455b29): COMMIT;
[2016-10-21 10:56:33.548] [INFO] console - [ 70,
  1143,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 10:56:33.918] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:56:33.920] [INFO] console - Executing (640e6470-3421-418c-8e22-d6f470c3caba): START TRANSACTION;
[2016-10-21 10:56:33.922] [INFO] console - Executing (640e6470-3421-418c-8e22-d6f470c3caba): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:56:33.934] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:56:33.976] [INFO] console - Executing (640e6470-3421-418c-8e22-d6f470c3caba): COMMIT;
[2016-10-21 10:56:33.980] [INFO] console - [ 70,
  1144,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:56:33.996] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 10:56:34.000] [INFO] console - Executing (c126ad34-928c-4f71-9212-8cb8844b282a): START TRANSACTION;
[2016-10-21 10:56:34.005] [INFO] console - Executing (c126ad34-928c-4f71-9212-8cb8844b282a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:56:34.030] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 10:56:34.035] [INFO] console - Executing (c126ad34-928c-4f71-9212-8cb8844b282a): COMMIT;
[2016-10-21 10:56:34.037] [INFO] console - [ 70,
  1145,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 10:56:34.116] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 10:56:34.119] [INFO] console - Executing (295f8030-58c7-407b-9e65-cf276e7b9930): START TRANSACTION;
[2016-10-21 10:56:34.122] [INFO] console - Executing (295f8030-58c7-407b-9e65-cf276e7b9930): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 10:56:34.131] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 10:56:34.136] [INFO] console - Executing (295f8030-58c7-407b-9e65-cf276e7b9930): COMMIT;
[2016-10-21 10:56:34.138] [INFO] console - [ 70,
  1146,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 10:56:36.122] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:56:36.136] [INFO] console - [ 70, 1147, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 10:56:37.695] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:56:37.710] [INFO] console - [ 70, 1148, {}, [ [ [Object] ] ] ]
[2016-10-21 10:56:40.705] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:56:40.707] [INFO] console - [ 70, 1149, {}, [ [] ] ]
[2016-10-21 10:56:41.509] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 6) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 10:56:41.514] [INFO] console - [ 70, 1150, {}, [ [] ] ]
[2016-10-21 11:02:03.532] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:02:03.663] [INFO] console - Executing (63700f07-e84a-4655-b316-6cdec721b6ac): START TRANSACTION;
[2016-10-21 11:02:03.666] [INFO] console - Executing (63700f07-e84a-4655-b316-6cdec721b6ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:02:03.691] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:02:03.745] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:02:03.761] [INFO] console - Executing (ee025fdd-86cd-4a8c-9954-5c549e6fc9b2): START TRANSACTION;
[2016-10-21 11:02:03.769] [INFO] console - Executing (63700f07-e84a-4655-b316-6cdec721b6ac): COMMIT;
[2016-10-21 11:02:03.771] [INFO] console - Executing (ee025fdd-86cd-4a8c-9954-5c549e6fc9b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:02:03.778] [INFO] console - [ 70,
  1152,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:02:03.792] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:02:03.803] [INFO] console - Executing (ee025fdd-86cd-4a8c-9954-5c549e6fc9b2): COMMIT;
[2016-10-21 11:02:03.804] [INFO] console - [ 70,
  1153,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:02:03.985] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:02:03.988] [INFO] console - Executing (c71886e7-b4ce-49cc-801f-094dce6a8350): START TRANSACTION;
[2016-10-21 11:02:03.994] [INFO] console - Executing (c71886e7-b4ce-49cc-801f-094dce6a8350): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:02:04.002] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:02:04.014] [INFO] console - Executing (c71886e7-b4ce-49cc-801f-094dce6a8350): COMMIT;
[2016-10-21 11:02:04.015] [INFO] console - [ 70,
  1154,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:02:04.028] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:02:04.031] [INFO] console - Executing (4aa7cdd3-9927-46e9-a7d4-53455259741f): START TRANSACTION;
[2016-10-21 11:02:04.033] [INFO] console - Executing (4aa7cdd3-9927-46e9-a7d4-53455259741f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:02:04.042] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:02:04.046] [INFO] console - Executing (4aa7cdd3-9927-46e9-a7d4-53455259741f): COMMIT;
[2016-10-21 11:02:04.047] [INFO] console - [ 70,
  1155,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:02:04.135] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:02:04.159] [INFO] console - Executing (caa1d826-42f3-4a18-9fcf-25e253b3bd7b): START TRANSACTION;
[2016-10-21 11:02:04.161] [INFO] console - Executing (caa1d826-42f3-4a18-9fcf-25e253b3bd7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:02:04.174] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:02:04.189] [INFO] console - Executing (caa1d826-42f3-4a18-9fcf-25e253b3bd7b): COMMIT;
[2016-10-21 11:02:04.190] [INFO] console - [ 70,
  1156,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:02:06.890] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:02:06.905] [INFO] console - [ 70, 1157, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:02:08.270] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:02:08.283] [INFO] console - [ 70, 1158, {}, [ [ [Object] ] ] ]
[2016-10-21 11:04:22.907] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:04:22.978] [INFO] console - Executing (f94fe221-6bc7-46e1-89d7-9f83d98d53d6): START TRANSACTION;
[2016-10-21 11:04:22.980] [INFO] console - Executing (f94fe221-6bc7-46e1-89d7-9f83d98d53d6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:04:23.036] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:04:23.069] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:04:23.103] [INFO] console - Executing (19ea2169-fd19-4ed9-9e68-b41ae113745f): START TRANSACTION;
[2016-10-21 11:04:23.106] [INFO] console - Executing (19ea2169-fd19-4ed9-9e68-b41ae113745f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:04:23.121] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:04:23.132] [INFO] console - Executing (f94fe221-6bc7-46e1-89d7-9f83d98d53d6): COMMIT;
[2016-10-21 11:04:23.140] [INFO] console - Executing (19ea2169-fd19-4ed9-9e68-b41ae113745f): COMMIT;
[2016-10-21 11:04:23.143] [INFO] console - [ 70,
  1160,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:04:23.150] [INFO] console - [ 70,
  1161,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:04:23.302] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:04:23.304] [INFO] console - Executing (b4c6e4e0-715c-44e7-855d-b7f4b770c24c): START TRANSACTION;
[2016-10-21 11:04:23.306] [INFO] console - Executing (b4c6e4e0-715c-44e7-855d-b7f4b770c24c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:04:23.324] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:04:23.333] [INFO] console - Executing (b4c6e4e0-715c-44e7-855d-b7f4b770c24c): COMMIT;
[2016-10-21 11:04:23.335] [INFO] console - [ 70,
  1162,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:04:23.346] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:04:23.349] [INFO] console - Executing (85234b2d-f2db-4586-8b78-a851f690b03c): START TRANSACTION;
[2016-10-21 11:04:23.351] [INFO] console - Executing (85234b2d-f2db-4586-8b78-a851f690b03c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:04:23.362] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:04:23.378] [INFO] console - Executing (85234b2d-f2db-4586-8b78-a851f690b03c): COMMIT;
[2016-10-21 11:04:23.380] [INFO] console - [ 70,
  1163,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:04:23.505] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:04:23.507] [INFO] console - Executing (e6e4693a-b6ca-48ad-a91b-b63fec00ef5a): START TRANSACTION;
[2016-10-21 11:04:23.512] [INFO] console - Executing (e6e4693a-b6ca-48ad-a91b-b63fec00ef5a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:04:23.526] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:04:23.533] [INFO] console - Executing (e6e4693a-b6ca-48ad-a91b-b63fec00ef5a): COMMIT;
[2016-10-21 11:04:23.537] [INFO] console - [ 70,
  1164,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:04:25.599] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:04:25.607] [INFO] console - [ 70, 1165, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:04:26.613] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:04:26.631] [INFO] console - [ 70, 1166, {}, [ [ [Object] ] ] ]
[2016-10-21 11:04:28.913] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:04:28.918] [INFO] console - [ 70, 1167, {}, [ [] ] ]
[2016-10-21 11:04:32.902] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 6) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:04:32.908] [INFO] console - [ 70, 1168, {}, [ [] ] ]
[2016-10-21 11:06:34.122] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:06:34.178] [INFO] console - Executing (f06add51-6faa-49ec-ba27-4ea2eee73ac5): START TRANSACTION;
[2016-10-21 11:06:34.181] [INFO] console - Executing (f06add51-6faa-49ec-ba27-4ea2eee73ac5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:06:34.225] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:06:34.231] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:06:34.253] [INFO] console - Executing (ab071dee-b780-4b38-bc3c-98185b138404): START TRANSACTION;
[2016-10-21 11:06:34.256] [INFO] console - Executing (f06add51-6faa-49ec-ba27-4ea2eee73ac5): COMMIT;
[2016-10-21 11:06:34.260] [INFO] console - Executing (ab071dee-b780-4b38-bc3c-98185b138404): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:06:34.276] [INFO] console - [ 70,
  1170,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:06:34.289] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:06:34.370] [INFO] console - Executing (ab071dee-b780-4b38-bc3c-98185b138404): COMMIT;
[2016-10-21 11:06:34.402] [INFO] console - [ 70,
  1171,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:06:34.453] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:06:34.456] [INFO] console - Executing (0a46d1cb-dbab-4c62-bdc1-e3b759917463): START TRANSACTION;
[2016-10-21 11:06:34.460] [INFO] console - Executing (0a46d1cb-dbab-4c62-bdc1-e3b759917463): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:06:34.511] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:06:34.520] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:06:34.540] [INFO] console - Executing (0a55ff09-e0ea-40e3-8810-8dbf834d2b8a): START TRANSACTION;
[2016-10-21 11:06:34.543] [INFO] console - Executing (0a46d1cb-dbab-4c62-bdc1-e3b759917463): COMMIT;
[2016-10-21 11:06:34.545] [INFO] console - Executing (0a55ff09-e0ea-40e3-8810-8dbf834d2b8a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:06:34.549] [INFO] console - [ 70,
  1172,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:06:34.587] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:06:34.597] [INFO] console - Executing (0a55ff09-e0ea-40e3-8810-8dbf834d2b8a): COMMIT;
[2016-10-21 11:06:34.599] [INFO] console - [ 70,
  1173,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:06:34.668] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:06:34.675] [INFO] console - Executing (934d3419-ee34-4f66-9f6e-d95d73eda706): START TRANSACTION;
[2016-10-21 11:06:34.677] [INFO] console - Executing (934d3419-ee34-4f66-9f6e-d95d73eda706): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:06:34.687] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:06:34.693] [INFO] console - Executing (934d3419-ee34-4f66-9f6e-d95d73eda706): COMMIT;
[2016-10-21 11:06:34.696] [INFO] console - [ 70,
  1174,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:06:37.454] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:06:37.460] [INFO] console - [ 70, 1175, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:06:38.452] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:06:38.459] [INFO] console - [ 70, 1176, {}, [ [ [Object] ] ] ]
[2016-10-21 11:06:39.469] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:06:39.473] [INFO] console - [ 70, 1177, {}, [ [] ] ]
[2016-10-21 11:14:08.486] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:14:08.560] [INFO] console - Executing (9a36f27d-e175-425f-b380-f7c82e77b59b): START TRANSACTION;
[2016-10-21 11:14:08.576] [INFO] console - Executing (9a36f27d-e175-425f-b380-f7c82e77b59b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:08.592] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:14:08.624] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:14:08.635] [INFO] console - Executing (a4e74495-50c6-4272-a3dd-1d47bec58c3c): START TRANSACTION;
[2016-10-21 11:14:08.641] [INFO] console - Executing (9a36f27d-e175-425f-b380-f7c82e77b59b): COMMIT;
[2016-10-21 11:14:08.646] [INFO] console - Executing (a4e74495-50c6-4272-a3dd-1d47bec58c3c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:08.648] [INFO] console - [ 70,
  1179,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:08.670] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:14:08.679] [INFO] console - Executing (a4e74495-50c6-4272-a3dd-1d47bec58c3c): COMMIT;
[2016-10-21 11:14:08.687] [INFO] console - [ 70,
  1180,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:08.846] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:14:08.848] [INFO] console - Executing (1fce8ff4-5a47-482d-9b73-0a1490594095): START TRANSACTION;
[2016-10-21 11:14:08.850] [INFO] console - Executing (1fce8ff4-5a47-482d-9b73-0a1490594095): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:08.865] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:14:08.867] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:14:08.873] [INFO] console - Executing (9f4bf896-909a-418e-9e1e-0f9e2762cde5): START TRANSACTION;
[2016-10-21 11:14:08.876] [INFO] console - Executing (1fce8ff4-5a47-482d-9b73-0a1490594095): COMMIT;
[2016-10-21 11:14:08.880] [INFO] console - Executing (9f4bf896-909a-418e-9e1e-0f9e2762cde5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:08.883] [INFO] console - [ 70,
  1181,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:14:08.898] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:14:08.904] [INFO] console - Executing (9f4bf896-909a-418e-9e1e-0f9e2762cde5): COMMIT;
[2016-10-21 11:14:08.905] [INFO] console - [ 70,
  1182,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:14:08.976] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:14:08.978] [INFO] console - Executing (69d101f2-f021-410b-956e-1956b7b03673): START TRANSACTION;
[2016-10-21 11:14:08.981] [INFO] console - Executing (69d101f2-f021-410b-956e-1956b7b03673): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:08.999] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:14:09.035] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:14:09.045] [INFO] console - Executing (e9127224-48be-4d5d-879d-f3afc29e5194): START TRANSACTION;
[2016-10-21 11:14:09.050] [INFO] console - Executing (69d101f2-f021-410b-956e-1956b7b03673): COMMIT;
[2016-10-21 11:14:09.051] [INFO] console - Executing (e9127224-48be-4d5d-879d-f3afc29e5194): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:09.057] [INFO] console - [ 70,
  1183,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:14:09.083] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:14:09.089] [INFO] console - Executing (e9127224-48be-4d5d-879d-f3afc29e5194): COMMIT;
[2016-10-21 11:14:09.096] [INFO] console - [ 70,
  1184,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:12.200] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:14:12.213] [INFO] console - [ 70, 1185, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:14:13.017] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:14:13.021] [INFO] console - [ 70, 1186, {}, [ [ [Object] ] ] ]
[2016-10-21 11:14:53.760] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:14:53.802] [INFO] console - Executing (621670b5-6222-40f6-bf82-55a0def59735): START TRANSACTION;
[2016-10-21 11:14:53.803] [INFO] console - Executing (621670b5-6222-40f6-bf82-55a0def59735): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:53.847] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:14:53.860] [INFO] console - Executing (621670b5-6222-40f6-bf82-55a0def59735): COMMIT;
[2016-10-21 11:14:53.864] [INFO] console - [ 70,
  1188,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:53.897] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:14:53.900] [INFO] console - Executing (cb4ce1b2-9618-4966-9dfe-64e5e613bf34): START TRANSACTION;
[2016-10-21 11:14:53.901] [INFO] console - Executing (cb4ce1b2-9618-4966-9dfe-64e5e613bf34): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:53.917] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:14:53.937] [INFO] console - Executing (cb4ce1b2-9618-4966-9dfe-64e5e613bf34): COMMIT;
[2016-10-21 11:14:53.939] [INFO] console - [ 70,
  1189,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:54.122] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:14:54.134] [INFO] console - Executing (518f4058-1278-4c65-b028-0829f606abfa): START TRANSACTION;
[2016-10-21 11:14:54.142] [INFO] console - Executing (518f4058-1278-4c65-b028-0829f606abfa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:54.159] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:14:54.172] [INFO] console - Executing (518f4058-1278-4c65-b028-0829f606abfa): COMMIT;
[2016-10-21 11:14:54.174] [INFO] console - [ 70,
  1190,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:14:54.225] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:14:54.228] [INFO] console - Executing (a7de3808-fa43-41ff-8d4c-4658c6640f2c): START TRANSACTION;
[2016-10-21 11:14:54.229] [INFO] console - Executing (a7de3808-fa43-41ff-8d4c-4658c6640f2c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:54.243] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:14:54.249] [INFO] console - Executing (a7de3808-fa43-41ff-8d4c-4658c6640f2c): COMMIT;
[2016-10-21 11:14:54.251] [INFO] console - [ 70,
  1191,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:14:54.469] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:14:54.512] [INFO] console - Executing (16d8aa0b-ce5a-4dda-8b56-653ec3daff25): START TRANSACTION;
[2016-10-21 11:14:54.529] [INFO] console - Executing (16d8aa0b-ce5a-4dda-8b56-653ec3daff25): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:14:54.614] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:14:54.635] [INFO] console - Executing (16d8aa0b-ce5a-4dda-8b56-653ec3daff25): COMMIT;
[2016-10-21 11:14:54.648] [INFO] console - [ 70,
  1192,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:14:57.122] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:14:57.172] [INFO] console - [ 70, 1193, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:15:53.914] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:15:54.085] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:15:54.263] [INFO] console - Executing (bee6cf58-be08-46f8-a1f8-3326745c53ee): START TRANSACTION;
[2016-10-21 11:15:54.277] [INFO] console - Executing (bee6cf58-be08-46f8-a1f8-3326745c53ee): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:54.278] [INFO] console - Executing (a384fd16-6ce9-4dbd-9bde-4f524ff41024): START TRANSACTION;
[2016-10-21 11:15:54.287] [INFO] console - Executing (a384fd16-6ce9-4dbd-9bde-4f524ff41024): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:54.362] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:15:54.377] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:15:54.413] [INFO] console - Executing (bee6cf58-be08-46f8-a1f8-3326745c53ee): COMMIT;
[2016-10-21 11:15:54.420] [INFO] console - Executing (a384fd16-6ce9-4dbd-9bde-4f524ff41024): COMMIT;
[2016-10-21 11:15:54.423] [INFO] console - [ 70,
  1195,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:15:54.448] [INFO] console - [ 70,
  1196,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:15:54.625] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:15:54.629] [INFO] console - Executing (7076acb3-bbba-4b6a-b3f6-5715233e494a): START TRANSACTION;
[2016-10-21 11:15:54.631] [INFO] console - Executing (7076acb3-bbba-4b6a-b3f6-5715233e494a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:54.640] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:15:54.647] [INFO] console - Executing (32a8a68d-f121-485d-9fe7-f93abd8d2a5b): START TRANSACTION;
[2016-10-21 11:15:54.666] [INFO] console - Executing (32a8a68d-f121-485d-9fe7-f93abd8d2a5b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:54.696] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:15:54.744] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:15:54.746] [INFO] console - Executing (7076acb3-bbba-4b6a-b3f6-5715233e494a): COMMIT;
[2016-10-21 11:15:54.766] [INFO] console - [ 70,
  1197,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:15:54.787] [INFO] console - Executing (32a8a68d-f121-485d-9fe7-f93abd8d2a5b): COMMIT;
[2016-10-21 11:15:54.801] [INFO] console - [ 70,
  1198,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:15:54.826] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:15:54.835] [INFO] console - Executing (0d8b0ffb-2c9a-4bab-9b94-52cfc06547c5): START TRANSACTION;
[2016-10-21 11:15:54.837] [INFO] console - Executing (0d8b0ffb-2c9a-4bab-9b94-52cfc06547c5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:54.855] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:15:54.867] [INFO] console - Executing (0d8b0ffb-2c9a-4bab-9b94-52cfc06547c5): COMMIT;
[2016-10-21 11:15:54.869] [INFO] console - [ 70,
  1199,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:15:55.163] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:15:55.244] [INFO] console - Executing (9f3e9067-4dfc-4d46-9ed3-b83e5e1592a9): START TRANSACTION;
[2016-10-21 11:15:55.246] [INFO] console - Executing (9f3e9067-4dfc-4d46-9ed3-b83e5e1592a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:15:55.451] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:15:55.496] [INFO] console - Executing (9f3e9067-4dfc-4d46-9ed3-b83e5e1592a9): COMMIT;
[2016-10-21 11:15:55.497] [INFO] console - [ 70,
  1200,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:15:56.573] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:15:56.605] [INFO] console - [ 70, 1201, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:15:58.204] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:15:58.217] [INFO] console - [ 70, 1202, {}, [ [ [Object] ] ] ]
[2016-10-21 11:17:14.608] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:17:14.725] [INFO] console - Executing (54db2fb6-6938-4373-9c75-b0c6168cbd8d): START TRANSACTION;
[2016-10-21 11:17:14.727] [INFO] console - Executing (54db2fb6-6938-4373-9c75-b0c6168cbd8d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:14.799] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:17:14.814] [INFO] console - Executing (54db2fb6-6938-4373-9c75-b0c6168cbd8d): COMMIT;
[2016-10-21 11:17:14.825] [INFO] console - [ 70,
  1204,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:17:14.925] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:17:14.938] [INFO] console - Executing (34edd3c9-ab36-4361-b897-729e9ae94699): START TRANSACTION;
[2016-10-21 11:17:14.950] [INFO] console - Executing (34edd3c9-ab36-4361-b897-729e9ae94699): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:14.963] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:17:14.983] [INFO] console - Executing (34edd3c9-ab36-4361-b897-729e9ae94699): COMMIT;
[2016-10-21 11:17:14.992] [INFO] console - [ 70,
  1205,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:17:15.253] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:17:15.259] [INFO] console - Executing (b68219e6-9d5f-47d1-ad1f-307090d4c98c): START TRANSACTION;
[2016-10-21 11:17:15.262] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:17:15.266] [INFO] console - Executing (dc569c2c-1972-41c6-b5b9-13a59bbaeb3e): START TRANSACTION;
[2016-10-21 11:17:15.267] [INFO] console - Executing (b68219e6-9d5f-47d1-ad1f-307090d4c98c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:15.280] [INFO] console - Executing (dc569c2c-1972-41c6-b5b9-13a59bbaeb3e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:15.377] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:17:15.393] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:17:15.406] [INFO] console - Executing (b68219e6-9d5f-47d1-ad1f-307090d4c98c): COMMIT;
[2016-10-21 11:17:15.417] [INFO] console - Executing (dc569c2c-1972-41c6-b5b9-13a59bbaeb3e): COMMIT;
[2016-10-21 11:17:15.419] [INFO] console - [ 70,
  1206,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:17:15.440] [INFO] console - [ 70,
  1207,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:17:15.516] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:17:15.526] [INFO] console - Executing (ecf49152-b321-4d50-bb45-2884d80f56e2): START TRANSACTION;
[2016-10-21 11:17:15.540] [INFO] console - Executing (ecf49152-b321-4d50-bb45-2884d80f56e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:15.563] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:17:15.582] [INFO] console - Executing (ecf49152-b321-4d50-bb45-2884d80f56e2): COMMIT;
[2016-10-21 11:17:15.590] [INFO] console - [ 70,
  1208,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:17:15.672] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:17:15.678] [INFO] console - Executing (7cbaa837-e205-4d68-9846-1bc458ada04b): START TRANSACTION;
[2016-10-21 11:17:15.690] [INFO] console - Executing (7cbaa837-e205-4d68-9846-1bc458ada04b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:17:15.714] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:17:15.727] [INFO] console - Executing (7cbaa837-e205-4d68-9846-1bc458ada04b): COMMIT;
[2016-10-21 11:17:15.733] [INFO] console - [ 70,
  1209,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:17:16.921] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:17:16.956] [INFO] console - [ 70, 1210, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:17:18.054] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:17:18.064] [INFO] console - [ 70, 1211, {}, [ [ [Object] ] ] ]
[2016-10-21 11:18:00.617] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:18:00.753] [INFO] console - Executing (0804ac81-72fd-44f9-8edf-496362f10600): START TRANSACTION;
[2016-10-21 11:18:00.756] [INFO] console - Executing (0804ac81-72fd-44f9-8edf-496362f10600): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:00.827] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:18:00.848] [INFO] console - Executing (0804ac81-72fd-44f9-8edf-496362f10600): COMMIT;
[2016-10-21 11:18:00.849] [INFO] console - [ 70,
  1213,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:18:00.893] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:18:00.901] [INFO] console - Executing (5ddec039-be61-48f1-a163-2292c91bb01f): START TRANSACTION;
[2016-10-21 11:18:00.907] [INFO] console - Executing (5ddec039-be61-48f1-a163-2292c91bb01f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:00.928] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:18:00.947] [INFO] console - Executing (5ddec039-be61-48f1-a163-2292c91bb01f): COMMIT;
[2016-10-21 11:18:00.951] [INFO] console - [ 70,
  1214,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:18:01.318] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:18:01.324] [INFO] console - Executing (8d312691-a463-47f0-a18b-f81faaf91f06): START TRANSACTION;
[2016-10-21 11:18:01.329] [INFO] console - Executing (8d312691-a463-47f0-a18b-f81faaf91f06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:01.336] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:18:01.351] [INFO] console - Executing (95102f50-5988-4f17-aea3-f19d03d68751): START TRANSACTION;
[2016-10-21 11:18:01.355] [INFO] console - Executing (95102f50-5988-4f17-aea3-f19d03d68751): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:01.418] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:18:01.451] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:18:01.463] [INFO] console - Executing (8d312691-a463-47f0-a18b-f81faaf91f06): COMMIT;
[2016-10-21 11:18:01.474] [INFO] console - Executing (95102f50-5988-4f17-aea3-f19d03d68751): COMMIT;
[2016-10-21 11:18:01.482] [INFO] console - [ 70,
  1215,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:18:02.001] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:18:02.013] [INFO] console - Executing (8578d020-f263-4fb7-969e-152bb28083b2): START TRANSACTION;
[2016-10-21 11:18:02.018] [INFO] console - [ 70,
  1216,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:18:02.035] [INFO] console - Executing (8578d020-f263-4fb7-969e-152bb28083b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:02.059] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:18:02.095] [INFO] console - Executing (8578d020-f263-4fb7-969e-152bb28083b2): COMMIT;
[2016-10-21 11:18:02.097] [INFO] console - [ 70,
  1217,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:18:02.155] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:18:02.162] [INFO] console - Executing (9cfee357-18f0-40e8-a37d-775b91538d5c): START TRANSACTION;
[2016-10-21 11:18:02.169] [INFO] console - Executing (9cfee357-18f0-40e8-a37d-775b91538d5c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:18:02.186] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:18:02.199] [INFO] console - Executing (9cfee357-18f0-40e8-a37d-775b91538d5c): COMMIT;
[2016-10-21 11:18:02.207] [INFO] console - [ 70,
  1218,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:18:09.324] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:18:09.338] [INFO] console - [ 70, 1219, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:19:35.209] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:19:35.253] [INFO] console - [ 70, 1220, {}, [ [ [Object] ] ] ]
[2016-10-21 11:21:30.324] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:30.462] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:30.495] [INFO] console - Executing (5c002cb6-a462-4bfc-8be6-c63bf3ea7933): START TRANSACTION;
[2016-10-21 11:21:30.503] [INFO] console - Executing (5c002cb6-a462-4bfc-8be6-c63bf3ea7933): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:30.527] [INFO] console - Executing (8a09bf71-b8c9-4de6-8cdf-44b4a1ee3177): START TRANSACTION;
[2016-10-21 11:21:30.554] [INFO] console - Executing (8a09bf71-b8c9-4de6-8cdf-44b4a1ee3177): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:30.605] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:30.621] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:30.635] [INFO] console - Executing (5c002cb6-a462-4bfc-8be6-c63bf3ea7933): COMMIT;
[2016-10-21 11:21:30.646] [INFO] console - Executing (8a09bf71-b8c9-4de6-8cdf-44b4a1ee3177): COMMIT;
[2016-10-21 11:21:30.652] [INFO] console - [ 70,
  1222,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:30.670] [INFO] console - [ 70,
  1223,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:30.754] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:30.759] [INFO] console - Executing (5bf26486-c0fc-475a-94e4-d5da34098f21): START TRANSACTION;
[2016-10-21 11:21:30.763] [INFO] console - Executing (5bf26486-c0fc-475a-94e4-d5da34098f21): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:30.771] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:30.775] [INFO] console - Executing (6b9940e2-5c69-4f67-8db3-679128499fc9): START TRANSACTION;
[2016-10-21 11:21:30.785] [INFO] console - Executing (6b9940e2-5c69-4f67-8db3-679128499fc9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:30.802] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:30.817] [INFO] console - Executing (5bf26486-c0fc-475a-94e4-d5da34098f21): COMMIT;
[2016-10-21 11:21:30.832] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:30.844] [INFO] console - [ 70,
  1224,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:30.853] [INFO] console - Executing (6b9940e2-5c69-4f67-8db3-679128499fc9): COMMIT;
[2016-10-21 11:21:30.862] [INFO] console - [ 70,
  1225,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:30.939] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:30.954] [INFO] console - Executing (e1e1de10-7493-44c5-98e0-9e39a08f46cd): START TRANSACTION;
[2016-10-21 11:21:30.956] [INFO] console - Executing (e1e1de10-7493-44c5-98e0-9e39a08f46cd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:30.979] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:30.990] [INFO] console - Executing (e1e1de10-7493-44c5-98e0-9e39a08f46cd): COMMIT;
[2016-10-21 11:21:30.996] [INFO] console - [ 70,
  1226,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:31.031] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:21:31.040] [INFO] console - Executing (e78db223-8ebe-4510-85ff-aa3bff485336): START TRANSACTION;
[2016-10-21 11:21:31.042] [INFO] console - Executing (e78db223-8ebe-4510-85ff-aa3bff485336): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:31.071] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:21:31.086] [INFO] console - Executing (e78db223-8ebe-4510-85ff-aa3bff485336): COMMIT;
[2016-10-21 11:21:31.092] [INFO] console - [ 70,
  1227,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:32.494] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:32.510] [INFO] console - [ 70, 1228, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:21:33.630] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:33.645] [INFO] console - [ 70, 1229, {}, [ [ [Object] ] ] ]
[2016-10-21 11:21:40.494] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:40.511] [INFO] console - Executing (914d4654-8d96-4d6c-b43e-2ead908bca31): START TRANSACTION;
[2016-10-21 11:21:40.547] [INFO] console - Executing (914d4654-8d96-4d6c-b43e-2ead908bca31): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:40.576] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:40.603] [INFO] console - Executing (914d4654-8d96-4d6c-b43e-2ead908bca31): COMMIT;
[2016-10-21 11:21:40.611] [INFO] console - [ 70,
  1231,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:40.635] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:40.644] [INFO] console - Executing (f37e6f5e-edab-4bd6-b00a-80836847aa01): START TRANSACTION;
[2016-10-21 11:21:40.646] [INFO] console - Executing (f37e6f5e-edab-4bd6-b00a-80836847aa01): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:40.690] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:40.700] [INFO] console - Executing (f37e6f5e-edab-4bd6-b00a-80836847aa01): COMMIT;
[2016-10-21 11:21:40.706] [INFO] console - [ 70,
  1232,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:40.793] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:40.798] [INFO] console - Executing (0f28433f-f7ce-49fc-9fe0-9931ca8f8278): START TRANSACTION;
[2016-10-21 11:21:40.801] [INFO] console - Executing (0f28433f-f7ce-49fc-9fe0-9931ca8f8278): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:40.814] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:40.819] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:40.828] [INFO] console - Executing (78aaa555-7642-462e-a513-eeefcbd74433): START TRANSACTION;
[2016-10-21 11:21:40.832] [INFO] console - Executing (0f28433f-f7ce-49fc-9fe0-9931ca8f8278): COMMIT;
[2016-10-21 11:21:40.839] [INFO] console - Executing (78aaa555-7642-462e-a513-eeefcbd74433): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:40.846] [INFO] console - [ 70,
  1233,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:40.869] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:40.879] [INFO] console - Executing (78aaa555-7642-462e-a513-eeefcbd74433): COMMIT;
[2016-10-21 11:21:40.881] [INFO] console - [ 70,
  1234,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:40.953] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:21:40.963] [INFO] console - Executing (f41db101-bb4b-428b-8963-6ac568fdd6e5): START TRANSACTION;
[2016-10-21 11:21:40.968] [INFO] console - Executing (f41db101-bb4b-428b-8963-6ac568fdd6e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:40.992] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:21:40.997] [INFO] console - Executing (f41db101-bb4b-428b-8963-6ac568fdd6e5): COMMIT;
[2016-10-21 11:21:40.999] [INFO] console - [ 70,
  1235,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:43.189] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:43.201] [INFO] console - [ 70, 1236, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:21:44.438] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:44.454] [INFO] console - [ 70, 1237, {}, [ [ [Object] ] ] ]
[2016-10-21 11:21:49.075] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 6) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:49.081] [INFO] console - [ 70, 1238, {}, [ [] ] ]
[2016-10-21 11:21:54.763] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:54.783] [INFO] console - Executing (df2a9ed8-7c1b-47fe-92c7-001168548c96): START TRANSACTION;
[2016-10-21 11:21:54.790] [INFO] console - Executing (df2a9ed8-7c1b-47fe-92c7-001168548c96): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:54.878] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:54.894] [INFO] console - Executing (df2a9ed8-7c1b-47fe-92c7-001168548c96): COMMIT;
[2016-10-21 11:21:54.901] [INFO] console - [ 70,
  1240,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:55.016] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:21:55.027] [INFO] console - Executing (ec8ba2e7-f79d-4946-a664-d7cc11ce7c45): START TRANSACTION;
[2016-10-21 11:21:55.040] [INFO] console - Executing (ec8ba2e7-f79d-4946-a664-d7cc11ce7c45): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:55.067] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:21:55.082] [INFO] console - Executing (ec8ba2e7-f79d-4946-a664-d7cc11ce7c45): COMMIT;
[2016-10-21 11:21:55.086] [INFO] console - [ 70,
  1241,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:55.390] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:55.405] [INFO] console - Executing (2a24e64c-c968-4cf7-939e-fac0bc2f193e): START TRANSACTION;
[2016-10-21 11:21:55.413] [INFO] console - Executing (2a24e64c-c968-4cf7-939e-fac0bc2f193e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:55.435] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:55.454] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:21:55.459] [INFO] console - Executing (2a24e64c-c968-4cf7-939e-fac0bc2f193e): COMMIT;
[2016-10-21 11:21:55.460] [INFO] console - Executing (e2584e36-2ae1-42a6-8130-3a373823bb1f): START TRANSACTION;
[2016-10-21 11:21:55.465] [INFO] console - Executing (e2584e36-2ae1-42a6-8130-3a373823bb1f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:55.466] [INFO] console - [ 70,
  1242,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:55.489] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:21:55.498] [INFO] console - Executing (e2584e36-2ae1-42a6-8130-3a373823bb1f): COMMIT;
[2016-10-21 11:21:55.500] [INFO] console - [ 70,
  1243,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:21:55.638] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:21:55.645] [INFO] console - Executing (b7f425f9-6a6d-4980-bb1c-3498b40d633e): START TRANSACTION;
[2016-10-21 11:21:55.651] [INFO] console - Executing (b7f425f9-6a6d-4980-bb1c-3498b40d633e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:21:55.663] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:21:55.681] [INFO] console - Executing (b7f425f9-6a6d-4980-bb1c-3498b40d633e): COMMIT;
[2016-10-21 11:21:55.683] [INFO] console - [ 70,
  1244,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:21:57.445] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:57.458] [INFO] console - [ 70, 1245, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:21:58.383] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:58.396] [INFO] console - [ 70, 1246, {}, [ [ [Object] ] ] ]
[2016-10-21 11:21:59.388] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:21:59.390] [INFO] console - [ 70, 1247, {}, [ [] ] ]
[2016-10-21 11:22:47.573] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:22:47.635] [INFO] console - Executing (381b6ad8-489f-407f-956d-7be69d0e353b): START TRANSACTION;
[2016-10-21 11:22:47.640] [INFO] console - Executing (381b6ad8-489f-407f-956d-7be69d0e353b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:47.717] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:22:47.741] [INFO] console - Executing (381b6ad8-489f-407f-956d-7be69d0e353b): COMMIT;
[2016-10-21 11:22:47.744] [INFO] console - [ 70,
  1249,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:22:47.797] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:22:47.803] [INFO] console - Executing (d71bc24c-775a-4352-b1d2-f5ad5fdde18a): START TRANSACTION;
[2016-10-21 11:22:47.810] [INFO] console - Executing (d71bc24c-775a-4352-b1d2-f5ad5fdde18a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:47.834] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:22:47.851] [INFO] console - Executing (d71bc24c-775a-4352-b1d2-f5ad5fdde18a): COMMIT;
[2016-10-21 11:22:47.855] [INFO] console - [ 70,
  1250,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:22:48.179] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:22:48.186] [INFO] console - Executing (ebcd7843-871e-486a-936f-7c470dd44b78): START TRANSACTION;
[2016-10-21 11:22:48.193] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:22:48.198] [INFO] console - Executing (8a38cc37-f3e5-43a3-b186-3ce4c0e77103): START TRANSACTION;
[2016-10-21 11:22:48.199] [INFO] console - Executing (ebcd7843-871e-486a-936f-7c470dd44b78): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:48.224] [INFO] console - Executing (8a38cc37-f3e5-43a3-b186-3ce4c0e77103): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:48.291] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:22:48.304] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:22:48.317] [INFO] console - Executing (ebcd7843-871e-486a-936f-7c470dd44b78): COMMIT;
[2016-10-21 11:22:48.330] [INFO] console - Executing (8a38cc37-f3e5-43a3-b186-3ce4c0e77103): COMMIT;
[2016-10-21 11:22:48.334] [INFO] console - [ 70,
  1251,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:22:48.343] [INFO] console - [ 70,
  1252,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:22:48.415] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:22:48.418] [INFO] console - Executing (021d2cdb-be99-4122-8d18-1a9c79beca1b): START TRANSACTION;
[2016-10-21 11:22:48.423] [INFO] console - Executing (021d2cdb-be99-4122-8d18-1a9c79beca1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:48.436] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:22:48.450] [INFO] console - Executing (021d2cdb-be99-4122-8d18-1a9c79beca1b): COMMIT;
[2016-10-21 11:22:48.461] [INFO] console - [ 70,
  1253,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:22:48.516] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:22:48.524] [INFO] console - Executing (061e8da9-fafc-4911-b914-37fd209a0c14): START TRANSACTION;
[2016-10-21 11:22:48.535] [INFO] console - Executing (061e8da9-fafc-4911-b914-37fd209a0c14): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:22:48.546] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:22:48.561] [INFO] console - Executing (061e8da9-fafc-4911-b914-37fd209a0c14): COMMIT;
[2016-10-21 11:22:48.563] [INFO] console - [ 70,
  1254,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:22:50.474] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:22:50.484] [INFO] console - [ 70, 1255, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:22:51.401] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:22:51.409] [INFO] console - [ 70, 1256, {}, [ [ [Object] ] ] ]
[2016-10-21 11:22:52.656] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:22:52.664] [INFO] console - [ 70, 1257, {}, [ [] ] ]
[2016-10-21 11:50:17.376] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:50:17.642] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:50:18.104] [INFO] console - Executing (e17d6375-4da7-4e9b-a257-885642c09530): START TRANSACTION;
[2016-10-21 11:50:18.125] [INFO] console - Executing (e17d6375-4da7-4e9b-a257-885642c09530): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:18.127] [INFO] console - Executing (59953011-278e-4abf-8f94-f2e27ae713f4): START TRANSACTION;
[2016-10-21 11:50:18.143] [INFO] console - Executing (59953011-278e-4abf-8f94-f2e27ae713f4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:18.460] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:50:18.625] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:50:18.646] [INFO] console - Executing (e17d6375-4da7-4e9b-a257-885642c09530): COMMIT;
[2016-10-21 11:50:18.669] [INFO] console - Executing (59953011-278e-4abf-8f94-f2e27ae713f4): COMMIT;
[2016-10-21 11:50:18.676] [INFO] console - [ 70,
  1259,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:50:18.700] [INFO] console - [ 70,
  1260,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:50:18.889] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:50:18.900] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:50:18.932] [INFO] console - Executing (2d0a1a97-8ff1-447a-90a8-381381bfa586): START TRANSACTION;
[2016-10-21 11:50:18.941] [INFO] console - Executing (eaf4be83-7b51-42ab-8421-f80355fc99b0): START TRANSACTION;
[2016-10-21 11:50:18.946] [INFO] console - Executing (2d0a1a97-8ff1-447a-90a8-381381bfa586): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:18.972] [INFO] console - Executing (eaf4be83-7b51-42ab-8421-f80355fc99b0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:19.015] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:50:19.086] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:50:19.095] [INFO] console - Executing (2d0a1a97-8ff1-447a-90a8-381381bfa586): COMMIT;
[2016-10-21 11:50:19.104] [INFO] console - Executing (eaf4be83-7b51-42ab-8421-f80355fc99b0): COMMIT;
[2016-10-21 11:50:19.108] [INFO] console - [ 70,
  1261,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:50:19.122] [INFO] console - [ 70,
  1262,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:50:19.162] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:50:19.170] [INFO] console - Executing (e89809a5-663b-485e-8ef2-faf2426f79aa): START TRANSACTION;
[2016-10-21 11:50:19.172] [INFO] console - Executing (e89809a5-663b-485e-8ef2-faf2426f79aa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:19.244] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:50:19.294] [INFO] console - Executing (e89809a5-663b-485e-8ef2-faf2426f79aa): COMMIT;
[2016-10-21 11:50:19.313] [INFO] console - [ 70,
  1263,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:50:19.420] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:50:19.432] [INFO] console - Executing (6595c0b7-62ad-4c3f-acb3-204594407c13): START TRANSACTION;
[2016-10-21 11:50:19.438] [INFO] console - Executing (6595c0b7-62ad-4c3f-acb3-204594407c13): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:50:19.461] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:50:19.494] [INFO] console - Executing (6595c0b7-62ad-4c3f-acb3-204594407c13): COMMIT;
[2016-10-21 11:50:19.501] [INFO] console - [ 70,
  1264,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:50:21.599] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:50:21.637] [INFO] console - [ 70, 1265, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:51:28.608] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:51:28.695] [INFO] console - Executing (cd140db3-f788-4daa-8d92-57836521c56e): START TRANSACTION;
[2016-10-21 11:51:28.699] [INFO] console - Executing (cd140db3-f788-4daa-8d92-57836521c56e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:28.735] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:51:28.773] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:51:28.782] [INFO] console - Executing (f16a8150-fe19-4c2b-9769-e3909e0122b7): START TRANSACTION;
[2016-10-21 11:51:28.784] [INFO] console - Executing (f16a8150-fe19-4c2b-9769-e3909e0122b7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:28.938] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:51:29.006] [INFO] console - Executing (cd140db3-f788-4daa-8d92-57836521c56e): COMMIT;
[2016-10-21 11:51:29.019] [INFO] console - Executing (f16a8150-fe19-4c2b-9769-e3909e0122b7): COMMIT;
[2016-10-21 11:51:29.035] [INFO] console - [ 70,
  1267,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:51:29.051] [INFO] console - [ 70,
  1268,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:51:29.204] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:51:29.210] [INFO] console - Executing (b914b320-a05b-421f-a303-1b35d2e29fbf): START TRANSACTION;
[2016-10-21 11:51:29.211] [INFO] console - Executing (b914b320-a05b-421f-a303-1b35d2e29fbf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:29.221] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:51:29.231] [INFO] console - Executing (e0519396-f449-443a-8a4d-87f6668a6902): START TRANSACTION;
[2016-10-21 11:51:29.256] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:51:29.259] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:51:29.264] [INFO] console - Executing (7a536f54-818e-43e5-8dd7-c86187b3148e): START TRANSACTION;
[2016-10-21 11:51:29.266] [INFO] console - Executing (e0519396-f449-443a-8a4d-87f6668a6902): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:29.282] [INFO] console - Executing (7a536f54-818e-43e5-8dd7-c86187b3148e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:29.305] [INFO] console - Executing (b914b320-a05b-421f-a303-1b35d2e29fbf): COMMIT;
[2016-10-21 11:51:29.330] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:51:29.409] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:51:29.425] [INFO] console - [ 70,
  1269,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:51:29.441] [INFO] console - Executing (e0519396-f449-443a-8a4d-87f6668a6902): COMMIT;
[2016-10-21 11:51:29.449] [INFO] console - Executing (7a536f54-818e-43e5-8dd7-c86187b3148e): COMMIT;
[2016-10-21 11:51:29.450] [INFO] console - [ 70,
  1270,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:51:29.550] [INFO] console - [ 70,
  1271,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:51:29.563] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:51:29.572] [INFO] console - Executing (e6e384e8-3321-4ab3-b6a2-1efea05f5d4a): START TRANSACTION;
[2016-10-21 11:51:29.576] [INFO] console - Executing (e6e384e8-3321-4ab3-b6a2-1efea05f5d4a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:51:29.592] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:51:29.902] [INFO] console - Executing (e6e384e8-3321-4ab3-b6a2-1efea05f5d4a): COMMIT;
[2016-10-21 11:51:29.915] [INFO] console - [ 70,
  1272,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:51:33.529] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:51:33.587] [INFO] console - [ 70, 1273, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:51:37.848] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:51:37.868] [INFO] console - [ 70, 1274, {}, [ [ [Object] ] ] ]
[2016-10-21 11:51:47.476] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:51:47.484] [INFO] console - [ 70, 1275, {}, [ [] ] ]
[2016-10-21 11:54:50.397] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:54:50.461] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 11:54:50.810] [INFO] console - Executing (9fe2e0a3-d8e0-4496-81ba-a86cd5284bf2): START TRANSACTION;
[2016-10-21 11:54:50.811] [INFO] console - Executing (3d690c6d-670b-401b-ae8a-410e464f3194): START TRANSACTION;
[2016-10-21 11:54:50.823] [INFO] console - Executing (9fe2e0a3-d8e0-4496-81ba-a86cd5284bf2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:50.825] [INFO] console - Executing (3d690c6d-670b-401b-ae8a-410e464f3194): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:50.947] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:54:50.990] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 11:54:51.001] [INFO] console - Executing (9fe2e0a3-d8e0-4496-81ba-a86cd5284bf2): COMMIT;
[2016-10-21 11:54:51.012] [INFO] console - Executing (3d690c6d-670b-401b-ae8a-410e464f3194): COMMIT;
[2016-10-21 11:54:51.017] [INFO] console - [ 70,
  1277,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:54:51.045] [INFO] console - [ 70,
  1278,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:54:51.150] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:54:51.166] [INFO] console - Executing (000d0a10-7458-4dbf-a952-12b5f06ec499): START TRANSACTION;
[2016-10-21 11:54:51.170] [INFO] console - Executing (000d0a10-7458-4dbf-a952-12b5f06ec499): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:51.177] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:54:51.186] [INFO] console - Executing (41d8c4f8-84dc-4314-b355-3e1304db81e9): START TRANSACTION;
[2016-10-21 11:54:51.202] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:54:51.204] [INFO] console - Executing (41d8c4f8-84dc-4314-b355-3e1304db81e9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:51.229] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:54:51.270] [INFO] console - Executing (000d0a10-7458-4dbf-a952-12b5f06ec499): COMMIT;
[2016-10-21 11:54:51.279] [INFO] console - Executing (41d8c4f8-84dc-4314-b355-3e1304db81e9): COMMIT;
[2016-10-21 11:54:51.282] [INFO] console - [ 70,
  1279,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:54:51.296] [INFO] console - [ 70,
  1280,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:54:51.360] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 11:54:51.363] [INFO] console - Executing (e7a90bb8-0ebd-4397-94c6-d28ffb17fbca): START TRANSACTION;
[2016-10-21 11:54:51.366] [INFO] console - Executing (e7a90bb8-0ebd-4397-94c6-d28ffb17fbca): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:52.617] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 11:54:52.620] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 11:54:52.632] [INFO] console - Executing (85aec238-c72a-4138-bf86-ab3640ecde03): START TRANSACTION;
[2016-10-21 11:54:52.639] [INFO] console - Executing (e7a90bb8-0ebd-4397-94c6-d28ffb17fbca): COMMIT;
[2016-10-21 11:54:52.640] [INFO] console - Executing (85aec238-c72a-4138-bf86-ab3640ecde03): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:54:52.649] [INFO] console - [ 70,
  1281,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 11:54:52.669] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 11:54:52.681] [INFO] console - Executing (85aec238-c72a-4138-bf86-ab3640ecde03): COMMIT;
[2016-10-21 11:54:52.683] [INFO] console - [ 70,
  1282,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 11:55:00.948] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:55:00.961] [INFO] console - [ 70, 1283, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:55:01.978] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:55:01.988] [INFO] console - [ 70, 1284, {}, [ [ [Object] ] ] ]
[2016-10-21 11:55:18.150] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:55:18.159] [INFO] console - [ 70, 1285, {}, [ [] ] ]
[2016-10-21 11:55:32.267] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 6) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 11:55:32.281] [INFO] console - [ 70, 1286, {}, [ [] ] ]
[2016-10-21 11:55:35.333] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=1
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 11:55:35.377] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('6', '7')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 11:55:35.386] [INFO] console - [ 70, 1287, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:55:37.786] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=7
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 11:55:37.800] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN (NULL)) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 11:55:37.802] [INFO] console - [ 70, 1288, {}, [ [] ] ]
[2016-10-21 11:55:37.854] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=7
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 11:55:37.871] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN (NULL)) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 11:55:37.873] [INFO] console - [ 70, 1289, {}, [ [] ] ]
[2016-10-21 11:55:41.090] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 11:55:41.104] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 11:55:41.111] [INFO] console - [ 70, 1290, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 11:55:43.069] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 11:55:43.094] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 11:55:43.122] [INFO] console - [ 70, 1291, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 11:55:43.225] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 11:55:43.237] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 11:55:43.243] [INFO] console - [ 70, 1292, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 11:55:43.270] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 11:55:43.288] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 11:55:43.293] [INFO] console - [ 70, 1293, {}, [ [] ] ]
[2016-10-21 11:55:43.303] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 11:55:43.305] [INFO] console - [ 70, 1294, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 11:55:43.309] [INFO] console - [ 70, 1295, {}, [ [] ] ]
[2016-10-21 11:55:43.517] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 11:55:43.524] [INFO] console - Executing (6f327628-4123-431b-b585-8f427032ae1c): START TRANSACTION;
[2016-10-21 11:55:43.526] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 11:55:43.532] [INFO] console - Executing (4e41b3bf-d207-412a-a9a1-cb369af2b0c3): START TRANSACTION;
[2016-10-21 11:55:43.538] [INFO] console - Executing (6f327628-4123-431b-b585-8f427032ae1c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:55:43.549] [INFO] console - Executing (4e41b3bf-d207-412a-a9a1-cb369af2b0c3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 11:55:43.637] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 11:55:43.652] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 11:55:43.668] [INFO] console - Executing (6f327628-4123-431b-b585-8f427032ae1c): COMMIT;
[2016-10-21 11:55:43.677] [INFO] console - Executing (4e41b3bf-d207-412a-a9a1-cb369af2b0c3): COMMIT;
[2016-10-21 11:55:43.680] [INFO] console - [ 70,
  1296,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 11:55:43.702] [INFO] console - [ 70,
  1297,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 12:11:48.675] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 12:11:48.856] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 12:11:49.148] [INFO] console - Executing (93ddff80-f6cd-4e22-af7b-dc3a942a421c): START TRANSACTION;
[2016-10-21 12:11:49.165] [INFO] console - Executing (93ddff80-f6cd-4e22-af7b-dc3a942a421c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.177] [INFO] console - Executing (b37704e5-f5b7-4908-9293-3d9caf149430): START TRANSACTION;
[2016-10-21 12:11:49.184] [INFO] console - Executing (b37704e5-f5b7-4908-9293-3d9caf149430): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.290] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 12:11:49.350] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 12:11:49.365] [INFO] console - Executing (93ddff80-f6cd-4e22-af7b-dc3a942a421c): COMMIT;
[2016-10-21 12:11:49.373] [INFO] console - Executing (b37704e5-f5b7-4908-9293-3d9caf149430): COMMIT;
[2016-10-21 12:11:49.379] [INFO] console - [ 70,
  1299,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 12:11:49.393] [INFO] console - [ 70,
  1300,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 12:11:49.458] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:11:49.462] [INFO] console - Executing (0d095501-c07f-405d-930f-8b83bb3a68d2): START TRANSACTION;
[2016-10-21 12:11:49.464] [INFO] console - Executing (0d095501-c07f-405d-930f-8b83bb3a68d2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.511] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:11:49.526] [INFO] console - Executing (0d095501-c07f-405d-930f-8b83bb3a68d2): COMMIT;
[2016-10-21 12:11:49.529] [INFO] console - [ 70,
  1301,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:11:49.562] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:11:49.567] [INFO] console - Executing (f15e88f9-5746-4302-8f97-9b279a927ce5): START TRANSACTION;
[2016-10-21 12:11:49.570] [INFO] console - Executing (f15e88f9-5746-4302-8f97-9b279a927ce5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.583] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:11:49.600] [INFO] console - Executing (f15e88f9-5746-4302-8f97-9b279a927ce5): COMMIT;
[2016-10-21 12:11:49.602] [INFO] console - [ 70,
  1302,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:11:49.614] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:11:49.626] [INFO] console - Executing (d926866a-b304-4c2a-a2f3-75be68e51d16): START TRANSACTION;
[2016-10-21 12:11:49.627] [INFO] console - Executing (d926866a-b304-4c2a-a2f3-75be68e51d16): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.638] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:11:49.649] [INFO] console - Executing (d926866a-b304-4c2a-a2f3-75be68e51d16): COMMIT;
[2016-10-21 12:11:49.651] [INFO] console - [ 70,
  1303,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:11:49.744] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 12:11:49.747] [INFO] console - Executing (ff7bb2e7-b3f8-4ff9-9d19-92832ed548a3): START TRANSACTION;
[2016-10-21 12:11:49.753] [INFO] console - Executing (ff7bb2e7-b3f8-4ff9-9d19-92832ed548a3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:11:49.771] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 12:11:49.784] [INFO] console - Executing (ff7bb2e7-b3f8-4ff9-9d19-92832ed548a3): COMMIT;
[2016-10-21 12:11:49.787] [INFO] console - [ 70,
  1304,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 12:14:27.736] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 12:14:27.829] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 12:14:28.043] [INFO] console - Executing (8698532b-d8af-47d3-a9c4-1604038fa64e): START TRANSACTION;
[2016-10-21 12:14:28.048] [INFO] console - Executing (8698532b-d8af-47d3-a9c4-1604038fa64e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:28.055] [INFO] console - Executing (d50986b1-b763-432a-994c-ae57e00b2b7d): START TRANSACTION;
[2016-10-21 12:14:28.059] [INFO] console - Executing (d50986b1-b763-432a-994c-ae57e00b2b7d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:28.179] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 12:14:28.270] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 12:14:28.289] [INFO] console - Executing (8698532b-d8af-47d3-a9c4-1604038fa64e): COMMIT;
[2016-10-21 12:14:28.297] [INFO] console - Executing (d50986b1-b763-432a-994c-ae57e00b2b7d): COMMIT;
[2016-10-21 12:14:28.306] [INFO] console - [ 70,
  1306,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 12:14:28.343] [INFO] console - [ 70,
  1307,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 12:14:28.631] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:14:28.766] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:14:28.776] [INFO] console - Executing (2179a992-3af5-4bdd-9470-69990dd4422c): START TRANSACTION;
[2016-10-21 12:14:28.793] [INFO] console - Executing (9e6dc143-d7a5-4c9b-889e-3323b3d70c69): START TRANSACTION;
[2016-10-21 12:14:28.800] [INFO] console - Executing (2179a992-3af5-4bdd-9470-69990dd4422c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:28.805] [INFO] console - Executing (9e6dc143-d7a5-4c9b-889e-3323b3d70c69): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:28.954] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:14:28.978] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:14:29.007] [INFO] console - Executing (2179a992-3af5-4bdd-9470-69990dd4422c): COMMIT;
[2016-10-21 12:14:29.012] [INFO] console - Executing (9e6dc143-d7a5-4c9b-889e-3323b3d70c69): COMMIT;
[2016-10-21 12:14:29.017] [INFO] console - [ 70,
  1308,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:14:29.026] [INFO] console - [ 70,
  1309,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:14:29.169] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 12:14:29.185] [INFO] console - Executing (5b395eb9-3398-4b13-ab24-9ac5227b15b1): START TRANSACTION;
[2016-10-21 12:14:29.194] [INFO] console - Executing (5b395eb9-3398-4b13-ab24-9ac5227b15b1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:29.219] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 12:14:29.239] [INFO] console - Executing (5b395eb9-3398-4b13-ab24-9ac5227b15b1): COMMIT;
[2016-10-21 12:14:29.244] [INFO] console - [ 70,
  1310,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 12:14:29.374] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 12:14:29.380] [INFO] console - Executing (0f800108-ec6c-469e-b692-b7302ac180a0): START TRANSACTION;
[2016-10-21 12:14:29.382] [INFO] console - Executing (0f800108-ec6c-469e-b692-b7302ac180a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 12:14:29.393] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 12:14:29.405] [INFO] console - Executing (0f800108-ec6c-469e-b692-b7302ac180a0): COMMIT;
[2016-10-21 12:14:29.415] [INFO] console - [ 70,
  1311,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 13:43:20.655] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=1
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 13:43:20.756] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('6', '7')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 13:43:20.776] [INFO] console - [ 70, 1312, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 13:54:30.446] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 13:54:30.577] [INFO] console - Executing (e55ffc5c-03dd-46ba-9254-41d82822952a): START TRANSACTION;
[2016-10-21 13:54:30.586] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 13:54:30.594] [INFO] console - Executing (e55ffc5c-03dd-46ba-9254-41d82822952a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:30.792] [INFO] console - Executing (1de23eb9-e1d7-4409-8130-2bd07b8d48aa): START TRANSACTION;
[2016-10-21 13:54:30.798] [INFO] console - Executing (1de23eb9-e1d7-4409-8130-2bd07b8d48aa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:30.830] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 13:54:30.871] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 13:54:30.891] [INFO] console - Executing (e55ffc5c-03dd-46ba-9254-41d82822952a): COMMIT;
[2016-10-21 13:54:30.897] [INFO] console - Executing (1de23eb9-e1d7-4409-8130-2bd07b8d48aa): COMMIT;
[2016-10-21 13:54:30.904] [INFO] console - [ 70,
  1314,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 13:54:30.930] [INFO] console - [ 70,
  1315,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 13:54:30.980] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:54:30.987] [INFO] console - Executing (3e58bfd2-2c55-4c33-91f7-1d952cd9a139): START TRANSACTION;
[2016-10-21 13:54:30.990] [INFO] console - Executing (3e58bfd2-2c55-4c33-91f7-1d952cd9a139): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:31.019] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:54:31.040] [INFO] console - Executing (3e58bfd2-2c55-4c33-91f7-1d952cd9a139): COMMIT;
[2016-10-21 13:54:31.044] [INFO] console - [ 70,
  1316,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:54:31.070] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:54:31.078] [INFO] console - Executing (b1a3be99-d525-4f6a-9e81-a28d7e4f2d5a): START TRANSACTION;
[2016-10-21 13:54:31.094] [INFO] console - Executing (b1a3be99-d525-4f6a-9e81-a28d7e4f2d5a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:31.119] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:54:31.268] [INFO] console - Executing (b1a3be99-d525-4f6a-9e81-a28d7e4f2d5a): COMMIT;
[2016-10-21 13:54:31.287] [INFO] console - [ 70,
  1317,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:54:31.323] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:54:31.331] [INFO] console - Executing (fa5f44c4-bee5-4a2e-b039-62ff41e56d45): START TRANSACTION;
[2016-10-21 13:54:31.333] [INFO] console - Executing (fa5f44c4-bee5-4a2e-b039-62ff41e56d45): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:31.365] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:54:31.387] [INFO] console - Executing (fa5f44c4-bee5-4a2e-b039-62ff41e56d45): COMMIT;
[2016-10-21 13:54:31.393] [INFO] console - [ 70,
  1318,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:54:31.433] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 13:54:31.441] [INFO] console - Executing (95cbb171-362a-4b56-884e-9d25ffcbc76a): START TRANSACTION;
[2016-10-21 13:54:31.443] [INFO] console - Executing (95cbb171-362a-4b56-884e-9d25ffcbc76a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:54:31.473] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 13:54:31.488] [INFO] console - Executing (95cbb171-362a-4b56-884e-9d25ffcbc76a): COMMIT;
[2016-10-21 13:54:31.495] [INFO] console - [ 70,
  1319,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 13:55:02.610] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 13:55:02.681] [INFO] console - Executing (75a4d751-5a3b-45ab-8293-ec4e62acaa94): START TRANSACTION;
[2016-10-21 13:55:02.685] [INFO] console - Executing (75a4d751-5a3b-45ab-8293-ec4e62acaa94): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:03.002] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 13:55:03.037] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 13:55:03.055] [INFO] console - Executing (98c4db51-8f5c-4b7c-9b94-f9e4ae5f061e): START TRANSACTION;
[2016-10-21 13:55:03.071] [INFO] console - Executing (75a4d751-5a3b-45ab-8293-ec4e62acaa94): COMMIT;
[2016-10-21 13:55:03.073] [INFO] console - Executing (98c4db51-8f5c-4b7c-9b94-f9e4ae5f061e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:03.080] [INFO] console - [ 70,
  1321,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 13:55:03.137] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 13:55:03.182] [INFO] console - Executing (98c4db51-8f5c-4b7c-9b94-f9e4ae5f061e): COMMIT;
[2016-10-21 13:55:03.187] [INFO] console - [ 70,
  1322,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 13:55:03.314] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:55:03.319] [INFO] console - Executing (bdd60962-73f0-4e45-bc00-ebdc37101c44): START TRANSACTION;
[2016-10-21 13:55:03.320] [INFO] console - Executing (bdd60962-73f0-4e45-bc00-ebdc37101c44): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:03.338] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:55:03.358] [INFO] console - Executing (bdd60962-73f0-4e45-bc00-ebdc37101c44): COMMIT;
[2016-10-21 13:55:03.360] [INFO] console - [ 70,
  1323,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:55:04.172] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:55:04.336] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 13:55:04.404] [INFO] console - Executing (e855294a-5883-4f79-9d97-b952edce94d1): START TRANSACTION;
[2016-10-21 13:55:04.405] [INFO] console - Executing (6faed6bf-879e-4dcd-8097-cd8c63295690): START TRANSACTION;
[2016-10-21 13:55:04.437] [INFO] console - Executing (e855294a-5883-4f79-9d97-b952edce94d1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:04.462] [INFO] console - Executing (6faed6bf-879e-4dcd-8097-cd8c63295690): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:04.521] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:55:04.565] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 13:55:04.589] [INFO] console - Executing (e855294a-5883-4f79-9d97-b952edce94d1): COMMIT;
[2016-10-21 13:55:04.610] [INFO] console - Executing (6faed6bf-879e-4dcd-8097-cd8c63295690): COMMIT;
[2016-10-21 13:55:04.612] [INFO] console - [ 70,
  1324,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:55:04.650] [INFO] console - [ 70,
  1325,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 13:55:04.698] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 13:55:04.706] [INFO] console - Executing (32474b0d-3453-4f22-95b9-88278b6cd80b): START TRANSACTION;
[2016-10-21 13:55:04.708] [INFO] console - Executing (32474b0d-3453-4f22-95b9-88278b6cd80b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 13:55:04.827] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 13:55:04.863] [INFO] console - Executing (32474b0d-3453-4f22-95b9-88278b6cd80b): COMMIT;
[2016-10-21 13:55:04.865] [INFO] console - [ 70,
  1326,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:07:07.419] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 16 }
[2016-10-21 14:07:07.618] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:07:07.638] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 17 }
[2016-10-21 14:07:07.703] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 18 }
[2016-10-21 14:07:07.926] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:07:08.041] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 19 }
[2016-10-21 14:07:08.078] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 20 }
[2016-10-21 14:07:08.143] [INFO] console - Executing (44a9569d-8b3d-4a4a-8828-cae663ad5183): START TRANSACTION;
[2016-10-21 14:07:08.146] [INFO] console - Executing (b541a196-942c-4804-9511-4fbd17d4640c): START TRANSACTION;
[2016-10-21 14:07:08.147] [INFO] console - Executing (f6ab9180-ab13-4a05-8840-e7c630ed1046): START TRANSACTION;
[2016-10-21 14:07:08.147] [INFO] console - Executing (4d562d52-e337-4684-b1c9-add2de1db92f): START TRANSACTION;
[2016-10-21 14:07:08.159] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:07:08.220] [DEBUG] Server - #promiseModel() [] { model: 'Kopa', id: 21 }
[2016-10-21 14:07:08.269] [INFO] console - Executing (44a9569d-8b3d-4a4a-8828-cae663ad5183): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:07:08.271] [INFO] console - Executing (b541a196-942c-4804-9511-4fbd17d4640c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:07:08.273] [INFO] console - Executing (f6ab9180-ab13-4a05-8840-e7c630ed1046): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:07:08.312] [INFO] console - Executing (4d562d52-e337-4684-b1c9-add2de1db92f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:07:08.448] [INFO] console - Executing (6b0594fe-9750-4698-8e88-c00f0f1971dd): START TRANSACTION;
[2016-10-21 14:07:08.539] [INFO] console - Executing (6b0594fe-9750-4698-8e88-c00f0f1971dd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:24:57.010] [INFO] console - AutobahnJS debug enabled
[2016-10-21 14:24:59.056] [INFO] Server - starting...
[2016-10-21 14:24:59.063] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 14:24:59.190] [INFO] console - using WAMP transport type: websocket
[2016-10-21 14:24:59.499] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 14:24:59.583] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 14:24:59.616] [INFO] Server - connection.onopen()
[2016-10-21 14:24:59.619] [INFO] console - [ 64, 6889651212124160, {}, 'ru.kopa.model.create' ]
[2016-10-21 14:24:59.633] [DEBUG] Server - api:model.create registered
[2016-10-21 14:24:59.635] [INFO] console - [ 64, 3633274846969856, {}, 'ru.kopa.model.get' ]
[2016-10-21 14:24:59.644] [DEBUG] Server - api:model.get registered
[2016-10-21 14:24:59.645] [INFO] console - [ 64, 8474754585460736, {}, 'ru.kopa.model.save' ]
[2016-10-21 14:24:59.652] [DEBUG] Server - api:model.save registered
[2016-10-21 14:24:59.652] [INFO] console - [ 64, 2022571585306624, {}, 'ru.kopa.pingPong' ]
[2016-10-21 14:24:59.662] [DEBUG] Server - api:pingPong registered
[2016-10-21 14:24:59.663] [INFO] console - [ 64, 4848470410133504, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 14:24:59.670] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 14:24:59.671] [INFO] console - [ 64, 2847453965451264, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 14:24:59.681] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 14:24:59.682] [INFO] console - [ 64, 1682093998342144, {}, 'ru.kopa.error' ]
[2016-10-21 14:24:59.687] [DEBUG] Server - api:error registered
[2016-10-21 14:24:59.687] [INFO] console - [ 64, 324550183092224, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 14:24:59.697] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 14:24:59.697] [INFO] console - [ 64, 420853112111104, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 14:24:59.702] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 14:24:59.704] [INFO] console - [ 64, 5845134107213824, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 14:24:59.725] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 14:24:59.726] [INFO] console - [ 64, 2704645535301632, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 14:24:59.742] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 14:24:59.743] [INFO] console - [ 64, 6464401234198528, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 14:24:59.752] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 14:24:59.753] [INFO] console - [ 64, 7031416502091776, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 14:24:59.761] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 14:24:59.764] [INFO] console - [ 64, 3561539409805312, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 14:24:59.771] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 14:24:59.774] [INFO] console - [ 64, 6877627488927744, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 14:24:59.779] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 14:24:59.781] [INFO] console - [ 64, 3087449706201088, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 14:24:59.790] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 14:24:59.791] [INFO] console - [ 64,
  3137982978588672,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 14:24:59.796] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 14:24:59.797] [INFO] console - [ 64, 5986490333003776, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 14:24:59.802] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 14:24:59.804] [INFO] Server - started
[2016-10-21 14:25:40.041] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:25:40.087] [ERROR] Server - { [SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432]
  name: 'SequelizeConnectionRefusedError',
  message: 'connect ECONNREFUSED 127.0.0.1:5432',
  parent: 
   { [Error: connect ECONNREFUSED 127.0.0.1:5432]
     code: 'ECONNREFUSED',
     errno: 'ECONNREFUSED',
     syscall: 'connect',
     address: '127.0.0.1',
     port: 5432 },
  original: 
   { [Error: connect ECONNREFUSED 127.0.0.1:5432]
     code: 'ECONNREFUSED',
     errno: 'ECONNREFUSED',
     syscall: 'connect',
     address: '127.0.0.1',
     port: 5432 },
  'error@context': {} }
SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:98:20
    at [object Object].<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/client.js:185:5)
    at emitOne (events.js:77:13)
    at [object Object].emit (events.js:169:7)
    at Socket.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/connection.js:71:10)
    at emitOne (events.js:77:13)
    at Socket.emit (events.js:169:7)
    at emitErrorNT (net.js:1269:8)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith2Args (node.js:442:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:397:17)
[2016-10-21 14:25:40.111] [INFO] console - [ 8,
  68,
  3,
  {},
  'SequelizeConnectionRefusedError',
  [ 'connect ECONNREFUSED 127.0.0.1:5432' ],
  { stack: 
     [ 'SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:98:20',
       '    at [object Object].<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/client.js:185:5)',
       '    at emitOne (events.js:77:13)',
       '    at [object Object].emit (events.js:169:7)',
       '    at Socket.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/connection.js:71:10)',
       '    at emitOne (events.js:77:13)',
       '    at Socket.emit (events.js:169:7)',
       '    at emitErrorNT (net.js:1269:8)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith2Args (node.js:442:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:397:17)' ] } ]
[2016-10-21 14:25:40.128] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:25:40.142] [ERROR] Server - { [SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432]
  name: 'SequelizeConnectionRefusedError',
  message: 'connect ECONNREFUSED 127.0.0.1:5432',
  parent: 
   { [Error: connect ECONNREFUSED 127.0.0.1:5432]
     code: 'ECONNREFUSED',
     errno: 'ECONNREFUSED',
     syscall: 'connect',
     address: '127.0.0.1',
     port: 5432 },
  original: 
   { [Error: connect ECONNREFUSED 127.0.0.1:5432]
     code: 'ECONNREFUSED',
     errno: 'ECONNREFUSED',
     syscall: 'connect',
     address: '127.0.0.1',
     port: 5432 },
  'error@context': {} }
SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:98:20
    at [object Object].<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/client.js:185:5)
    at emitOne (events.js:77:13)
    at [object Object].emit (events.js:169:7)
    at Socket.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/connection.js:71:10)
    at emitOne (events.js:77:13)
    at Socket.emit (events.js:169:7)
    at emitErrorNT (net.js:1269:8)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31
    at nextTickCallbackWith2Args (node.js:442:9)
    at process._tickDomainCallback [as _tickCallback] (node.js:397:17)
[2016-10-21 14:25:40.157] [INFO] console - [ 8,
  68,
  4,
  {},
  'SequelizeConnectionRefusedError',
  [ 'connect ECONNREFUSED 127.0.0.1:5432' ],
  { stack: 
     [ 'SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:98:20',
       '    at [object Object].<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/client.js:185:5)',
       '    at emitOne (events.js:77:13)',
       '    at [object Object].emit (events.js:169:7)',
       '    at Socket.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/pg/lib/connection.js:71:10)',
       '    at emitOne (events.js:77:13)',
       '    at Socket.emit (events.js:169:7)',
       '    at emitErrorNT (net.js:1269:8)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31',
       '    at nextTickCallbackWith2Args (node.js:442:9)',
       '    at process._tickDomainCallback [as _tickCallback] (node.js:397:17)' ] } ]
[2016-10-21 14:26:56.740] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:26:56.832] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:26:57.264] [INFO] console - Executing (3da52214-7e28-4fcf-a4d1-fe7783850ead): START TRANSACTION;
[2016-10-21 14:26:57.272] [INFO] console - Executing (3da52214-7e28-4fcf-a4d1-fe7783850ead): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:57.346] [INFO] console - Executing (ada4f398-44ab-4993-a208-2616c496215f): START TRANSACTION;
[2016-10-21 14:26:57.350] [INFO] console - Executing (ada4f398-44ab-4993-a208-2616c496215f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:57.398] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:26:57.409] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:26:57.473] [INFO] console - Executing (ada4f398-44ab-4993-a208-2616c496215f): COMMIT;
[2016-10-21 14:26:57.484] [INFO] console - Executing (3da52214-7e28-4fcf-a4d1-fe7783850ead): COMMIT;
[2016-10-21 14:26:57.487] [INFO] console - [ 70,
  7,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:26:57.498] [INFO] console - [ 70,
  6,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:26:57.600] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:26:57.605] [INFO] console - Executing (1841332d-5b9f-4e59-835f-a8bc52f3a78f): START TRANSACTION;
[2016-10-21 14:26:57.612] [INFO] console - Executing (1841332d-5b9f-4e59-835f-a8bc52f3a78f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:57.653] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:26:57.690] [INFO] console - Executing (1841332d-5b9f-4e59-835f-a8bc52f3a78f): COMMIT;
[2016-10-21 14:26:57.695] [INFO] console - [ 70,
  8,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:26:57.748] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:26:57.768] [INFO] console - Executing (69b63e19-7b5f-4db3-9bb3-85f5709db66d): START TRANSACTION;
[2016-10-21 14:26:57.774] [INFO] console - Executing (69b63e19-7b5f-4db3-9bb3-85f5709db66d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:57.798] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:26:57.844] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:26:57.860] [INFO] console - Executing (69b63e19-7b5f-4db3-9bb3-85f5709db66d): COMMIT;
[2016-10-21 14:26:57.863] [INFO] console - Executing (d70bacbc-6920-4efc-9c59-147a6a1a643a): START TRANSACTION;
[2016-10-21 14:26:57.869] [INFO] console - Executing (d70bacbc-6920-4efc-9c59-147a6a1a643a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:57.870] [INFO] console - [ 70,
  9,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:26:57.898] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:26:57.930] [INFO] console - Executing (d70bacbc-6920-4efc-9c59-147a6a1a643a): COMMIT;
[2016-10-21 14:26:57.941] [INFO] console - [ 70,
  10,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:26:57.991] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:26:58.000] [INFO] console - Executing (686f4d94-7af8-4dbc-a5a3-6992f6f87026): START TRANSACTION;
[2016-10-21 14:26:58.006] [INFO] console - Executing (686f4d94-7af8-4dbc-a5a3-6992f6f87026): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:26:58.031] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:26:58.042] [INFO] console - Executing (686f4d94-7af8-4dbc-a5a3-6992f6f87026): COMMIT;
[2016-10-21 14:26:58.061] [INFO] console - [ 70,
  11,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:28:33.022] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:28:33.118] [INFO] console - Executing (169da53b-bb13-482a-a237-68f14480db09): START TRANSACTION;
[2016-10-21 14:28:33.124] [INFO] console - Executing (169da53b-bb13-482a-a237-68f14480db09): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:28:33.161] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:28:33.215] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:28:33.248] [INFO] console - Executing (6a5466c1-ad19-4854-8aff-922e36a3dc82): START TRANSACTION;
[2016-10-21 14:28:33.259] [INFO] console - Executing (169da53b-bb13-482a-a237-68f14480db09): COMMIT;
[2016-10-21 14:28:33.264] [INFO] console - Executing (6a5466c1-ad19-4854-8aff-922e36a3dc82): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:28:33.276] [INFO] console - [ 70,
  13,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:28:33.316] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:28:33.333] [INFO] console - Executing (6a5466c1-ad19-4854-8aff-922e36a3dc82): COMMIT;
[2016-10-21 14:28:33.336] [INFO] console - [ 70,
  14,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:28:33.518] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:28:33.528] [INFO] console - Executing (520de4b5-56af-4da3-aa1b-807245939470): START TRANSACTION;
[2016-10-21 14:28:33.533] [INFO] console - Executing (520de4b5-56af-4da3-aa1b-807245939470): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:28:33.568] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:28:33.575] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:28:33.590] [INFO] console - Executing (50d8f5b1-c7aa-4f6d-a5c4-fcecdd9240a3): START TRANSACTION;
[2016-10-21 14:28:33.596] [INFO] console - Executing (520de4b5-56af-4da3-aa1b-807245939470): COMMIT;
[2016-10-21 14:28:33.598] [INFO] console - Executing (50d8f5b1-c7aa-4f6d-a5c4-fcecdd9240a3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:28:33.602] [INFO] console - [ 70,
  15,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:28:33.616] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:28:33.625] [INFO] console - Executing (50d8f5b1-c7aa-4f6d-a5c4-fcecdd9240a3): COMMIT;
[2016-10-21 14:28:33.628] [INFO] console - [ 70,
  16,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:28:33.919] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:28:33.928] [INFO] console - Executing (148c19c9-781f-41ac-88dc-5f4456dbf105): START TRANSACTION;
[2016-10-21 14:28:33.930] [INFO] console - Executing (148c19c9-781f-41ac-88dc-5f4456dbf105): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:28:33.941] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:28:33.962] [INFO] console - Executing (148c19c9-781f-41ac-88dc-5f4456dbf105): COMMIT;
[2016-10-21 14:28:33.966] [INFO] console - [ 70,
  17,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:31:37.495] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:31:37.514] [INFO] console - [ 70, 18, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 14:32:10.114] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:32:10.226] [INFO] console - Executing (5caac351-ebff-4cd9-bafc-7a9f5030a0f4): START TRANSACTION;
[2016-10-21 14:32:10.237] [INFO] console - Executing (5caac351-ebff-4cd9-bafc-7a9f5030a0f4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:32:10.299] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:32:10.325] [INFO] console - Executing (5caac351-ebff-4cd9-bafc-7a9f5030a0f4): COMMIT;
[2016-10-21 14:32:10.334] [INFO] console - [ 70,
  20,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:32:10.474] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:32:10.481] [INFO] console - Executing (a33d401c-4cce-4800-a4c9-f2bdb4e3ae85): START TRANSACTION;
[2016-10-21 14:32:10.487] [INFO] console - Executing (a33d401c-4cce-4800-a4c9-f2bdb4e3ae85): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:32:10.521] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:32:10.530] [INFO] console - Executing (a33d401c-4cce-4800-a4c9-f2bdb4e3ae85): COMMIT;
[2016-10-21 14:32:10.544] [INFO] console - [ 70,
  21,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:32:10.960] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:32:10.969] [INFO] console - Executing (126467fd-75a9-4881-8839-6dba8875ab51): START TRANSACTION;
[2016-10-21 14:32:10.988] [INFO] console - Executing (126467fd-75a9-4881-8839-6dba8875ab51): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:32:11.010] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:32:11.048] [INFO] console - Executing (126467fd-75a9-4881-8839-6dba8875ab51): COMMIT;
[2016-10-21 14:32:11.051] [INFO] console - [ 70,
  22,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:32:11.066] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:32:11.069] [INFO] console - Executing (b36da4a9-5ee6-4ed5-a889-ba454a96495c): START TRANSACTION;
[2016-10-21 14:32:11.074] [INFO] console - Executing (b36da4a9-5ee6-4ed5-a889-ba454a96495c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:32:11.119] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:32:11.141] [INFO] console - Executing (b36da4a9-5ee6-4ed5-a889-ba454a96495c): COMMIT;
[2016-10-21 14:32:11.144] [INFO] console - [ 70,
  23,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:32:11.236] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:32:11.240] [INFO] console - Executing (b0433cf4-75e2-44d1-a73f-1c2ba6e163c7): START TRANSACTION;
[2016-10-21 14:32:11.245] [INFO] console - Executing (b0433cf4-75e2-44d1-a73f-1c2ba6e163c7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:32:11.269] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:32:11.281] [INFO] console - Executing (b0433cf4-75e2-44d1-a73f-1c2ba6e163c7): COMMIT;
[2016-10-21 14:32:11.298] [INFO] console - [ 70,
  24,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:32:16.605] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:32:16.630] [INFO] console - [ 70, 25, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 14:43:21.057] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:43:21.124] [INFO] console - Executing (99310119-4650-4c5f-8357-5851523ceba1): START TRANSACTION;
[2016-10-21 14:43:21.127] [INFO] console - Executing (99310119-4650-4c5f-8357-5851523ceba1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:21.208] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:43:21.245] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:43:21.257] [INFO] console - Executing (86757ba8-5916-42e5-8e5a-6c14ef04e6db): START TRANSACTION;
[2016-10-21 14:43:21.264] [INFO] console - Executing (86757ba8-5916-42e5-8e5a-6c14ef04e6db): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:21.301] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:43:21.356] [INFO] console - Executing (99310119-4650-4c5f-8357-5851523ceba1): COMMIT;
[2016-10-21 14:43:21.368] [INFO] console - Executing (86757ba8-5916-42e5-8e5a-6c14ef04e6db): COMMIT;
[2016-10-21 14:43:21.383] [INFO] console - [ 70,
  27,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:43:21.401] [INFO] console - [ 70,
  28,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:43:21.679] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:43:21.683] [INFO] console - Executing (3c544cec-2b5f-4c78-bcaf-e266caba2cc0): START TRANSACTION;
[2016-10-21 14:43:21.693] [INFO] console - Executing (3c544cec-2b5f-4c78-bcaf-e266caba2cc0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:21.705] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:43:21.724] [INFO] console - Executing (727ef893-6583-4183-84e0-b1e016c34886): START TRANSACTION;
[2016-10-21 14:43:21.731] [INFO] console - Executing (727ef893-6583-4183-84e0-b1e016c34886): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:21.748] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:43:21.765] [INFO] console - Executing (3c544cec-2b5f-4c78-bcaf-e266caba2cc0): COMMIT;
[2016-10-21 14:43:21.777] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:43:21.808] [INFO] console - [ 70,
  29,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:43:21.840] [INFO] console - Executing (727ef893-6583-4183-84e0-b1e016c34886): COMMIT;
[2016-10-21 14:43:21.842] [INFO] console - [ 70,
  30,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:43:21.873] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:43:21.882] [INFO] console - Executing (9225aee4-1cce-489a-8cb0-1041f38be60f): START TRANSACTION;
[2016-10-21 14:43:21.885] [INFO] console - Executing (9225aee4-1cce-489a-8cb0-1041f38be60f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:21.904] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:43:21.915] [INFO] console - Executing (9225aee4-1cce-489a-8cb0-1041f38be60f): COMMIT;
[2016-10-21 14:43:21.918] [INFO] console - [ 70,
  31,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:43:21.997] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:43:22.012] [INFO] console - Executing (c48ed781-7582-491e-a55e-7ad0e6e59b34): START TRANSACTION;
[2016-10-21 14:43:22.025] [INFO] console - Executing (c48ed781-7582-491e-a55e-7ad0e6e59b34): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:43:22.053] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:43:22.064] [INFO] console - Executing (c48ed781-7582-491e-a55e-7ad0e6e59b34): COMMIT;
[2016-10-21 14:43:22.067] [INFO] console - [ 70,
  32,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:13.964] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:44:14.040] [INFO] console - Executing (48b618b2-be04-46d5-aa23-15ff2267a44c): START TRANSACTION;
[2016-10-21 14:44:14.061] [INFO] console - Executing (48b618b2-be04-46d5-aa23-15ff2267a44c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:14.177] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:44:14.203] [INFO] console - Executing (48b618b2-be04-46d5-aa23-15ff2267a44c): COMMIT;
[2016-10-21 14:44:14.217] [INFO] console - [ 70,
  34,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:14.314] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:44:14.332] [INFO] console - Executing (705b92fe-eaae-419f-9d3e-01dbe1ab1b76): START TRANSACTION;
[2016-10-21 14:44:14.335] [INFO] console - Executing (705b92fe-eaae-419f-9d3e-01dbe1ab1b76): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:14.361] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:44:14.380] [INFO] console - Executing (705b92fe-eaae-419f-9d3e-01dbe1ab1b76): COMMIT;
[2016-10-21 14:44:14.401] [INFO] console - [ 70,
  35,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:14.911] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:44:14.920] [INFO] console - Executing (f935e61c-2661-40e1-9add-3194164fb6fb): START TRANSACTION;
[2016-10-21 14:44:14.924] [INFO] console - Executing (f935e61c-2661-40e1-9add-3194164fb6fb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:14.948] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:44:14.964] [INFO] console - Executing (f935e61c-2661-40e1-9add-3194164fb6fb): COMMIT;
[2016-10-21 14:44:14.966] [INFO] console - [ 70,
  36,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:44:15.008] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:44:15.016] [INFO] console - Executing (d42219dc-eefd-49ac-b735-46b1508d67e6): START TRANSACTION;
[2016-10-21 14:44:15.019] [INFO] console - Executing (d42219dc-eefd-49ac-b735-46b1508d67e6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:15.038] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:44:15.056] [INFO] console - Executing (d42219dc-eefd-49ac-b735-46b1508d67e6): COMMIT;
[2016-10-21 14:44:15.059] [INFO] console - [ 70,
  37,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:44:15.352] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:44:15.363] [INFO] console - Executing (f47f15ea-d186-462f-8570-2cd93e6b83a7): START TRANSACTION;
[2016-10-21 14:44:15.367] [INFO] console - Executing (f47f15ea-d186-462f-8570-2cd93e6b83a7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:15.432] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:44:15.444] [INFO] console - Executing (f47f15ea-d186-462f-8570-2cd93e6b83a7): COMMIT;
[2016-10-21 14:44:15.446] [INFO] console - [ 70,
  38,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:56.436] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:44:56.485] [INFO] console - Executing (f79ebda1-3261-458e-8b27-e1ab11a5f2d1): START TRANSACTION;
[2016-10-21 14:44:56.488] [INFO] console - Executing (f79ebda1-3261-458e-8b27-e1ab11a5f2d1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:56.558] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:44:56.580] [INFO] console - Executing (f79ebda1-3261-458e-8b27-e1ab11a5f2d1): COMMIT;
[2016-10-21 14:44:56.583] [INFO] console - [ 70,
  40,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:56.682] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:44:56.690] [INFO] console - Executing (05d94fd7-8864-4f4d-a1ee-55ec33cbb2a1): START TRANSACTION;
[2016-10-21 14:44:56.696] [INFO] console - Executing (05d94fd7-8864-4f4d-a1ee-55ec33cbb2a1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:56.717] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:44:56.730] [INFO] console - Executing (05d94fd7-8864-4f4d-a1ee-55ec33cbb2a1): COMMIT;
[2016-10-21 14:44:56.732] [INFO] console - [ 70,
  41,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:44:57.021] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:44:57.027] [INFO] console - Executing (c9709a80-6c2f-40e8-9e29-790469707175): START TRANSACTION;
[2016-10-21 14:44:57.036] [INFO] console - Executing (c9709a80-6c2f-40e8-9e29-790469707175): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:57.049] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:44:57.055] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:44:57.062] [INFO] console - Executing (d1a07a9a-7869-42ae-b6ad-2580a343fee9): START TRANSACTION;
[2016-10-21 14:44:57.067] [INFO] console - Executing (c9709a80-6c2f-40e8-9e29-790469707175): COMMIT;
[2016-10-21 14:44:57.069] [INFO] console - Executing (d1a07a9a-7869-42ae-b6ad-2580a343fee9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:57.073] [INFO] console - [ 70,
  42,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:44:57.111] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:44:57.127] [INFO] console - Executing (d1a07a9a-7869-42ae-b6ad-2580a343fee9): COMMIT;
[2016-10-21 14:44:57.130] [INFO] console - [ 70,
  43,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:44:57.249] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:44:57.252] [INFO] console - Executing (293f5ec3-6698-459a-8e6b-2065f7367936): START TRANSACTION;
[2016-10-21 14:44:57.254] [INFO] console - Executing (293f5ec3-6698-459a-8e6b-2065f7367936): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:44:57.276] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:44:57.294] [INFO] console - Executing (293f5ec3-6698-459a-8e6b-2065f7367936): COMMIT;
[2016-10-21 14:44:57.296] [INFO] console - [ 70,
  44,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:45:59.215] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:45:59.233] [INFO] console - [ 70, 45, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 14:46:00.918] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:46:00.931] [INFO] console - [ 70, 46, {}, [ [ [Object] ] ] ]
[2016-10-21 14:49:16.079] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:49:16.153] [INFO] console - Executing (9f2f31a6-8f8d-4574-b87e-0d019bc5f1b0): START TRANSACTION;
[2016-10-21 14:49:16.165] [INFO] console - Executing (9f2f31a6-8f8d-4574-b87e-0d019bc5f1b0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:16.228] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:49:16.244] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:49:16.255] [INFO] console - Executing (a6e0587a-b1d0-4aef-8410-1fb012d96603): START TRANSACTION;
[2016-10-21 14:49:16.274] [INFO] console - Executing (9f2f31a6-8f8d-4574-b87e-0d019bc5f1b0): COMMIT;
[2016-10-21 14:49:16.278] [INFO] console - Executing (a6e0587a-b1d0-4aef-8410-1fb012d96603): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:16.284] [INFO] console - [ 70,
  48,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:16.300] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:49:16.310] [INFO] console - Executing (a6e0587a-b1d0-4aef-8410-1fb012d96603): COMMIT;
[2016-10-21 14:49:16.313] [INFO] console - [ 70,
  49,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:16.759] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:49:16.766] [INFO] console - Executing (17a09ed8-1600-4f1f-bd4f-e4fa2874dc3b): START TRANSACTION;
[2016-10-21 14:49:16.770] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:49:16.776] [INFO] console - Executing (d666caf1-16bf-4d87-8da9-766b70cb117f): START TRANSACTION;
[2016-10-21 14:49:16.778] [INFO] console - Executing (17a09ed8-1600-4f1f-bd4f-e4fa2874dc3b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:16.785] [INFO] console - Executing (d666caf1-16bf-4d87-8da9-766b70cb117f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:16.842] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:49:16.875] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:49:16.892] [INFO] console - Executing (17a09ed8-1600-4f1f-bd4f-e4fa2874dc3b): COMMIT;
[2016-10-21 14:49:16.900] [INFO] console - Executing (d666caf1-16bf-4d87-8da9-766b70cb117f): COMMIT;
[2016-10-21 14:49:16.903] [INFO] console - [ 70,
  50,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:49:16.926] [INFO] console - [ 70,
  51,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:49:16.989] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:49:16.993] [INFO] console - Executing (46507803-01cb-40f1-943e-acfdda3b4f04): START TRANSACTION;
[2016-10-21 14:49:16.995] [INFO] console - Executing (46507803-01cb-40f1-943e-acfdda3b4f04): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:17.033] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:49:17.057] [INFO] console - Executing (46507803-01cb-40f1-943e-acfdda3b4f04): COMMIT;
[2016-10-21 14:49:17.062] [INFO] console - [ 70,
  52,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:49:17.156] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:49:17.164] [INFO] console - Executing (1e3533e9-135d-46e3-b297-b244dd86f5c9): START TRANSACTION;
[2016-10-21 14:49:17.170] [INFO] console - Executing (1e3533e9-135d-46e3-b297-b244dd86f5c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:17.187] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:49:17.196] [INFO] console - Executing (1e3533e9-135d-46e3-b297-b244dd86f5c9): COMMIT;
[2016-10-21 14:49:17.210] [INFO] console - [ 70,
  53,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:21.139] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:49:21.156] [INFO] console - [ 70, 54, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 14:49:45.183] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:49:45.260] [INFO] console - Executing (9a0a741f-ae65-4513-87c3-a658342cb105): START TRANSACTION;
[2016-10-21 14:49:45.263] [INFO] console - Executing (9a0a741f-ae65-4513-87c3-a658342cb105): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:45.322] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:49:45.334] [INFO] console - Executing (9a0a741f-ae65-4513-87c3-a658342cb105): COMMIT;
[2016-10-21 14:49:45.336] [INFO] console - [ 70,
  56,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:45.401] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:49:45.411] [INFO] console - Executing (b0724724-ae27-4a28-8f40-1a3050423928): START TRANSACTION;
[2016-10-21 14:49:45.413] [INFO] console - Executing (b0724724-ae27-4a28-8f40-1a3050423928): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:45.425] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:49:45.440] [INFO] console - Executing (b0724724-ae27-4a28-8f40-1a3050423928): COMMIT;
[2016-10-21 14:49:45.443] [INFO] console - [ 70,
  57,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:45.871] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:49:45.882] [INFO] console - Executing (25b44b6e-9cb1-407e-be49-a4af509115e2): START TRANSACTION;
[2016-10-21 14:49:45.884] [INFO] console - Executing (25b44b6e-9cb1-407e-be49-a4af509115e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:45.897] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:49:45.910] [INFO] console - Executing (25b44b6e-9cb1-407e-be49-a4af509115e2): COMMIT;
[2016-10-21 14:49:45.912] [INFO] console - [ 70,
  58,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:49:45.924] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:49:45.932] [INFO] console - Executing (9a928280-ebc1-425f-b948-98df15d7fc58): START TRANSACTION;
[2016-10-21 14:49:45.935] [INFO] console - Executing (9a928280-ebc1-425f-b948-98df15d7fc58): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:45.953] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:49:45.968] [INFO] console - Executing (9a928280-ebc1-425f-b948-98df15d7fc58): COMMIT;
[2016-10-21 14:49:45.970] [INFO] console - [ 70,
  59,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:49:46.174] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:49:46.178] [INFO] console - Executing (0782c20e-2ff5-49be-a9c4-9381fed3272f): START TRANSACTION;
[2016-10-21 14:49:46.181] [INFO] console - Executing (0782c20e-2ff5-49be-a9c4-9381fed3272f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:49:46.210] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:49:46.234] [INFO] console - Executing (0782c20e-2ff5-49be-a9c4-9381fed3272f): COMMIT;
[2016-10-21 14:49:46.238] [INFO] console - [ 70,
  60,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 14:49:49.519] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:49:49.532] [INFO] console - [ 70, 61, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 14:49:53.593] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 14:49:53.611] [INFO] console - [ 70, 62, {}, [ [ [Object] ] ] ]
[2016-10-21 14:58:20.263] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:58:20.384] [INFO] console - Executing (72e6db56-e426-4937-a5e2-89098ce83127): START TRANSACTION;
[2016-10-21 14:58:20.395] [INFO] console - Executing (72e6db56-e426-4937-a5e2-89098ce83127): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:58:20.449] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:58:20.469] [INFO] console - Executing (72e6db56-e426-4937-a5e2-89098ce83127): COMMIT;
[2016-10-21 14:58:20.474] [INFO] console - [ 70,
  64,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:58:20.503] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 14:58:20.523] [INFO] console - Executing (10734bf1-3b7a-4351-918d-7dfab4144bf3): START TRANSACTION;
[2016-10-21 14:58:20.526] [INFO] console - Executing (10734bf1-3b7a-4351-918d-7dfab4144bf3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:58:20.550] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 14:58:20.564] [INFO] console - Executing (10734bf1-3b7a-4351-918d-7dfab4144bf3): COMMIT;
[2016-10-21 14:58:20.566] [INFO] console - [ 70,
  65,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 14:58:20.763] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:58:20.766] [INFO] console - Executing (53d5524b-5f4c-4f04-8feb-5801072d0363): START TRANSACTION;
[2016-10-21 14:58:20.769] [INFO] console - Executing (53d5524b-5f4c-4f04-8feb-5801072d0363): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:58:20.789] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:58:20.804] [INFO] console - Executing (53d5524b-5f4c-4f04-8feb-5801072d0363): COMMIT;
[2016-10-21 14:58:20.808] [INFO] console - [ 70,
  66,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:58:20.852] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 14:58:20.865] [INFO] console - Executing (f301259d-e930-43c4-bb31-06ae9c650dfd): START TRANSACTION;
[2016-10-21 14:58:20.870] [INFO] console - Executing (f301259d-e930-43c4-bb31-06ae9c650dfd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:58:20.890] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 14:58:20.904] [INFO] console - Executing (f301259d-e930-43c4-bb31-06ae9c650dfd): COMMIT;
[2016-10-21 14:58:20.906] [INFO] console - [ 70,
  67,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 14:58:21.068] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 14:58:21.076] [INFO] console - Executing (852c37c7-d0bf-4a6d-a0df-c2a213db91f4): START TRANSACTION;
[2016-10-21 14:58:21.082] [INFO] console - Executing (852c37c7-d0bf-4a6d-a0df-c2a213db91f4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 14:58:21.095] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 14:58:21.120] [INFO] console - Executing (852c37c7-d0bf-4a6d-a0df-c2a213db91f4): COMMIT;
[2016-10-21 14:58:21.126] [INFO] console - [ 70,
  68,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:00:08.070] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:00:08.125] [INFO] console - Executing (1d0b2819-dfe8-416d-9961-dc5557c407b9): START TRANSACTION;
[2016-10-21 15:00:08.133] [INFO] console - Executing (1d0b2819-dfe8-416d-9961-dc5557c407b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:08.206] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:00:08.234] [INFO] console - Executing (1d0b2819-dfe8-416d-9961-dc5557c407b9): COMMIT;
[2016-10-21 15:00:08.240] [INFO] console - [ 70,
  70,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:00:08.320] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:00:08.328] [INFO] console - Executing (fbbba093-0841-4f7d-9f46-21691bb592c9): START TRANSACTION;
[2016-10-21 15:00:08.332] [INFO] console - Executing (fbbba093-0841-4f7d-9f46-21691bb592c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:08.360] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:00:08.395] [INFO] console - Executing (fbbba093-0841-4f7d-9f46-21691bb592c9): COMMIT;
[2016-10-21 15:00:08.403] [INFO] console - [ 70,
  71,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:00:08.757] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:00:08.762] [INFO] console - Executing (27d61dcf-c69c-41ca-94c6-566e07a110d8): START TRANSACTION;
[2016-10-21 15:00:08.772] [INFO] console - Executing (27d61dcf-c69c-41ca-94c6-566e07a110d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:08.774] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:00:08.779] [INFO] console - Executing (a7ebdafe-da56-40a1-9ba3-d7d37125f18b): START TRANSACTION;
[2016-10-21 15:00:08.786] [INFO] console - Executing (a7ebdafe-da56-40a1-9ba3-d7d37125f18b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:08.979] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:00:09.041] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:00:09.052] [INFO] console - Executing (377c0cf3-41c7-4945-824e-f46f64a1fb4a): START TRANSACTION;
[2016-10-21 15:00:09.055] [INFO] console - Executing (27d61dcf-c69c-41ca-94c6-566e07a110d8): COMMIT;
[2016-10-21 15:00:09.058] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:00:09.062] [INFO] console - Executing (377c0cf3-41c7-4945-824e-f46f64a1fb4a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:09.063] [INFO] console - [ 70,
  72,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:00:09.091] [INFO] console - Executing (a7ebdafe-da56-40a1-9ba3-d7d37125f18b): COMMIT;
[2016-10-21 15:00:09.099] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:00:09.108] [INFO] console - [ 70,
  73,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:00:09.121] [INFO] console - Executing (377c0cf3-41c7-4945-824e-f46f64a1fb4a): COMMIT;
[2016-10-21 15:00:09.123] [INFO] console - [ 70,
  74,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:00:09.218] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 15:00:09.221] [INFO] console - Executing (3fb1f83a-a499-4709-acf5-5f8e5a45eacf): START TRANSACTION;
[2016-10-21 15:00:09.224] [INFO] console - Executing (3fb1f83a-a499-4709-acf5-5f8e5a45eacf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:00:09.239] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 15:00:09.250] [INFO] console - Executing (3fb1f83a-a499-4709-acf5-5f8e5a45eacf): COMMIT;
[2016-10-21 15:00:09.253] [INFO] console - [ 70,
  75,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:00:12.438] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:00:12.454] [INFO] console - [ 70, 76, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:06:38.157] [INFO] console - AutobahnJS debug enabled
[2016-10-21 15:06:40.066] [INFO] Server - starting...
[2016-10-21 15:06:40.072] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 15:06:40.168] [INFO] console - using WAMP transport type: websocket
[2016-10-21 15:06:40.406] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 15:06:40.462] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 15:06:40.508] [INFO] Server - connection.onopen()
[2016-10-21 15:06:40.511] [INFO] console - [ 64, 5046136781930496, {}, 'ru.kopa.model.create' ]
[2016-10-21 15:06:40.524] [DEBUG] Server - api:model.create registered
[2016-10-21 15:06:40.525] [INFO] console - [ 64, 2607729839439872, {}, 'ru.kopa.model.get' ]
[2016-10-21 15:06:40.538] [DEBUG] Server - api:model.get registered
[2016-10-21 15:06:40.539] [INFO] console - [ 64, 5294207547736064, {}, 'ru.kopa.model.save' ]
[2016-10-21 15:06:40.544] [DEBUG] Server - api:model.save registered
[2016-10-21 15:06:40.545] [INFO] console - [ 64, 930190660206592, {}, 'ru.kopa.pingPong' ]
[2016-10-21 15:06:40.552] [DEBUG] Server - api:pingPong registered
[2016-10-21 15:06:40.553] [INFO] console - [ 64, 8790150087704576, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 15:06:40.558] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 15:06:40.559] [INFO] console - [ 64, 2718157814890496, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 15:06:40.566] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 15:06:40.567] [INFO] console - [ 64, 8211661534003200, {}, 'ru.kopa.error' ]
[2016-10-21 15:06:40.572] [DEBUG] Server - api:error registered
[2016-10-21 15:06:40.573] [INFO] console - [ 64, 4766215299923968, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 15:06:40.579] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 15:06:40.580] [INFO] console - [ 64, 2739221311782912, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 15:06:40.586] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 15:06:40.587] [INFO] console - [ 64, 5514520262868992, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 15:06:40.598] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 15:06:40.599] [INFO] console - [ 64, 1463151082078208, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 15:06:40.612] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 15:06:40.615] [INFO] console - [ 64, 3199494959136768, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 15:06:40.620] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 15:06:40.623] [INFO] console - [ 64, 4790031027798016, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 15:06:40.631] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 15:06:40.634] [INFO] console - [ 64, 2799545962463232, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 15:06:40.639] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 15:06:40.641] [INFO] console - [ 64, 997308349022208, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 15:06:40.645] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 15:06:40.648] [INFO] console - [ 64, 2951035922415616, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 15:06:40.661] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 15:06:40.664] [INFO] console - [ 64, 98580262027264, {}, 'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 15:06:40.673] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 15:06:40.674] [INFO] console - [ 64, 6341721975685120, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 15:06:40.684] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 15:06:40.686] [INFO] Server - started
[2016-10-21 15:07:01.725] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:07:01.931] [INFO] console - Executing (bf11d03f-6658-4e74-9963-0af1fa3a1e62): START TRANSACTION;
[2016-10-21 15:07:01.935] [INFO] console - Executing (bf11d03f-6658-4e74-9963-0af1fa3a1e62): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:02.050] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:07:02.092] [INFO] console - Executing (bf11d03f-6658-4e74-9963-0af1fa3a1e62): COMMIT;
[2016-10-21 15:07:02.100] [INFO] console - [ 70,
  4,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:02.174] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:07:02.178] [INFO] console - Executing (d9a9bb4f-a5d6-40c2-a16b-6e1c035b8246): START TRANSACTION;
[2016-10-21 15:07:02.185] [INFO] console - Executing (d9a9bb4f-a5d6-40c2-a16b-6e1c035b8246): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:02.207] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:07:02.231] [INFO] console - Executing (d9a9bb4f-a5d6-40c2-a16b-6e1c035b8246): COMMIT;
[2016-10-21 15:07:02.238] [INFO] console - [ 70,
  5,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:02.991] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:07:02.996] [INFO] console - Executing (273581a7-77b1-4a1b-abf8-20e5a1cc6fd5): START TRANSACTION;
[2016-10-21 15:07:02.998] [INFO] console - Executing (273581a7-77b1-4a1b-abf8-20e5a1cc6fd5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:03.050] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:07:03.072] [INFO] console - Executing (273581a7-77b1-4a1b-abf8-20e5a1cc6fd5): COMMIT;
[2016-10-21 15:07:03.077] [INFO] console - [ 70,
  6,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:07:03.114] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:07:03.118] [INFO] console - Executing (4aa6379d-901f-4a2f-8158-b1063e73268d): START TRANSACTION;
[2016-10-21 15:07:03.136] [INFO] console - Executing (4aa6379d-901f-4a2f-8158-b1063e73268d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:03.169] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:07:03.196] [INFO] console - Executing (4aa6379d-901f-4a2f-8158-b1063e73268d): COMMIT;
[2016-10-21 15:07:03.199] [INFO] console - [ 70,
  7,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:07:03.628] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 15:07:03.649] [INFO] console - Executing (fdc90859-f1b1-4b94-92ca-f78f0fba0a9e): START TRANSACTION;
[2016-10-21 15:07:03.653] [INFO] console - Executing (fdc90859-f1b1-4b94-92ca-f78f0fba0a9e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:03.672] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 15:07:03.689] [INFO] console - Executing (fdc90859-f1b1-4b94-92ca-f78f0fba0a9e): COMMIT;
[2016-10-21 15:07:03.691] [INFO] console - [ 70,
  8,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:05.843] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:07:05.863] [INFO] console - [ 70, 9, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:07:12.446] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:07:12.501] [INFO] console - [ 70, 10, {}, [ [ [Object] ] ] ]
[2016-10-21 15:07:44.762] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:07:44.819] [INFO] console - Executing (4837228f-e8a8-4d1d-9dda-6b960339f573): START TRANSACTION;
[2016-10-21 15:07:44.821] [INFO] console - Executing (4837228f-e8a8-4d1d-9dda-6b960339f573): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:44.830] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:07:44.900] [INFO] console - Executing (098ca44e-8d3c-4520-9061-20ffe6b0476d): START TRANSACTION;
[2016-10-21 15:07:44.902] [INFO] console - Executing (098ca44e-8d3c-4520-9061-20ffe6b0476d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:44.930] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:07:44.945] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:07:44.960] [INFO] console - Executing (4837228f-e8a8-4d1d-9dda-6b960339f573): COMMIT;
[2016-10-21 15:07:44.971] [INFO] console - Executing (098ca44e-8d3c-4520-9061-20ffe6b0476d): COMMIT;
[2016-10-21 15:07:44.973] [INFO] console - [ 70,
  12,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:44.979] [INFO] console - [ 70,
  13,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:45.190] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:07:45.196] [INFO] console - Executing (162caf9c-5a7a-47a7-ac36-6db80371ec31): START TRANSACTION;
[2016-10-21 15:07:45.204] [INFO] console - Executing (162caf9c-5a7a-47a7-ac36-6db80371ec31): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:45.237] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:07:45.240] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:07:45.247] [INFO] console - Executing (b859f115-0c5e-4b06-8134-f7c37fd305f5): START TRANSACTION;
[2016-10-21 15:07:45.255] [INFO] console - Executing (162caf9c-5a7a-47a7-ac36-6db80371ec31): COMMIT;
[2016-10-21 15:07:45.257] [INFO] console - Executing (b859f115-0c5e-4b06-8134-f7c37fd305f5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:45.269] [INFO] console - [ 70,
  14,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:07:45.291] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:07:45.307] [INFO] console - Executing (b859f115-0c5e-4b06-8134-f7c37fd305f5): COMMIT;
[2016-10-21 15:07:45.311] [INFO] console - [ 70,
  15,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:07:45.363] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 15:07:45.367] [INFO] console - Executing (0dbb057b-8044-476b-9cfc-ad674b361743): START TRANSACTION;
[2016-10-21 15:07:45.371] [INFO] console - Executing (0dbb057b-8044-476b-9cfc-ad674b361743): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:07:45.387] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 15:07:45.398] [INFO] console - Executing (0dbb057b-8044-476b-9cfc-ad674b361743): COMMIT;
[2016-10-21 15:07:45.409] [INFO] console - [ 70,
  16,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:07:46.917] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:07:46.925] [INFO] console - [ 70, 17, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:07:52.441] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:07:52.458] [INFO] console - [ 70, 18, {}, [ [ [Object] ] ] ]
[2016-10-21 15:07:56.897] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 15:07:57.014] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 15:07:57.032] [INFO] console - [ 70, 19, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 15:08:01.124] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 15:08:01.179] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 15:08:01.186] [INFO] console - [ 70, 20, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 15:08:01.248] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 15:08:01.259] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 15:08:01.264] [INFO] console - [ 70, 21, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 15:08:01.332] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:08:01.337] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:08:01.363] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:08:01.365] [INFO] console - [ 70, 22, {}, [ [] ] ]
[2016-10-21 15:08:01.368] [INFO] console - [ 70, 23, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:08:01.378] [INFO] console - [ 70, 24, {}, [ [] ] ]
[2016-10-21 15:08:01.485] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 15:08:01.490] [INFO] console - Executing (bde2165b-807d-455d-87f9-c6456571a7a9): START TRANSACTION;
[2016-10-21 15:08:01.496] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 15:08:01.503] [INFO] console - Executing (084e6e3b-ad7c-499f-97db-fdf68f0f1c65): START TRANSACTION;
[2016-10-21 15:08:01.509] [INFO] console - Executing (bde2165b-807d-455d-87f9-c6456571a7a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:08:01.534] [INFO] console - Executing (084e6e3b-ad7c-499f-97db-fdf68f0f1c65): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:08:01.556] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 15:08:01.594] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 15:08:01.621] [INFO] console - Executing (bde2165b-807d-455d-87f9-c6456571a7a9): COMMIT;
[2016-10-21 15:08:01.638] [INFO] console - Executing (084e6e3b-ad7c-499f-97db-fdf68f0f1c65): COMMIT;
[2016-10-21 15:08:01.645] [INFO] console - [ 70,
  25,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:08:01.666] [INFO] console - [ 70,
  26,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:08:20.002] [INFO] console - Executing (c8c2752c-130b-4a7f-a90c-5fc1fc62e13c): START TRANSACTION;
[2016-10-21 15:08:20.009] [INFO] console - Executing (c8c2752c-130b-4a7f-a90c-5fc1fc62e13c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:08:20.046] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 15:08:20.059] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" = 1);
[2016-10-21 15:08:20.074] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" = '3');
[2016-10-21 15:08:20.085] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 15:08:20.101] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 15:08:20.156] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 15:08:20.261] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 15:08:20.276] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = '1' AND "Golos"."owner_id" = '2')) LIMIT 1;
[2016-10-21 15:08:20.317] [INFO] console - Executing (default): INSERT INTO "Golos" ("id","value","created_at","updated_at","subject_id","owner_id") VALUES (DEFAULT,1,'2016-10-21 10:08:20.284 +00:00','2016-10-21 10:08:20.284 +00:00','1','2') RETURNING *;
[2016-10-21 15:08:20.337] [INFO] console - Executing (default): insert into "Golos" (subject_id, value, owner_id, parent_id, created_at, updated_at)
                            (
                                select 1, 1, k.id, 3, current_timestamp, current_timestamp
                                from 
                                    "Kopnik" k
                                     join "Zemla" d on d.id= k.dom_id
                                where
                                    k.path like '/2/%'
                                    and d.path||d.id||'/' like '/1/2/%' 
                            )
[2016-10-21 15:08:20.353] [INFO] console - Executing (default): select
                            (select count(*) from "Golos" g where subject_id= 1 and value=1) "za",
                            (select count(*) from "Golos" g where subject_id= 1 and value=-1) "protiv"
[2016-10-21 15:08:20.393] [INFO] console - Executing (default): UPDATE "Predlozhenie" SET "totalZa"=3,"updated_at"='2016-10-21 10:08:20.364 +00:00' WHERE "id" = '1'
[2016-10-21 15:08:20.398] [INFO] console - Executing (c8c2752c-130b-4a7f-a90c-5fc1fc62e13c): COMMIT;
[2016-10-21 15:08:20.402] [INFO] console - [ 70, 27, {}, [ undefined ] ]
[2016-10-21 15:08:20.408] [INFO] console - [ 16,
  141432495013888,
  { acknowledge: true },
  'ru.kopa.model.Predlozhenie.id1.rebalance',
  [],
  { totalZa: 3, totalProtiv: 0, GOLOS: '3', action: 'add', value: 1 } ]
[2016-10-21 15:08:20.428] [DEBUG] Server - #promiseModel() [] { model: 'Golos', id: 3 }
[2016-10-21 15:08:20.432] [INFO] console - Executing (2564d03b-abce-4275-a303-668ee1928002): START TRANSACTION;
[2016-10-21 15:08:20.438] [INFO] console - Executing (2564d03b-abce-4275-a303-668ee1928002): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:08:20.455] [INFO] console - Executing (default): SELECT "Golos"."id", "Golos"."value", "Golos"."reason", "Golos"."note", "Golos"."created_at", "Golos"."updated_at", "Golos"."deleted_at", "Golos"."subject_id", "Golos"."owner_id", "Golos"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Golos" AS "Golos" LEFT OUTER JOIN "File" AS "attachments" ON "Golos"."id" = "attachments"."golos_id" AND "attachments"."deleted_at" IS NULL WHERE ("Golos"."deleted_at" IS NULL AND "Golos"."id" = 3);
[2016-10-21 15:08:20.476] [INFO] console - Executing (2564d03b-abce-4275-a303-668ee1928002): COMMIT;
[2016-10-21 15:08:20.479] [INFO] console - [ 70,
  28,
  {},
  [ { id: '3',
      value: 1,
      reason: null,
      note: null,
      created_at: Fri Oct 21 2016 15:08:20 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:08:20 GMT+0500 (YEKT),
      deleted_at: null,
      subject_id: '1',
      owner_id: '2',
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:08:59.179] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 7) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:08:59.192] [INFO] console - [ 70, 29, {}, [ [] ] ]
[2016-10-21 15:09:00.015] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 6) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:09:00.020] [INFO] console - [ 70, 30, {}, [ [] ] ]
[2016-10-21 15:09:08.071] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=1
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 15:09:08.094] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('6', '7')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 15:09:08.108] [INFO] console - [ 70, 31, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:09:55.288] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=7
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 15:09:55.305] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN (NULL)) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 15:09:55.308] [INFO] console - [ 70, 32, {}, [ [] ] ]
[2016-10-21 15:09:55.326] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=7
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 15:09:55.386] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN (NULL)) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 15:09:55.390] [INFO] console - [ 70, 33, {}, [ [] ] ]
[2016-10-21 15:12:20.321] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=1
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 15:12:20.354] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN (NULL)) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 15:12:20.356] [INFO] console - [ 70, 34, {}, [ [] ] ]
[2016-10-21 15:12:20.370] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=1
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 15:12:20.402] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN (NULL)) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 15:12:20.406] [INFO] console - [ 70, 35, {}, [ [] ] ]
[2016-10-21 15:12:25.683] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=4
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 15:12:25.697] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN (NULL)) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 15:12:25.701] [INFO] console - [ 70, 36, {}, [ [] ] ]
[2016-10-21 15:12:25.743] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=4
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 15:12:25.755] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN (NULL)) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 15:12:25.760] [INFO] console - [ 70, 37, {}, [ [] ] ]
[2016-10-21 15:39:16.173] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:39:16.190] [INFO] console - [ 70, 38, {}, [ [] ] ]
[2016-10-21 15:49:25.256] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:49:25.332] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:49:25.363] [INFO] console - Executing (850fb849-e5dc-41ea-bcc6-adc57eb5d810): START TRANSACTION;
[2016-10-21 15:49:25.374] [INFO] console - Executing (850fb849-e5dc-41ea-bcc6-adc57eb5d810): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:25.410] [INFO] console - Executing (782db494-13a2-4cdc-b2f1-fad8320396f6): START TRANSACTION;
[2016-10-21 15:49:25.422] [INFO] console - Executing (782db494-13a2-4cdc-b2f1-fad8320396f6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:25.475] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:49:25.493] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:49:25.502] [INFO] console - Executing (850fb849-e5dc-41ea-bcc6-adc57eb5d810): COMMIT;
[2016-10-21 15:49:25.534] [INFO] console - Executing (782db494-13a2-4cdc-b2f1-fad8320396f6): COMMIT;
[2016-10-21 15:49:25.544] [INFO] console - [ 70,
  40,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:49:25.566] [INFO] console - [ 70,
  41,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:49:25.714] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:49:25.725] [INFO] console - Executing (399afc29-58b1-4f1b-b3c0-9da6cde1f756): START TRANSACTION;
[2016-10-21 15:49:25.728] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:49:25.737] [INFO] console - Executing (4b41109b-4c48-4fb2-a780-a6859a8b497a): START TRANSACTION;
[2016-10-21 15:49:25.739] [INFO] console - Executing (399afc29-58b1-4f1b-b3c0-9da6cde1f756): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:25.742] [INFO] console - Executing (4b41109b-4c48-4fb2-a780-a6859a8b497a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:25.769] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:49:25.792] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:49:25.808] [INFO] console - Executing (399afc29-58b1-4f1b-b3c0-9da6cde1f756): COMMIT;
[2016-10-21 15:49:25.823] [INFO] console - Executing (4b41109b-4c48-4fb2-a780-a6859a8b497a): COMMIT;
[2016-10-21 15:49:25.825] [INFO] console - [ 70,
  42,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:49:25.844] [INFO] console - [ 70,
  43,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:49:25.916] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:49:25.923] [INFO] console - Executing (67b24385-1eb2-4353-a555-f01b7764f985): START TRANSACTION;
[2016-10-21 15:49:25.927] [INFO] console - Executing (67b24385-1eb2-4353-a555-f01b7764f985): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:25.945] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:49:25.954] [INFO] console - Executing (67b24385-1eb2-4353-a555-f01b7764f985): COMMIT;
[2016-10-21 15:49:25.963] [INFO] console - [ 70,
  44,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:49:26.089] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 15:49:26.093] [INFO] console - Executing (7735d957-0218-45d8-ab43-9436f12b5831): START TRANSACTION;
[2016-10-21 15:49:26.099] [INFO] console - Executing (7735d957-0218-45d8-ab43-9436f12b5831): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:49:26.120] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 15:49:26.132] [INFO] console - Executing (7735d957-0218-45d8-ab43-9436f12b5831): COMMIT;
[2016-10-21 15:49:26.137] [INFO] console - [ 70,
  45,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:50:37.360] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:50:37.442] [INFO] console - Executing (5949d152-667f-4e65-acc3-f00eedfd4f14): START TRANSACTION;
[2016-10-21 15:50:37.445] [INFO] console - Executing (5949d152-667f-4e65-acc3-f00eedfd4f14): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.455] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 15:50:37.527] [INFO] console - Executing (0a794379-102b-4c93-8036-6628dd52e550): START TRANSACTION;
[2016-10-21 15:50:37.532] [INFO] console - Executing (0a794379-102b-4c93-8036-6628dd52e550): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.570] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:50:37.601] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:50:37.614] [INFO] console - Executing (5949d152-667f-4e65-acc3-f00eedfd4f14): COMMIT;
[2016-10-21 15:50:37.620] [INFO] console - Executing (0a794379-102b-4c93-8036-6628dd52e550): COMMIT;
[2016-10-21 15:50:37.624] [INFO] console - [ 70,
  47,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:50:37.638] [INFO] console - [ 70,
  48,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:50:37.683] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:50:37.694] [INFO] console - Executing (324ee578-cf7e-4787-932e-163792742d82): START TRANSACTION;
[2016-10-21 15:50:37.701] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:50:37.711] [INFO] console - Executing (68745a22-6069-4665-a04a-e3b1deaf89ba): START TRANSACTION;
[2016-10-21 15:50:37.717] [INFO] console - Executing (324ee578-cf7e-4787-932e-163792742d82): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.725] [INFO] console - Executing (68745a22-6069-4665-a04a-e3b1deaf89ba): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.737] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:50:37.757] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:50:37.777] [INFO] console - Executing (324ee578-cf7e-4787-932e-163792742d82): COMMIT;
[2016-10-21 15:50:37.786] [INFO] console - Executing (68745a22-6069-4665-a04a-e3b1deaf89ba): COMMIT;
[2016-10-21 15:50:37.788] [INFO] console - [ 70,
  49,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:50:37.801] [INFO] console - [ 70,
  50,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:50:37.829] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 15:50:37.835] [INFO] console - Executing (c219aaf2-90b3-4ab0-bb37-c3bd600a6dad): START TRANSACTION;
[2016-10-21 15:50:37.837] [INFO] console - Executing (c219aaf2-90b3-4ab0-bb37-c3bd600a6dad): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.860] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 15:50:37.871] [INFO] console - Executing (c219aaf2-90b3-4ab0-bb37-c3bd600a6dad): COMMIT;
[2016-10-21 15:50:37.873] [INFO] console - [ 70,
  51,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 15:50:37.909] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 15:50:37.914] [INFO] console - Executing (26f3018f-7959-44c3-9337-740a2c4f4659): START TRANSACTION;
[2016-10-21 15:50:37.918] [INFO] console - Executing (26f3018f-7959-44c3-9337-740a2c4f4659): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:37.943] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 15:50:37.966] [INFO] console - Executing (26f3018f-7959-44c3-9337-740a2c4f4659): COMMIT;
[2016-10-21 15:50:37.989] [INFO] console - [ 70,
  52,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 15:50:46.913] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=1
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 15:50:46.931] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('6', '7')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 15:50:46.940] [INFO] console - [ 70, 53, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:50:48.536] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 15:50:48.554] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 15:50:48.562] [INFO] console - [ 70, 54, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 15:50:49.618] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 15:50:49.634] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 15:50:49.642] [INFO] console - [ 70, 55, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 15:50:49.701] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 15:50:49.731] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 15:50:49.742] [INFO] console - [ 70, 56, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 15:50:49.795] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:50:49.820] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:50:49.823] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 15:50:49.840] [INFO] console - [ 70, 57, {}, [ [ [Object] ] ] ]
[2016-10-21 15:50:49.855] [INFO] console - [ 70, 58, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:50:49.866] [INFO] console - [ 70, 59, {}, [ [] ] ]
[2016-10-21 15:50:50.006] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 15:50:50.016] [INFO] console - Executing (c6de848e-7397-491b-b3b1-b642cc7a67e9): START TRANSACTION;
[2016-10-21 15:50:50.019] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 15:50:50.028] [INFO] console - Executing (deae87b1-f88b-44f7-ab4e-d170a79d1b1b): START TRANSACTION;
[2016-10-21 15:50:50.031] [INFO] console - Executing (c6de848e-7397-491b-b3b1-b642cc7a67e9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:50.036] [INFO] console - Executing (deae87b1-f88b-44f7-ab4e-d170a79d1b1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:50:50.059] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 15:50:50.080] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 15:50:50.085] [INFO] console - Executing (c6de848e-7397-491b-b3b1-b642cc7a67e9): COMMIT;
[2016-10-21 15:50:50.091] [INFO] console - Executing (deae87b1-f88b-44f7-ab4e-d170a79d1b1b): COMMIT;
[2016-10-21 15:50:50.093] [INFO] console - [ 70,
  60,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:50:50.113] [INFO] console - [ 70,
  61,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 15:51:00.707] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:51:00.717] [INFO] console - [ 70, 62, {}, [ [] ] ]
[2016-10-21 15:51:12.914] [INFO] console - Executing (1f213c17-d179-42b5-8973-c8bdc2ae53c9): START TRANSACTION;
[2016-10-21 15:51:12.916] [INFO] console - Executing (1f213c17-d179-42b5-8973-c8bdc2ae53c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 15:51:12.956] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 15:51:12.968] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 15:51:12.984] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 15:51:12.999] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 15:51:13.005] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 15:51:13.027] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 10:51:13.011 +00:00' WHERE "id" = '2'
[2016-10-21 15:51:13.032] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/4/')
                                where
                                    id = '2'
                                    or path like '/2/'||'%'
[2016-10-21 15:51:13.063] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 15:51:13.068] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 15:51:13.077] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 15:51:13.082] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 15:51:13.085] [INFO] console - Executing (1f213c17-d179-42b5-8973-c8bdc2ae53c9): COMMIT;
[2016-10-21 15:51:13.088] [INFO] console - [ 70, 63, {}, [ undefined ] ]
[2016-10-21 15:51:13.097] [INFO] console - [ 16,
  3194933395587072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 15:51:13.119] [INFO] console - [ 16,
  4413571481993216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 15:51:13.128] [INFO] console - [ 16,
  6545968478552064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 15:51:13.133] [INFO] console - [ 16,
  6483551864225792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 15:51:13.140] [INFO] console - [ 16,
  4803123193315328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 15:55:12.269] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:55:12.288] [INFO] console - [ 70, 64, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 15:55:15.932] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 3) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 15:55:15.947] [INFO] console - [ 70, 65, {}, [ [ [Object] ] ] ]
[2016-10-21 16:03:40.704] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:03:40.752] [INFO] console - Executing (d5a44015-cf51-4f32-872a-775261f5dfd9): START TRANSACTION;
[2016-10-21 16:03:40.754] [INFO] console - Executing (d5a44015-cf51-4f32-872a-775261f5dfd9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:03:40.828] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:03:40.850] [INFO] console - Executing (d5a44015-cf51-4f32-872a-775261f5dfd9): COMMIT;
[2016-10-21 16:03:40.855] [INFO] console - [ 70,
  67,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:03:40.952] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:03:40.969] [INFO] console - Executing (c89af603-e1f9-441a-8db0-b120a5af8585): START TRANSACTION;
[2016-10-21 16:03:40.972] [INFO] console - Executing (c89af603-e1f9-441a-8db0-b120a5af8585): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:03:40.995] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:03:41.010] [INFO] console - Executing (c89af603-e1f9-441a-8db0-b120a5af8585): COMMIT;
[2016-10-21 16:03:41.012] [INFO] console - [ 70,
  68,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:03:41.866] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:03:41.869] [INFO] console - Executing (b73f5581-9d20-4cfd-8977-a03639017d2e): START TRANSACTION;
[2016-10-21 16:03:41.871] [INFO] console - Executing (b73f5581-9d20-4cfd-8977-a03639017d2e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:03:41.892] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:03:41.918] [INFO] console - Executing (b73f5581-9d20-4cfd-8977-a03639017d2e): COMMIT;
[2016-10-21 16:03:41.921] [INFO] console - [ 70,
  69,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:03:41.965] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:03:41.976] [INFO] console - Executing (951f2ca1-19da-4cbc-84de-0bbcc62589b1): START TRANSACTION;
[2016-10-21 16:03:41.978] [INFO] console - Executing (951f2ca1-19da-4cbc-84de-0bbcc62589b1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:03:41.992] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:03:42.021] [INFO] console - Executing (951f2ca1-19da-4cbc-84de-0bbcc62589b1): COMMIT;
[2016-10-21 16:03:42.029] [INFO] console - [ 70,
  70,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:03:42.173] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:03:42.179] [INFO] console - Executing (fef23731-acd3-4fe5-b017-b5206fdeeba6): START TRANSACTION;
[2016-10-21 16:03:42.184] [INFO] console - Executing (fef23731-acd3-4fe5-b017-b5206fdeeba6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:03:42.196] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:03:42.213] [INFO] console - Executing (fef23731-acd3-4fe5-b017-b5206fdeeba6): COMMIT;
[2016-10-21 16:03:42.216] [INFO] console - [ 70,
  71,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:04:16.191] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 16:04:16.213] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 16:04:16.248] [INFO] console - [ 70, 72, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 16:04:17.816] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 16:04:17.832] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 16:04:17.838] [INFO] console - [ 70, 73, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:04:17.937] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 16:04:17.957] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 16:04:17.965] [INFO] console - [ 70, 74, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:04:18.164] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:04:18.185] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:04:18.201] [INFO] console - [ 70, 75, {}, [ [ [Object] ] ] ]
[2016-10-21 16:04:18.239] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:04:18.241] [INFO] console - [ 70, 76, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:04:18.308] [INFO] console - [ 70, 77, {}, [ [] ] ]
[2016-10-21 16:04:18.357] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:04:18.362] [INFO] console - Executing (34605d06-e8bc-492d-b60a-0b301b3b6676): START TRANSACTION;
[2016-10-21 16:04:18.367] [INFO] console - Executing (34605d06-e8bc-492d-b60a-0b301b3b6676): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:04:18.387] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:04:18.401] [INFO] console - Executing (34605d06-e8bc-492d-b60a-0b301b3b6676): COMMIT;
[2016-10-21 16:04:18.404] [INFO] console - [ 70,
  78,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:04:18.436] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 16:04:18.440] [INFO] console - Executing (fbb63f82-f549-4b63-b334-6bf91ebc7fc2): START TRANSACTION;
[2016-10-21 16:04:18.444] [INFO] console - Executing (fbb63f82-f549-4b63-b334-6bf91ebc7fc2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:04:18.461] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 16:04:18.471] [INFO] console - Executing (fbb63f82-f549-4b63-b334-6bf91ebc7fc2): COMMIT;
[2016-10-21 16:04:18.473] [INFO] console - [ 70,
  79,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:05:13.118] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:05:13.165] [INFO] console - Executing (24ee4ce5-b4e4-4aff-98b4-542097c6ab02): START TRANSACTION;
[2016-10-21 16:05:13.169] [INFO] console - Executing (24ee4ce5-b4e4-4aff-98b4-542097c6ab02): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:13.228] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:05:13.247] [INFO] console - Executing (24ee4ce5-b4e4-4aff-98b4-542097c6ab02): COMMIT;
[2016-10-21 16:05:13.265] [INFO] console - [ 70,
  81,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:05:13.286] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:05:13.291] [INFO] console - Executing (d7a17af1-2dd0-4493-9ca9-ed19a98ed6cd): START TRANSACTION;
[2016-10-21 16:05:13.294] [INFO] console - Executing (d7a17af1-2dd0-4493-9ca9-ed19a98ed6cd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:13.323] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:05:13.331] [INFO] console - Executing (d7a17af1-2dd0-4493-9ca9-ed19a98ed6cd): COMMIT;
[2016-10-21 16:05:13.334] [INFO] console - [ 70,
  82,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:05:13.713] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:05:13.728] [INFO] console - Executing (79b23b3a-de25-406f-85a8-f5157ab77134): START TRANSACTION;
[2016-10-21 16:05:13.731] [INFO] console - Executing (79b23b3a-de25-406f-85a8-f5157ab77134): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:13.746] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:05:13.775] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:05:13.783] [INFO] console - Executing (79b23b3a-de25-406f-85a8-f5157ab77134): COMMIT;
[2016-10-21 16:05:13.786] [INFO] console - Executing (a2d16f6e-8b1e-443f-8078-31c113ed8414): START TRANSACTION;
[2016-10-21 16:05:13.791] [INFO] console - Executing (a2d16f6e-8b1e-443f-8078-31c113ed8414): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:13.793] [INFO] console - [ 70,
  83,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:05:13.836] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:05:13.855] [INFO] console - Executing (a2d16f6e-8b1e-443f-8078-31c113ed8414): COMMIT;
[2016-10-21 16:05:13.867] [INFO] console - [ 70,
  84,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:05:13.997] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:05:14.003] [INFO] console - Executing (d2112f6f-c23f-4cbc-b4f8-7ceacc01b1f3): START TRANSACTION;
[2016-10-21 16:05:14.009] [INFO] console - Executing (d2112f6f-c23f-4cbc-b4f8-7ceacc01b1f3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:14.022] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:05:14.036] [INFO] console - Executing (d2112f6f-c23f-4cbc-b4f8-7ceacc01b1f3): COMMIT;
[2016-10-21 16:05:14.037] [INFO] console - [ 70,
  85,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:05:22.192] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 16:05:22.225] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 16:05:22.238] [INFO] console - [ 70, 86, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 16:05:23.681] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 16:05:23.694] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 16:05:23.698] [INFO] console - [ 70, 87, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:05:23.796] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 16:05:23.811] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 16:05:23.817] [INFO] console - [ 70, 88, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:05:23.869] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:05:23.871] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:05:23.882] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:05:23.883] [INFO] console - [ 70, 89, {}, [ [ [Object] ] ] ]
[2016-10-21 16:05:23.888] [INFO] console - [ 70, 90, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:05:23.893] [INFO] console - [ 70, 91, {}, [ [] ] ]
[2016-10-21 16:05:23.996] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:05:24.008] [INFO] console - Executing (bb563115-9528-486a-be6f-06a46a96ca7c): START TRANSACTION;
[2016-10-21 16:05:24.013] [INFO] console - Executing (bb563115-9528-486a-be6f-06a46a96ca7c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:24.033] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:05:24.045] [INFO] console - Executing (bb563115-9528-486a-be6f-06a46a96ca7c): COMMIT;
[2016-10-21 16:05:24.048] [INFO] console - [ 70,
  92,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:05:24.070] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 16:05:24.075] [INFO] console - Executing (9e3f380c-d36a-4d2a-9b44-295833688391): START TRANSACTION;
[2016-10-21 16:05:24.082] [INFO] console - Executing (9e3f380c-d36a-4d2a-9b44-295833688391): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:05:24.101] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 16:05:24.112] [INFO] console - Executing (9e3f380c-d36a-4d2a-9b44-295833688391): COMMIT;
[2016-10-21 16:05:24.117] [INFO] console - [ 70,
  93,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:05:56.694] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:05:56.707] [INFO] console - [ 70, 94, {}, [ [ [Object] ] ] ]
[2016-10-21 16:05:58.708] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:05:58.725] [INFO] console - [ 70, 95, {}, [ [ [Object] ] ] ]
[2016-10-21 16:06:02.632] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:06:02.639] [INFO] console - [ 70, 96, {}, [ [ [Object] ] ] ]
[2016-10-21 16:06:07.363] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:06:07.381] [INFO] console - [ 70, 97, {}, [ [ [Object] ] ] ]
[2016-10-21 16:06:11.391] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:06:11.399] [INFO] console - [ 70, 98, {}, [ [ [Object] ] ] ]
[2016-10-21 16:06:17.764] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:06:17.770] [INFO] console - [ 70, 99, {}, [ [ [Object] ] ] ]
[2016-10-21 16:07:22.218] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:07:22.234] [INFO] console - [ 70, 100, {}, [ [ [Object] ] ] ]
[2016-10-21 16:07:28.111] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:07:28.129] [INFO] console - [ 70, 101, {}, [ [ [Object] ] ] ]
[2016-10-21 16:10:03.667] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:10:03.718] [INFO] console - Executing (5989c7ac-4b1a-4932-a51b-321d3c58e190): START TRANSACTION;
[2016-10-21 16:10:03.720] [INFO] console - Executing (5989c7ac-4b1a-4932-a51b-321d3c58e190): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:10:03.791] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:10:03.820] [INFO] console - Executing (5989c7ac-4b1a-4932-a51b-321d3c58e190): COMMIT;
[2016-10-21 16:10:03.823] [INFO] console - [ 70,
  103,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:10:03.905] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:10:03.911] [INFO] console - Executing (c575928c-f415-4635-baa4-467ba7bdda63): START TRANSACTION;
[2016-10-21 16:10:03.913] [INFO] console - Executing (c575928c-f415-4635-baa4-467ba7bdda63): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:10:03.929] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:10:03.939] [INFO] console - Executing (c575928c-f415-4635-baa4-467ba7bdda63): COMMIT;
[2016-10-21 16:10:03.942] [INFO] console - [ 70,
  104,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:10:04.088] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:10:04.092] [INFO] console - Executing (b2e78ad1-8637-4226-a9c2-b209c529d2cb): START TRANSACTION;
[2016-10-21 16:10:04.099] [INFO] console - Executing (b2e78ad1-8637-4226-a9c2-b209c529d2cb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:10:04.116] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:10:04.118] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:10:04.134] [INFO] console - Executing (ce51a2bf-fd31-40e3-b3f2-5c238a6063c9): START TRANSACTION;
[2016-10-21 16:10:04.142] [INFO] console - Executing (b2e78ad1-8637-4226-a9c2-b209c529d2cb): COMMIT;
[2016-10-21 16:10:04.144] [INFO] console - Executing (ce51a2bf-fd31-40e3-b3f2-5c238a6063c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:10:04.150] [INFO] console - [ 70,
  105,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:10:04.176] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:10:04.183] [INFO] console - Executing (ce51a2bf-fd31-40e3-b3f2-5c238a6063c9): COMMIT;
[2016-10-21 16:10:04.189] [INFO] console - [ 70,
  106,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:10:04.275] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:10:04.279] [INFO] console - Executing (217e79a7-3db8-45ce-abb1-959158d5b613): START TRANSACTION;
[2016-10-21 16:10:04.298] [INFO] console - Executing (217e79a7-3db8-45ce-abb1-959158d5b613): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:10:04.314] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:10:04.328] [INFO] console - Executing (217e79a7-3db8-45ce-abb1-959158d5b613): COMMIT;
[2016-10-21 16:10:04.330] [INFO] console - [ 70,
  107,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:14:40.677] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:14:40.736] [INFO] console - Executing (26410b04-2117-4569-b177-2d5f5e624acf): START TRANSACTION;
[2016-10-21 16:14:40.742] [INFO] console - Executing (26410b04-2117-4569-b177-2d5f5e624acf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:14:40.801] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:14:40.829] [INFO] console - Executing (26410b04-2117-4569-b177-2d5f5e624acf): COMMIT;
[2016-10-21 16:14:40.831] [INFO] console - [ 70,
  109,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:14:41.021] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:14:41.024] [INFO] console - Executing (d2d89f90-df8f-464d-8c9e-0448aa3be069): START TRANSACTION;
[2016-10-21 16:14:41.032] [INFO] console - Executing (d2d89f90-df8f-464d-8c9e-0448aa3be069): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:14:41.048] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:14:41.059] [INFO] console - Executing (d2d89f90-df8f-464d-8c9e-0448aa3be069): COMMIT;
[2016-10-21 16:14:41.061] [INFO] console - [ 70,
  110,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:14:41.360] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:14:41.363] [INFO] console - Executing (ac858d35-9a27-425c-80ed-107a125b61cb): START TRANSACTION;
[2016-10-21 16:14:41.368] [INFO] console - Executing (ac858d35-9a27-425c-80ed-107a125b61cb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:14:41.386] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:14:41.402] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:14:41.406] [INFO] console - Executing (ac858d35-9a27-425c-80ed-107a125b61cb): COMMIT;
[2016-10-21 16:14:41.407] [INFO] console - Executing (8a3d80c3-21db-4970-9ca9-63b649b442e1): START TRANSACTION;
[2016-10-21 16:14:41.409] [INFO] console - Executing (8a3d80c3-21db-4970-9ca9-63b649b442e1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:14:41.410] [INFO] console - [ 70,
  111,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:14:41.434] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:14:41.440] [INFO] console - Executing (8a3d80c3-21db-4970-9ca9-63b649b442e1): COMMIT;
[2016-10-21 16:14:41.447] [INFO] console - [ 70,
  112,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:14:41.589] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:14:41.593] [INFO] console - Executing (370c7d29-0624-484f-98a6-6b761d509cdf): START TRANSACTION;
[2016-10-21 16:14:41.599] [INFO] console - Executing (370c7d29-0624-484f-98a6-6b761d509cdf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:14:41.612] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:14:41.620] [INFO] console - Executing (370c7d29-0624-484f-98a6-6b761d509cdf): COMMIT;
[2016-10-21 16:14:41.622] [INFO] console - [ 70,
  113,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:15:56.114] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:15:56.192] [INFO] console - Executing (291eb5cc-1146-4f7a-90ba-f8a7408fc9de): START TRANSACTION;
[2016-10-21 16:15:56.194] [INFO] console - Executing (291eb5cc-1146-4f7a-90ba-f8a7408fc9de): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:15:56.286] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:15:56.303] [INFO] console - Executing (291eb5cc-1146-4f7a-90ba-f8a7408fc9de): COMMIT;
[2016-10-21 16:15:56.309] [INFO] console - [ 70,
  115,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:15:56.362] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:15:56.366] [INFO] console - Executing (ecd314ed-f6df-4d95-b616-fc4e4cfb84b8): START TRANSACTION;
[2016-10-21 16:15:56.368] [INFO] console - Executing (ecd314ed-f6df-4d95-b616-fc4e4cfb84b8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:15:56.381] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:15:56.390] [INFO] console - Executing (ecd314ed-f6df-4d95-b616-fc4e4cfb84b8): COMMIT;
[2016-10-21 16:15:56.392] [INFO] console - [ 70,
  116,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:15:56.852] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:15:56.867] [INFO] console - Executing (2116f779-efa0-4b2a-8cda-34dadeb56807): START TRANSACTION;
[2016-10-21 16:15:56.870] [INFO] console - Executing (2116f779-efa0-4b2a-8cda-34dadeb56807): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:15:56.882] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:15:56.892] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:15:56.897] [INFO] console - Executing (2116f779-efa0-4b2a-8cda-34dadeb56807): COMMIT;
[2016-10-21 16:15:56.905] [INFO] console - Executing (febeedb0-4b8f-4957-91ff-2ff773299548): START TRANSACTION;
[2016-10-21 16:15:56.907] [INFO] console - Executing (febeedb0-4b8f-4957-91ff-2ff773299548): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:15:56.909] [INFO] console - [ 70,
  117,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:15:56.926] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:15:56.938] [INFO] console - Executing (febeedb0-4b8f-4957-91ff-2ff773299548): COMMIT;
[2016-10-21 16:15:56.940] [INFO] console - [ 70,
  118,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:15:57.102] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:15:57.106] [INFO] console - Executing (89c5c9ab-05df-4101-9733-571e449d49e8): START TRANSACTION;
[2016-10-21 16:15:57.108] [INFO] console - Executing (89c5c9ab-05df-4101-9733-571e449d49e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:15:57.123] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:15:57.131] [INFO] console - Executing (89c5c9ab-05df-4101-9733-571e449d49e8): COMMIT;
[2016-10-21 16:15:57.141] [INFO] console - [ 70,
  119,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:16:11.466] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:16:11.488] [INFO] console - [ 70, 120, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:17:36.589] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:17:36.643] [INFO] console - Executing (fc2233c5-a192-4dbe-b7bc-17a31ea8f6f7): START TRANSACTION;
[2016-10-21 16:17:36.645] [INFO] console - Executing (fc2233c5-a192-4dbe-b7bc-17a31ea8f6f7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:36.693] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:17:36.729] [INFO] console - Executing (fc2233c5-a192-4dbe-b7bc-17a31ea8f6f7): COMMIT;
[2016-10-21 16:17:36.731] [INFO] console - [ 70,
  122,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:17:36.935] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:17:36.938] [INFO] console - Executing (906e87b2-37dd-44c6-83f4-145c7d853dc9): START TRANSACTION;
[2016-10-21 16:17:36.945] [INFO] console - Executing (906e87b2-37dd-44c6-83f4-145c7d853dc9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:36.963] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:17:36.974] [INFO] console - Executing (906e87b2-37dd-44c6-83f4-145c7d853dc9): COMMIT;
[2016-10-21 16:17:36.976] [INFO] console - [ 70,
  123,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:17:37.102] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:17:37.132] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:17:37.135] [INFO] console - Executing (0e7f1453-5e08-4d6a-a27b-c1250ff83821): START TRANSACTION;
[2016-10-21 16:17:37.136] [INFO] console - Executing (2737db51-d38e-4014-9640-ed248e03c872): START TRANSACTION;
[2016-10-21 16:17:37.144] [INFO] console - Executing (0e7f1453-5e08-4d6a-a27b-c1250ff83821): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:37.146] [INFO] console - Executing (2737db51-d38e-4014-9640-ed248e03c872): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:37.211] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:17:37.217] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:17:37.231] [INFO] console - Executing (0e7f1453-5e08-4d6a-a27b-c1250ff83821): COMMIT;
[2016-10-21 16:17:37.239] [INFO] console - Executing (2737db51-d38e-4014-9640-ed248e03c872): COMMIT;
[2016-10-21 16:17:37.241] [INFO] console - [ 70,
  124,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:17:37.252] [INFO] console - [ 70,
  125,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:17:37.324] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:17:37.328] [INFO] console - Executing (e15a626c-8981-4ad9-83f0-75fa4de56af4): START TRANSACTION;
[2016-10-21 16:17:37.330] [INFO] console - Executing (e15a626c-8981-4ad9-83f0-75fa4de56af4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:37.343] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:17:37.354] [INFO] console - Executing (e15a626c-8981-4ad9-83f0-75fa4de56af4): COMMIT;
[2016-10-21 16:17:37.359] [INFO] console - [ 70,
  126,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:17:37.429] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:17:37.442] [INFO] console - Executing (a8253acb-2d76-4ea6-a891-8c3664fe571b): START TRANSACTION;
[2016-10-21 16:17:37.449] [INFO] console - Executing (a8253acb-2d76-4ea6-a891-8c3664fe571b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:17:37.466] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:17:37.473] [INFO] console - Executing (a8253acb-2d76-4ea6-a891-8c3664fe571b): COMMIT;
[2016-10-21 16:17:37.475] [INFO] console - [ 70,
  127,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:19:06.083] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 16:19:06.121] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 16:19:06.127] [INFO] console - [ 70, 128, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 16:19:07.281] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 16:19:07.298] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 16:19:07.303] [INFO] console - [ 70, 129, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:19:07.432] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 16:19:07.452] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 16:19:07.456] [INFO] console - [ 70, 130, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:19:07.480] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:19:07.486] [INFO] console - [ 70, 131, {}, [ [ [Object] ] ] ]
[2016-10-21 16:19:07.583] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:19:07.589] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:19:07.591] [INFO] console - [ 70, 132, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:19:07.599] [INFO] console - [ 70, 133, {}, [ [] ] ]
[2016-10-21 16:19:07.685] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:19:07.690] [INFO] console - Executing (060a08e9-94b5-429d-b303-d3a23613e601): START TRANSACTION;
[2016-10-21 16:19:07.693] [INFO] console - Executing (060a08e9-94b5-429d-b303-d3a23613e601): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:19:07.705] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:19:07.714] [INFO] console - Executing (060a08e9-94b5-429d-b303-d3a23613e601): COMMIT;
[2016-10-21 16:19:07.720] [INFO] console - [ 70,
  134,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:19:07.750] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 16:19:07.753] [INFO] console - Executing (226aa47a-700e-468b-9224-e72e84af18ba): START TRANSACTION;
[2016-10-21 16:19:07.755] [INFO] console - Executing (226aa47a-700e-468b-9224-e72e84af18ba): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:19:07.776] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 16:19:07.794] [INFO] console - Executing (226aa47a-700e-468b-9224-e72e84af18ba): COMMIT;
[2016-10-21 16:19:07.799] [INFO] console - [ 70,
  135,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:22:45.826] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:22:45.882] [INFO] console - Executing (d9838051-5745-45aa-bb38-4e90d321a719): START TRANSACTION;
[2016-10-21 16:22:45.900] [INFO] console - Executing (d9838051-5745-45aa-bb38-4e90d321a719): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:45.927] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:22:45.985] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:22:46.007] [INFO] console - Executing (030a4595-d3d1-4f4c-8598-0310d30efed8): START TRANSACTION;
[2016-10-21 16:22:46.013] [INFO] console - Executing (d9838051-5745-45aa-bb38-4e90d321a719): COMMIT;
[2016-10-21 16:22:46.015] [INFO] console - Executing (030a4595-d3d1-4f4c-8598-0310d30efed8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:46.020] [INFO] console - [ 70,
  137,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:22:46.056] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:22:46.068] [INFO] console - Executing (030a4595-d3d1-4f4c-8598-0310d30efed8): COMMIT;
[2016-10-21 16:22:46.070] [INFO] console - [ 70,
  138,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:22:46.292] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:22:46.295] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:22:46.298] [INFO] console - Executing (f62411e3-3e0a-46ce-98d9-1b8c82f5fc89): START TRANSACTION;
[2016-10-21 16:22:46.305] [INFO] console - Executing (7f754dcb-547b-4534-acab-eea47db9cbfe): START TRANSACTION;
[2016-10-21 16:22:46.308] [INFO] console - Executing (f62411e3-3e0a-46ce-98d9-1b8c82f5fc89): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:46.310] [INFO] console - Executing (7f754dcb-547b-4534-acab-eea47db9cbfe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:46.333] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:22:46.374] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:22:46.401] [INFO] console - Executing (f62411e3-3e0a-46ce-98d9-1b8c82f5fc89): COMMIT;
[2016-10-21 16:22:46.414] [INFO] console - Executing (7f754dcb-547b-4534-acab-eea47db9cbfe): COMMIT;
[2016-10-21 16:22:46.424] [INFO] console - [ 70,
  139,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:22:46.433] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:22:46.439] [INFO] console - Executing (6ad79178-1d0a-47f6-904e-d6a7a41a3256): START TRANSACTION;
[2016-10-21 16:22:46.440] [INFO] console - [ 70,
  140,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:22:46.453] [INFO] console - Executing (6ad79178-1d0a-47f6-904e-d6a7a41a3256): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:46.471] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:22:46.483] [INFO] console - Executing (6ad79178-1d0a-47f6-904e-d6a7a41a3256): COMMIT;
[2016-10-21 16:22:46.487] [INFO] console - [ 70,
  141,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:22:46.557] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:22:46.564] [INFO] console - Executing (2fd5ea53-d45b-4954-b39b-1731a310c3cf): START TRANSACTION;
[2016-10-21 16:22:46.570] [INFO] console - Executing (2fd5ea53-d45b-4954-b39b-1731a310c3cf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:22:46.582] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:22:46.591] [INFO] console - Executing (2fd5ea53-d45b-4954-b39b-1731a310c3cf): COMMIT;
[2016-10-21 16:22:46.593] [INFO] console - [ 70,
  142,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:27:55.684] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:27:55.750] [INFO] console - Executing (020f4bf6-be8d-4c79-9d53-e36a53eeff5e): START TRANSACTION;
[2016-10-21 16:27:55.753] [INFO] console - Executing (020f4bf6-be8d-4c79-9d53-e36a53eeff5e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:27:55.802] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:27:55.855] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:27:55.899] [INFO] console - Executing (65e2f6d8-b130-4d62-93f5-9f3892239839): START TRANSACTION;
[2016-10-21 16:27:55.908] [INFO] console - Executing (020f4bf6-be8d-4c79-9d53-e36a53eeff5e): COMMIT;
[2016-10-21 16:27:55.909] [INFO] console - Executing (65e2f6d8-b130-4d62-93f5-9f3892239839): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:27:55.914] [INFO] console - [ 70,
  144,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:27:55.956] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:27:55.978] [INFO] console - Executing (65e2f6d8-b130-4d62-93f5-9f3892239839): COMMIT;
[2016-10-21 16:27:55.983] [INFO] console - [ 70,
  145,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:27:56.184] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:27:56.200] [INFO] console - Executing (9dd286aa-d716-4d27-bd48-c34900d839f2): START TRANSACTION;
[2016-10-21 16:27:56.202] [INFO] console - Executing (9dd286aa-d716-4d27-bd48-c34900d839f2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:27:56.215] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:27:56.230] [INFO] console - Executing (9dd286aa-d716-4d27-bd48-c34900d839f2): COMMIT;
[2016-10-21 16:27:56.232] [INFO] console - [ 70,
  146,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:27:56.250] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:27:56.254] [INFO] console - Executing (a6666d48-5f4e-49da-b447-d9abd08855d4): START TRANSACTION;
[2016-10-21 16:27:56.260] [INFO] console - Executing (a6666d48-5f4e-49da-b447-d9abd08855d4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:27:56.319] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:27:56.335] [INFO] console - Executing (a6666d48-5f4e-49da-b447-d9abd08855d4): COMMIT;
[2016-10-21 16:27:56.338] [INFO] console - [ 70,
  147,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:28:04.163] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:28:04.197] [INFO] console - Executing (1f2dad2d-908d-452c-abf0-378d6254f7de): START TRANSACTION;
[2016-10-21 16:28:04.209] [INFO] console - Executing (1f2dad2d-908d-452c-abf0-378d6254f7de): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:28:04.235] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:28:04.243] [INFO] console - Executing (1f2dad2d-908d-452c-abf0-378d6254f7de): COMMIT;
[2016-10-21 16:28:04.248] [INFO] console - [ 70,
  148,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:28:04.356] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:28:04.359] [INFO] console - Executing (31d2c47c-2f06-436c-8562-95faf38d0861): START TRANSACTION;
[2016-10-21 16:28:04.361] [INFO] console - Executing (31d2c47c-2f06-436c-8562-95faf38d0861): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:28:04.374] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:28:04.385] [INFO] console - Executing (31d2c47c-2f06-436c-8562-95faf38d0861): COMMIT;
[2016-10-21 16:28:04.394] [INFO] console - [ 70,
  149,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:28:15.271] [INFO] console - Executing (34c9a7c7-7c05-4a83-bd57-4eea4d87e339): START TRANSACTION;
[2016-10-21 16:28:15.272] [INFO] console - Executing (34c9a7c7-7c05-4a83-bd57-4eea4d87e339): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:28:15.310] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:28:15.321] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:28:15.330] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:28:15.340] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:28:15.347] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:28:15.368] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/4/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:28:15.373] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:28:15.378] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:28:15.385] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:28:15.393] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:28:15.398] [INFO] console - Executing (34c9a7c7-7c05-4a83-bd57-4eea4d87e339): COMMIT;
[2016-10-21 16:28:15.402] [INFO] console - [ 70, 150, {}, [ undefined ] ]
[2016-10-21 16:28:15.405] [INFO] console - [ 16,
  4390095339651072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:28:15.416] [INFO] console - [ 16,
  6555487143198720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:28:15.427] [INFO] console - [ 16,
  8968480424460288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:28:15.436] [INFO] console - [ 16,
  988475100758016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:28:15.455] [INFO] console - [ 16,
  7931385337610240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:28:15.462] [INFO] console - [ 16,
  6414270357045248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:28:15.468] [INFO] console - [ 16,
  5393527234101248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:28:22.557] [INFO] console - Executing (default): select kopa.* 
            from "Kopa" as kopa
            join "Kopnik" as kopnik on kopnik.id= kopa.inviter_id 
        where
            kopa.place_id=2
            and (
            kopa.invited is not null 
            or (
                kopa.invited is null 
                and kopnik.email='unittest2@domain.ru'
                )
            )
        order by
            kopa.invited desc
            limit 25
[2016-10-21 16:28:22.583] [INFO] console - Executing (default): SELECT "id", "question", "invited", "note", "created_at", "updated_at", "deleted_at", "place_id", "inviter_id" FROM "Kopa" AS "Kopa" WHERE ("Kopa"."deleted_at" IS NULL AND "Kopa"."id" IN ('1', '3', '4', '5')) ORDER BY "Kopa"."invited" asc;
[2016-10-21 16:28:22.604] [INFO] console - [ 70, 151, {}, [ [ [Object], [Object], [Object], [Object] ] ] ]
[2016-10-21 16:28:25.153] [INFO] console - Executing (default): select predlozhenie.* 
            from "Predlozhenie" as predlozhenie
        where
            predlozhenie.place_id=3
            and true
        order by
            predlozhenie.created_at desc
            limit 25
[2016-10-21 16:28:25.160] [INFO] console - Executing (default): SELECT "id", "value", "totalZa", "totalProtiv", "state", "note", "created_at", "updated_at", "deleted_at", "author_id", "place_id" FROM "Predlozhenie" AS "Predlozhenie" WHERE ("Predlozhenie"."deleted_at" IS NULL AND "Predlozhenie"."id" IN ('3', '2', '1')) ORDER BY "Predlozhenie"."created_at" asc;
[2016-10-21 16:28:25.176] [INFO] console - [ 70, 152, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:28:25.239] [INFO] console - Executing (default): select slovo.* 
            from "Slovo" as slovo
        where
            slovo.place_id=3
            and true
        order by
            slovo.created_at desc
            limit 25
[2016-10-21 16:28:25.245] [INFO] console - Executing (default): SELECT "id", "value", "note", "created_at", "updated_at", "deleted_at", "owner_id", "place_id" FROM "Slovo" AS "Slovo" WHERE ("Slovo"."deleted_at" IS NULL AND "Slovo"."id" IN ('3', '2', '1')) ORDER BY "Slovo"."created_at" asc;
[2016-10-21 16:28:25.252] [INFO] console - [ 70, 153, {}, [ [ [Object], [Object], [Object] ] ] ]
[2016-10-21 16:28:25.285] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 1 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:28:25.289] [INFO] console - [ 70, 154, {}, [ [ [Object] ] ] ]
[2016-10-21 16:28:25.324] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 2 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:28:25.341] [INFO] console - Executing (default): SELECT "id", "value", "reason", "note", "created_at", "updated_at", "deleted_at", "subject_id", "owner_id", "parent_id" FROM "Golos" AS "Golos" WHERE ("Golos"."deleted_at" IS NULL AND ("Golos"."subject_id" = 3 AND "Golos"."parent_id" IS NULL)) ORDER BY "Golos"."created_at" asc;
[2016-10-21 16:28:25.346] [INFO] console - [ 70, 155, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:28:25.361] [INFO] console - [ 70, 156, {}, [ [] ] ]
[2016-10-21 16:28:25.461] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 5 }
[2016-10-21 16:28:25.473] [INFO] console - Executing (ffb372ba-2c03-498c-bcde-389dbd9587e6): START TRANSACTION;
[2016-10-21 16:28:25.478] [INFO] console - Executing (ffb372ba-2c03-498c-bcde-389dbd9587e6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:28:25.513] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 5);
[2016-10-21 16:28:25.523] [INFO] console - Executing (ffb372ba-2c03-498c-bcde-389dbd9587e6): COMMIT;
[2016-10-21 16:28:25.525] [INFO] console - [ 70,
  157,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/5/',
      id: '5',
      email: 'unittest5@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '5',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:34 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:31:26.992] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:31:27.040] [INFO] console - Executing (123a4a7f-733f-4458-8aa5-2238bad10d25): START TRANSACTION;
[2016-10-21 16:31:27.042] [INFO] console - Executing (123a4a7f-733f-4458-8aa5-2238bad10d25): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:27.085] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:31:27.097] [INFO] console - Executing (123a4a7f-733f-4458-8aa5-2238bad10d25): COMMIT;
[2016-10-21 16:31:27.100] [INFO] console - [ 70,
  159,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:31:27.130] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:31:27.134] [INFO] console - Executing (96af97f8-70b0-401a-9273-6f13d90696c0): START TRANSACTION;
[2016-10-21 16:31:27.140] [INFO] console - Executing (96af97f8-70b0-401a-9273-6f13d90696c0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:27.159] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:31:27.177] [INFO] console - Executing (96af97f8-70b0-401a-9273-6f13d90696c0): COMMIT;
[2016-10-21 16:31:27.179] [INFO] console - [ 70,
  160,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:31:27.336] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:31:27.339] [INFO] console - Executing (22d1c4e6-fc91-41cf-a758-cc2f9ab6be8b): START TRANSACTION;
[2016-10-21 16:31:27.341] [INFO] console - Executing (22d1c4e6-fc91-41cf-a758-cc2f9ab6be8b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:27.356] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:31:27.362] [INFO] console - Executing (22d1c4e6-fc91-41cf-a758-cc2f9ab6be8b): COMMIT;
[2016-10-21 16:31:27.364] [INFO] console - [ 70,
  161,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:31:27.381] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:31:27.389] [INFO] console - Executing (12967cb5-64ab-494a-b326-9cc4577670e3): START TRANSACTION;
[2016-10-21 16:31:27.391] [INFO] console - Executing (12967cb5-64ab-494a-b326-9cc4577670e3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:27.404] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:31:27.411] [INFO] console - Executing (12967cb5-64ab-494a-b326-9cc4577670e3): COMMIT;
[2016-10-21 16:31:27.413] [INFO] console - [ 70,
  162,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:31:31.731] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:31:31.736] [INFO] console - Executing (3250c009-7353-433f-870f-8dce85c5e253): START TRANSACTION;
[2016-10-21 16:31:31.742] [INFO] console - Executing (3250c009-7353-433f-870f-8dce85c5e253): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:31.751] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:31:31.767] [INFO] console - Executing (3250c009-7353-433f-870f-8dce85c5e253): COMMIT;
[2016-10-21 16:31:31.769] [INFO] console - [ 70,
  163,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:31:31.824] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:31:31.826] [INFO] console - Executing (8a02b23a-c175-45ef-8518-c78941c1a74b): START TRANSACTION;
[2016-10-21 16:31:31.829] [INFO] console - Executing (8a02b23a-c175-45ef-8518-c78941c1a74b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:31.839] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:31:31.853] [INFO] console - Executing (8a02b23a-c175-45ef-8518-c78941c1a74b): COMMIT;
[2016-10-21 16:31:31.854] [INFO] console - [ 70,
  164,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:31:36.337] [INFO] console - Executing (c17b1018-e968-43b9-af6c-866ab6e9cc7b): START TRANSACTION;
[2016-10-21 16:31:36.343] [INFO] console - Executing (c17b1018-e968-43b9-af6c-866ab6e9cc7b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:36.350] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:31:36.360] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:31:36.367] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:31:36.376] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:31:36.382] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:31:36.398] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/4/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:31:36.402] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:31:36.406] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:31:36.414] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:31:36.422] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:31:36.424] [INFO] console - Executing (c17b1018-e968-43b9-af6c-866ab6e9cc7b): COMMIT;
[2016-10-21 16:31:36.427] [INFO] console - [ 70, 165, {}, [ undefined ] ]
[2016-10-21 16:31:36.437] [INFO] console - [ 16,
  8491940093886464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:31:36.448] [INFO] console - [ 16,
  5059162713096192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:31:36.467] [INFO] console - [ 16,
  3435222710353920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:31:36.476] [INFO] console - [ 16,
  2692063160172544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:31:36.489] [INFO] console - [ 16,
  2565768801681408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:31:36.500] [INFO] console - [ 16,
  4586776320540672,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:31:36.506] [INFO] console - [ 16,
  5936292581867520,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:31:39.625] [INFO] console - Executing (7538a7e0-6f34-4ee4-8ac8-9a82dff54454): START TRANSACTION;
[2016-10-21 16:31:39.632] [INFO] console - Executing (7538a7e0-6f34-4ee4-8ac8-9a82dff54454): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:31:39.637] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:31:39.647] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:31:39.653] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:31:39.660] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:31:39.666] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:31:39.675] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/4/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:31:39.679] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:31:39.682] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:31:39.689] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:31:39.696] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:31:39.699] [INFO] console - Executing (7538a7e0-6f34-4ee4-8ac8-9a82dff54454): COMMIT;
[2016-10-21 16:31:39.701] [INFO] console - [ 70, 166, {}, [ undefined ] ]
[2016-10-21 16:31:39.704] [INFO] console - [ 16,
  6583492947214336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:31:39.719] [INFO] console - [ 16,
  3921003841323008,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:31:39.741] [INFO] console - [ 16,
  5318501203968000,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:31:39.762] [INFO] console - [ 16,
  353650924847104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:31:39.772] [INFO] console - [ 16,
  1472695489265664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:31:39.779] [INFO] console - [ 16,
  274778107674624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:31:39.786] [INFO] console - [ 16,
  6148800097812480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:32:01.645] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:32:01.658] [INFO] console - [ 70, 167, {}, [ [ [Object] ] ] ]
[2016-10-21 16:32:25.466] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:32:25.515] [INFO] console - Executing (a8794d2a-5b36-4b3c-8756-07173ee0b74e): START TRANSACTION;
[2016-10-21 16:32:25.518] [INFO] console - Executing (a8794d2a-5b36-4b3c-8756-07173ee0b74e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:25.559] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:32:25.571] [INFO] console - Executing (a8794d2a-5b36-4b3c-8756-07173ee0b74e): COMMIT;
[2016-10-21 16:32:25.574] [INFO] console - [ 70,
  169,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:32:25.619] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:32:25.622] [INFO] console - Executing (eb38c21b-73d1-4ee5-9509-dacb955d930f): START TRANSACTION;
[2016-10-21 16:32:25.624] [INFO] console - Executing (eb38c21b-73d1-4ee5-9509-dacb955d930f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:25.639] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:32:25.648] [INFO] console - Executing (eb38c21b-73d1-4ee5-9509-dacb955d930f): COMMIT;
[2016-10-21 16:32:25.651] [INFO] console - [ 70,
  170,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:32:25.869] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:32:25.876] [INFO] console - Executing (a13e2b8d-2bab-474f-b002-6ef3400a0e21): START TRANSACTION;
[2016-10-21 16:32:25.880] [INFO] console - Executing (a13e2b8d-2bab-474f-b002-6ef3400a0e21): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:25.889] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:32:25.900] [INFO] console - Executing (df0f696d-3dcf-44e7-b804-6bfd08e14a8a): START TRANSACTION;
[2016-10-21 16:32:25.904] [INFO] console - Executing (df0f696d-3dcf-44e7-b804-6bfd08e14a8a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:26.411] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:32:26.420] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:32:26.425] [INFO] console - Executing (a13e2b8d-2bab-474f-b002-6ef3400a0e21): COMMIT;
[2016-10-21 16:32:26.431] [INFO] console - Executing (df0f696d-3dcf-44e7-b804-6bfd08e14a8a): COMMIT;
[2016-10-21 16:32:26.433] [INFO] console - [ 70,
  171,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:32:26.445] [INFO] console - [ 70,
  172,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:32:26.470] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:32:26.474] [INFO] console - Executing (120092c3-3f04-4d7a-86f4-8781e720bcbd): START TRANSACTION;
[2016-10-21 16:32:26.488] [INFO] console - Executing (120092c3-3f04-4d7a-86f4-8781e720bcbd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:26.490] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:32:26.494] [INFO] console - Executing (b59dd368-ae0b-4285-b159-6fc6afe069d0): START TRANSACTION;
[2016-10-21 16:32:26.498] [INFO] console - Executing (b59dd368-ae0b-4285-b159-6fc6afe069d0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:26.512] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:32:26.539] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:32:26.551] [INFO] console - Executing (120092c3-3f04-4d7a-86f4-8781e720bcbd): COMMIT;
[2016-10-21 16:32:26.559] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:32:26.567] [INFO] console - Executing (b59dd368-ae0b-4285-b159-6fc6afe069d0): COMMIT;
[2016-10-21 16:32:26.568] [INFO] console - Executing (afb04f24-fa48-4f4b-823f-ffaa33a6ce1a): START TRANSACTION;
[2016-10-21 16:32:26.570] [INFO] console - [ 70,
  173,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:32:26.581] [INFO] console - Executing (afb04f24-fa48-4f4b-823f-ffaa33a6ce1a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:32:26.586] [INFO] console - [ 70,
  174,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:32:26.615] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:32:26.622] [INFO] console - Executing (afb04f24-fa48-4f4b-823f-ffaa33a6ce1a): COMMIT;
[2016-10-21 16:32:26.624] [INFO] console - [ 70,
  175,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:33:42.481] [INFO] console - Executing (cf1b5796-527a-497e-80b3-686fca028f85): START TRANSACTION;
[2016-10-21 16:33:42.485] [INFO] console - Executing (cf1b5796-527a-497e-80b3-686fca028f85): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:42.541] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:33:42.549] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:33:42.563] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:33:42.575] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:33:42.584] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:33:42.692] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/4/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:33:42.742] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:33:42.748] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:33:42.759] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:33:42.765] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:33:42.771] [INFO] console - Executing (cf1b5796-527a-497e-80b3-686fca028f85): COMMIT;
[2016-10-21 16:33:42.775] [INFO] console - [ 70, 176, {}, [ undefined ] ]
[2016-10-21 16:33:42.788] [INFO] console - [ 16,
  5027661608910848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:33:42.795] [INFO] console - [ 16,
  7062226143805440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:33:42.809] [INFO] console - [ 16,
  5090971515617280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:33:42.821] [INFO] console - [ 16,
  3972258758393856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:33:42.828] [INFO] console - [ 16,
  2508498191515648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:33:42.837] [INFO] console - [ 16,
  2577718082273280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:33:42.845] [INFO] console - [ 16,
  6387080026390528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:33:47.406] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:33:47.411] [INFO] console - Executing (994c733f-f17b-491f-bb6b-4ba1efeb1213): START TRANSACTION;
[2016-10-21 16:33:47.416] [INFO] console - Executing (994c733f-f17b-491f-bb6b-4ba1efeb1213): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.437] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:33:47.449] [INFO] console - Executing (994c733f-f17b-491f-bb6b-4ba1efeb1213): COMMIT;
[2016-10-21 16:33:47.454] [INFO] console - [ 70,
  178,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:33:47.522] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:33:47.525] [INFO] console - Executing (3c1d14ee-1a99-48d2-89f4-fbaa0b46c4de): START TRANSACTION;
[2016-10-21 16:33:47.530] [INFO] console - Executing (3c1d14ee-1a99-48d2-89f4-fbaa0b46c4de): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.537] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:33:47.557] [INFO] console - Executing (3c1d14ee-1a99-48d2-89f4-fbaa0b46c4de): COMMIT;
[2016-10-21 16:33:47.561] [INFO] console - [ 70,
  179,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 15:51:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:33:47.678] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:33:47.681] [INFO] console - Executing (391a15df-26a7-4796-9c59-c389a4187d2f): START TRANSACTION;
[2016-10-21 16:33:47.683] [INFO] console - Executing (391a15df-26a7-4796-9c59-c389a4187d2f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.700] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:33:47.710] [INFO] console - Executing (391a15df-26a7-4796-9c59-c389a4187d2f): COMMIT;
[2016-10-21 16:33:47.717] [INFO] console - [ 70,
  180,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:33:47.729] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:33:47.732] [INFO] console - Executing (41078787-e022-4696-823c-2e81232b24ab): START TRANSACTION;
[2016-10-21 16:33:47.737] [INFO] console - Executing (41078787-e022-4696-823c-2e81232b24ab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.747] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:33:47.756] [INFO] console - Executing (41078787-e022-4696-823c-2e81232b24ab): COMMIT;
[2016-10-21 16:33:47.758] [INFO] console - [ 70,
  181,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:33:47.848] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:33:47.851] [INFO] console - Executing (7569af86-1179-494f-8851-2466ca47e331): START TRANSACTION;
[2016-10-21 16:33:47.860] [INFO] console - Executing (7569af86-1179-494f-8851-2466ca47e331): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.877] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:33:47.882] [INFO] console - Executing (7569af86-1179-494f-8851-2466ca47e331): COMMIT;
[2016-10-21 16:33:47.886] [INFO] console - [ 70,
  182,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:33:47.898] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:33:47.903] [INFO] console - Executing (b9fbedc5-92b7-4a05-b5a5-2662e1e345ec): START TRANSACTION;
[2016-10-21 16:33:47.909] [INFO] console - Executing (b9fbedc5-92b7-4a05-b5a5-2662e1e345ec): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:33:47.939] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:33:47.950] [INFO] console - Executing (b9fbedc5-92b7-4a05-b5a5-2662e1e345ec): COMMIT;
[2016-10-21 16:33:47.954] [INFO] console - [ 70,
  183,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:34:09.885] [INFO] console - Executing (86ef7bfd-837c-46e5-984b-95c7506c688e): START TRANSACTION;
[2016-10-21 16:34:09.888] [INFO] console - Executing (86ef7bfd-837c-46e5-984b-95c7506c688e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:34:09.928] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:34:09.936] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:34:09.946] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:09.956] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:34:09.976] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 11:34:09.968 +00:00' WHERE "id" = '2'
[2016-10-21 16:34:09.988] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:34:09.991] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 16:34:09.994] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 16:34:09.999] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:10.008] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/'||'%'
[2016-10-21 16:34:10.011] [INFO] console - Executing (86ef7bfd-837c-46e5-984b-95c7506c688e): COMMIT;
[2016-10-21 16:34:10.013] [INFO] console - [ 70, 184, {}, [ undefined ] ]
[2016-10-21 16:34:10.017] [INFO] console - [ 16,
  6782196878671872,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:34:10.029] [INFO] console - [ 16,
  7348083226574848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:34:10.036] [INFO] console - [ 16,
  2527705635487744,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:10.046] [INFO] console - [ 16,
  5654526048600064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:10.051] [INFO] console - [ 16,
  1942378059399168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:21.641] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 4) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:34:21.654] [INFO] console - [ 70, 185, {}, [ [] ] ]
[2016-10-21 16:34:26.569] [INFO] console - Executing (e902d1f0-f1ed-4cc0-8a21-2ad8f44dc570): START TRANSACTION;
[2016-10-21 16:34:26.571] [INFO] console - Executing (e902d1f0-f1ed-4cc0-8a21-2ad8f44dc570): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:34:26.637] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:34:26.663] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:34:26.670] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 16:34:26.677] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:26.688] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 16:34:26.706] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 11:34:26.693 +00:00' WHERE "id" = '2'
[2016-10-21 16:34:26.725] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/4/')
                                where
                                    id = '2'
                                    or path like '/2/'||'%'
[2016-10-21 16:34:26.729] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:34:26.735] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:34:26.741] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:26.747] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:34:26.762] [INFO] console - Executing (e902d1f0-f1ed-4cc0-8a21-2ad8f44dc570): COMMIT;
[2016-10-21 16:34:26.768] [INFO] console - [ 70, 186, {}, [ undefined ] ]
[2016-10-21 16:34:26.779] [INFO] console - [ 16,
  220823887544320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 16:34:26 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:34:26.820] [INFO] console - [ 16,
  6667351640506368,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:34:26.829] [INFO] console - [ 16,
  7129670935904256,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:26.839] [INFO] console - [ 16,
  7650422017753088,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:26.844] [INFO] console - [ 16,
  1382926119862272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:30.935] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."starshina_id" = 2) ORDER BY "Kopnik"."surname" asc, "Kopnik"."name" asc, "Kopnik"."patronymic" asc;
[2016-10-21 16:34:30.946] [INFO] console - [ 70, 187, {}, [ [ [Object], [Object] ] ] ]
[2016-10-21 16:34:38.925] [INFO] console - Executing (e366dc41-49c6-44bf-b11b-f7b77ef1a6db): START TRANSACTION;
[2016-10-21 16:34:38.927] [INFO] console - Executing (e366dc41-49c6-44bf-b11b-f7b77ef1a6db): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:34:38.971] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:34:38.986] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:34:38.999] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:39.011] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:34:39.043] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 11:34:39.034 +00:00' WHERE "id" = '2'
[2016-10-21 16:34:39.048] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:34:39.052] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 16:34:39.080] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 16:34:39.086] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:34:39.089] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/'||'%'
[2016-10-21 16:34:39.092] [INFO] console - Executing (e366dc41-49c6-44bf-b11b-f7b77ef1a6db): COMMIT;
[2016-10-21 16:34:39.094] [INFO] console - [ 70, 188, {}, [ undefined ] ]
[2016-10-21 16:34:39.098] [INFO] console - [ 16,
  5078129519362048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:34:39.112] [INFO] console - [ 16,
  6697981942169600,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:34:39.121] [INFO] console - [ 16,
  8866278389317632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:39.132] [INFO] console - [ 16,
  8563174213156864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:34:39.138] [INFO] console - [ 16,
  5511052431196160,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:03.783] [INFO] console - Executing (b6237419-451d-4766-b8be-207517d2b352): START TRANSACTION;
[2016-10-21 16:35:03.786] [INFO] console - Executing (b6237419-451d-4766-b8be-207517d2b352): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:03.820] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:35:03.831] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:35:03.836] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 16:35:03.846] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:35:03.852] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 16:35:03.866] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 11:35:03.854 +00:00' WHERE "id" = '2'
[2016-10-21 16:35:03.882] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/4/')
                                where
                                    id = '2'
                                    or path like '/2/'||'%'
[2016-10-21 16:35:03.889] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:35:03.894] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:35:03.909] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:35:03.913] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/2/'||'%'
[2016-10-21 16:35:03.918] [INFO] console - Executing (b6237419-451d-4766-b8be-207517d2b352): COMMIT;
[2016-10-21 16:35:03.920] [INFO] console - [ 70, 189, {}, [ undefined ] ]
[2016-10-21 16:35:03.923] [INFO] console - [ 16,
  6968525283393536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'Unit Test',
       fullPath: '/4/2/',
       id: '2',
       email: 'unittest2@domain.ru',
       password: '$2a$10$mFMGXQEoEE2cbcRkdA6qieDlYogIc7Z/PJI39cRISYMJ1IbXgRSRC',
       name: 'Unit',
       surname: 'Test',
       patronymic: '2',
       voiskoSize: 3,
       birth: 1983,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 16:35:03 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 16:35:03.942] [INFO] console - [ 16,
  632403764707328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 16:35:03.956] [INFO] console - [ 16,
  8305300297744384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:03.964] [INFO] console - [ 16,
  5016162412789760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:03.972] [INFO] console - [ 16,
  594893929971712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:21.417] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:35:21.455] [INFO] console - Executing (15fe48eb-fd09-4da8-8772-6ff6ec42f438): START TRANSACTION;
[2016-10-21 16:35:21.457] [INFO] console - Executing (15fe48eb-fd09-4da8-8772-6ff6ec42f438): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.495] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 16:35:21.518] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:35:21.541] [INFO] console - Executing (d5514693-cd16-4a5c-a6c2-46d9f8a49b2d): START TRANSACTION;
[2016-10-21 16:35:21.545] [INFO] console - Executing (15fe48eb-fd09-4da8-8772-6ff6ec42f438): COMMIT;
[2016-10-21 16:35:21.562] [INFO] console - Executing (d5514693-cd16-4a5c-a6c2-46d9f8a49b2d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.564] [INFO] console - [ 70,
  191,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:03 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:35:21.588] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:35:21.594] [INFO] console - Executing (d5514693-cd16-4a5c-a6c2-46d9f8a49b2d): COMMIT;
[2016-10-21 16:35:21.596] [INFO] console - [ 70,
  192,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/4/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:03 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '4',
      attachments: [] } ] ]
[2016-10-21 16:35:21.637] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:35:21.644] [INFO] console - Executing (d19cc581-0c1b-4095-87c9-6c2bd287e647): START TRANSACTION;
[2016-10-21 16:35:21.663] [INFO] console - Executing (d19cc581-0c1b-4095-87c9-6c2bd287e647): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.677] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:35:21.683] [INFO] console - Executing (d19cc581-0c1b-4095-87c9-6c2bd287e647): COMMIT;
[2016-10-21 16:35:21.685] [INFO] console - [ 70,
  193,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:35:21.756] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:35:21.759] [INFO] console - Executing (7b1fd918-24bb-49fe-a2d3-e1110b063731): START TRANSACTION;
[2016-10-21 16:35:21.761] [INFO] console - Executing (7b1fd918-24bb-49fe-a2d3-e1110b063731): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.769] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 16:35:21.777] [INFO] console - Executing (09ca543e-c2ca-41a0-8f53-c417ac17089d): START TRANSACTION;
[2016-10-21 16:35:21.791] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:35:21.794] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 2 }
[2016-10-21 16:35:21.809] [INFO] console - Executing (9d3ac52d-51f6-49d3-a061-52cd14a08bfd): START TRANSACTION;
[2016-10-21 16:35:21.811] [INFO] console - Executing (09ca543e-c2ca-41a0-8f53-c417ac17089d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.815] [INFO] console - Executing (7b1fd918-24bb-49fe-a2d3-e1110b063731): COMMIT;
[2016-10-21 16:35:21.817] [INFO] console - Executing (9d3ac52d-51f6-49d3-a061-52cd14a08bfd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:21.827] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 16:35:21.830] [INFO] console - [ 70,
  194,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:35:21.851] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 2);
[2016-10-21 16:35:21.857] [INFO] console - Executing (09ca543e-c2ca-41a0-8f53-c417ac17089d): COMMIT;
[2016-10-21 16:35:21.867] [INFO] console - Executing (9d3ac52d-51f6-49d3-a061-52cd14a08bfd): COMMIT;
[2016-10-21 16:35:21.869] [INFO] console - [ 70,
  195,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 4,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 16:35:21.876] [INFO] console - [ 70,
  196,
  {},
  [ { fullPath: '/1/2/',
      id: '2',
      name: 'UnitTest2',
      intensity: 1000,
      obshinaSize: 5,
      path: '/1/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: '1',
      attachments: [] } ] ]
[2016-10-21 16:35:22.073] [DEBUG] Server - #promiseModel() [] { model: 'Zemla', id: 1 }
[2016-10-21 16:35:22.077] [INFO] console - Executing (9e394050-1415-4351-9b93-87b45d477d58): START TRANSACTION;
[2016-10-21 16:35:22.079] [INFO] console - Executing (9e394050-1415-4351-9b93-87b45d477d58): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:22.095] [INFO] console - Executing (default): SELECT "Zemla"."id", "Zemla"."name", "Zemla"."intensity", "Zemla"."obshinaSize", "Zemla"."path", "Zemla"."note", "Zemla"."created_at", "Zemla"."updated_at", "Zemla"."deleted_at", "Zemla"."parent_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Zemla" AS "Zemla" LEFT OUTER JOIN "File" AS "attachments" ON "Zemla"."id" = "attachments"."zemla_id" AND "attachments"."deleted_at" IS NULL WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = 1);
[2016-10-21 16:35:22.105] [INFO] console - Executing (9e394050-1415-4351-9b93-87b45d477d58): COMMIT;
[2016-10-21 16:35:22.107] [INFO] console - [ 70,
  197,
  {},
  [ { fullPath: '/1/',
      id: '1',
      name: 'Земля',
      intensity: 1000,
      obshinaSize: 7,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:32 GMT+0500 (YEKT),
      deleted_at: null,
      parent_id: null,
      attachments: [] } ] ]
[2016-10-21 16:35:26.603] [INFO] console - Executing (3198fd4a-d00b-4287-8203-503c8015aa33): START TRANSACTION;
[2016-10-21 16:35:26.605] [INFO] console - Executing (3198fd4a-d00b-4287-8203-503c8015aa33): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 16:35:26.612] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 16:35:26.619] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 16:35:26.626] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:35:26.630] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-4
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 16:35:26.651] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 11:35:26.644 +00:00' WHERE "id" = '2'
[2016-10-21 16:35:26.656] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '2'
                                    or path like '/4/2/'||'%'
[2016-10-21 16:35:26.659] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+4
                                where
                                    '/' like path||id||'/%'
[2016-10-21 16:35:26.663] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 16:35:26.670] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 16:35:26.673] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/'||'%'
[2016-10-21 16:35:26.676] [INFO] console - Executing (3198fd4a-d00b-4287-8203-503c8015aa33): COMMIT;
[2016-10-21 16:35:26.678] [INFO] console - [ 70, 198, {}, [ undefined ] ]
[2016-10-21 16:35:26.683] [INFO] console - [ 16,
  6982195692437504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 2 } ]
[2016-10-21 16:35:26.692] [INFO] console - [ 16,
  5581688251875328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 16:35:26.701] [INFO] console - [ 16,
  8176394303438848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id6.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:26.708] [INFO] console - [ 16,
  538363593490432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id7.starshinaChange',
  [],
  {} ]
[2016-10-21 16:35:26.716] [INFO] console - [ 16,
  5122626326364160,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id3.starshinaChange',
  [],
  {} ]
[2016-10-21 17:11:48.790] [INFO] console - AutobahnJS debug enabled
[2016-10-21 17:11:53.635] [INFO] Server - starting...
[2016-10-21 17:11:53.638] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 17:11:53.905] [INFO] console - using WAMP transport type: websocket
[2016-10-21 17:11:54.965] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 17:11:54.990] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 17:11:55.049] [INFO] Server - connection.onopen()
[2016-10-21 17:11:55.066] [INFO] console - [ 64, 2984424658436096, {}, 'ru.kopa.model.create' ]
[2016-10-21 17:11:55.086] [DEBUG] Server - api:model.create registered
[2016-10-21 17:11:55.092] [INFO] console - [ 64, 2720522194386944, {}, 'ru.kopa.model.get' ]
[2016-10-21 17:11:55.126] [DEBUG] Server - api:model.get registered
[2016-10-21 17:11:55.127] [INFO] console - [ 64, 7643369419309056, {}, 'ru.kopa.model.save' ]
[2016-10-21 17:11:55.155] [DEBUG] Server - api:model.save registered
[2016-10-21 17:11:55.156] [INFO] console - [ 64, 1764985273319424, {}, 'ru.kopa.pingPong' ]
[2016-10-21 17:11:55.166] [DEBUG] Server - api:pingPong registered
[2016-10-21 17:11:55.167] [INFO] console - [ 64, 3463436591693824, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 17:11:55.183] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 17:11:55.184] [INFO] console - [ 64, 114694431965184, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 17:11:55.201] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 17:11:55.202] [INFO] console - [ 64, 5343237770313728, {}, 'ru.kopa.error' ]
[2016-10-21 17:11:55.215] [DEBUG] Server - api:error registered
[2016-10-21 17:11:55.216] [INFO] console - [ 64, 7074171643232256, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 17:11:55.230] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 17:11:55.231] [INFO] console - [ 64, 4595095577821184, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 17:11:55.238] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 17:11:55.239] [INFO] console - [ 64, 5508811397791744, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 17:11:55.251] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 17:11:55.257] [INFO] console - [ 64, 5507319001513984, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 17:11:55.263] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 17:11:55.264] [INFO] console - [ 64, 819282919292928, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 17:11:55.270] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 17:11:55.272] [INFO] console - [ 64, 3606785757806592, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 17:11:55.282] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 17:11:55.290] [INFO] console - [ 64, 3192063485018112, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 17:11:55.309] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 17:11:55.310] [INFO] console - [ 64, 8857367942791168, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 17:11:55.334] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 17:11:55.335] [INFO] console - [ 64, 2214050979119104, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 17:11:55.341] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 17:11:55.350] [INFO] console - [ 64,
  1468212145291264,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 17:11:55.372] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 17:11:55.373] [INFO] console - [ 64, 3542119146848256, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 17:11:55.379] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 17:11:55.382] [INFO] Server - started
[2016-10-21 17:13:16.543] [INFO] console - [ 70, 5, {}, [ undefined ] ]
[2016-10-21 17:13:16.590] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:13:16.815] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:13:16.833] [INFO] console - Executing (cfb3d43c-6a82-45d5-840a-92a64d8a26cd): START TRANSACTION;
[2016-10-21 17:13:16.861] [INFO] console - Executing (cfb3d43c-6a82-45d5-840a-92a64d8a26cd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:16.868] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:13:16.935] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:13:16.961] [INFO] console - Executing (cfb3d43c-6a82-45d5-840a-92a64d8a26cd): COMMIT;
[2016-10-21 17:13:16.965] [INFO] console - [ 70,
  6,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:13:17.008] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:13:17.016] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): START TRANSACTION;
[2016-10-21 17:13:17.037] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:17.134] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:13:17.047 +00:00','2016-10-21 12:13:17.047 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:13:17.227] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:17.327] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:17.377] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:13:17.402] [INFO] console - Executing (0a428f2a-06da-444e-823f-476d1b5e40aa): COMMIT;
[2016-10-21 17:13:17.413] [INFO] console - [ 70, 7, {}, [ '8' ] ]
[2016-10-21 17:13:17.521] [INFO] console - Executing (af32246f-b8b8-4f80-9ecf-51ce8a950065): START TRANSACTION;
[2016-10-21 17:13:17.534] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:17.548] [INFO] console - Executing (af32246f-b8b8-4f80-9ecf-51ce8a950065): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:17.559] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:13:17.589] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 8);
[2016-10-21 17:13:17.642] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:13:17.686] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:13:17.688] [INFO] console - [ 16,
  22651972091904,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 6 } ]
[2016-10-21 17:13:17.721] [INFO] console - [ 16,
  8508243552763904,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 17:13:17.763] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:17.794] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:17.809] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:17.856] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:13:17.819 +00:00' WHERE "id" = '8'
[2016-10-21 17:13:17.863] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '8'
                                    or path like '/8/'||'%'
[2016-10-21 17:13:17.868] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:13:17.873] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:13:17.884] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:17.892] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/8/'||'%'
[2016-10-21 17:13:17.897] [INFO] console - Executing (af32246f-b8b8-4f80-9ecf-51ce8a950065): COMMIT;
[2016-10-21 17:13:17.902] [INFO] console - [ 70, 8, {}, [ undefined ] ]
[2016-10-21 17:13:17.949] [INFO] console - [ 16,
  4277785990266880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/8/',
       id: '8',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:13:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:13:17 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:13:18.012] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:13:18.017] [INFO] console - [ 16,
  1519294913445888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:13:18.083] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): START TRANSACTION;
[2016-10-21 17:13:18.095] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:13:18.109] [INFO] console - Executing (d82a558e-4736-467a-9f98-04c16c1b422e): START TRANSACTION;
[2016-10-21 17:13:18.112] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:18.118] [INFO] console - Executing (d82a558e-4736-467a-9f98-04c16c1b422e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:18.279] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:13:18.121 +00:00','2016-10-21 12:13:18.121 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:13:18.304] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:18.339] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:18.352] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:13:18.360] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:13:18.370] [INFO] console - Executing (d82a558e-4736-467a-9f98-04c16c1b422e): COMMIT;
[2016-10-21 17:13:18.375] [INFO] console - [ 70,
  10,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:13:18.423] [INFO] console - Executing (21206d2c-8aa4-4c39-9b6b-c9fffa963932): COMMIT;
[2016-10-21 17:13:18.430] [INFO] console - Executing (7ed3a17a-6bbd-414d-b5d5-3e7ae63649ce): START TRANSACTION;
[2016-10-21 17:13:18.438] [INFO] console - Executing (7ed3a17a-6bbd-414d-b5d5-3e7ae63649ce): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:18.440] [INFO] console - [ 70, 9, {}, [ '9' ] ]
[2016-10-21 17:13:18.486] [INFO] console - Executing (a93b47a3-6b75-43cc-96dc-e246b0a5e996): START TRANSACTION;
[2016-10-21 17:13:18.502] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:18.530] [INFO] console - Executing (a93b47a3-6b75-43cc-96dc-e246b0a5e996): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:18.548] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 8);
[2016-10-21 17:13:18.566] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:13:18.603] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 9);
[2016-10-21 17:13:18.660] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:13:18.692] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:13:18.761] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 8);
[2016-10-21 17:13:18.762] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:13:18.770] [INFO] console - [ 16,
  5456997656821760,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 7 } ]
[2016-10-21 17:13:18.796] [INFO] console - [ 16,
  5031116285149184,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 9 } ]
[2016-10-21 17:13:18.809] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:18.815] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:18.836] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:18.842] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:13:18.850] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:18.862] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:13:18.847 +00:00' WHERE "id" = '8'
[2016-10-21 17:13:18.870] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '8'
                                    or path like '/2/8/'||'%'
[2016-10-21 17:13:18.880] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='8',"updated_at"='2016-10-21 12:13:18.867 +00:00' WHERE "id" = '9'
[2016-10-21 17:13:18.886] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:13:18.893] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/8/')
                                where
                                    id = '9'
                                    or path like '/9/'||'%'
[2016-10-21 17:13:18.895] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:13:18.904] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/8/' like path||id||'/%'
[2016-10-21 17:13:18.910] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:18.918] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/8/'||'%'
[2016-10-21 17:13:18.920] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/8/' like k.path||k.id||'/%'
[2016-10-21 17:13:18.928] [INFO] console - Executing (7ed3a17a-6bbd-414d-b5d5-3e7ae63649ce): COMMIT;
[2016-10-21 17:13:18.934] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:18.941] [INFO] console - [ 70, 11, {}, [ undefined ] ]
[2016-10-21 17:13:18.949] [INFO] console - [ 16,
  2477940333871104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 8 } ]
[2016-10-21 17:13:18.974] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/8/9/'||'%'
[2016-10-21 17:13:18.977] [INFO] console - [ 16,
  6680906901225472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/8/',
       id: '8',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:13:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:13:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:13:19.003] [INFO] console - [ 16,
  4222019809837056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:13:19.026] [INFO] console - Executing (a93b47a3-6b75-43cc-96dc-e246b0a5e996): COMMIT;
[2016-10-21 17:13:19.036] [INFO] console - [ 16,
  5065906677874688,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:13:19.076] [INFO] console - [ 70, 12, {}, [ undefined ] ]
[2016-10-21 17:13:19.110] [INFO] console - [ 16,
  6831021905412096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id8.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/8/9/',
       id: '9',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/8/',
       note: null,
       created_at: Fri Oct 21 2016 17:13:18 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:13:18 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '8' } } ]
[2016-10-21 17:13:19.250] [INFO] console - Executing (1a46a629-d535-4d9e-820c-31f25be7ed29): START TRANSACTION;
[2016-10-21 17:13:19.264] [INFO] console - [ 16,
  2093846158639104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:13:19.297] [INFO] console - Executing (1a46a629-d535-4d9e-820c-31f25be7ed29): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:19.351] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 8);
[2016-10-21 17:13:19.385] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:13:19.415] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:19.438] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:13:19.484] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:13:19.448 +00:00' WHERE "id" = '8'
[2016-10-21 17:13:19.496] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '8'
                                    or path like '/4/8/'||'%'
[2016-10-21 17:13:19.509] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:19.531] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:19.580] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:19.614] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/8/'||'%'
[2016-10-21 17:13:19.647] [INFO] console - Executing (1a46a629-d535-4d9e-820c-31f25be7ed29): COMMIT;
[2016-10-21 17:13:20.004] [INFO] console - [ 70, 13, {}, [ undefined ] ]
[2016-10-21 17:13:20.042] [INFO] console - [ 16,
  965964015337472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 8 } ]
[2016-10-21 17:13:20.080] [INFO] console - [ 16,
  3054805910028288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 17:13:20.138] [INFO] console - Executing (cb24de0c-040b-4f15-b033-742a00d9ec4c): START TRANSACTION;
[2016-10-21 17:13:20.153] [INFO] console - Executing (cb24de0c-040b-4f15-b033-742a00d9ec4c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:20.196] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 8);
[2016-10-21 17:13:20.235] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 9);
[2016-10-21 17:13:20.260] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:20.297] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:20.311] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:20.358] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='9',"updated_at"='2016-10-21 12:13:20.329 +00:00' WHERE "id" = '8'
[2016-10-21 17:13:20.373] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/8/9/')
                                where
                                    id = '8'
                                    or path like '/8/'||'%'
[2016-10-21 17:13:20.389] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/8/9/' like path||id||'/%'
[2016-10-21 17:13:20.450] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/8/9/' like k.path||k.id||'/%'
[2016-10-21 17:13:20.484] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('9', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:20.503] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/8/9/8/'||'%'
[2016-10-21 17:13:20.519] [INFO] console - Executing (cb24de0c-040b-4f15-b033-742a00d9ec4c): COMMIT;
[2016-10-21 17:13:20.532] [INFO] console - [ 70, 14, {}, [ undefined ] ]
[2016-10-21 17:13:20.561] [INFO] console - [ 16,
  3545337570525184,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id9.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/8/9/8/',
       id: '8',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/8/9/',
       note: null,
       created_at: Fri Oct 21 2016 17:13:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:13:20 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '9' } } ]
[2016-10-21 17:13:20.628] [INFO] console - [ 16,
  4176668723773440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id9.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:13:20.670] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:13:20.679] [INFO] console - [ 16,
  8904333196263424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:13:20.728] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): START TRANSACTION;
[2016-10-21 17:13:20.734] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:20.768] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:13:20.745 +00:00','2016-10-21 12:13:20.745 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:13:20.794] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:20.824] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:20.930] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:13:20.943] [INFO] console - Executing (17cc72fa-a371-45a6-889e-a54acf18d810): COMMIT;
[2016-10-21 17:13:20.948] [INFO] console - [ 70, 15, {}, [ '10' ] ]
[2016-10-21 17:13:20.991] [INFO] console - Executing (a7c5e1c7-4ba5-458c-b2e2-88a208703557): START TRANSACTION;
[2016-10-21 17:13:21.003] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:13:21.018] [INFO] console - Executing (a7c5e1c7-4ba5-458c-b2e2-88a208703557): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:21.022] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:13:21.050] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 10);
[2016-10-21 17:13:21.076] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:13:21.110] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:13:21.118] [INFO] console - [ 16,
  4961175846518784,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 8 } ]
[2016-10-21 17:13:21.151] [INFO] console - [ 16,
  4573636788748288,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 10 } ]
[2016-10-21 17:13:21.163] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:21.174] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:21.196] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:21.210] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:13:21.199 +00:00' WHERE "id" = '10'
[2016-10-21 17:13:21.219] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '10'
                                    or path like '/10/'||'%'
[2016-10-21 17:13:21.228] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:13:21.234] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:13:21.248] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:21.255] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/10/'||'%'
[2016-10-21 17:13:21.260] [INFO] console - Executing (a7c5e1c7-4ba5-458c-b2e2-88a208703557): COMMIT;
[2016-10-21 17:13:21.264] [INFO] console - [ 70, 16, {}, [ undefined ] ]
[2016-10-21 17:13:21.275] [INFO] console - [ 16,
  1077395014549504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/10/',
       id: '10',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:13:20 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:13:21 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:13:21.364] [INFO] console - Executing (97f6c4b4-3ba9-4456-945f-2c6061ae894f): START TRANSACTION;
[2016-10-21 17:13:21.377] [INFO] console - [ 16,
  7501910179315712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 6 } ]
[2016-10-21 17:13:21.410] [INFO] console - Executing (97f6c4b4-3ba9-4456-945f-2c6061ae894f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:13:21.440] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 10);
[2016-10-21 17:13:21.460] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:13:21.490] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:21.509] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:13:21.550] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:13:21.518 +00:00' WHERE "id" = '10'
[2016-10-21 17:13:21.569] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '10'
                                    or path like '/2/10/'||'%'
[2016-10-21 17:13:21.608] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:13:21.617] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:13:21.679] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:13:21.710] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/10/'||'%'
[2016-10-21 17:13:21.726] [INFO] console - Executing (97f6c4b4-3ba9-4456-945f-2c6061ae894f): COMMIT;
[2016-10-21 17:13:21.733] [INFO] console - [ 70, 17, {}, [ undefined ] ]
[2016-10-21 17:13:21.747] [INFO] console - [ 16,
  3159468940460032,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 10 } ]
[2016-10-21 17:13:21.771] [INFO] console - [ 16,
  5403416685707264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:16:54.306] [INFO] console - AutobahnJS debug enabled
[2016-10-21 17:16:56.529] [INFO] Server - starting...
[2016-10-21 17:16:56.532] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 17:16:56.659] [INFO] console - using WAMP transport type: websocket
[2016-10-21 17:16:56.967] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 17:16:56.995] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 17:16:57.030] [INFO] Server - connection.onopen()
[2016-10-21 17:16:57.031] [INFO] console - [ 64, 2498873153028096, {}, 'ru.kopa.model.create' ]
[2016-10-21 17:16:57.043] [DEBUG] Server - api:model.create registered
[2016-10-21 17:16:57.046] [INFO] console - [ 64, 4468438997139456, {}, 'ru.kopa.model.get' ]
[2016-10-21 17:16:57.058] [DEBUG] Server - api:model.get registered
[2016-10-21 17:16:57.059] [INFO] console - [ 64, 5908298674995200, {}, 'ru.kopa.model.save' ]
[2016-10-21 17:16:57.070] [DEBUG] Server - api:model.save registered
[2016-10-21 17:16:57.072] [INFO] console - [ 64, 7337315596763136, {}, 'ru.kopa.pingPong' ]
[2016-10-21 17:16:57.077] [DEBUG] Server - api:pingPong registered
[2016-10-21 17:16:57.078] [INFO] console - [ 64, 7918669623459840, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 17:16:57.086] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 17:16:57.089] [INFO] console - [ 64, 7182903473602560, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 17:16:57.107] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 17:16:57.108] [INFO] console - [ 64, 7779787045076992, {}, 'ru.kopa.error' ]
[2016-10-21 17:16:57.115] [DEBUG] Server - api:error registered
[2016-10-21 17:16:57.116] [INFO] console - [ 64, 8778057837969408, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 17:16:57.128] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 17:16:57.130] [INFO] console - [ 64, 3546312089796608, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 17:16:57.138] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 17:16:57.140] [INFO] console - [ 64, 790541499367424, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 17:16:57.146] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 17:16:57.147] [INFO] console - [ 64, 2877031926726656, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 17:16:57.159] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 17:16:57.161] [INFO] console - [ 64, 1192633386926080, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 17:16:57.195] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 17:16:57.196] [INFO] console - [ 64, 5648162568011776, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 17:16:57.205] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 17:16:57.210] [INFO] console - [ 64, 5066231463804928, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 17:16:57.218] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 17:16:57.224] [INFO] console - [ 64, 4528867005956096, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 17:16:57.242] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 17:16:57.245] [INFO] console - [ 64, 6121992430288896, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 17:16:57.262] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 17:16:57.264] [INFO] console - [ 64,
  4563141427986432,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 17:16:57.273] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 17:16:57.274] [INFO] console - [ 64, 2051779808198656, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 17:16:57.286] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 17:16:57.289] [INFO] Server - started
[2016-10-21 17:17:26.523] [INFO] console - [ 70, 20, {}, [ undefined ] ]
[2016-10-21 17:17:26.567] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:17:26.650] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:17:26.659] [INFO] console - Executing (c0b68904-cf13-44b1-a77c-a905b3644158): START TRANSACTION;
[2016-10-21 17:17:26.666] [INFO] console - Executing (c0b68904-cf13-44b1-a77c-a905b3644158): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:26.679] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:17:26.702] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:17:26.720] [INFO] console - Executing (c0b68904-cf13-44b1-a77c-a905b3644158): COMMIT;
[2016-10-21 17:17:26.726] [INFO] console - [ 70,
  21,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:17:26.903] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:17:26.918] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): START TRANSACTION;
[2016-10-21 17:17:26.922] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:26.947] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:17:26.929 +00:00','2016-10-21 12:17:26.929 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:17:26.961] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:17:26.973] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:17:26.982] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:17:26.995] [INFO] console - Executing (b17193dc-0f4a-4bfd-9ddd-820771be5bc4): COMMIT;
[2016-10-21 17:17:27.007] [INFO] console - [ 70, 22, {}, [ '11' ] ]
[2016-10-21 17:17:27.035] [INFO] console - Executing (871638b6-1b0b-41ad-9543-c62c5ec224e5): START TRANSACTION;
[2016-10-21 17:17:27.041] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:17:27.049] [INFO] console - Executing (871638b6-1b0b-41ad-9543-c62c5ec224e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:27.053] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:17:27.073] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 11);
[2016-10-21 17:17:27.099] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:17:27.113] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:17:27.114] [INFO] console - [ 16,
  8591132004974592,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 9 } ]
[2016-10-21 17:17:27.128] [INFO] console - [ 16,
  7607019106205696,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 11 } ]
[2016-10-21 17:17:27.145] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:17:27.159] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:27.175] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:17:27.210] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:17:27.189 +00:00' WHERE "id" = '11'
[2016-10-21 17:17:27.227] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '11'
                                    or path like '/11/'||'%'
[2016-10-21 17:17:27.253] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:17:27.267] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:17:27.299] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:27.308] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/11/'||'%'
                                order by 
                                    path
[2016-10-21 17:17:27.315] [INFO] console - Executing (871638b6-1b0b-41ad-9543-c62c5ec224e5): COMMIT;
[2016-10-21 17:17:27.321] [INFO] console - [ 70, 23, {}, [ undefined ] ]
[2016-10-21 17:17:27.327] [INFO] console - [ 16,
  5551113495379968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id11.starshinaChange',
  [],
  { KOPNIK: 11, STARSHINA: 2 } ]
[2016-10-21 17:17:27.348] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:17:27.352] [INFO] console - [ 16,
  5127901227778048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/11/',
       id: '11',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:17:26 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:17:27 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:17:27.383] [INFO] console - [ 16,
  7133510873645056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:17:27.411] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): START TRANSACTION;
[2016-10-21 17:17:27.432] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:27.466] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:17:27.444 +00:00','2016-10-21 12:17:27.444 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:17:27.478] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:17:27.491] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:17:27.499] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:17:27.503] [INFO] console - Executing (99ba1f08-a538-44e1-9bd8-3f1cfcf86186): COMMIT;
[2016-10-21 17:17:27.508] [INFO] console - [ 70, 24, {}, [ '12' ] ]
[2016-10-21 17:17:27.523] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:17:27.535] [INFO] console - Executing (79f7e2c5-47c5-4673-bd6c-c256aaad0ca2): START TRANSACTION;
[2016-10-21 17:17:27.771] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:17:27.779] [INFO] console - Executing (79f7e2c5-47c5-4673-bd6c-c256aaad0ca2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:27.814] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:17:27.817] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 12);
[2016-10-21 17:17:27.835] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 11);
[2016-10-21 17:17:27.837] [INFO] console - [ 16,
  5854433772568576,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 10 } ]
[2016-10-21 17:17:27.850] [INFO] console - [ 16,
  4123780955766784,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 12 } ]
[2016-10-21 17:17:27.865] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:17:27.878] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:27.885] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:17:27.902] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='11',"updated_at"='2016-10-21 12:17:27.888 +00:00' WHERE "id" = '12'
[2016-10-21 17:17:27.914] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/11/')
                                where
                                    id = '12'
                                    or path like '/12/'||'%'
[2016-10-21 17:17:27.919] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/11/' like path||id||'/%'
[2016-10-21 17:17:27.924] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/11/' like k.path||k.id||'/%'
[2016-10-21 17:17:27.938] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('11', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:27.947] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/11/12/'||'%'
                                order by 
                                    path
[2016-10-21 17:17:27.953] [INFO] console - Executing (79f7e2c5-47c5-4673-bd6c-c256aaad0ca2): COMMIT;
[2016-10-21 17:17:27.959] [INFO] console - [ 70, 25, {}, [ undefined ] ]
[2016-10-21 17:17:27.963] [INFO] console - [ 16,
  2747103604375552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id12.starshinaChange',
  [],
  { KOPNIK: 12, STARSHINA: 11 } ]
[2016-10-21 17:17:27.976] [INFO] console - [ 16,
  229101845610496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id11.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/11/12/',
       id: '12',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/11/',
       note: null,
       created_at: Fri Oct 21 2016 17:17:27 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:17:27 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '11' } } ]
[2016-10-21 17:17:28.014] [INFO] console - [ 16,
  5909387216420864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id11.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:17:28.030] [INFO] console - [ 16,
  8612595932069888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:17:28.065] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:17:28.078] [INFO] console - Executing (494ae839-9a96-42b4-95fe-78737bcafbd4): START TRANSACTION;
[2016-10-21 17:17:28.082] [INFO] console - Executing (494ae839-9a96-42b4-95fe-78737bcafbd4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:28.110] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:17:28.150] [INFO] console - Executing (494ae839-9a96-42b4-95fe-78737bcafbd4): COMMIT;
[2016-10-21 17:17:28.153] [INFO] console - [ 70,
  26,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:17:28.185] [INFO] console - Executing (ff5499b6-d120-4755-ba8c-d3de8713b6fc): START TRANSACTION;
[2016-10-21 17:17:28.203] [INFO] console - Executing (ff5499b6-d120-4755-ba8c-d3de8713b6fc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:17:28.223] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 11);
[2016-10-21 17:17:28.257] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:17:28.270] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:17:28.296] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:28.314] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:17:28.332] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:17:28.319 +00:00' WHERE "id" = '11'
[2016-10-21 17:17:28.343] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '11'
                                    or path like '/2/11/'||'%'
[2016-10-21 17:17:28.348] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:17:28.354] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:17:28.392] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:17:28.408] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/11/'||'%'
                                order by 
                                    path
[2016-10-21 17:17:28.419] [INFO] console - Executing (ff5499b6-d120-4755-ba8c-d3de8713b6fc): COMMIT;
[2016-10-21 17:17:28.423] [INFO] console - [ 70, 27, {}, [ undefined ] ]
[2016-10-21 17:17:28.433] [INFO] console - [ 16,
  7587809009336320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id11.starshinaChange',
  [],
  { KOPNIK: 11, STARSHINA: 4 } ]
[2016-10-21 17:17:28.457] [INFO] console - [ 16,
  8327957902786560,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id12.starshinaChange',
  [],
  { KOPNIK: 11, STARSHINA: 4 } ]
[2016-10-21 17:17:28.482] [INFO] console - [ 16,
  8351450134478848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 11 } ]
[2016-10-21 17:17:28.506] [INFO] console - [ 16,
  2128253328293888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/11/',
       id: '11',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:17:26 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:17:28 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:17:28.544] [INFO] console - [ 16,
  7306573676281856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:17:28.570] [INFO] console - [ 16,
  1860291971252224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:17:59.928] [INFO] console - [ 70, 29, {}, [ undefined ] ]
[2016-10-21 17:17:59.978] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:18:00.020] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:18:00.045] [INFO] console - Executing (dbcda8c4-22ab-4eef-a1d4-8d619a09a57b): START TRANSACTION;
[2016-10-21 17:18:00.050] [INFO] console - Executing (dbcda8c4-22ab-4eef-a1d4-8d619a09a57b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:00.056] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:18:00.076] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:18:00.091] [INFO] console - Executing (dbcda8c4-22ab-4eef-a1d4-8d619a09a57b): COMMIT;
[2016-10-21 17:18:00.095] [INFO] console - [ 70,
  30,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:18:00.147] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:18:00.176] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): START TRANSACTION;
[2016-10-21 17:18:00.185] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:00.222] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:18:00.208 +00:00','2016-10-21 12:18:00.208 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:18:00.236] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:00.261] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:00.272] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:18:00.282] [INFO] console - Executing (78d9a091-aea9-48f7-a3f0-3d3f09f76659): COMMIT;
[2016-10-21 17:18:00.287] [INFO] console - [ 70, 31, {}, [ '13' ] ]
[2016-10-21 17:18:00.316] [INFO] console - Executing (6df78bc1-c0a5-4489-b768-a9209624c45c): START TRANSACTION;
[2016-10-21 17:18:00.327] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:00.336] [INFO] console - Executing (6df78bc1-c0a5-4489-b768-a9209624c45c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:00.341] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:18:00.356] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 13);
[2016-10-21 17:18:00.374] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:18:00.391] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:18:00.394] [INFO] console - [ 16,
  2208347067514880,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 11 } ]
[2016-10-21 17:18:00.410] [INFO] console - [ 16,
  5998881926021120,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 13 } ]
[2016-10-21 17:18:00.428] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:18:00.444] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:00.457] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:00.480] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:18:00.460 +00:00' WHERE "id" = '13'
[2016-10-21 17:18:00.490] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '13'
                                    or path like '/13/'||'%'
[2016-10-21 17:18:00.495] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:18:00.500] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:18:00.513] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:00.523] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/13/'||'%'
                                order by 
                                    path
[2016-10-21 17:18:00.532] [INFO] console - Executing (6df78bc1-c0a5-4489-b768-a9209624c45c): COMMIT;
[2016-10-21 17:18:00.536] [INFO] console - [ 70, 32, {}, [ undefined ] ]
[2016-10-21 17:18:00.551] [INFO] console - [ 16,
  669480466251776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.starshinaChange',
  [],
  { KOPNIK: 13, STARSHINA: 2 } ]
[2016-10-21 17:18:00.572] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:18:00.575] [INFO] console - [ 16,
  2084150846685184,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/13/',
       id: '13',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:18:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:18:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:18:00.603] [INFO] console - [ 16,
  5773569189478400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:18:00.619] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): START TRANSACTION;
[2016-10-21 17:18:00.625] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:00.671] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:18:00.630 +00:00','2016-10-21 12:18:00.630 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:18:00.694] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:00.715] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:00.724] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:18:00.730] [INFO] console - Executing (350fa5de-c76a-4617-a2ef-3c235afd85f1): COMMIT;
[2016-10-21 17:18:00.734] [INFO] console - [ 70, 33, {}, [ '14' ] ]
[2016-10-21 17:18:00.747] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:00.754] [INFO] console - Executing (9ba2a679-c33b-43d4-8772-1921edeac3da): START TRANSACTION;
[2016-10-21 17:18:00.765] [INFO] console - Executing (9ba2a679-c33b-43d4-8772-1921edeac3da): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:00.771] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:18:00.800] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 14);
[2016-10-21 17:18:00.842] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:18:00.880] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 13);
[2016-10-21 17:18:00.882] [INFO] console - [ 16,
  5489107302088704,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 12 } ]
[2016-10-21 17:18:00.895] [INFO] console - [ 16,
  4799848995880960,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 17:18:00.903] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:18:00.927] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:00.940] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:00.965] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='13',"updated_at"='2016-10-21 12:18:00.946 +00:00' WHERE "id" = '14'
[2016-10-21 17:18:00.973] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/13/')
                                where
                                    id = '14'
                                    or path like '/14/'||'%'
[2016-10-21 17:18:00.981] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/13/' like path||id||'/%'
[2016-10-21 17:18:00.987] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/13/' like k.path||k.id||'/%'
[2016-10-21 17:18:01.002] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('13', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:01.017] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/13/14/'||'%'
                                order by 
                                    path
[2016-10-21 17:18:01.075] [INFO] console - Executing (9ba2a679-c33b-43d4-8772-1921edeac3da): COMMIT;
[2016-10-21 17:18:01.078] [INFO] console - [ 70, 34, {}, [ undefined ] ]
[2016-10-21 17:18:01.091] [INFO] console - [ 16,
  3325022592565248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id14.starshinaChange',
  [],
  { KOPNIK: 14, STARSHINA: 13 } ]
[2016-10-21 17:18:01.120] [INFO] console - [ 16,
  1618768407035904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/13/14/',
       id: '14',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/13/',
       note: null,
       created_at: Fri Oct 21 2016 17:18:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:18:00 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '13' } } ]
[2016-10-21 17:18:01.158] [INFO] console - [ 16,
  2420650991943680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:18:01.174] [INFO] console - [ 16,
  8654857189720064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:18:01.199] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:18:01.205] [INFO] console - Executing (bcec63ec-9984-49e2-aa6f-f956b8e8c56c): START TRANSACTION;
[2016-10-21 17:18:01.213] [INFO] console - Executing (bcec63ec-9984-49e2-aa6f-f956b8e8c56c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:01.231] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:18:01.261] [INFO] console - Executing (bcec63ec-9984-49e2-aa6f-f956b8e8c56c): COMMIT;
[2016-10-21 17:18:01.265] [INFO] console - [ 70,
  35,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:18:01.324] [INFO] console - Executing (866e5e1c-0e00-43bd-831d-bddff84edf2c): START TRANSACTION;
[2016-10-21 17:18:01.327] [INFO] console - Executing (866e5e1c-0e00-43bd-831d-bddff84edf2c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:01.341] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 13);
[2016-10-21 17:18:01.360] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:18:01.368] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:18:01.380] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:01.391] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:18:01.407] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:18:01.394 +00:00' WHERE "id" = '13'
[2016-10-21 17:18:01.414] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '13'
                                    or path like '/2/13/'||'%'
[2016-10-21 17:18:01.419] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:18:01.425] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:18:01.442] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:01.460] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/13/'||'%'
                                order by 
                                    path
[2016-10-21 17:18:01.469] [INFO] console - Executing (866e5e1c-0e00-43bd-831d-bddff84edf2c): COMMIT;
[2016-10-21 17:18:01.476] [INFO] console - [ 70, 36, {}, [ undefined ] ]
[2016-10-21 17:18:01.487] [INFO] console - [ 16,
  1086687956434944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id13.starshinaChange',
  [],
  { KOPNIK: 13, STARSHINA: 4 } ]
[2016-10-21 17:18:01.509] [INFO] console - [ 16,
  7387774938251264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id14.starshinaChange',
  [],
  { KOPNIK: 13, STARSHINA: 4 } ]
[2016-10-21 17:18:01.550] [INFO] console - [ 16,
  8282093022871552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 13 } ]
[2016-10-21 17:18:01.599] [INFO] console - [ 16,
  4925236166262784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/13/',
       id: '13',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:18:00 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:18:01 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:18:01.620] [INFO] console - [ 16,
  6159582286053376,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:18:01.656] [INFO] console - [ 16,
  338844677308416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:18:40.079] [INFO] console - [ 70, 38, {}, [ undefined ] ]
[2016-10-21 17:18:40.114] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:18:40.162] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:18:40.171] [INFO] console - Executing (09f60a82-1484-4d83-ae39-8c77235a5b48): START TRANSACTION;
[2016-10-21 17:18:40.176] [INFO] console - Executing (09f60a82-1484-4d83-ae39-8c77235a5b48): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:40.185] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:18:40.209] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:18:40.225] [INFO] console - Executing (09f60a82-1484-4d83-ae39-8c77235a5b48): COMMIT;
[2016-10-21 17:18:40.229] [INFO] console - [ 70,
  39,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:18:40.281] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:18:40.325] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): START TRANSACTION;
[2016-10-21 17:18:40.338] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:40.383] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:18:40.354 +00:00','2016-10-21 12:18:40.354 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:18:40.395] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:40.426] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:40.447] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:18:40.459] [INFO] console - Executing (81ce9f8b-897f-4de6-bcd8-881dfb6d31c6): COMMIT;
[2016-10-21 17:18:40.464] [INFO] console - [ 70, 40, {}, [ '15' ] ]
[2016-10-21 17:18:40.491] [INFO] console - Executing (4639b14e-cfc9-4f84-a30e-f7df1bb6e14d): START TRANSACTION;
[2016-10-21 17:18:40.499] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:18:40.503] [INFO] console - Executing (4639b14e-cfc9-4f84-a30e-f7df1bb6e14d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:18:40.516] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:18:40.525] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 15);
[2016-10-21 17:18:40.553] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:18:40.609] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:18:40.611] [INFO] console - [ 16,
  473157123178496,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 13 } ]
[2016-10-21 17:18:40.626] [INFO] console - [ 16,
  6423062861840384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 15 } ]
[2016-10-21 17:18:40.641] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:18:40.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:40.664] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:18:40.684] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:18:40.670 +00:00' WHERE "id" = '15'
[2016-10-21 17:18:40.699] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '15'
                                    or path like '/15/'||'%'
[2016-10-21 17:18:40.716] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:18:40.724] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:18:40.741] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:18:40.750] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/15/'||'%'
                                order by 
                                    path
[2016-10-21 17:18:40.756] [INFO] console - Executing (4639b14e-cfc9-4f84-a30e-f7df1bb6e14d): COMMIT;
[2016-10-21 17:18:40.760] [INFO] console - [ 70, 41, {}, [ undefined ] ]
[2016-10-21 17:19:52.532] [INFO] console - [ 16,
  2561867117494272,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id15.starshinaChange',
  [],
  { KOPNIK: 15, STARSHINA: 2 } ]
[2016-10-21 17:19:52.658] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:21:27.531] [INFO] console - [ 16,
  4110265714999296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/15/',
       id: '15',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:18:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:18:40 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:22:34.859] [INFO] console - [ 16,
  5222537548005376,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:22:34.879] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): START TRANSACTION;
[2016-10-21 17:22:34.886] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:22:34.915] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:22:34.890 +00:00','2016-10-21 12:22:34.890 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:22:34.939] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:22:34.964] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:22:34.973] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:22:34.980] [INFO] console - Executing (5566cc34-7527-4e5e-b442-9616f99b60bd): COMMIT;
[2016-10-21 17:22:34.995] [INFO] console - [ 70, 42, {}, [ '16' ] ]
[2016-10-21 17:22:35.020] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:22:35.033] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:22:35.053] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:22:35.065] [INFO] console - [ 16,
  749674386423808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 14 } ]
[2016-10-21 17:22:35.079] [INFO] console - [ 16,
  1216718900822016,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 16 } ]
[2016-10-21 17:37:20.453] [INFO] console - Executing (a33fe2ac-8847-481c-9b6f-f0540e7c6899): START TRANSACTION;
[2016-10-21 17:37:20.467] [INFO] console - Executing (a33fe2ac-8847-481c-9b6f-f0540e7c6899): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:37:20.523] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 16);
[2016-10-21 17:37:20.548] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 15);
[2016-10-21 17:37:20.557] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:37:20.582] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:37:20.590] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:37:20.621] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='15',"updated_at"='2016-10-21 12:37:20.598 +00:00' WHERE "id" = '16'
[2016-10-21 17:37:20.638] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/15/')
                                where
                                    id = '16'
                                    or path like '/16/'||'%'
[2016-10-21 17:37:20.645] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/15/' like path||id||'/%'
[2016-10-21 17:37:20.652] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/15/' like k.path||k.id||'/%'
[2016-10-21 17:37:20.672] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('15', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:37:20.683] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/15/16/'||'%'
                                order by 
                                    path
[2016-10-21 17:37:20.689] [INFO] console - Executing (a33fe2ac-8847-481c-9b6f-f0540e7c6899): COMMIT;
[2016-10-21 17:37:20.694] [INFO] console - [ 70, 43, {}, [ undefined ] ]
[2016-10-21 17:37:20.706] [INFO] console - [ 16,
  7791780346986496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id16.starshinaChange',
  [],
  { KOPNIK: 16, STARSHINA: 15 } ]
[2016-10-21 17:37:20.745] [INFO] console - [ 16,
  99894477979648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id15.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/15/16/',
       id: '16',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/15/',
       note: null,
       created_at: Fri Oct 21 2016 17:22:34 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:37:20 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '15' } } ]
[2016-10-21 17:37:53.578] [INFO] console - [ 16,
  6833511187087360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id15.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:38:12.739] [INFO] console - [ 16,
  2404156346204160,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:39:10.962] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:39:11.009] [INFO] console - Executing (8b174474-12e3-4f9f-92f2-e5d4e1a4aa43): START TRANSACTION;
[2016-10-21 17:39:11.012] [INFO] console - Executing (8b174474-12e3-4f9f-92f2-e5d4e1a4aa43): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:11.072] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:39:11.095] [INFO] console - Executing (8b174474-12e3-4f9f-92f2-e5d4e1a4aa43): COMMIT;
[2016-10-21 17:39:11.099] [INFO] console - [ 70,
  44,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:39:11.135] [INFO] console - Executing (d726c747-e30f-41f4-b313-59c4fbd12bef): START TRANSACTION;
[2016-10-21 17:39:11.138] [INFO] console - Executing (d726c747-e30f-41f4-b313-59c4fbd12bef): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:11.152] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 15);
[2016-10-21 17:39:11.180] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:39:11.198] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:39:11.221] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:11.235] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:39:11.259] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:39:11.246 +00:00' WHERE "id" = '15'
[2016-10-21 17:39:11.266] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '15'
                                    or path like '/2/15/'||'%'
[2016-10-21 17:39:11.272] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:39:11.278] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:39:11.294] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:11.304] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/15/'||'%'
                                order by 
                                    path
[2016-10-21 17:39:11.319] [INFO] console - Executing (d726c747-e30f-41f4-b313-59c4fbd12bef): COMMIT;
[2016-10-21 17:39:11.326] [INFO] console - [ 70, 45, {}, [ undefined ] ]
[2016-10-21 17:39:11.333] [INFO] console - [ 16,
  4815445278326784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id15.starshinaChange',
  [],
  { KOPNIK: 15, STARSHINA: 4 } ]
[2016-10-21 17:39:11.352] [INFO] console - [ 16,
  4551001407225856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id16.starshinaChange',
  [],
  { KOPNIK: 15, STARSHINA: 4 } ]
[2016-10-21 17:39:11.365] [INFO] console - [ 16,
  8528004162519040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 15 } ]
[2016-10-21 17:39:11.382] [INFO] console - [ 16,
  3460263684603904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/15/',
       id: '15',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:18:40 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:39:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:39:11.407] [INFO] console - [ 16,
  3349659305115648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:39:15.525] [INFO] console - [ 16,
  1349973197193216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:39:43.371] [INFO] console - [ 70, 47, {}, [ undefined ] ]
[2016-10-21 17:39:43.415] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:39:43.472] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:39:43.480] [INFO] console - Executing (6bd0034d-fd11-47b0-a60a-dd80b3fe4015): START TRANSACTION;
[2016-10-21 17:39:43.486] [INFO] console - Executing (6bd0034d-fd11-47b0-a60a-dd80b3fe4015): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:43.490] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:39:43.519] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:39:43.542] [INFO] console - Executing (6bd0034d-fd11-47b0-a60a-dd80b3fe4015): COMMIT;
[2016-10-21 17:39:43.547] [INFO] console - [ 70,
  48,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:39:43.627] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:39:43.642] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): START TRANSACTION;
[2016-10-21 17:39:43.649] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:43.678] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:39:43.658 +00:00','2016-10-21 12:39:43.658 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:39:43.692] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:39:43.712] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:39:43.737] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:39:43.743] [INFO] console - Executing (1961709f-73a1-4582-94fb-5e880bf63a84): COMMIT;
[2016-10-21 17:39:43.747] [INFO] console - [ 70, 49, {}, [ '17' ] ]
[2016-10-21 17:39:43.761] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:39:43.770] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:39:43.779] [INFO] console - Executing (b704b080-d167-453a-aea2-001e14eb7f4f): START TRANSACTION;
[2016-10-21 17:39:43.785] [INFO] console - Executing (b704b080-d167-453a-aea2-001e14eb7f4f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:43.794] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:39:43.805] [INFO] console - [ 16,
  8951784722661376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 15 } ]
[2016-10-21 17:39:43.817] [INFO] console - [ 16,
  2653214350508032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 17 } ]
[2016-10-21 17:39:43.835] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 17);
[2016-10-21 17:39:43.874] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:39:43.890] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:39:43.909] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:43.915] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:39:43.946] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:39:43.922 +00:00' WHERE "id" = '17'
[2016-10-21 17:39:43.954] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '17'
                                    or path like '/17/'||'%'
[2016-10-21 17:39:43.960] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:39:43.964] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:39:43.979] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:43.986] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/17/'||'%'
                                order by 
                                    path
[2016-10-21 17:39:43.991] [INFO] console - Executing (b704b080-d167-453a-aea2-001e14eb7f4f): COMMIT;
[2016-10-21 17:39:43.995] [INFO] console - [ 70, 50, {}, [ undefined ] ]
[2016-10-21 17:39:44.012] [INFO] console - [ 16,
  1757088084656128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.starshinaChange',
  [],
  { KOPNIK: 17, STARSHINA: 2 } ]
[2016-10-21 17:39:44.032] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:39:44.035] [INFO] console - [ 16,
  1629729002094592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/17/',
       id: '17',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:39:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:39:43 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:39:44.056] [INFO] console - [ 16,
  4017689412501504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:39:44.098] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): START TRANSACTION;
[2016-10-21 17:39:44.111] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:44.148] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:39:44.121 +00:00','2016-10-21 12:39:44.121 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:39:44.158] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:39:44.169] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:39:44.178] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:39:44.183] [INFO] console - Executing (38816fbf-096a-412f-b247-e196b1186e22): COMMIT;
[2016-10-21 17:39:44.186] [INFO] console - [ 70, 51, {}, [ '18' ] ]
[2016-10-21 17:39:44.209] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:39:44.219] [INFO] console - Executing (c559ba75-18f5-42fe-b1ca-822cc375f2c2): START TRANSACTION;
[2016-10-21 17:39:44.224] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:39:44.227] [INFO] console - Executing (c559ba75-18f5-42fe-b1ca-822cc375f2c2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:44.258] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:39:44.276] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 18);
[2016-10-21 17:39:44.278] [INFO] console - [ 16,
  7035452517253120,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 16 } ]
[2016-10-21 17:39:44.291] [INFO] console - [ 16,
  7893628091367424,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 17:39:44.314] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 17);
[2016-10-21 17:39:44.324] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:39:44.334] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:44.344] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:39:44.360] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='17',"updated_at"='2016-10-21 12:39:44.348 +00:00' WHERE "id" = '18'
[2016-10-21 17:39:44.368] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/17/')
                                where
                                    id = '18'
                                    or path like '/18/'||'%'
[2016-10-21 17:39:44.377] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/17/' like path||id||'/%'
[2016-10-21 17:39:44.384] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/17/' like k.path||k.id||'/%'
[2016-10-21 17:39:44.396] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('17', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:44.409] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/17/18/'||'%'
                                order by 
                                    path
[2016-10-21 17:39:44.414] [INFO] console - Executing (c559ba75-18f5-42fe-b1ca-822cc375f2c2): COMMIT;
[2016-10-21 17:39:44.417] [INFO] console - [ 70, 52, {}, [ undefined ] ]
[2016-10-21 17:39:44.425] [INFO] console - [ 16,
  2375801922125824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id18.starshinaChange',
  [],
  { KOPNIK: 18, STARSHINA: 17 } ]
[2016-10-21 17:39:44.435] [INFO] console - [ 16,
  8975816658518016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/17/18/',
       id: '18',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/17/',
       note: null,
       created_at: Fri Oct 21 2016 17:39:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:39:44 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '17' } } ]
[2016-10-21 17:39:44.453] [INFO] console - [ 16,
  891500617531392,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:39:44.465] [INFO] console - [ 16,
  1803976467021824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:39:58.815] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:39:58.853] [INFO] console - Executing (0fe74d65-f799-478a-b9f8-9b2d85e8d1e2): START TRANSACTION;
[2016-10-21 17:39:58.857] [INFO] console - Executing (0fe74d65-f799-478a-b9f8-9b2d85e8d1e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:58.907] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:39:58.927] [INFO] console - Executing (0fe74d65-f799-478a-b9f8-9b2d85e8d1e2): COMMIT;
[2016-10-21 17:39:58.931] [INFO] console - [ 70,
  53,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:39:58.956] [INFO] console - Executing (fff25f43-4f70-4b72-a6a4-d34837c6ae25): START TRANSACTION;
[2016-10-21 17:39:58.960] [INFO] console - Executing (fff25f43-4f70-4b72-a6a4-d34837c6ae25): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:39:58.973] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 17);
[2016-10-21 17:39:58.986] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:39:58.993] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:39:59.004] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:59.012] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:39:59.037] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:39:59.025 +00:00' WHERE "id" = '17'
[2016-10-21 17:39:59.043] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '17'
                                    or path like '/2/17/'||'%'
[2016-10-21 17:39:59.048] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:39:59.053] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:39:59.067] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:39:59.074] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/17/'||'%'
                                order by 
                                    path
[2016-10-21 17:39:59.080] [INFO] console - Executing (fff25f43-4f70-4b72-a6a4-d34837c6ae25): COMMIT;
[2016-10-21 17:39:59.083] [INFO] console - [ 70, 54, {}, [ undefined ] ]
[2016-10-21 17:39:59.090] [INFO] console - [ 16,
  3660027806089216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id17.starshinaChange',
  [],
  { KOPNIK: 17, STARSHINA: 4 } ]
[2016-10-21 17:39:59.123] [INFO] console - [ 16,
  3315812779687936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id18.starshinaChange',
  [],
  { KOPNIK: 17, STARSHINA: 4 } ]
[2016-10-21 17:39:59.155] [INFO] console - [ 16,
  4240654473363456,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 17 } ]
[2016-10-21 17:39:59.166] [INFO] console - [ 16,
  3942649828474880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/17/',
       id: '17',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:39:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:39:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:39:59.187] [INFO] console - [ 16,
  4266001958961152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:39:59.196] [INFO] console - [ 16,
  2486374691241984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:40:12.654] [INFO] console - [ 70, 56, {}, [ undefined ] ]
[2016-10-21 17:40:12.699] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:40:12.731] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:40:12.753] [INFO] console - Executing (b16501b1-d4e4-4236-8b95-8685f20ab67d): START TRANSACTION;
[2016-10-21 17:40:12.774] [INFO] console - Executing (b16501b1-d4e4-4236-8b95-8685f20ab67d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:12.786] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:40:12.809] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:40:12.835] [INFO] console - Executing (b16501b1-d4e4-4236-8b95-8685f20ab67d): COMMIT;
[2016-10-21 17:40:12.846] [INFO] console - [ 70,
  57,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:40:12.894] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:40:12.916] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): START TRANSACTION;
[2016-10-21 17:40:12.922] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:12.950] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:40:12.930 +00:00','2016-10-21 12:40:12.930 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:40:12.964] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:12.978] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:12.988] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:40:12.996] [INFO] console - Executing (ef30fabd-2c72-4e8c-9769-1bbf2cc68b81): COMMIT;
[2016-10-21 17:40:13.002] [INFO] console - [ 70, 58, {}, [ '19' ] ]
[2016-10-21 17:40:13.186] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:13.195] [INFO] console - Executing (16b90ce7-7e42-4050-b657-dbedc1d396e0): START TRANSACTION;
[2016-10-21 17:40:13.203] [INFO] console - Executing (16b90ce7-7e42-4050-b657-dbedc1d396e0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:13.207] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:40:13.232] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:13.247] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:40:13.262] [INFO] console - [ 16,
  5040300487606272,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 17 } ]
[2016-10-21 17:40:13.281] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:40:13.295] [INFO] console - [ 16,
  5027270580240384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 19 } ]
[2016-10-21 17:40:13.330] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:13.346] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:13.354] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:13.384] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:40:13.363 +00:00' WHERE "id" = '19'
[2016-10-21 17:40:13.400] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '19'
                                    or path like '/19/'||'%'
[2016-10-21 17:40:13.428] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:13.437] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:13.468] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:13.491] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/19/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:13.499] [INFO] console - Executing (16b90ce7-7e42-4050-b657-dbedc1d396e0): COMMIT;
[2016-10-21 17:40:13.503] [INFO] console - [ 70, 59, {}, [ undefined ] ]
[2016-10-21 17:40:13.511] [INFO] console - [ 16,
  1126989570244608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: 2 } ]
[2016-10-21 17:40:13.530] [INFO] console - [ 16,
  473418940022784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/19/',
       id: '19',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:12 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:40:13.557] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:40:13.559] [INFO] console - [ 16,
  7059193120948224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:40:13.574] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): START TRANSACTION;
[2016-10-21 17:40:13.582] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:13.597] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:40:13.586 +00:00','2016-10-21 12:40:13.586 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:40:13.605] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:13.616] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:13.624] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:40:13.632] [INFO] console - Executing (e9a29b7b-b83c-4685-bb5c-7123f5e58c06): COMMIT;
[2016-10-21 17:40:13.636] [INFO] console - [ 70, 60, {}, [ '20' ] ]
[2016-10-21 17:40:13.653] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:13.662] [INFO] console - Executing (cde6a996-b8e2-4c92-80ed-42de831711ed): START TRANSACTION;
[2016-10-21 17:40:13.671] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:40:13.675] [INFO] console - Executing (cde6a996-b8e2-4c92-80ed-42de831711ed): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:13.703] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:40:13.706] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 17:40:13.725] [INFO] console - [ 16,
  8225925525143552,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 18 } ]
[2016-10-21 17:40:13.733] [INFO] console - [ 16,
  4184761421529088,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 20 } ]
[2016-10-21 17:40:13.747] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:13.758] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:13.776] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:13.784] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:13.798] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='19',"updated_at"='2016-10-21 12:40:13.787 +00:00' WHERE "id" = '20'
[2016-10-21 17:40:13.804] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/19/')
                                where
                                    id = '20'
                                    or path like '/20/'||'%'
[2016-10-21 17:40:13.810] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/19/' like path||id||'/%'
[2016-10-21 17:40:13.820] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/19/' like k.path||k.id||'/%'
[2016-10-21 17:40:13.832] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('19', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:13.840] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/19/20/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:13.856] [INFO] console - Executing (cde6a996-b8e2-4c92-80ed-42de831711ed): COMMIT;
[2016-10-21 17:40:13.860] [INFO] console - [ 70, 61, {}, [ undefined ] ]
[2016-10-21 17:40:13.873] [INFO] console - [ 16,
  8398854034554880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.starshinaChange',
  [],
  { KOPNIK: 20, STARSHINA: 19 } ]
[2016-10-21 17:40:13.887] [INFO] console - [ 16,
  5047299602382848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/19/20/',
       id: '20',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/19/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:13 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:13 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '19' } } ]
[2016-10-21 17:40:13.938] [INFO] console - [ 16,
  5767043047489536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:40:13.950] [INFO] console - [ 16,
  3083172684234752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:40:13.998] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:40:14.020] [INFO] console - Executing (5206149a-5c4b-450b-8e68-381999b75be6): START TRANSACTION;
[2016-10-21 17:40:14.035] [INFO] console - Executing (5206149a-5c4b-450b-8e68-381999b75be6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:14.132] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:40:14.151] [INFO] console - Executing (5206149a-5c4b-450b-8e68-381999b75be6): COMMIT;
[2016-10-21 17:40:14.154] [INFO] console - [ 70,
  62,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:40:14.182] [INFO] console - Executing (f9df5f56-addc-47ab-84ab-2ee581f5cf27): START TRANSACTION;
[2016-10-21 17:40:14.196] [INFO] console - Executing (f9df5f56-addc-47ab-84ab-2ee581f5cf27): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:14.210] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:14.224] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:40:14.231] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:14.262] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:14.288] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:14.322] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:40:14.297 +00:00' WHERE "id" = '19'
[2016-10-21 17:40:14.328] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '19'
                                    or path like '/2/19/'||'%'
[2016-10-21 17:40:14.337] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:40:14.346] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:40:14.360] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:14.371] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/19/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:14.377] [INFO] console - Executing (f9df5f56-addc-47ab-84ab-2ee581f5cf27): COMMIT;
[2016-10-21 17:40:14.382] [INFO] console - [ 70, 63, {}, [ undefined ] ]
[2016-10-21 17:40:14.397] [INFO] console - [ 16,
  1878607941074944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: 4 } ]
[2016-10-21 17:40:14.409] [INFO] console - [ 16,
  7902745071714304,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: 4 } ]
[2016-10-21 17:40:14.424] [INFO] console - [ 16,
  1651632955719680,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 19 } ]
[2016-10-21 17:40:14.437] [INFO] console - [ 16,
  4358448676339712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/19/',
       id: '19',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:12 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:14 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:40:14.455] [INFO] console - [ 16,
  3192717655932928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:40:14.466] [INFO] console - [ 16,
  246408235974656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:40:16.002] [INFO] console - Executing (6fe67902-ff4d-47f4-81fa-df484147b16d): START TRANSACTION;
[2016-10-21 17:40:16.011] [INFO] console - Executing (6fe67902-ff4d-47f4-81fa-df484147b16d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:16.038] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:16.046] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:40:16.058] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:16.064] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:40:16.088] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:40:16.077 +00:00' WHERE "id" = '19'
[2016-10-21 17:40:16.093] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '19'
                                    or path like '/4/19/'||'%'
[2016-10-21 17:40:16.099] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:16.109] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:16.126] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:16.134] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/19/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:16.139] [INFO] console - Executing (6fe67902-ff4d-47f4-81fa-df484147b16d): COMMIT;
[2016-10-21 17:40:16.143] [INFO] console - [ 70, 64, {}, [ undefined ] ]
[2016-10-21 17:40:16.148] [INFO] console - [ 16,
  4317062260326400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: null } ]
[2016-10-21 17:40:16.173] [INFO] console - [ 16,
  5826396068773888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: null } ]
[2016-10-21 17:40:16.188] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 20 }
[2016-10-21 17:40:16.192] [INFO] console - [ 16,
  8275377872961536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 19 } ]
[2016-10-21 17:40:16.211] [INFO] console - Executing (92f4e740-9e67-4878-b070-69ec702b68fd): START TRANSACTION;
[2016-10-21 17:40:16.212] [INFO] console - [ 16,
  4693398913024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 17:40:16.253] [INFO] console - Executing (92f4e740-9e67-4878-b070-69ec702b68fd): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:16.283] [INFO] console - Executing (a59ec9ed-5ee3-4a0d-ad74-f38a42ebc4e8): START TRANSACTION;
[2016-10-21 17:40:16.315] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 17:40:16.332] [INFO] console - Executing (a59ec9ed-5ee3-4a0d-ad74-f38a42ebc4e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:16.344] [INFO] console - Executing (92f4e740-9e67-4878-b070-69ec702b68fd): COMMIT;
[2016-10-21 17:40:16.371] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:16.374] [INFO] console - [ 70,
  65,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/19/20/',
      id: '20',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 0,
      birth: 1900,
      path: '/19/',
      note: null,
      created_at: Fri Oct 21 2016 17:40:13 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 17:40:13 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: '19',
      attachments: [] } ] ]
[2016-10-21 17:40:16.415] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 19 }
[2016-10-21 17:40:16.422] [INFO] console - Executing (3ec7f46b-6f08-4e3c-a990-8fc67f65340a): START TRANSACTION;
[2016-10-21 17:40:16.436] [INFO] console - Executing (3ec7f46b-6f08-4e3c-a990-8fc67f65340a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:16.482] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 20);
[2016-10-21 17:40:16.502] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:16.535] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 19);
[2016-10-21 17:40:16.555] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:16.562] [INFO] console - Executing (3ec7f46b-6f08-4e3c-a990-8fc67f65340a): COMMIT;
[2016-10-21 17:40:16.573] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:16.575] [INFO] console - [ 70,
  67,
  {},
  [ { fullName: 'temp temp',
      fullPath: '/19/',
      id: '19',
      email: null,
      name: 'temp',
      surname: 'temp',
      patronymic: 'temp',
      voiskoSize: 1,
      birth: 1900,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 17:40:12 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 17:40:16 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:40:16.611] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='20',"updated_at"='2016-10-21 12:40:16.591 +00:00' WHERE "id" = '19'
[2016-10-21 17:40:16.618] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/19/20/')
                                where
                                    id = '19'
                                    or path like '/19/'||'%'
[2016-10-21 17:40:16.623] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/19/20/' like path||id||'/%'
[2016-10-21 17:40:16.635] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/19/20/' like k.path||k.id||'/%'
[2016-10-21 17:40:16.648] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:16.657] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/19/20/19/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:16.666] [INFO] console - Executing (a59ec9ed-5ee3-4a0d-ad74-f38a42ebc4e8): COMMIT;
[2016-10-21 17:40:16.670] [INFO] console - [ 70, 66, {}, [ undefined ] ]
[2016-10-21 17:40:16.680] [INFO] console - [ 16,
  6709542972817408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id19.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: 20 } ]
[2016-10-21 17:40:16.697] [INFO] console - [ 16,
  6157755687632896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.starshinaChange',
  [],
  { KOPNIK: 19, STARSHINA: 20 } ]
[2016-10-21 17:40:16.718] [INFO] console - [ 16,
  8851446837542912,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id20.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/19/20/19/',
       id: '19',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/19/20/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:12 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:16 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '20' } } ]
[2016-10-21 17:40:17.289] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:40:17.307] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): START TRANSACTION;
[2016-10-21 17:40:17.320] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:17.356] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:40:17.327 +00:00','2016-10-21 12:40:17.327 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:40:17.365] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:17.382] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:17.394] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:40:17.403] [INFO] console - Executing (08ab5af7-8a68-4588-9764-55bffeaa23be): COMMIT;
[2016-10-21 17:40:17.405] [INFO] console - [ 70, 68, {}, [ '21' ] ]
[2016-10-21 17:40:17.418] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:17.438] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:40:17.441] [INFO] console - Executing (15fbc87d-4309-4857-96ba-343b86ee2ab6): START TRANSACTION;
[2016-10-21 17:40:17.447] [INFO] console - Executing (15fbc87d-4309-4857-96ba-343b86ee2ab6): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:17.463] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:40:17.472] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 21);
[2016-10-21 17:40:17.493] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:40:17.494] [INFO] console - [ 16,
  4953988514447360,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 19 } ]
[2016-10-21 17:40:17.512] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:17.555] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:17.568] [INFO] console - [ 16,
  2541209616646144,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 21 } ]
[2016-10-21 17:40:17.582] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:17.604] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:40:17.587 +00:00' WHERE "id" = '21'
[2016-10-21 17:40:17.609] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '21'
                                    or path like '/21/'||'%'
[2016-10-21 17:40:17.613] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:17.622] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:17.633] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:17.642] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/21/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:17.647] [INFO] console - Executing (15fbc87d-4309-4857-96ba-343b86ee2ab6): COMMIT;
[2016-10-21 17:40:17.650] [INFO] console - [ 70, 69, {}, [ undefined ] ]
[2016-10-21 17:40:17.655] [INFO] console - [ 16,
  6600237019824128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id21.starshinaChange',
  [],
  { KOPNIK: 21, STARSHINA: 2 } ]
[2016-10-21 17:40:17.750] [INFO] console - [ 16,
  8004282223689728,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/21/',
       id: '21',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:17 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:40:17.796] [INFO] console - Executing (cc2db2a5-e793-436f-bde0-bbdae35a1c41): START TRANSACTION;
[2016-10-21 17:40:17.801] [INFO] console - [ 16,
  6654157318520832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:40:17.824] [INFO] console - Executing (cc2db2a5-e793-436f-bde0-bbdae35a1c41): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:17.834] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 21);
[2016-10-21 17:40:17.846] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:17.862] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:17.871] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:17.901] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:40:17.877 +00:00' WHERE "id" = '21'
[2016-10-21 17:40:17.917] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '21'
                                    or path like '/2/21/'||'%'
[2016-10-21 17:40:17.923] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:17.929] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:17.943] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:17.949] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/21/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:17.958] [INFO] console - Executing (cc2db2a5-e793-436f-bde0-bbdae35a1c41): COMMIT;
[2016-10-21 17:40:17.962] [INFO] console - [ 70, 70, {}, [ undefined ] ]
[2016-10-21 17:40:17.967] [INFO] console - [ 16,
  158938657980416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id21.starshinaChange',
  [],
  { KOPNIK: 21, STARSHINA: null } ]
[2016-10-21 17:40:17.980] [INFO] console - [ 16,
  1502657827045376,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 21 } ]
[2016-10-21 17:40:17.988] [INFO] console - [ 16,
  6665595089059840,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:40:43.000] [INFO] console - [ 70, 72, {}, [ undefined ] ]
[2016-10-21 17:40:43.050] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:40:43.085] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:40:43.110] [INFO] console - Executing (5fdf9b0e-9237-4eda-a614-5c2020cc5257): START TRANSACTION;
[2016-10-21 17:40:43.114] [INFO] console - Executing (5fdf9b0e-9237-4eda-a614-5c2020cc5257): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:43.117] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:40:43.134] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:40:43.150] [INFO] console - Executing (5fdf9b0e-9237-4eda-a614-5c2020cc5257): COMMIT;
[2016-10-21 17:40:43.152] [INFO] console - [ 70,
  73,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:40:43.188] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:40:43.196] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): START TRANSACTION;
[2016-10-21 17:40:43.199] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:43.214] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:40:43.202 +00:00','2016-10-21 12:40:43.202 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:40:43.237] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:43.251] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:43.257] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:40:43.266] [INFO] console - Executing (e7ee85e6-0a86-4388-9386-14a7be8dddff): COMMIT;
[2016-10-21 17:40:43.269] [INFO] console - [ 70, 74, {}, [ '22' ] ]
[2016-10-21 17:40:43.292] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:43.297] [INFO] console - Executing (f360e148-c12e-4e1d-94e7-624fff7fc117): START TRANSACTION;
[2016-10-21 17:40:43.305] [INFO] console - Executing (f360e148-c12e-4e1d-94e7-624fff7fc117): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:43.309] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:40:43.323] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 22);
[2016-10-21 17:40:43.341] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:40:43.355] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:40:43.357] [INFO] console - [ 16,
  5213340420800512,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 20 } ]
[2016-10-21 17:40:43.368] [INFO] console - [ 16,
  3384905400582144,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 17:40:43.377] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:43.389] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:43.395] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:43.409] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:40:43.398 +00:00' WHERE "id" = '22'
[2016-10-21 17:40:43.414] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '22'
                                    or path like '/22/'||'%'
[2016-10-21 17:40:43.418] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:43.423] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:43.444] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:43.453] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/22/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:43.463] [INFO] console - Executing (f360e148-c12e-4e1d-94e7-624fff7fc117): COMMIT;
[2016-10-21 17:40:43.474] [INFO] console - [ 70, 75, {}, [ undefined ] ]
[2016-10-21 17:40:43.484] [INFO] console - [ 16,
  6297755813150720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id22.starshinaChange',
  [],
  { KOPNIK: 22, STARSHINA: 2 } ]
[2016-10-21 17:40:43.502] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:40:43.505] [INFO] console - [ 16,
  8215305312534528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/22/',
       id: '22',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:43 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:40:43.534] [INFO] console - [ 16,
  1104478939906048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:40:43.541] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): START TRANSACTION;
[2016-10-21 17:40:43.547] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:43.567] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:40:43.551 +00:00','2016-10-21 12:40:43.551 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:40:43.576] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:43.587] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:43.593] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:40:43.597] [INFO] console - Executing (a4100422-8f22-422b-b176-1f689ac4ec8c): COMMIT;
[2016-10-21 17:40:43.604] [INFO] console - [ 70, 76, {}, [ '23' ] ]
[2016-10-21 17:40:43.616] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:40:43.621] [INFO] console - Executing (a0281ed2-32cc-476b-a579-64685284229e): START TRANSACTION;
[2016-10-21 17:40:43.628] [INFO] console - Executing (a0281ed2-32cc-476b-a579-64685284229e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:43.632] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:40:43.647] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 23);
[2016-10-21 17:40:43.662] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:40:43.674] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 22);
[2016-10-21 17:40:43.675] [INFO] console - [ 16,
  3776991121637376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 21 } ]
[2016-10-21 17:40:43.691] [INFO] console - [ 16,
  3424102477987840,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 23 } ]
[2016-10-21 17:40:43.698] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:40:43.712] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:43.721] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:40:43.737] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='22',"updated_at"='2016-10-21 12:40:43.725 +00:00' WHERE "id" = '23'
[2016-10-21 17:40:43.742] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/22/')
                                where
                                    id = '23'
                                    or path like '/23/'||'%'
[2016-10-21 17:40:43.747] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/22/' like path||id||'/%'
[2016-10-21 17:40:43.753] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/22/' like k.path||k.id||'/%'
[2016-10-21 17:40:43.767] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('22', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:43.775] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/22/23/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:43.782] [INFO] console - Executing (a0281ed2-32cc-476b-a579-64685284229e): COMMIT;
[2016-10-21 17:40:43.785] [INFO] console - [ 70, 77, {}, [ undefined ] ]
[2016-10-21 17:40:43.790] [INFO] console - [ 16,
  5169070674542592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id23.starshinaChange',
  [],
  { KOPNIK: 23, STARSHINA: 22 } ]
[2016-10-21 17:40:43.801] [INFO] console - [ 16,
  8250225183424512,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id22.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/22/23/',
       id: '23',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/22/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:43 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '22' } } ]
[2016-10-21 17:40:43.819] [INFO] console - [ 16,
  1141214411751424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id22.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:40:43.849] [INFO] console - [ 16,
  3671997655547904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:40:47.075] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:40:47.083] [INFO] console - Executing (db15b0d9-8bcb-494e-9ea3-51dcecadcd57): START TRANSACTION;
[2016-10-21 17:40:47.088] [INFO] console - Executing (db15b0d9-8bcb-494e-9ea3-51dcecadcd57): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:47.106] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:40:47.258] [INFO] console - Executing (db15b0d9-8bcb-494e-9ea3-51dcecadcd57): COMMIT;
[2016-10-21 17:40:47.262] [INFO] console - [ 70,
  78,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:40:47.292] [INFO] console - Executing (f298f427-ca90-4b6c-8ec4-64bd6d822539): START TRANSACTION;
[2016-10-21 17:40:47.297] [INFO] console - Executing (f298f427-ca90-4b6c-8ec4-64bd6d822539): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:40:47.317] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 22);
[2016-10-21 17:40:47.338] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:40:47.349] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:40:47.367] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:47.383] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:40:47.417] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:40:47.395 +00:00' WHERE "id" = '22'
[2016-10-21 17:40:47.429] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '22'
                                    or path like '/2/22/'||'%'
[2016-10-21 17:40:47.436] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:40:47.443] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:40:47.459] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:40:47.468] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/22/'||'%'
                                order by 
                                    path
[2016-10-21 17:40:47.475] [INFO] console - Executing (f298f427-ca90-4b6c-8ec4-64bd6d822539): COMMIT;
[2016-10-21 17:40:47.479] [INFO] console - [ 70, 79, {}, [ undefined ] ]
[2016-10-21 17:40:47.484] [INFO] console - [ 16,
  3632237171965952,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id22.starshinaChange',
  [],
  { KOPNIK: 22, STARSHINA: 4 } ]
[2016-10-21 17:40:47.521] [INFO] console - [ 16,
  1157591853957120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id23.starshinaChange',
  [],
  { KOPNIK: 22, STARSHINA: 4 } ]
[2016-10-21 17:40:47.545] [INFO] console - [ 16,
  7927594219470848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 22 } ]
[2016-10-21 17:40:47.567] [INFO] console - [ 16,
  427895778443264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/22/',
       id: '22',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:40:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:40:47 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:40:47.607] [INFO] console - [ 16,
  5631415892836352,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:40:47.643] [INFO] console - [ 16,
  3372438853255168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:41:41.720] [INFO] console - [ 70, 81, {}, [ undefined ] ]
[2016-10-21 17:41:41.743] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:41:41.795] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:41:41.811] [INFO] console - Executing (6e63d263-e9f3-41b4-847b-e01023c77af3): START TRANSACTION;
[2016-10-21 17:41:41.816] [INFO] console - Executing (6e63d263-e9f3-41b4-847b-e01023c77af3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:41.842] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:41:41.872] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:41:41.881] [INFO] console - Executing (6e63d263-e9f3-41b4-847b-e01023c77af3): COMMIT;
[2016-10-21 17:41:41.901] [INFO] console - [ 70,
  82,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:41:41.960] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:41:41.972] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): START TRANSACTION;
[2016-10-21 17:41:41.975] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:41.994] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:41:41.979 +00:00','2016-10-21 12:41:41.979 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:41:42.007] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:41:42.017] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:41:42.025] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:41:42.033] [INFO] console - Executing (cb20dab2-9bfb-4cb5-a721-072c368cf6e8): COMMIT;
[2016-10-21 17:41:42.037] [INFO] console - [ 70, 83, {}, [ '24' ] ]
[2016-10-21 17:41:42.069] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:41:42.075] [INFO] console - Executing (c0079a31-0cfa-406e-bb4e-4c71403a59d4): START TRANSACTION;
[2016-10-21 17:41:42.082] [INFO] console - Executing (c0079a31-0cfa-406e-bb4e-4c71403a59d4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:42.086] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:41:42.096] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 17:41:42.108] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:41:42.121] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:41:42.123] [INFO] console - [ 16,
  2017521278386176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 22 } ]
[2016-10-21 17:41:42.134] [INFO] console - [ 16,
  1137984097222656,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 24 } ]
[2016-10-21 17:41:42.149] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:41:42.160] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:42.167] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:41:42.201] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:41:42.170 +00:00' WHERE "id" = '24'
[2016-10-21 17:41:42.232] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '24'
                                    or path like '/24/'||'%'
[2016-10-21 17:41:42.242] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:41:42.251] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:41:42.270] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:42.292] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/24/'||'%'
                                order by 
                                    path
[2016-10-21 17:41:42.301] [INFO] console - Executing (c0079a31-0cfa-406e-bb4e-4c71403a59d4): COMMIT;
[2016-10-21 17:41:42.304] [INFO] console - [ 70, 84, {}, [ undefined ] ]
[2016-10-21 17:41:42.310] [INFO] console - [ 16,
  8804503862116352,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.starshinaChange',
  [],
  { KOPNIK: 24, STARSHINA: 2 } ]
[2016-10-21 17:41:42.335] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:41:42.339] [INFO] console - [ 16,
  7592992344899584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/24/',
       id: '24',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:41:41 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:41:42 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:41:42.359] [INFO] console - [ 16,
  1198170348453888,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:41:42.367] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): START TRANSACTION;
[2016-10-21 17:41:42.372] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:42.408] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:41:42.379 +00:00','2016-10-21 12:41:42.379 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:41:42.417] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:41:42.428] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:41:42.436] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:41:42.442] [INFO] console - Executing (87c9e4b6-145d-4e97-839b-76abd69dad34): COMMIT;
[2016-10-21 17:41:42.446] [INFO] console - [ 70, 85, {}, [ '25' ] ]
[2016-10-21 17:41:42.465] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:41:42.477] [INFO] console - Executing (9cafac31-b594-41c0-8475-3412fd2f9dbb): START TRANSACTION;
[2016-10-21 17:41:42.486] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:41:42.490] [INFO] console - Executing (9cafac31-b594-41c0-8475-3412fd2f9dbb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:42.518] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:41:42.520] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 25);
[2016-10-21 17:41:42.532] [INFO] console - [ 16,
  338701638959104,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 23 } ]
[2016-10-21 17:41:42.544] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 17:41:42.546] [INFO] console - [ 16,
  6705738233675776,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 25 } ]
[2016-10-21 17:41:42.559] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:41:42.571] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:42.582] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:41:42.597] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='24',"updated_at"='2016-10-21 12:41:42.585 +00:00' WHERE "id" = '25'
[2016-10-21 17:41:42.603] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/24/')
                                where
                                    id = '25'
                                    or path like '/25/'||'%'
[2016-10-21 17:41:42.608] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/24/' like path||id||'/%'
[2016-10-21 17:41:42.612] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/24/' like k.path||k.id||'/%'
[2016-10-21 17:41:42.626] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('24', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:42.641] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/24/25/'||'%'
                                order by 
                                    path
[2016-10-21 17:41:42.646] [INFO] console - Executing (9cafac31-b594-41c0-8475-3412fd2f9dbb): COMMIT;
[2016-10-21 17:41:42.665] [INFO] console - [ 70, 86, {}, [ undefined ] ]
[2016-10-21 17:41:42.682] [INFO] console - [ 16,
  5705682225463296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id25.starshinaChange',
  [],
  { KOPNIK: 25, STARSHINA: 24 } ]
[2016-10-21 17:41:42.710] [INFO] console - [ 16,
  6873103149826048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/24/25/',
       id: '25',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/24/',
       note: null,
       created_at: Fri Oct 21 2016 17:41:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:41:42 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '24' } } ]
[2016-10-21 17:41:42.733] [INFO] console - [ 16,
  3878966232350720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:41:42.747] [INFO] console - [ 16,
  6457357133414400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:41:42.767] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:41:42.782] [INFO] console - Executing (fc9f0cd3-0f41-4233-802c-0bd18a437b73): START TRANSACTION;
[2016-10-21 17:41:42.791] [INFO] console - Executing (fc9f0cd3-0f41-4233-802c-0bd18a437b73): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:42.814] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:41:42.832] [INFO] console - Executing (fc9f0cd3-0f41-4233-802c-0bd18a437b73): COMMIT;
[2016-10-21 17:41:42.836] [INFO] console - [ 70,
  87,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:41:46.108] [INFO] console - Executing (292455b1-fca5-44f9-955c-a5f5caa50638): START TRANSACTION;
[2016-10-21 17:41:46.114] [INFO] console - Executing (292455b1-fca5-44f9-955c-a5f5caa50638): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:41:46.129] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 24);
[2016-10-21 17:41:46.142] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:41:46.151] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:41:46.179] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:46.190] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:41:46.208] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:41:46.195 +00:00' WHERE "id" = '24'
[2016-10-21 17:41:46.220] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '24'
                                    or path like '/2/24/'||'%'
[2016-10-21 17:41:46.224] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:41:46.232] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:41:46.247] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:41:46.256] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/24/'||'%'
                                order by 
                                    path
[2016-10-21 17:41:46.263] [INFO] console - Executing (292455b1-fca5-44f9-955c-a5f5caa50638): COMMIT;
[2016-10-21 17:41:46.268] [INFO] console - [ 70, 88, {}, [ undefined ] ]
[2016-10-21 17:41:46.273] [INFO] console - [ 16,
  3948761092980736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id24.starshinaChange',
  [],
  { KOPNIK: 24, STARSHINA: 4 } ]
[2016-10-21 17:41:46.288] [INFO] console - [ 16,
  888663393173504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id25.starshinaChange',
  [],
  { KOPNIK: 24, STARSHINA: 4 } ]
[2016-10-21 17:41:46.298] [INFO] console - [ 16,
  6684711713767424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 24 } ]
[2016-10-21 17:41:46.309] [INFO] console - [ 16,
  4238933428797440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/24/',
       id: '24',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:41:41 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:41:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:41:46.326] [INFO] console - [ 16,
  1122675946684416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:41:46.339] [INFO] console - [ 16,
  1216702578688000,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:49:45.823] [INFO] console - [ 70, 90, {}, [ undefined ] ]
[2016-10-21 17:49:45.864] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 17:49:45.921] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 17:49:45.940] [INFO] console - Executing (b84a002f-efa8-4337-bdec-b96a9ea00468): START TRANSACTION;
[2016-10-21 17:49:45.950] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 17:49:45.952] [INFO] console - Executing (b84a002f-efa8-4337-bdec-b96a9ea00468): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:45.992] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:49:46.017] [INFO] console - Executing (b84a002f-efa8-4337-bdec-b96a9ea00468): COMMIT;
[2016-10-21 17:49:46.026] [INFO] console - [ 70,
  91,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:49:46.089] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:49:46.100] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): START TRANSACTION;
[2016-10-21 17:49:46.104] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:46.125] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:49:46.108 +00:00','2016-10-21 12:49:46.108 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:49:46.134] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:46.144] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:46.168] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:49:46.173] [INFO] console - Executing (d0d470e6-5429-4f07-a9f9-fe4b1533e748): COMMIT;
[2016-10-21 17:49:46.184] [INFO] console - [ 70, 92, {}, [ '26' ] ]
[2016-10-21 17:49:46.209] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:46.220] [INFO] console - Executing (37dfd249-f48a-45c2-bc84-a41874ca5448): START TRANSACTION;
[2016-10-21 17:49:46.228] [INFO] console - Executing (37dfd249-f48a-45c2-bc84-a41874ca5448): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:46.232] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:49:46.247] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 17:49:46.274] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:49:46.298] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:49:46.300] [INFO] console - [ 16,
  8404115799408640,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 24 } ]
[2016-10-21 17:49:46.318] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:46.326] [INFO] console - [ 16,
  2266806263742464,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 17:49:46.346] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:46.362] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:46.377] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:49:46.365 +00:00' WHERE "id" = '26'
[2016-10-21 17:49:46.386] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '26'
                                    or path like '/26/'||'%'
[2016-10-21 17:49:46.395] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:49:46.400] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:49:46.422] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:46.430] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/26/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:46.436] [INFO] console - Executing (37dfd249-f48a-45c2-bc84-a41874ca5448): COMMIT;
[2016-10-21 17:49:46.440] [INFO] console - [ 70, 93, {}, [ undefined ] ]
[2016-10-21 17:49:46.444] [INFO] console - [ 16,
  4121853629038592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: 2 } ]
[2016-10-21 17:49:46.465] [INFO] console - [ 16,
  3806964444299264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/26/',
       id: '26',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:49:46.492] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:49:46.494] [INFO] console - [ 16,
  4384294824837120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:49:46.526] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): START TRANSACTION;
[2016-10-21 17:49:46.530] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:46.549] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:49:46.535 +00:00','2016-10-21 12:49:46.535 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:49:46.558] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:46.570] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:46.579] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:49:46.586] [INFO] console - Executing (35c362d2-ff12-40ed-b403-63ffcbe8ded9): COMMIT;
[2016-10-21 17:49:46.590] [INFO] console - [ 70, 94, {}, [ '27' ] ]
[2016-10-21 17:49:46.633] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:46.648] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:49:46.662] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:49:46.672] [INFO] console - Executing (6c46b7d5-a399-4e81-9f24-feaf7cef5c03): START TRANSACTION;
[2016-10-21 17:49:46.675] [INFO] console - [ 16,
  8670509094928384,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 25 } ]
[2016-10-21 17:49:46.685] [INFO] console - Executing (6c46b7d5-a399-4e81-9f24-feaf7cef5c03): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:46.704] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 27);
[2016-10-21 17:49:46.720] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 17:49:46.729] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:46.748] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:46.756] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:46.810] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='26',"updated_at"='2016-10-21 12:49:46.776 +00:00' WHERE "id" = '27'
[2016-10-21 17:49:46.821] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/26/')
                                where
                                    id = '27'
                                    or path like '/27/'||'%'
[2016-10-21 17:49:46.826] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/26/' like path||id||'/%'
[2016-10-21 17:49:46.834] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/26/' like k.path||k.id||'/%'
[2016-10-21 17:49:46.844] [INFO] console - [ 16,
  168303043543040,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 27 } ]
[2016-10-21 17:49:46.859] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('26', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:46.874] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/26/27/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:46.892] [INFO] console - Executing (6c46b7d5-a399-4e81-9f24-feaf7cef5c03): COMMIT;
[2016-10-21 17:49:46.910] [INFO] console - [ 70, 95, {}, [ undefined ] ]
[2016-10-21 17:49:46.942] [INFO] console - [ 16,
  4816923814526976,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id27.starshinaChange',
  [],
  { KOPNIK: 27, STARSHINA: 26 } ]
[2016-10-21 17:49:47.053] [INFO] console - [ 16,
  3232296498888704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/26/27/',
       id: '27',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/26/',
       note: null,
       created_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '26' } } ]
[2016-10-21 17:49:47.137] [INFO] console - [ 16,
  7063466600824832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 17:49:47.193] [INFO] console - [ 16,
  7611045604491264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 17:49:47.215] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 17:49:47.233] [INFO] console - Executing (53c3bce3-0c78-4886-bb1e-67e6be532f62): START TRANSACTION;
[2016-10-21 17:49:47.252] [INFO] console - Executing (53c3bce3-0c78-4886-bb1e-67e6be532f62): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:47.288] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:49:47.306] [INFO] console - Executing (53c3bce3-0c78-4886-bb1e-67e6be532f62): COMMIT;
[2016-10-21 17:49:47.310] [INFO] console - [ 70,
  96,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 17:49:56.579] [INFO] console - Executing (bc1aea45-0575-409e-8449-f46afc2e4cc7): START TRANSACTION;
[2016-10-21 17:49:56.583] [INFO] console - Executing (bc1aea45-0575-409e-8449-f46afc2e4cc7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:56.595] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 17:49:56.609] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 17:49:56.617] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:49:56.631] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:56.639] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:49:56.660] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 12:49:56.650 +00:00' WHERE "id" = '26'
[2016-10-21 17:49:56.666] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '26'
                                    or path like '/2/26/'||'%'
[2016-10-21 17:49:56.670] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:49:56.675] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:49:56.686] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:56.694] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/26/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:56.700] [INFO] console - Executing (bc1aea45-0575-409e-8449-f46afc2e4cc7): COMMIT;
[2016-10-21 17:49:56.706] [INFO] console - [ 70, 97, {}, [ undefined ] ]
[2016-10-21 17:49:56.713] [INFO] console - [ 16,
  10406535888896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: 4 } ]
[2016-10-21 17:49:56.727] [INFO] console - [ 16,
  2244019417513984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id27.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: 4 } ]
[2016-10-21 17:49:56.737] [INFO] console - [ 16,
  1361182950686720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 26 } ]
[2016-10-21 17:49:56.749] [INFO] console - [ 16,
  2183725739671552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/26/',
       id: '26',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:49:56 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 17:49:56.765] [INFO] console - [ 16,
  7613086099832832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 17:49:56.774] [INFO] console - [ 16,
  8620346924072960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 17:49:56.809] [INFO] console - Executing (91985323-59e0-40af-a92c-64f215628f08): START TRANSACTION;
[2016-10-21 17:49:56.815] [INFO] console - Executing (91985323-59e0-40af-a92c-64f215628f08): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:56.830] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 17:49:56.842] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 17:49:56.856] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:56.868] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 17:49:56.884] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:49:56.871 +00:00' WHERE "id" = '26'
[2016-10-21 17:49:56.890] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '26'
                                    or path like '/4/26/'||'%'
[2016-10-21 17:49:56.895] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:56.901] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:56.914] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:56.925] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/26/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:56.934] [INFO] console - Executing (91985323-59e0-40af-a92c-64f215628f08): COMMIT;
[2016-10-21 17:49:56.940] [INFO] console - [ 70, 98, {}, [ undefined ] ]
[2016-10-21 17:49:56.948] [INFO] console - [ 16,
  7050655931826176,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: null } ]
[2016-10-21 17:49:56.964] [INFO] console - [ 16,
  7333871148335104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id27.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: null } ]
[2016-10-21 17:49:56.979] [INFO] console - [ 16,
  376823487660032,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 26 } ]
[2016-10-21 17:49:56.989] [INFO] console - [ 16,
  5422399570837504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 17:49:57.024] [INFO] console - Executing (fc4b465b-9495-427a-8a51-f0dacb21fdbe): START TRANSACTION;
[2016-10-21 17:49:57.033] [INFO] console - Executing (fc4b465b-9495-427a-8a51-f0dacb21fdbe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:57.053] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 26);
[2016-10-21 17:49:57.077] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 27);
[2016-10-21 17:49:57.088] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.103] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.114] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:57.132] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='27',"updated_at"='2016-10-21 12:49:57.118 +00:00' WHERE "id" = '26'
[2016-10-21 17:49:57.144] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/26/27/')
                                where
                                    id = '26'
                                    or path like '/26/'||'%'
[2016-10-21 17:49:57.156] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/26/27/' like path||id||'/%'
[2016-10-21 17:49:57.169] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/26/27/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.200] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.211] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/26/27/26/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:57.219] [INFO] console - Executing (fc4b465b-9495-427a-8a51-f0dacb21fdbe): COMMIT;
[2016-10-21 17:49:57.224] [INFO] console - [ 70, 99, {}, [ undefined ] ]
[2016-10-21 17:49:57.238] [INFO] console - [ 16,
  7706662372638720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id26.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: 27 } ]
[2016-10-21 17:49:57.270] [INFO] console - [ 16,
  8902247580696576,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id27.starshinaChange',
  [],
  { KOPNIK: 26, STARSHINA: 27 } ]
[2016-10-21 17:49:57.297] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 17:49:57.301] [INFO] console - [ 16,
  2465398450552832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id27.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/26/27/26/',
       id: '26',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/26/27/',
       note: null,
       created_at: Fri Oct 21 2016 17:49:46 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:49:57 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '27' } } ]
[2016-10-21 17:49:57.334] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): START TRANSACTION;
[2016-10-21 17:49:57.342] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:57.363] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 12:49:57.348 +00:00','2016-10-21 12:49:57.348 +00:00',2,NULL) RETURNING *;
[2016-10-21 17:49:57.372] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:57.384] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:57.394] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 17:49:57.401] [INFO] console - Executing (536dfe9a-5511-4b0b-85d9-f4c8a6085aaf): COMMIT;
[2016-10-21 17:49:57.405] [INFO] console - [ 70, 100, {}, [ '28' ] ]
[2016-10-21 17:49:57.431] [INFO] console - Executing (ef4e4ca9-dc64-40ce-aac7-9118946ce6aa): START TRANSACTION;
[2016-10-21 17:49:57.439] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 17:49:57.453] [INFO] console - Executing (ef4e4ca9-dc64-40ce-aac7-9118946ce6aa): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:57.479] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 17:49:57.494] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 17:49:57.510] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 17:49:57.525] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 17:49:57.527] [INFO] console - [ 16,
  1169445363908608,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 26 } ]
[2016-10-21 17:49:57.540] [INFO] console - [ 16,
  7373961836888064,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 28 } ]
[2016-10-21 17:49:57.556] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.580] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.586] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:57.604] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 12:49:57.591 +00:00' WHERE "id" = '28'
[2016-10-21 17:49:57.611] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '28'
                                    or path like '/28/'||'%'
[2016-10-21 17:49:57.617] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:49:57.623] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.638] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.647] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/28/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:57.653] [INFO] console - Executing (ef4e4ca9-dc64-40ce-aac7-9118946ce6aa): COMMIT;
[2016-10-21 17:49:57.658] [INFO] console - [ 70, 101, {}, [ undefined ] ]
[2016-10-21 17:49:57.674] [INFO] console - [ 16,
  3138991251521536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id28.starshinaChange',
  [],
  { KOPNIK: 28, STARSHINA: 2 } ]
[2016-10-21 17:49:57.689] [INFO] console - Executing (e78acf91-76a6-473a-a129-f1428eea1d93): START TRANSACTION;
[2016-10-21 17:49:57.699] [INFO] console - [ 16,
  6559751781482496,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/28/',
       id: '28',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 17:49:57 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 17:49:57 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 17:49:57.728] [INFO] console - Executing (e78acf91-76a6-473a-a129-f1428eea1d93): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 17:49:57.735] [INFO] console - [ 16,
  8665980611854336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 17:49:57.801] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 28);
[2016-10-21 17:49:57.827] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.841] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.852] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 17:49:57.867] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 12:49:57.855 +00:00' WHERE "id" = '28'
[2016-10-21 17:49:57.880] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '28'
                                    or path like '/2/28/'||'%'
[2016-10-21 17:49:57.886] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 17:49:57.901] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 17:49:57.913] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 17:49:57.919] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/28/'||'%'
                                order by 
                                    path
[2016-10-21 17:49:57.927] [INFO] console - Executing (e78acf91-76a6-473a-a129-f1428eea1d93): COMMIT;
[2016-10-21 17:49:57.940] [INFO] console - [ 70, 102, {}, [ undefined ] ]
[2016-10-21 17:49:57.952] [INFO] console - [ 16,
  4461357722238976,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id28.starshinaChange',
  [],
  { KOPNIK: 28, STARSHINA: null } ]
[2016-10-21 17:49:57.973] [INFO] console - [ 16,
  2504905906454528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 28 } ]
[2016-10-21 17:49:57.984] [INFO] console - [ 16,
  3882290925010944,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:18:29.816] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:18:32.437] [INFO] Server - starting...
[2016-10-21 18:18:32.441] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:18:32.548] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:18:32.952] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:18:32.986] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:18:33.075] [INFO] Server - connection.onopen()
[2016-10-21 18:18:33.076] [INFO] console - [ 64, 1923560710864896, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:18:33.088] [DEBUG] Server - api:model.create registered
[2016-10-21 18:18:33.091] [INFO] console - [ 64, 3000481689370624, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:18:33.103] [DEBUG] Server - api:model.get registered
[2016-10-21 18:18:33.103] [INFO] console - [ 64, 3080025502908416, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:18:33.127] [DEBUG] Server - api:model.save registered
[2016-10-21 18:18:33.128] [INFO] console - [ 64, 2479434357538816, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:18:33.136] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:18:33.140] [INFO] console - [ 64, 5426337307164672, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:18:33.150] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:18:33.151] [INFO] console - [ 64, 2940076984107008, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:18:33.160] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:18:33.163] [INFO] console - [ 64, 2938166763847680, {}, 'ru.kopa.error' ]
[2016-10-21 18:18:33.171] [DEBUG] Server - api:error registered
[2016-10-21 18:18:33.172] [INFO] console - [ 64, 3143180954370048, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:18:33.180] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:18:33.182] [INFO] console - [ 64, 8137566052155392, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:18:33.189] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:18:33.191] [INFO] console - [ 64, 4237535255461888, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:18:33.198] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:18:33.199] [INFO] console - [ 64, 4023449867517952, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:18:33.208] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:18:33.210] [INFO] console - [ 64, 6705057735114752, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:18:33.220] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:18:33.221] [INFO] console - [ 64, 5771007797231616, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:18:33.234] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:18:33.235] [INFO] console - [ 64, 5091112962228224, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:18:33.243] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:18:33.244] [INFO] console - [ 64, 6413931679580160, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:18:33.254] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:18:33.255] [INFO] console - [ 64, 1310797739327488, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:18:33.265] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:18:33.266] [INFO] console - [ 64,
  6048916380319744,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:18:33.276] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:18:33.278] [INFO] console - [ 64, 1495818381033472, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:18:33.285] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:18:33.288] [INFO] Server - started
[2016-10-21 18:18:52.217] [INFO] console - [ 70, 105, {}, [ undefined ] ]
[2016-10-21 18:18:52.245] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:18:52.356] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:18:52.360] [INFO] console - Executing (75ff0047-98a1-4410-9629-64347141c72c): START TRANSACTION;
[2016-10-21 18:18:52.365] [INFO] console - Executing (75ff0047-98a1-4410-9629-64347141c72c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:52.389] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:18:52.414] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:18:52.421] [INFO] console - Executing (75ff0047-98a1-4410-9629-64347141c72c): COMMIT;
[2016-10-21 18:18:52.425] [INFO] console - [ 70,
  106,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:18:52.484] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:18:52.495] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): START TRANSACTION;
[2016-10-21 18:18:52.499] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:52.522] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:18:52.505 +00:00','2016-10-21 13:18:52.505 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:18:52.534] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:52.552] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:52.559] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:18:52.574] [INFO] console - Executing (6ed2614c-f0b7-4a1b-9871-ebd2e0fd8646): COMMIT;
[2016-10-21 18:18:52.577] [INFO] console - [ 70, 107, {}, [ '29' ] ]
[2016-10-21 18:18:52.598] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:52.602] [INFO] console - Executing (a2d8b70f-b58d-4f1b-a769-a0a62c982327): START TRANSACTION;
[2016-10-21 18:18:52.608] [INFO] console - Executing (a2d8b70f-b58d-4f1b-a769-a0a62c982327): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:52.612] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:18:52.622] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 18:18:52.631] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:18:52.645] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:18:52.647] [INFO] console - [ 16,
  1488505276465152,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 27 } ]
[2016-10-21 18:18:52.665] [INFO] console - [ 16,
  6389396387397632,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 29 } ]
[2016-10-21 18:18:52.674] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:52.687] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:52.695] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:52.713] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:18:52.698 +00:00' WHERE "id" = '29'
[2016-10-21 18:18:52.719] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '29'
                                    or path like '/29/'||'%'
[2016-10-21 18:18:52.725] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:18:52.730] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:18:52.743] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:52.749] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/29/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:52.756] [INFO] console - Executing (a2d8b70f-b58d-4f1b-a769-a0a62c982327): COMMIT;
[2016-10-21 18:18:52.759] [INFO] console - [ 70, 108, {}, [ undefined ] ]
[2016-10-21 18:18:52.767] [INFO] console - [ 16,
  3186183544766464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: 2 } ]
[2016-10-21 18:18:52.785] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:18:52.787] [INFO] console - [ 16,
  5571213248167936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/29/',
       id: '29',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:18:52 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:18:52 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:18:52.808] [INFO] console - [ 16,
  1880020595245056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:18:52.817] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): START TRANSACTION;
[2016-10-21 18:18:52.823] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:52.844] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:18:52.828 +00:00','2016-10-21 13:18:52.828 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:18:52.851] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:52.860] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:52.869] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:18:52.873] [INFO] console - Executing (0ce441b1-1b49-42d7-8289-d5b50a66f862): COMMIT;
[2016-10-21 18:18:52.877] [INFO] console - [ 70, 109, {}, [ '30' ] ]
[2016-10-21 18:18:52.903] [INFO] console - Executing (ec81c031-a6ad-4e9f-b312-b2aa5b7c51df): START TRANSACTION;
[2016-10-21 18:18:52.909] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:52.917] [INFO] console - Executing (ec81c031-a6ad-4e9f-b312-b2aa5b7c51df): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:52.922] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:18:52.935] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 30);
[2016-10-21 18:18:52.949] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:18:53.005] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 18:18:53.006] [INFO] console - [ 16,
  4366765729513472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 28 } ]
[2016-10-21 18:18:53.017] [INFO] console - [ 16,
  2049331957858304,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 18:18:53.031] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.051] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.065] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:53.079] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='29',"updated_at"='2016-10-21 13:18:53.068 +00:00' WHERE "id" = '30'
[2016-10-21 18:18:53.084] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/29/')
                                where
                                    id = '30'
                                    or path like '/30/'||'%'
[2016-10-21 18:18:53.088] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/29/' like path||id||'/%'
[2016-10-21 18:18:53.093] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/29/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.104] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('29', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.112] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/29/30/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:53.117] [INFO] console - Executing (ec81c031-a6ad-4e9f-b312-b2aa5b7c51df): COMMIT;
[2016-10-21 18:18:53.119] [INFO] console - [ 70, 110, {}, [ undefined ] ]
[2016-10-21 18:18:53.126] [INFO] console - [ 16,
  5674101605662720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id30.starshinaChange',
  [],
  { KOPNIK: 30, STARSHINA: 29 } ]
[2016-10-21 18:18:53.137] [INFO] console - [ 16,
  6578796025085952,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/29/30/',
       id: '30',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/29/',
       note: null,
       created_at: Fri Oct 21 2016 18:18:52 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:18:53 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '29' } } ]
[2016-10-21 18:18:53.152] [INFO] console - [ 16,
  4081603628236800,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:18:53.161] [INFO] console - [ 16,
  2137682308235264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:18:53.176] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:18:53.182] [INFO] console - Executing (4af64563-6637-4f5c-81b4-72cc88fae4e2): START TRANSACTION;
[2016-10-21 18:18:53.185] [INFO] console - Executing (4af64563-6637-4f5c-81b4-72cc88fae4e2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:53.202] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:18:53.217] [INFO] console - Executing (4af64563-6637-4f5c-81b4-72cc88fae4e2): COMMIT;
[2016-10-21 18:18:53.220] [INFO] console - [ 70,
  111,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:18:53.243] [INFO] console - Executing (56ac119d-1ac8-4e8d-9874-347c28bf61cc): START TRANSACTION;
[2016-10-21 18:18:53.246] [INFO] console - Executing (56ac119d-1ac8-4e8d-9874-347c28bf61cc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:53.255] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 18:18:53.275] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:18:53.283] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.297] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.305] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:18:53.322] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:18:53.310 +00:00' WHERE "id" = '29'
[2016-10-21 18:18:53.328] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '29'
                                    or path like '/2/29/'||'%'
[2016-10-21 18:18:53.334] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:18:53.339] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.350] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.356] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/29/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:53.361] [INFO] console - Executing (56ac119d-1ac8-4e8d-9874-347c28bf61cc): COMMIT;
[2016-10-21 18:18:53.364] [INFO] console - [ 70, 112, {}, [ undefined ] ]
[2016-10-21 18:18:53.370] [INFO] console - [ 16,
  1766301215227904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: 4 } ]
[2016-10-21 18:18:53.380] [INFO] console - [ 16,
  3125301085208576,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id30.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: 4 } ]
[2016-10-21 18:18:53.406] [INFO] console - [ 16,
  5362631732887552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 29 } ]
[2016-10-21 18:18:53.418] [INFO] console - [ 16,
  3564450061746176,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/29/',
       id: '29',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:18:52 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:18:53 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:18:53.438] [INFO] console - [ 16,
  4602362226278400,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:18:53.449] [INFO] console - [ 16,
  545587751550976,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:18:53.467] [INFO] console - Executing (6e0ccfa4-5082-48b8-9b3f-0939e15956f7): START TRANSACTION;
[2016-10-21 18:18:53.470] [INFO] console - Executing (6e0ccfa4-5082-48b8-9b3f-0939e15956f7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:53.481] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 18:18:53.488] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.503] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.529] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:18:53.554] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:18:53.532 +00:00' WHERE "id" = '29'
[2016-10-21 18:18:53.565] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '29'
                                    or path like '/4/29/'||'%'
[2016-10-21 18:18:53.572] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:53.577] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.590] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.595] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/29/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:53.602] [INFO] console - Executing (6e0ccfa4-5082-48b8-9b3f-0939e15956f7): COMMIT;
[2016-10-21 18:18:53.606] [INFO] console - [ 70, 113, {}, [ undefined ] ]
[2016-10-21 18:18:53.611] [INFO] console - [ 16,
  1947165505093632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: null } ]
[2016-10-21 18:18:53.622] [INFO] console - [ 16,
  359744512458752,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id30.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: null } ]
[2016-10-21 18:18:53.632] [INFO] console - [ 16,
  2037288647262208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 29 } ]
[2016-10-21 18:18:53.641] [INFO] console - [ 16,
  5971256962711552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:18:53.658] [INFO] console - Executing (49c3ddf3-b649-4823-833c-8cc559abc450): START TRANSACTION;
[2016-10-21 18:18:53.662] [INFO] console - Executing (49c3ddf3-b649-4823-833c-8cc559abc450): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:53.673] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 29);
[2016-10-21 18:18:53.685] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 30);
[2016-10-21 18:18:53.691] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.703] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.709] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/29/' like path||id||'/%'
[2016-10-21 18:18:53.722] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:18:53.712 +00:00' WHERE "id" = '30'
[2016-10-21 18:18:53.726] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/29/', '/')
                                where
                                    id = '30'
                                    or path like '/29/30/'||'%'
[2016-10-21 18:18:53.731] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:53.742] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:53.754] [INFO] console - Executing (default): UPDATE "Kopnik" SET "voiskoSize"=0,"starshina_id"='30',"updated_at"='2016-10-21 13:18:53.744 +00:00' WHERE "id" = '29'
[2016-10-21 18:18:53.759] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/30/')
                                where
                                    id = '29'
                                    or path like '/29/'||'%'
[2016-10-21 18:18:53.766] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/30/' like path||id||'/%'
[2016-10-21 18:18:53.772] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/30/' like k.path||k.id||'/%'
[2016-10-21 18:18:53.783] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('30')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:53.789] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/30/29/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:53.795] [INFO] console - Executing (49c3ddf3-b649-4823-833c-8cc559abc450): COMMIT;
[2016-10-21 18:18:53.798] [INFO] console - [ 70, 114, {}, [ undefined ] ]
[2016-10-21 18:18:53.816] [INFO] console - [ 16,
  1949609603629056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id29.starshinaChange',
  [],
  { KOPNIK: 29, STARSHINA: 30 } ]
[2016-10-21 18:18:53.835] [INFO] console - [ 16,
  6035772366913536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id30.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/30/29/',
       id: '29',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/30/',
       note: null,
       created_at: Fri Oct 21 2016 18:18:52 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:18:53 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '30' } } ]
[2016-10-21 18:18:53.853] [INFO] console - [ 16,
  1968995999678464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id30.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:18:54.204] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:18:54.215] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): START TRANSACTION;
[2016-10-21 18:18:54.218] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:54.233] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:18:54.223 +00:00','2016-10-21 13:18:54.223 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:18:54.239] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:54.247] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:54.255] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:18:54.259] [INFO] console - Executing (f2bc5c7e-dc92-4827-a89d-a80a7c02c73b): COMMIT;
[2016-10-21 18:18:54.261] [INFO] console - [ 70, 115, {}, [ '31' ] ]
[2016-10-21 18:18:54.279] [INFO] console - Executing (1e778786-8e63-4656-b6f7-a79da1027438): START TRANSACTION;
[2016-10-21 18:18:54.285] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:18:54.295] [INFO] console - Executing (1e778786-8e63-4656-b6f7-a79da1027438): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:54.301] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:18:54.315] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 31);
[2016-10-21 18:18:54.327] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:18:54.339] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:18:54.341] [INFO] console - [ 16,
  2400793644761088,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 29 } ]
[2016-10-21 18:18:54.351] [INFO] console - [ 16,
  1287155435438080,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 31 } ]
[2016-10-21 18:18:54.363] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:54.373] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:54.378] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:54.392] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:18:54.382 +00:00' WHERE "id" = '31'
[2016-10-21 18:18:54.397] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '31'
                                    or path like '/31/'||'%'
[2016-10-21 18:18:54.406] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:18:54.422] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:18:54.443] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:54.460] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/31/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:54.467] [INFO] console - Executing (1e778786-8e63-4656-b6f7-a79da1027438): COMMIT;
[2016-10-21 18:18:54.473] [INFO] console - [ 70, 116, {}, [ undefined ] ]
[2016-10-21 18:18:54.478] [INFO] console - [ 16,
  990486422618112,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id31.starshinaChange',
  [],
  { KOPNIK: 31, STARSHINA: 2 } ]
[2016-10-21 18:18:54.489] [INFO] console - Executing (987cbcbe-c52d-4e50-a18c-e01309c9e943): START TRANSACTION;
[2016-10-21 18:18:54.492] [INFO] console - [ 16,
  663793963106304,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/31/',
       id: '31',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:18:54 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:18:54 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:18:54.525] [INFO] console - Executing (987cbcbe-c52d-4e50-a18c-e01309c9e943): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:18:54.527] [INFO] console - [ 16,
  4065010470879232,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:18:54.547] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 31);
[2016-10-21 18:18:54.559] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:18:54.572] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:54.581] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:18:54.595] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:18:54.584 +00:00' WHERE "id" = '31'
[2016-10-21 18:18:54.601] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '31'
                                    or path like '/2/31/'||'%'
[2016-10-21 18:18:54.607] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:18:54.612] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:18:54.622] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:18:54.629] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/31/'||'%'
                                order by 
                                    path
[2016-10-21 18:18:54.634] [INFO] console - Executing (987cbcbe-c52d-4e50-a18c-e01309c9e943): COMMIT;
[2016-10-21 18:18:54.638] [INFO] console - [ 70, 117, {}, [ undefined ] ]
[2016-10-21 18:18:54.645] [INFO] console - [ 16,
  8014142732500992,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id31.starshinaChange',
  [],
  { KOPNIK: 31, STARSHINA: null } ]
[2016-10-21 18:18:54.657] [INFO] console - [ 16,
  4012837615697920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 31 } ]
[2016-10-21 18:18:54.669] [INFO] console - [ 16,
  95606208987136,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:19:10.328] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:19:12.279] [INFO] Server - starting...
[2016-10-21 18:19:12.281] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:19:12.380] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:19:12.632] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:19:12.664] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:19:12.698] [INFO] Server - connection.onopen()
[2016-10-21 18:19:12.700] [INFO] console - [ 64, 5712933084463104, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:19:12.710] [DEBUG] Server - api:model.create registered
[2016-10-21 18:19:12.711] [INFO] console - [ 64, 5327381271150592, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:19:12.719] [DEBUG] Server - api:model.get registered
[2016-10-21 18:19:12.719] [INFO] console - [ 64, 4953739582504960, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:19:12.729] [DEBUG] Server - api:model.save registered
[2016-10-21 18:19:12.730] [INFO] console - [ 64, 2713558645211136, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:19:12.736] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:19:12.737] [INFO] console - [ 64, 4003753938124800, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:19:12.745] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:19:12.746] [INFO] console - [ 64, 4468560571138048, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:19:12.751] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:19:12.752] [INFO] console - [ 64, 6497762078097408, {}, 'ru.kopa.error' ]
[2016-10-21 18:19:12.758] [DEBUG] Server - api:error registered
[2016-10-21 18:19:12.758] [INFO] console - [ 64, 4473404566536192, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:19:12.764] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:19:12.765] [INFO] console - [ 64, 3521933266124800, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:19:12.772] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:19:12.773] [INFO] console - [ 64, 5372406736617472, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:19:12.780] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:19:12.784] [INFO] console - [ 64, 2599610306527232, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:19:12.793] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:19:12.794] [INFO] console - [ 64, 8690825624027136, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:19:12.800] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:19:12.801] [INFO] console - [ 64, 2417021042032640, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:19:12.807] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:19:12.808] [INFO] console - [ 64, 5225742380040192, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:19:12.814] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:19:12.815] [INFO] console - [ 64, 2304423801913344, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:19:12.821] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:19:12.822] [INFO] console - [ 64, 6443932430893056, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:19:12.830] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:19:12.832] [INFO] console - [ 64,
  985812233617408,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:19:12.838] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:19:12.839] [INFO] console - [ 64, 6172903695450112, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:19:12.857] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:19:12.878] [INFO] Server - started
[2016-10-21 18:27:17.025] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:27:19.719] [INFO] Server - starting...
[2016-10-21 18:27:19.721] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:27:19.817] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:27:20.096] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:27:20.126] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:27:20.159] [INFO] Server - connection.onopen()
[2016-10-21 18:27:20.161] [INFO] console - [ 64, 4355615700811776, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:27:20.172] [DEBUG] Server - api:model.create registered
[2016-10-21 18:27:20.174] [INFO] console - [ 64, 7921728793608192, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:27:20.182] [DEBUG] Server - api:model.get registered
[2016-10-21 18:27:20.184] [INFO] console - [ 64, 2648701304569856, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:27:20.191] [DEBUG] Server - api:model.save registered
[2016-10-21 18:27:20.192] [INFO] console - [ 64, 2649693066625024, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:27:20.198] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:27:20.199] [INFO] console - [ 64, 8360105397452800, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:27:20.207] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:27:20.208] [INFO] console - [ 64, 3903028400750592, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:27:20.214] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:27:20.215] [INFO] console - [ 64, 8917133954121728, {}, 'ru.kopa.error' ]
[2016-10-21 18:27:20.221] [DEBUG] Server - api:error registered
[2016-10-21 18:27:20.222] [INFO] console - [ 64, 1481400064671744, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:27:20.229] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:27:20.230] [INFO] console - [ 64, 119373192757248, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:27:20.235] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:27:20.237] [INFO] console - [ 64, 1143044766171136, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:27:20.243] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:27:20.244] [INFO] console - [ 64, 5924597851488256, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:27:20.250] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:27:20.251] [INFO] console - [ 64, 8601723939586048, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:27:20.258] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:27:20.259] [INFO] console - [ 64, 2123909533007872, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:27:20.265] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:27:20.267] [INFO] console - [ 64, 4292577683570688, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:27:20.273] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:27:20.274] [INFO] console - [ 64, 6961272130109440, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:27:20.280] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:27:20.281] [INFO] console - [ 64, 3015923445268480, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:27:20.287] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:27:20.289] [INFO] console - [ 64,
  417528188764160,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:27:20.295] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:27:20.296] [INFO] console - [ 64, 6861936994025472, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:27:20.302] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:27:20.305] [INFO] Server - started
[2016-10-21 18:28:19.063] [INFO] console - [ 70, 121, {}, [ undefined ] ]
[2016-10-21 18:28:19.103] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:28:19.218] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:28:19.233] [INFO] console - Executing (7cc2a961-f7d0-4d55-aa92-b2a2cb30b6ad): START TRANSACTION;
[2016-10-21 18:28:19.239] [INFO] console - Executing (7cc2a961-f7d0-4d55-aa92-b2a2cb30b6ad): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:19.247] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:28:19.311] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:19.350] [INFO] console - Executing (7cc2a961-f7d0-4d55-aa92-b2a2cb30b6ad): COMMIT;
[2016-10-21 18:28:19.356] [INFO] console - [ 70,
  122,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:19.398] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:19.448] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): START TRANSACTION;
[2016-10-21 18:28:19.452] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:19.491] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:19.460 +00:00','2016-10-21 13:28:19.460 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:19.503] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:19.529] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:19.552] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:19.564] [INFO] console - Executing (5908b228-ee08-4e3c-9f2c-1c26aedf4cea): COMMIT;
[2016-10-21 18:28:19.570] [INFO] console - [ 70, 123, {}, [ '32' ] ]
[2016-10-21 18:28:19.596] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:19.614] [INFO] console - Executing (e1f1c165-e139-43ff-aec7-ad8346740a9b): START TRANSACTION;
[2016-10-21 18:28:19.624] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:19.628] [INFO] console - Executing (e1f1c165-e139-43ff-aec7-ad8346740a9b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:19.656] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:19.659] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 18:28:19.674] [INFO] console - [ 16,
  5978209361330176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 30 } ]
[2016-10-21 18:28:19.693] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:19.699] [INFO] console - [ 16,
  3653058942730240,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 32 } ]
[2016-10-21 18:28:19.755] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:19.784] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:19.799] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:19.853] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:28:19.804 +00:00' WHERE "id" = '32'
[2016-10-21 18:28:19.862] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '32'
                                    or path like '/32/'||'%'
[2016-10-21 18:28:19.871] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:19.886] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:19.904] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:19.922] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/32/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:19.927] [INFO] console - Executing (e1f1c165-e139-43ff-aec7-ad8346740a9b): COMMIT;
[2016-10-21 18:28:19.932] [INFO] console - [ 70, 124, {}, [ undefined ] ]
[2016-10-21 18:28:19.939] [INFO] console - [ 16,
  5080877302284288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.starshinaChange',
  [],
  { KOPNIK: 32, STARSHINA: 2 } ]
[2016-10-21 18:28:19.971] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:19.975] [INFO] console - [ 16,
  7069495048798208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/32/',
       id: '32',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:19 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:28:20.000] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): START TRANSACTION;
[2016-10-21 18:28:20.004] [INFO] console - [ 16,
  6519011334422528,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:28:20.016] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:20.053] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:20.039 +00:00','2016-10-21 13:28:20.039 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:20.061] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:20.072] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:20.082] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:20.086] [INFO] console - Executing (411b741e-6936-41af-ad24-c4051caeb2b9): COMMIT;
[2016-10-21 18:28:20.091] [INFO] console - [ 70, 125, {}, [ '33' ] ]
[2016-10-21 18:28:20.106] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:20.116] [INFO] console - Executing (d738a0f4-3c94-480e-8048-54b2592658d8): START TRANSACTION;
[2016-10-21 18:28:20.121] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:20.128] [INFO] console - Executing (d738a0f4-3c94-480e-8048-54b2592658d8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:20.149] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:20.152] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 33);
[2016-10-21 18:28:20.164] [INFO] console - [ 16,
  7864770707324928,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 31 } ]
[2016-10-21 18:28:20.177] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 18:28:20.181] [INFO] console - [ 16,
  1855261148971008,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 33 } ]
[2016-10-21 18:28:20.198] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.235] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.244] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:20.261] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='32',"updated_at"='2016-10-21 13:28:20.249 +00:00' WHERE "id" = '33'
[2016-10-21 18:28:20.268] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/32/')
                                where
                                    id = '33'
                                    or path like '/33/'||'%'
[2016-10-21 18:28:20.274] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/32/' like path||id||'/%'
[2016-10-21 18:28:20.279] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/32/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.297] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('32', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.308] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/32/33/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:20.316] [INFO] console - Executing (d738a0f4-3c94-480e-8048-54b2592658d8): COMMIT;
[2016-10-21 18:28:20.320] [INFO] console - [ 70, 126, {}, [ undefined ] ]
[2016-10-21 18:28:20.325] [INFO] console - [ 16,
  4255635287834624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id33.starshinaChange',
  [],
  { KOPNIK: 33, STARSHINA: 32 } ]
[2016-10-21 18:28:20.343] [INFO] console - [ 16,
  8302505737846784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/32/33/',
       id: '33',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/32/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:20 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:20 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '32' } } ]
[2016-10-21 18:28:20.365] [INFO] console - [ 16,
  5300197689131008,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:28:20.394] [INFO] console - [ 16,
  6405731265806336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:28:20.418] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:28:20.439] [INFO] console - Executing (d5208817-c3b9-48af-b87f-4a9a3d73b33b): START TRANSACTION;
[2016-10-21 18:28:20.455] [INFO] console - Executing (d5208817-c3b9-48af-b87f-4a9a3d73b33b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:20.487] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:20.519] [INFO] console - Executing (d5208817-c3b9-48af-b87f-4a9a3d73b33b): COMMIT;
[2016-10-21 18:28:20.523] [INFO] console - [ 70,
  127,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:20.559] [INFO] console - Executing (e6ad9224-fc1f-410d-a2c8-ff3c8e290598): START TRANSACTION;
[2016-10-21 18:28:20.563] [INFO] console - Executing (e6ad9224-fc1f-410d-a2c8-ff3c8e290598): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:20.576] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 18:28:20.592] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:20.601] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.617] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.628] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:20.645] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:28:20.631 +00:00' WHERE "id" = '32'
[2016-10-21 18:28:20.655] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '32'
                                    or path like '/2/32/'||'%'
[2016-10-21 18:28:20.671] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:28:20.680] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.699] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.709] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/32/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:20.714] [INFO] console - Executing (e6ad9224-fc1f-410d-a2c8-ff3c8e290598): COMMIT;
[2016-10-21 18:28:20.719] [INFO] console - [ 70, 128, {}, [ undefined ] ]
[2016-10-21 18:28:20.727] [INFO] console - [ 16,
  2309089346453504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.starshinaChange',
  [],
  { KOPNIK: 32, STARSHINA: 4 } ]
[2016-10-21 18:28:20.739] [INFO] console - [ 16,
  4969384414019584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id33.starshinaChange',
  [],
  { KOPNIK: 32, STARSHINA: 4 } ]
[2016-10-21 18:28:20.752] [INFO] console - [ 16,
  1048681685975040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 32 } ]
[2016-10-21 18:28:20.767] [INFO] console - [ 16,
  7851743868092416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/32/',
       id: '32',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:19 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:20 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:28:20.815] [INFO] console - [ 16,
  2116144938876928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:28:20.834] [INFO] console - [ 16,
  3606097552211968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:28:20.867] [INFO] console - Executing (ecf16666-19af-4395-9594-1b7474d9ace4): START TRANSACTION;
[2016-10-21 18:28:20.871] [INFO] console - Executing (ecf16666-19af-4395-9594-1b7474d9ace4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:20.884] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 18:28:20.912] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.926] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.936] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:28:20.953] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:28:20.939 +00:00' WHERE "id" = '32'
[2016-10-21 18:28:20.958] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '32'
                                    or path like '/4/32/'||'%'
[2016-10-21 18:28:20.963] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:20.968] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:20.980] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:20.997] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/32/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:21.007] [INFO] console - Executing (ecf16666-19af-4395-9594-1b7474d9ace4): COMMIT;
[2016-10-21 18:28:21.012] [INFO] console - [ 70, 129, {}, [ undefined ] ]
[2016-10-21 18:28:21.017] [INFO] console - [ 16,
  6340495955460096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id32.starshinaChange',
  [],
  { KOPNIK: 32, STARSHINA: null } ]
[2016-10-21 18:28:21.029] [INFO] console - [ 16,
  1304350343299072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id33.starshinaChange',
  [],
  { KOPNIK: 32, STARSHINA: null } ]
[2016-10-21 18:28:21.057] [INFO] console - [ 16,
  923211394973696,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 32 } ]
[2016-10-21 18:28:21.066] [INFO] console - [ 16,
  3085972663173120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:28:21.097] [INFO] console - Executing (18b57f7a-d594-4b6c-8231-43267cf4defe): START TRANSACTION;
[2016-10-21 18:28:21.105] [INFO] console - Executing (18b57f7a-d594-4b6c-8231-43267cf4defe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:21.119] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 32);
[2016-10-21 18:28:21.136] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 33);
[2016-10-21 18:28:21.152] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:21.169] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:21.175] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:28:22.231] [INFO] console - [ 8,
  68,
  130,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:28:22.273] [INFO] console - Executing (18b57f7a-d594-4b6c-8231-43267cf4defe): ROLLBACK;
[2016-10-21 18:28:38.059] [INFO] console - [ 70, 132, {}, [ undefined ] ]
[2016-10-21 18:28:38.088] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:28:38.126] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:28:38.132] [INFO] console - Executing (ae12c884-ec38-4507-8b52-c92f480649fb): START TRANSACTION;
[2016-10-21 18:28:38.136] [INFO] console - Executing (ae12c884-ec38-4507-8b52-c92f480649fb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:38.154] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:38.190] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:28:38.203] [INFO] console - Executing (ae12c884-ec38-4507-8b52-c92f480649fb): COMMIT;
[2016-10-21 18:28:38.226] [INFO] console - [ 70,
  133,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:38.264] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:38.279] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): START TRANSACTION;
[2016-10-21 18:28:38.301] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:38.339] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:38.309 +00:00','2016-10-21 13:28:38.309 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:38.522] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:38.724] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:38.740] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:38.773] [INFO] console - Executing (95c21002-81b2-4b25-9d68-eecdad5d45a9): COMMIT;
[2016-10-21 18:28:38.791] [INFO] console - [ 70, 134, {}, [ '34' ] ]
[2016-10-21 18:28:38.823] [INFO] console - Executing (b83751ff-fa1e-47c3-9559-d40582fc73a1): START TRANSACTION;
[2016-10-21 18:28:38.843] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:38.849] [INFO] console - Executing (b83751ff-fa1e-47c3-9559-d40582fc73a1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:38.857] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:38.872] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 18:28:38.885] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:38.898] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:38.904] [INFO] console - [ 16,
  5472025189548032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 32 } ]
[2016-10-21 18:28:38.918] [INFO] console - [ 16,
  5269509845811200,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 34 } ]
[2016-10-21 18:28:38.924] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:38.937] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:38.945] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:38.963] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:28:38.948 +00:00' WHERE "id" = '34'
[2016-10-21 18:28:38.967] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '34'
                                    or path like '/34/'||'%'
[2016-10-21 18:28:38.974] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:38.980] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.000] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.009] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/34/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:39.020] [INFO] console - Executing (b83751ff-fa1e-47c3-9559-d40582fc73a1): COMMIT;
[2016-10-21 18:28:39.028] [INFO] console - [ 70, 135, {}, [ undefined ] ]
[2016-10-21 18:28:39.034] [INFO] console - [ 16,
  6032726385754112,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id34.starshinaChange',
  [],
  { KOPNIK: 34, STARSHINA: 2 } ]
[2016-10-21 18:28:39.061] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:39.069] [INFO] console - [ 16,
  7102783176048640,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/34/',
       id: '34',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:38 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:28:39.097] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): START TRANSACTION;
[2016-10-21 18:28:39.099] [INFO] console - [ 16,
  3786911663521792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:28:39.107] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:39.124] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:39.113 +00:00','2016-10-21 13:28:39.113 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:39.131] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:39.141] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:39.150] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:39.155] [INFO] console - Executing (b0c5a912-1634-48c3-9062-7a78da29488b): COMMIT;
[2016-10-21 18:28:39.163] [INFO] console - [ 70, 136, {}, [ '35' ] ]
[2016-10-21 18:28:39.178] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:39.198] [INFO] console - Executing (10854ff9-029b-46d7-9dcb-aaef2fdd1e1d): START TRANSACTION;
[2016-10-21 18:28:39.203] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:39.208] [INFO] console - Executing (10854ff9-029b-46d7-9dcb-aaef2fdd1e1d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:39.230] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:39.232] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 18:28:39.242] [INFO] console - [ 16,
  6494855888896000,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 33 } ]
[2016-10-21 18:28:39.255] [INFO] console - [ 16,
  2463658355458048,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 35 } ]
[2016-10-21 18:28:39.269] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 18:28:39.282] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.296] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.303] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:39.317] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='34',"updated_at"='2016-10-21 13:28:39.306 +00:00' WHERE "id" = '35'
[2016-10-21 18:28:39.324] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/34/')
                                where
                                    id = '35'
                                    or path like '/35/'||'%'
[2016-10-21 18:28:39.329] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/34/' like path||id||'/%'
[2016-10-21 18:28:39.335] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/34/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.351] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('34', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.362] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/34/35/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:39.367] [INFO] console - Executing (10854ff9-029b-46d7-9dcb-aaef2fdd1e1d): COMMIT;
[2016-10-21 18:28:39.374] [INFO] console - [ 70, 137, {}, [ undefined ] ]
[2016-10-21 18:28:39.378] [INFO] console - [ 16,
  1182189945356288,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id35.starshinaChange',
  [],
  { KOPNIK: 35, STARSHINA: 34 } ]
[2016-10-21 18:28:39.389] [INFO] console - [ 16,
  2562539317624832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id34.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/34/35/',
       id: '35',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/34/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:39 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '34' } } ]
[2016-10-21 18:28:39.410] [INFO] console - [ 16,
  4250197630648320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id34.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:28:39.425] [INFO] console - [ 16,
  4897658470662144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:28:39.444] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:28:39.451] [INFO] console - Executing (67ba1bb5-86c6-4113-91cc-cfdcd534e60e): START TRANSACTION;
[2016-10-21 18:28:39.457] [INFO] console - Executing (67ba1bb5-86c6-4113-91cc-cfdcd534e60e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:39.484] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:39.497] [INFO] console - Executing (67ba1bb5-86c6-4113-91cc-cfdcd534e60e): COMMIT;
[2016-10-21 18:28:39.502] [INFO] console - [ 70,
  138,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:39.530] [INFO] console - Executing (f7d4c627-1a94-4de8-87d8-4cecf63cf75e): START TRANSACTION;
[2016-10-21 18:28:39.535] [INFO] console - Executing (f7d4c627-1a94-4de8-87d8-4cecf63cf75e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:39.549] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 18:28:39.566] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:39.580] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.594] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.602] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:39.615] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:28:39.605 +00:00' WHERE "id" = '34'
[2016-10-21 18:28:39.632] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '34'
                                    or path like '/2/34/'||'%'
[2016-10-21 18:28:39.639] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:28:39.649] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.670] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.679] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/34/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:39.685] [INFO] console - Executing (f7d4c627-1a94-4de8-87d8-4cecf63cf75e): COMMIT;
[2016-10-21 18:28:39.688] [INFO] console - [ 70, 139, {}, [ undefined ] ]
[2016-10-21 18:28:39.697] [INFO] console - [ 16,
  3353193117384704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id34.starshinaChange',
  [],
  { KOPNIK: 34, STARSHINA: 4 } ]
[2016-10-21 18:28:39.710] [INFO] console - [ 16,
  7936033071038464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id35.starshinaChange',
  [],
  { KOPNIK: 34, STARSHINA: 4 } ]
[2016-10-21 18:28:39.720] [INFO] console - [ 16,
  7219828402159616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 34 } ]
[2016-10-21 18:28:39.733] [INFO] console - [ 16,
  8216787432767488,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/34/',
       id: '34',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:28:39.761] [INFO] console - [ 16,
  470197727133696,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:28:39.781] [INFO] console - [ 16,
  6254571462590464,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:28:39.809] [INFO] console - Executing (a0836cce-eb6d-421c-96e6-b83bd0ba93a3): START TRANSACTION;
[2016-10-21 18:28:39.812] [INFO] console - Executing (a0836cce-eb6d-421c-96e6-b83bd0ba93a3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:39.828] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 18:28:39.838] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.852] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.862] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:28:39.880] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:28:39.865 +00:00' WHERE "id" = '34'
[2016-10-21 18:28:39.885] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '34'
                                    or path like '/4/34/'||'%'
[2016-10-21 18:28:39.891] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:39.896] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:39.907] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:39.913] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/34/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:39.918] [INFO] console - Executing (a0836cce-eb6d-421c-96e6-b83bd0ba93a3): COMMIT;
[2016-10-21 18:28:39.922] [INFO] console - [ 70, 140, {}, [ undefined ] ]
[2016-10-21 18:28:39.929] [INFO] console - [ 16,
  5016304849256448,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id34.starshinaChange',
  [],
  { KOPNIK: 34, STARSHINA: null } ]
[2016-10-21 18:28:39.941] [INFO] console - [ 16,
  7686276805296128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id35.starshinaChange',
  [],
  { KOPNIK: 34, STARSHINA: null } ]
[2016-10-21 18:28:39.977] [INFO] console - [ 16,
  7707401962651648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 34 } ]
[2016-10-21 18:28:39.989] [INFO] console - [ 16,
  7290842718928896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:28:40.009] [INFO] console - Executing (3966e67b-5a0e-46e2-a333-331315ae43f1): START TRANSACTION;
[2016-10-21 18:28:40.013] [INFO] console - Executing (3966e67b-5a0e-46e2-a333-331315ae43f1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:40.026] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 34);
[2016-10-21 18:28:40.046] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 35);
[2016-10-21 18:28:40.053] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:40.083] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:40.096] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:28:40.108] [INFO] console - [ 8,
  68,
  141,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:28:40.141] [INFO] console - Executing (3966e67b-5a0e-46e2-a333-331315ae43f1): ROLLBACK;
[2016-10-21 18:28:58.407] [INFO] console - [ 70, 143, {}, [ undefined ] ]
[2016-10-21 18:28:58.455] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:28:58.459] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:28:58.488] [INFO] console - Executing (66b39e6c-074e-4daf-8f5b-332b2fd6e655): START TRANSACTION;
[2016-10-21 18:28:58.501] [INFO] console - Executing (66b39e6c-074e-4daf-8f5b-332b2fd6e655): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:58.549] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:28:58.567] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:58.596] [INFO] console - Executing (66b39e6c-074e-4daf-8f5b-332b2fd6e655): COMMIT;
[2016-10-21 18:28:58.599] [INFO] console - [ 70,
  144,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:58.646] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:58.657] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): START TRANSACTION;
[2016-10-21 18:28:58.661] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:58.685] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:58.666 +00:00','2016-10-21 13:28:58.666 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:58.707] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:58.718] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:58.727] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:58.734] [INFO] console - Executing (6f3149c3-b715-4354-a610-cdaf83f4c99a): COMMIT;
[2016-10-21 18:28:58.739] [INFO] console - [ 70, 145, {}, [ '36' ] ]
[2016-10-21 18:28:58.761] [INFO] console - Executing (90d9d491-ce96-4359-9069-6bfa70d6c237): START TRANSACTION;
[2016-10-21 18:28:58.769] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:58.778] [INFO] console - Executing (90d9d491-ce96-4359-9069-6bfa70d6c237): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:58.786] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:58.801] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 18:28:58.817] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:58.830] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:28:58.831] [INFO] console - [ 16,
  218659551182848,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 34 } ]
[2016-10-21 18:28:58.843] [INFO] console - [ 16,
  4981154971123712,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 36 } ]
[2016-10-21 18:28:58.858] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:58.871] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:58.881] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:58.903] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:28:58.884 +00:00' WHERE "id" = '36'
[2016-10-21 18:28:58.913] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '36'
                                    or path like '/36/'||'%'
[2016-10-21 18:28:58.920] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:58.927] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:58.944] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:58.956] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/36/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:58.960] [INFO] console - Executing (90d9d491-ce96-4359-9069-6bfa70d6c237): COMMIT;
[2016-10-21 18:28:58.964] [INFO] console - [ 70, 146, {}, [ undefined ] ]
[2016-10-21 18:28:58.978] [INFO] console - [ 16,
  5007110247022592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.starshinaChange',
  [],
  { KOPNIK: 36, STARSHINA: 2 } ]
[2016-10-21 18:28:58.996] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:28:58.999] [INFO] console - [ 16,
  5153236178698240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/36/',
       id: '36',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:58 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:58 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:28:59.039] [INFO] console - [ 16,
  3254439972438016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:28:59.050] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): START TRANSACTION;
[2016-10-21 18:28:59.055] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:59.072] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:28:59.059 +00:00','2016-10-21 13:28:59.059 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:28:59.080] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:59.090] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:59.098] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:28:59.107] [INFO] console - Executing (103ce190-1693-48c1-bfc2-ea3b02832dd0): COMMIT;
[2016-10-21 18:28:59.112] [INFO] console - [ 70, 147, {}, [ '37' ] ]
[2016-10-21 18:28:59.141] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:28:59.150] [INFO] console - Executing (fe035e66-73b7-410c-aa18-07c31427091e): START TRANSACTION;
[2016-10-21 18:28:59.157] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:28:59.162] [INFO] console - Executing (fe035e66-73b7-410c-aa18-07c31427091e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:59.183] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:28:59.185] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 37);
[2016-10-21 18:28:59.196] [INFO] console - [ 16,
  7297856006258688,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 35 } ]
[2016-10-21 18:28:59.210] [INFO] console - [ 16,
  1421821893148672,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 37 } ]
[2016-10-21 18:28:59.222] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 18:28:59.232] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:28:59.244] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:59.250] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:28:59.265] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='36',"updated_at"='2016-10-21 13:28:59.253 +00:00' WHERE "id" = '37'
[2016-10-21 18:28:59.271] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/36/')
                                where
                                    id = '37'
                                    or path like '/37/'||'%'
[2016-10-21 18:28:59.277] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/36/' like path||id||'/%'
[2016-10-21 18:28:59.292] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/36/' like k.path||k.id||'/%'
[2016-10-21 18:28:59.322] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('36', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:59.333] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/36/37/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:59.341] [INFO] console - Executing (fe035e66-73b7-410c-aa18-07c31427091e): COMMIT;
[2016-10-21 18:28:59.345] [INFO] console - [ 70, 148, {}, [ undefined ] ]
[2016-10-21 18:28:59.355] [INFO] console - [ 16,
  5771073524072448,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id37.starshinaChange',
  [],
  { KOPNIK: 37, STARSHINA: 36 } ]
[2016-10-21 18:28:59.370] [INFO] console - [ 16,
  7775946283155456,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/36/37/',
       id: '37',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/36/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:59 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '36' } } ]
[2016-10-21 18:28:59.401] [INFO] console - [ 16,
  4352425905356800,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:28:59.419] [INFO] console - [ 16,
  6484304758571008,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:28:59.453] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:28:59.467] [INFO] console - Executing (27a4054a-2e06-403c-8c9c-5855b6ea1876): START TRANSACTION;
[2016-10-21 18:28:59.475] [INFO] console - Executing (27a4054a-2e06-403c-8c9c-5855b6ea1876): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:59.513] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:59.537] [INFO] console - Executing (27a4054a-2e06-403c-8c9c-5855b6ea1876): COMMIT;
[2016-10-21 18:28:59.543] [INFO] console - [ 70,
  149,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:28:59.613] [INFO] console - Executing (96dd0c11-0d1e-4f91-86c4-e77c788222eb): START TRANSACTION;
[2016-10-21 18:28:59.634] [INFO] console - Executing (96dd0c11-0d1e-4f91-86c4-e77c788222eb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:28:59.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 18:28:59.688] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:28:59.704] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:28:59.745] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:59.765] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:28:59.860] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:28:59.824 +00:00' WHERE "id" = '36'
[2016-10-21 18:28:59.883] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '36'
                                    or path like '/2/36/'||'%'
[2016-10-21 18:28:59.893] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:28:59.903] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:28:59.920] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:28:59.940] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/36/'||'%'
                                order by 
                                    path
[2016-10-21 18:28:59.948] [INFO] console - Executing (96dd0c11-0d1e-4f91-86c4-e77c788222eb): COMMIT;
[2016-10-21 18:28:59.953] [INFO] console - [ 70, 150, {}, [ undefined ] ]
[2016-10-21 18:28:59.958] [INFO] console - [ 16,
  2998779730984960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.starshinaChange',
  [],
  { KOPNIK: 36, STARSHINA: 4 } ]
[2016-10-21 18:28:59.980] [INFO] console - [ 16,
  7857231080980480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id37.starshinaChange',
  [],
  { KOPNIK: 36, STARSHINA: 4 } ]
[2016-10-21 18:28:59.997] [INFO] console - [ 16,
  7079438107803648,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 36 } ]
[2016-10-21 18:29:00.017] [INFO] console - [ 16,
  6254557977903104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/36/',
       id: '36',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:28:58 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:28:59 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:29:00.047] [INFO] console - [ 16,
  6810785198112768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:29:00.085] [INFO] console - [ 16,
  8311403014258688,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:29:00.114] [INFO] console - Executing (613807c0-8c13-4356-ab52-6be483a4a84f): START TRANSACTION;
[2016-10-21 18:29:00.125] [INFO] console - Executing (613807c0-8c13-4356-ab52-6be483a4a84f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:00.147] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 18:29:00.187] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:29:00.204] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:00.214] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:29:00.231] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:29:00.218 +00:00' WHERE "id" = '36'
[2016-10-21 18:29:00.240] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '36'
                                    or path like '/4/36/'||'%'
[2016-10-21 18:29:00.253] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:00.259] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:00.269] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:00.275] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/36/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:00.282] [INFO] console - Executing (613807c0-8c13-4356-ab52-6be483a4a84f): COMMIT;
[2016-10-21 18:29:00.285] [INFO] console - [ 70, 151, {}, [ undefined ] ]
[2016-10-21 18:29:00.292] [INFO] console - [ 16,
  1420743273349120,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id36.starshinaChange',
  [],
  { KOPNIK: 36, STARSHINA: null } ]
[2016-10-21 18:29:00.301] [INFO] console - [ 16,
  5351380724219904,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id37.starshinaChange',
  [],
  { KOPNIK: 36, STARSHINA: null } ]
[2016-10-21 18:29:00.310] [INFO] console - [ 16,
  7405619292143616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 36 } ]
[2016-10-21 18:29:00.319] [INFO] console - [ 16,
  2466539043291136,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:29:00.345] [INFO] console - Executing (323adbae-f8fe-4f56-8ed1-b3c2435b50f3): START TRANSACTION;
[2016-10-21 18:29:00.348] [INFO] console - Executing (323adbae-f8fe-4f56-8ed1-b3c2435b50f3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:00.361] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 36);
[2016-10-21 18:29:00.374] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 37);
[2016-10-21 18:29:00.382] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:00.394] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:24.497] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:29:24.507] [INFO] console - [ 8,
  68,
  152,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:29:24.534] [INFO] console - Executing (323adbae-f8fe-4f56-8ed1-b3c2435b50f3): ROLLBACK;
[2016-10-21 18:29:37.665] [INFO] console - [ 70, 154, {}, [ undefined ] ]
[2016-10-21 18:29:37.717] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:29:37.725] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:29:37.744] [INFO] console - Executing (2f86b6ff-d9ac-4b5c-8fd1-39b2c80fa086): START TRANSACTION;
[2016-10-21 18:29:37.752] [INFO] console - Executing (2f86b6ff-d9ac-4b5c-8fd1-39b2c80fa086): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:37.769] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:29:37.787] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:29:37.810] [INFO] console - Executing (2f86b6ff-d9ac-4b5c-8fd1-39b2c80fa086): COMMIT;
[2016-10-21 18:29:37.814] [INFO] console - [ 70,
  155,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:29:37.851] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:29:37.860] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): START TRANSACTION;
[2016-10-21 18:29:37.863] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:37.880] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:29:37.866 +00:00','2016-10-21 13:29:37.866 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:29:37.887] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:37.898] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:37.910] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:29:37.917] [INFO] console - Executing (4a69c231-9e41-4b13-8f77-75dcd17eb257): COMMIT;
[2016-10-21 18:29:37.920] [INFO] console - [ 70, 156, {}, [ '38' ] ]
[2016-10-21 18:29:37.939] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:37.947] [INFO] console - Executing (cc001a48-ae5f-4e4d-ab78-c2f585dd7261): START TRANSACTION;
[2016-10-21 18:29:37.951] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:29:37.954] [INFO] console - Executing (cc001a48-ae5f-4e4d-ab78-c2f585dd7261): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:37.968] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:29:37.972] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 18:29:37.985] [INFO] console - [ 16,
  3772754916540416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 36 } ]
[2016-10-21 18:29:37.998] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:29:38.006] [INFO] console - [ 16,
  4249065401352192,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 38 } ]
[2016-10-21 18:29:38.023] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:38.036] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:38.041] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:38.055] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:29:38.044 +00:00' WHERE "id" = '38'
[2016-10-21 18:29:38.063] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '38'
                                    or path like '/38/'||'%'
[2016-10-21 18:29:38.067] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:29:38.071] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:29:38.083] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:38.093] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/38/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:38.099] [INFO] console - Executing (cc001a48-ae5f-4e4d-ab78-c2f585dd7261): COMMIT;
[2016-10-21 18:29:38.103] [INFO] console - [ 70, 157, {}, [ undefined ] ]
[2016-10-21 18:29:38.107] [INFO] console - [ 16,
  2474906264535040,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.starshinaChange',
  [],
  { KOPNIK: 38, STARSHINA: 2 } ]
[2016-10-21 18:29:38.125] [INFO] console - [ 16,
  754956613189632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/38/',
       id: '38',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:29:37 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:29:38 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:29:38.146] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:29:38.148] [INFO] console - [ 16,
  3382766441857024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:29:38.163] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): START TRANSACTION;
[2016-10-21 18:29:38.166] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:38.185] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:29:38.173 +00:00','2016-10-21 13:29:38.173 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:29:38.193] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:38.206] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:38.216] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:29:38.223] [INFO] console - Executing (bebddd7b-19de-4e8a-a1c2-81e529644dbf): COMMIT;
[2016-10-21 18:29:38.226] [INFO] console - [ 70, 158, {}, [ '39' ] ]
[2016-10-21 18:29:38.247] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:38.256] [INFO] console - Executing (126ea935-807b-488a-b2bd-b46e65ae71ab): START TRANSACTION;
[2016-10-21 18:29:38.261] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:29:38.267] [INFO] console - Executing (126ea935-807b-488a-b2bd-b46e65ae71ab): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:38.291] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:29:38.294] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 39);
[2016-10-21 18:29:38.300] [INFO] console - [ 16,
  6220096731086848,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 37 } ]
[2016-10-21 18:29:38.314] [INFO] console - [ 16,
  5279380861353984,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 39 } ]
[2016-10-21 18:29:38.759] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 18:29:38.774] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:38.787] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:38.796] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:38.812] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='38',"updated_at"='2016-10-21 13:29:38.800 +00:00' WHERE "id" = '39'
[2016-10-21 18:29:38.820] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/38/')
                                where
                                    id = '39'
                                    or path like '/39/'||'%'
[2016-10-21 18:29:38.824] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/38/' like path||id||'/%'
[2016-10-21 18:29:38.828] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/38/' like k.path||k.id||'/%'
[2016-10-21 18:29:38.839] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('38', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:38.850] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/38/39/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:38.857] [INFO] console - Executing (126ea935-807b-488a-b2bd-b46e65ae71ab): COMMIT;
[2016-10-21 18:29:38.861] [INFO] console - [ 70, 159, {}, [ undefined ] ]
[2016-10-21 18:29:38.866] [INFO] console - [ 16,
  1888743415873536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id39.starshinaChange',
  [],
  { KOPNIK: 39, STARSHINA: 38 } ]
[2016-10-21 18:29:38.875] [INFO] console - [ 16,
  8132864228982784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/38/39/',
       id: '39',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/38/',
       note: null,
       created_at: Fri Oct 21 2016 18:29:38 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:29:38 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '38' } } ]
[2016-10-21 18:29:38.890] [INFO] console - [ 16,
  8490018731458560,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:29:38.900] [INFO] console - [ 16,
  2263587269640192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:29:38.919] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:29:38.926] [INFO] console - Executing (7cb42349-0080-4b97-9129-dc19bd61e8d0): START TRANSACTION;
[2016-10-21 18:29:38.933] [INFO] console - Executing (7cb42349-0080-4b97-9129-dc19bd61e8d0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:38.946] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:29:38.956] [INFO] console - Executing (7cb42349-0080-4b97-9129-dc19bd61e8d0): COMMIT;
[2016-10-21 18:29:38.959] [INFO] console - [ 70,
  160,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:29:38.980] [INFO] console - Executing (47a0493e-57c4-4aee-920a-97463b4a7c78): START TRANSACTION;
[2016-10-21 18:29:38.984] [INFO] console - Executing (47a0493e-57c4-4aee-920a-97463b4a7c78): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:38.992] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 18:29:39.007] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:29:39.014] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:29:39.026] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:39.035] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:29:39.047] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:29:39.039 +00:00' WHERE "id" = '38'
[2016-10-21 18:29:39.052] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '38'
                                    or path like '/2/38/'||'%'
[2016-10-21 18:29:39.057] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:29:39.063] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:29:39.073] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:39.082] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/38/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:39.087] [INFO] console - Executing (47a0493e-57c4-4aee-920a-97463b4a7c78): COMMIT;
[2016-10-21 18:29:39.091] [INFO] console - [ 70, 161, {}, [ undefined ] ]
[2016-10-21 18:29:39.097] [INFO] console - [ 16,
  5695570542854144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.starshinaChange',
  [],
  { KOPNIK: 38, STARSHINA: 4 } ]
[2016-10-21 18:29:39.106] [INFO] console - [ 16,
  6298296140169216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id39.starshinaChange',
  [],
  { KOPNIK: 38, STARSHINA: 4 } ]
[2016-10-21 18:29:39.114] [INFO] console - [ 16,
  3633111235559424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 38 } ]
[2016-10-21 18:29:39.125] [INFO] console - [ 16,
  8672541100998656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/38/',
       id: '38',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:29:37 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:29:39 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:29:39.141] [INFO] console - [ 16,
  4692352077660160,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:29:39.148] [INFO] console - [ 16,
  4121285604933632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:29:39.167] [INFO] console - Executing (b01c204e-31e5-47ec-8b3c-4d427537cb93): START TRANSACTION;
[2016-10-21 18:29:39.172] [INFO] console - Executing (b01c204e-31e5-47ec-8b3c-4d427537cb93): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:39.183] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 18:29:39.191] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:29:39.202] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:39.209] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:29:39.223] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:29:39.212 +00:00' WHERE "id" = '38'
[2016-10-21 18:29:39.231] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '38'
                                    or path like '/4/38/'||'%'
[2016-10-21 18:29:39.236] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:39.244] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:39.260] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:39.267] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/38/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:39.273] [INFO] console - Executing (b01c204e-31e5-47ec-8b3c-4d427537cb93): COMMIT;
[2016-10-21 18:29:39.277] [INFO] console - [ 70, 162, {}, [ undefined ] ]
[2016-10-21 18:29:39.284] [INFO] console - [ 16,
  4130108136751104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id38.starshinaChange',
  [],
  { KOPNIK: 38, STARSHINA: null } ]
[2016-10-21 18:29:39.299] [INFO] console - [ 16,
  4270715396161536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id39.starshinaChange',
  [],
  { KOPNIK: 38, STARSHINA: null } ]
[2016-10-21 18:29:39.307] [INFO] console - [ 16,
  6632778653237248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 38 } ]
[2016-10-21 18:29:39.317] [INFO] console - [ 16,
  8714375676297216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:29:39.331] [INFO] console - Executing (25b4c4c5-b6e4-4086-94be-280863b87e50): START TRANSACTION;
[2016-10-21 18:29:39.338] [INFO] console - Executing (25b4c4c5-b6e4-4086-94be-280863b87e50): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:39.347] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 38);
[2016-10-21 18:29:39.359] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 39);
[2016-10-21 18:29:39.365] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:39.374] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:43.431] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:29:43.441] [INFO] console - [ 8,
  68,
  163,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:29:43.459] [INFO] console - Executing (25b4c4c5-b6e4-4086-94be-280863b87e50): ROLLBACK;
[2016-10-21 18:29:43.468] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:29:43.476] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): START TRANSACTION;
[2016-10-21 18:29:43.478] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:43.490] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:29:43.481 +00:00','2016-10-21 13:29:43.481 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:29:43.496] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:43.504] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:43.509] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:29:43.513] [INFO] console - Executing (337ca00b-e699-4951-adde-a5d33ab94875): COMMIT;
[2016-10-21 18:29:43.526] [INFO] console - [ 70, 164, {}, [ '40' ] ]
[2016-10-21 18:29:43.538] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:29:43.548] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:29:43.550] [INFO] console - Executing (64356ef2-e126-4186-a6c7-b7769a5b75c4): START TRANSACTION;
[2016-10-21 18:29:43.557] [INFO] console - Executing (64356ef2-e126-4186-a6c7-b7769a5b75c4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:29:43.566] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:29:43.578] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 40);
[2016-10-21 18:29:43.581] [INFO] console - [ 16,
  3537553951031296,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 38 } ]
[2016-10-21 18:29:43.593] [INFO] console - [ 16,
  4053709728251904,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 40 } ]
[2016-10-21 18:29:43.602] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:29:43.611] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:29:43.628] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:43.635] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:29:43.649] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:29:43.637 +00:00' WHERE "id" = '40'
[2016-10-21 18:29:43.661] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '40'
                                    or path like '/40/'||'%'
[2016-10-21 18:29:43.683] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:29:43.697] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:29:43.762] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:29:43.774] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/40/'||'%'
                                order by 
                                    path
[2016-10-21 18:29:43.804] [INFO] console - Executing (64356ef2-e126-4186-a6c7-b7769a5b75c4): COMMIT;
[2016-10-21 18:29:43.808] [INFO] console - [ 70, 165, {}, [ undefined ] ]
[2016-10-21 18:29:43.843] [INFO] console - [ 16,
  1531469543505920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id40.starshinaChange',
  [],
  { KOPNIK: 40, STARSHINA: 2 } ]
[2016-10-21 18:29:43.862] [INFO] console - [ 16,
  6568565522038784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/40/',
       id: '40',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:29:43 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:29:43 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:29:43.884] [INFO] console - [ 16,
  4200554903371776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:30:10.313] [INFO] console - [ 70, 167, {}, [ undefined ] ]
[2016-10-21 18:30:10.354] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:30:10.372] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:30:10.404] [INFO] console - Executing (8fd15dac-2e9c-4ac0-88ce-ea04b197fe38): START TRANSACTION;
[2016-10-21 18:30:10.412] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:30:10.419] [INFO] console - Executing (8fd15dac-2e9c-4ac0-88ce-ea04b197fe38): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:10.440] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:30:10.463] [INFO] console - Executing (8fd15dac-2e9c-4ac0-88ce-ea04b197fe38): COMMIT;
[2016-10-21 18:30:10.467] [INFO] console - [ 70,
  168,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:30:10.509] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:30:10.518] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): START TRANSACTION;
[2016-10-21 18:30:10.523] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:10.540] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:30:10.527 +00:00','2016-10-21 13:30:10.527 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:30:10.559] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:30:10.573] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:30:10.581] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:30:10.586] [INFO] console - Executing (a81b7caf-361d-47b2-9d74-fd5ea25d4da2): COMMIT;
[2016-10-21 18:30:10.591] [INFO] console - [ 70, 169, {}, [ '41' ] ]
[2016-10-21 18:30:10.603] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:30:10.618] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:30:10.620] [INFO] console - Executing (3e588946-1930-450c-ad03-99c0ff4c6529): START TRANSACTION;
[2016-10-21 18:30:10.628] [INFO] console - Executing (3e588946-1930-450c-ad03-99c0ff4c6529): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:10.639] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:30:10.659] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 18:30:10.661] [INFO] console - [ 16,
  5017049875087360,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 39 } ]
[2016-10-21 18:30:10.679] [INFO] console - [ 16,
  8655159611621376,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 41 } ]
[2016-10-21 18:30:10.690] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:30:10.702] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:30:10.712] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:10.718] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:30:10.734] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:30:10.720 +00:00' WHERE "id" = '41'
[2016-10-21 18:30:10.750] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '41'
                                    or path like '/41/'||'%'
[2016-10-21 18:30:10.761] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:30:10.767] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:30:10.777] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:10.785] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/41/'||'%'
                                order by 
                                    path
[2016-10-21 18:30:10.790] [INFO] console - Executing (3e588946-1930-450c-ad03-99c0ff4c6529): COMMIT;
[2016-10-21 18:30:10.793] [INFO] console - [ 70, 170, {}, [ undefined ] ]
[2016-10-21 18:30:10.798] [INFO] console - [ 16,
  1272085068382208,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.starshinaChange',
  [],
  { KOPNIK: 41, STARSHINA: 2 } ]
[2016-10-21 18:30:10.813] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:30:10.815] [INFO] console - [ 16,
  8542949415583744,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/41/',
       id: '41',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:30:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:30:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:30:10.836] [INFO] console - [ 16,
  1265027138977792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:30:10.843] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): START TRANSACTION;
[2016-10-21 18:30:10.850] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:10.865] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:30:10.853 +00:00','2016-10-21 13:30:10.853 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:30:10.873] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:30:10.882] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:30:10.889] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:30:10.894] [INFO] console - Executing (3f5fac0e-82af-4c40-a705-b3e40a23bc2f): COMMIT;
[2016-10-21 18:30:10.898] [INFO] console - [ 70, 171, {}, [ '42' ] ]
[2016-10-21 18:30:10.910] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:30:10.918] [INFO] console - Executing (43449049-f6a1-411b-ac95-e074bfa85698): START TRANSACTION;
[2016-10-21 18:30:10.922] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:30:10.924] [INFO] console - Executing (43449049-f6a1-411b-ac95-e074bfa85698): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:10.937] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:30:10.940] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 42);
[2016-10-21 18:30:10.951] [INFO] console - [ 16,
  1508049778900992,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 40 } ]
[2016-10-21 18:30:10.962] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 18:30:10.971] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:30:10.983] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:10.985] [INFO] console - [ 16,
  4904974651752448,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 42 } ]
[2016-10-21 18:30:10.995] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:30:11.009] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='41',"updated_at"='2016-10-21 13:30:10.998 +00:00' WHERE "id" = '42'
[2016-10-21 18:30:11.015] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/41/')
                                where
                                    id = '42'
                                    or path like '/42/'||'%'
[2016-10-21 18:30:11.018] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/41/' like path||id||'/%'
[2016-10-21 18:30:11.023] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/41/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.031] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('41', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:11.039] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/41/42/'||'%'
                                order by 
                                    path
[2016-10-21 18:30:11.043] [INFO] console - Executing (43449049-f6a1-411b-ac95-e074bfa85698): COMMIT;
[2016-10-21 18:30:11.046] [INFO] console - [ 70, 172, {}, [ undefined ] ]
[2016-10-21 18:30:11.050] [INFO] console - [ 16,
  6851197172449280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id42.starshinaChange',
  [],
  { KOPNIK: 42, STARSHINA: 41 } ]
[2016-10-21 18:30:11.059] [INFO] console - [ 16,
  584156937453568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/41/42/',
       id: '42',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/41/',
       note: null,
       created_at: Fri Oct 21 2016 18:30:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:30:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '41' } } ]
[2016-10-21 18:30:11.079] [INFO] console - [ 16,
  3592783088582656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:30:11.087] [INFO] console - [ 16,
  582700614287360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:30:11.105] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:30:11.112] [INFO] console - Executing (f45d2172-fe84-44fe-a870-663804ace1e5): START TRANSACTION;
[2016-10-21 18:30:11.116] [INFO] console - Executing (f45d2172-fe84-44fe-a870-663804ace1e5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:11.130] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:30:11.140] [INFO] console - Executing (f45d2172-fe84-44fe-a870-663804ace1e5): COMMIT;
[2016-10-21 18:30:11.145] [INFO] console - [ 70,
  173,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:30:11.171] [INFO] console - Executing (43b297f1-89e0-49ff-9b88-446e66ead84e): START TRANSACTION;
[2016-10-21 18:30:11.175] [INFO] console - Executing (43b297f1-89e0-49ff-9b88-446e66ead84e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:11.184] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 18:30:11.199] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:30:11.206] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.217] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:11.223] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:30:11.237] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:30:11.226 +00:00' WHERE "id" = '41'
[2016-10-21 18:30:11.241] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '41'
                                    or path like '/2/41/'||'%'
[2016-10-21 18:30:11.247] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:30:11.251] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.261] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:11.267] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/41/'||'%'
                                order by 
                                    path
[2016-10-21 18:30:11.271] [INFO] console - Executing (43b297f1-89e0-49ff-9b88-446e66ead84e): COMMIT;
[2016-10-21 18:30:11.275] [INFO] console - [ 70, 174, {}, [ undefined ] ]
[2016-10-21 18:30:11.281] [INFO] console - [ 16,
  1583117276020736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.starshinaChange',
  [],
  { KOPNIK: 41, STARSHINA: 4 } ]
[2016-10-21 18:30:11.290] [INFO] console - [ 16,
  323211963138048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id42.starshinaChange',
  [],
  { KOPNIK: 41, STARSHINA: 4 } ]
[2016-10-21 18:30:11.301] [INFO] console - [ 16,
  7171038578212864,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 41 } ]
[2016-10-21 18:30:11.315] [INFO] console - [ 16,
  1693803689803776,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/41/',
       id: '41',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:30:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:30:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:30:11.335] [INFO] console - [ 16,
  6305373050896384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:30:11.343] [INFO] console - [ 16,
  1471020183584768,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:30:11.364] [INFO] console - Executing (cdfd4538-63c0-4c60-bf6a-b7fd46f4aef5): START TRANSACTION;
[2016-10-21 18:30:11.367] [INFO] console - Executing (cdfd4538-63c0-4c60-bf6a-b7fd46f4aef5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:11.376] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 18:30:11.383] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.393] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:11.405] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:30:11.427] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:30:11.409 +00:00' WHERE "id" = '41'
[2016-10-21 18:30:11.435] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '41'
                                    or path like '/4/41/'||'%'
[2016-10-21 18:30:11.441] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:30:11.445] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.455] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:11.461] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/41/'||'%'
                                order by 
                                    path
[2016-10-21 18:30:11.466] [INFO] console - Executing (cdfd4538-63c0-4c60-bf6a-b7fd46f4aef5): COMMIT;
[2016-10-21 18:30:11.468] [INFO] console - [ 70, 175, {}, [ undefined ] ]
[2016-10-21 18:30:11.473] [INFO] console - [ 16,
  8197418017357824,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id41.starshinaChange',
  [],
  { KOPNIK: 41, STARSHINA: null } ]
[2016-10-21 18:30:11.482] [INFO] console - [ 16,
  7558854409715712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id42.starshinaChange',
  [],
  { KOPNIK: 41, STARSHINA: null } ]
[2016-10-21 18:30:11.490] [INFO] console - [ 16,
  1882567957544960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 41 } ]
[2016-10-21 18:30:11.515] [INFO] console - [ 16,
  550458062012416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:30:11.533] [INFO] console - Executing (07f629a5-02ed-447d-a641-15921a0a34ac): START TRANSACTION;
[2016-10-21 18:30:11.538] [INFO] console - Executing (07f629a5-02ed-447d-a641-15921a0a34ac): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:30:11.548] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 41);
[2016-10-21 18:30:11.564] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 42);
[2016-10-21 18:30:11.571] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:30:11.582] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:30:15.645] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:30:15.658] [INFO] console - [ 8,
  68,
  176,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:31:29.798] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:31:31.511] [INFO] Server - starting...
[2016-10-21 18:31:31.513] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:31:31.604] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:31:31.881] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:31:31.899] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:31:31.917] [INFO] Server - connection.onopen()
[2016-10-21 18:31:31.918] [INFO] console - [ 64, 1156320744964096, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:31:31.924] [DEBUG] Server - api:model.create registered
[2016-10-21 18:31:31.925] [INFO] console - [ 64, 2572997372149760, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:31:31.930] [DEBUG] Server - api:model.get registered
[2016-10-21 18:31:31.931] [INFO] console - [ 64, 4301824257425408, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:31:31.935] [DEBUG] Server - api:model.save registered
[2016-10-21 18:31:31.936] [INFO] console - [ 64, 6680104021262336, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:31:31.940] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:31:31.941] [INFO] console - [ 64, 6293167341043712, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:31:31.945] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:31:31.946] [INFO] console - [ 64, 7820804580442112, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:31:31.951] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:31:31.952] [INFO] console - [ 64, 4708288744652800, {}, 'ru.kopa.error' ]
[2016-10-21 18:31:31.957] [DEBUG] Server - api:error registered
[2016-10-21 18:31:31.957] [INFO] console - [ 64, 6348265685516288, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:31:31.961] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:31:31.973] [INFO] console - [ 64, 2229701665882112, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:31:31.977] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:31:31.978] [INFO] console - [ 64, 4769763920183296, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:31:31.983] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:31:31.986] [INFO] console - [ 64, 5708341313536000, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:31:31.990] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:31:31.991] [INFO] console - [ 64, 6249745632722944, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:31:31.995] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:31:31.996] [INFO] console - [ 64, 692175662743552, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:31:32.001] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:31:32.002] [INFO] console - [ 64, 162481458642944, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:31:32.013] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:31:32.014] [INFO] console - [ 64, 2837022402150400, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:31:32.018] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:31:32.019] [INFO] console - [ 64, 7169443572482048, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:31:32.023] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:31:32.024] [INFO] console - [ 64,
  5031572294074368,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:31:32.028] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:31:32.029] [INFO] console - [ 64, 8214650564902912, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:31:32.034] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:31:32.036] [INFO] Server - started
[2016-10-21 18:31:50.580] [INFO] console - [ 70, 181, {}, [ undefined ] ]
[2016-10-21 18:31:50.606] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:31:50.720] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:31:50.724] [INFO] console - Executing (eff2c7ed-0538-4f50-9c3f-eaa8f81df47f): START TRANSACTION;
[2016-10-21 18:31:50.726] [INFO] console - Executing (eff2c7ed-0538-4f50-9c3f-eaa8f81df47f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:50.755] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:31:50.769] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:31:50.776] [INFO] console - Executing (eff2c7ed-0538-4f50-9c3f-eaa8f81df47f): COMMIT;
[2016-10-21 18:31:50.779] [INFO] console - [ 70,
  182,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:31:50.836] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:31:50.844] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): START TRANSACTION;
[2016-10-21 18:31:50.847] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:50.868] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:31:50.851 +00:00','2016-10-21 13:31:50.851 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:31:50.883] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:31:50.894] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:31:50.905] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:31:50.917] [INFO] console - Executing (18c804ed-28f8-4af8-9db3-1aa97a0f4958): COMMIT;
[2016-10-21 18:31:50.921] [INFO] console - [ 70, 183, {}, [ '43' ] ]
[2016-10-21 18:31:50.933] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:31:50.948] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:31:50.950] [INFO] console - Executing (cdc2754f-007d-4efe-af17-1fb6cbe4f46f): START TRANSACTION;
[2016-10-21 18:31:50.955] [INFO] console - Executing (cdc2754f-007d-4efe-af17-1fb6cbe4f46f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:50.964] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:31:50.973] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 18:31:50.975] [INFO] console - [ 16,
  674739901169664,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 41 } ]
[2016-10-21 18:31:50.983] [INFO] console - [ 16,
  1454761664577536,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 43 } ]
[2016-10-21 18:31:50.998] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:31:51.004] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.012] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.016] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:31:51.030] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:31:51.019 +00:00' WHERE "id" = '43'
[2016-10-21 18:31:51.034] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '43'
                                    or path like '/43/'||'%'
[2016-10-21 18:31:51.040] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:31:51.045] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.054] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.060] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/43/'||'%'
                                order by 
                                    path
[2016-10-21 18:31:51.064] [INFO] console - Executing (cdc2754f-007d-4efe-af17-1fb6cbe4f46f): COMMIT;
[2016-10-21 18:31:51.067] [INFO] console - [ 70, 184, {}, [ undefined ] ]
[2016-10-21 18:31:51.073] [INFO] console - [ 16,
  8685649269882880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id43.starshinaChange',
  [],
  { KOPNIK: 43, STARSHINA: 2 } ]
[2016-10-21 18:31:51.087] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:31:51.089] [INFO] console - [ 16,
  6354387781812224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/43/',
       id: '43',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:31:50 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:31:51 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:31:51.104] [INFO] console - [ 16,
  6562624527400960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:31:51.127] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): START TRANSACTION;
[2016-10-21 18:31:51.131] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:51.177] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:31:51.134 +00:00','2016-10-21 13:31:51.134 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:31:51.184] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:31:51.192] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:31:51.198] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:31:51.202] [INFO] console - Executing (fcf60bf3-66ea-49b2-80f5-dcd58302fa35): COMMIT;
[2016-10-21 18:31:51.205] [INFO] console - [ 70, 185, {}, [ '44' ] ]
[2016-10-21 18:31:51.214] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:31:51.221] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:31:51.227] [INFO] console - Executing (c7293b18-6ff1-48fb-a2a2-a6c07b892ce7): START TRANSACTION;
[2016-10-21 18:31:51.232] [INFO] console - Executing (c7293b18-6ff1-48fb-a2a2-a6c07b892ce7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:51.237] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:31:51.249] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 18:31:51.250] [INFO] console - [ 16,
  6614707127451648,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 42 } ]
[2016-10-21 18:31:51.266] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 18:31:51.267] [INFO] console - [ 16,
  7584202486710272,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 44 } ]
[2016-10-21 18:31:51.278] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.287] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.299] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:31:51.311] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='43',"updated_at"='2016-10-21 13:31:51.302 +00:00' WHERE "id" = '44'
[2016-10-21 18:31:51.319] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/43/')
                                where
                                    id = '44'
                                    or path like '/44/'||'%'
[2016-10-21 18:31:51.322] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/43/' like path||id||'/%'
[2016-10-21 18:31:51.327] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/43/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.341] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('43', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.348] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/43/44/'||'%'
                                order by 
                                    path
[2016-10-21 18:31:51.352] [INFO] console - Executing (c7293b18-6ff1-48fb-a2a2-a6c07b892ce7): COMMIT;
[2016-10-21 18:31:51.354] [INFO] console - [ 70, 186, {}, [ undefined ] ]
[2016-10-21 18:31:51.358] [INFO] console - [ 16,
  4114167877337088,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id44.starshinaChange',
  [],
  { KOPNIK: 44, STARSHINA: 43 } ]
[2016-10-21 18:31:51.366] [INFO] console - [ 16,
  2607282386894848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id43.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/43/44/',
       id: '44',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/43/',
       note: null,
       created_at: Fri Oct 21 2016 18:31:51 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:31:51 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '43' } } ]
[2016-10-21 18:31:51.377] [INFO] console - [ 16,
  6027092024098816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id43.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:31:51.384] [INFO] console - [ 16,
  4004427513987072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:31:51.400] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:31:51.404] [INFO] console - Executing (109148d6-ee71-4742-8da1-e49a281a3a06): START TRANSACTION;
[2016-10-21 18:31:51.407] [INFO] console - Executing (109148d6-ee71-4742-8da1-e49a281a3a06): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:51.421] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:31:51.430] [INFO] console - Executing (109148d6-ee71-4742-8da1-e49a281a3a06): COMMIT;
[2016-10-21 18:31:51.432] [INFO] console - [ 70,
  187,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:31:51.452] [INFO] console - Executing (0c20a253-f227-456e-b369-9d21ae23e799): START TRANSACTION;
[2016-10-21 18:31:51.454] [INFO] console - Executing (0c20a253-f227-456e-b369-9d21ae23e799): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:51.461] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 18:31:51.471] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:31:51.478] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.490] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.498] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:31:51.510] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:31:51.501 +00:00' WHERE "id" = '43'
[2016-10-21 18:31:51.516] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '43'
                                    or path like '/2/43/'||'%'
[2016-10-21 18:31:51.520] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:31:51.525] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.534] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.541] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/43/'||'%'
                                order by 
                                    path
[2016-10-21 18:31:51.545] [INFO] console - Executing (0c20a253-f227-456e-b369-9d21ae23e799): COMMIT;
[2016-10-21 18:31:51.548] [INFO] console - [ 70, 188, {}, [ undefined ] ]
[2016-10-21 18:31:51.552] [INFO] console - [ 16,
  2351946652450816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id43.starshinaChange',
  [],
  { KOPNIK: 43, STARSHINA: 4 } ]
[2016-10-21 18:31:51.560] [INFO] console - [ 16,
  1129810904481792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id44.starshinaChange',
  [],
  { KOPNIK: 43, STARSHINA: 4 } ]
[2016-10-21 18:31:51.567] [INFO] console - [ 16,
  7547705324732416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 43 } ]
[2016-10-21 18:31:51.574] [INFO] console - [ 16,
  5064491429527552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/43/',
       id: '43',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:31:50 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:31:51 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:31:51.589] [INFO] console - [ 16,
  7098432743276544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:31:51.599] [INFO] console - [ 16,
  17153545732096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:31:51.624] [INFO] console - Executing (e9828063-5168-4bf2-960a-421b552c4f29): START TRANSACTION;
[2016-10-21 18:31:51.627] [INFO] console - Executing (e9828063-5168-4bf2-960a-421b552c4f29): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:51.636] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 18:31:51.644] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.662] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.675] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:31:51.689] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:31:51.677 +00:00' WHERE "id" = '43'
[2016-10-21 18:31:51.701] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '43'
                                    or path like '/4/43/'||'%'
[2016-10-21 18:31:51.707] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:31:51.711] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:31:51.721] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:31:51.726] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/43/'||'%'
                                order by 
                                    path
[2016-10-21 18:31:51.730] [INFO] console - Executing (e9828063-5168-4bf2-960a-421b552c4f29): COMMIT;
[2016-10-21 18:31:51.736] [INFO] console - [ 70, 189, {}, [ undefined ] ]
[2016-10-21 18:31:51.741] [INFO] console - [ 16,
  8621683915096064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id43.starshinaChange',
  [],
  { KOPNIK: 43, STARSHINA: null } ]
[2016-10-21 18:31:51.785] [INFO] console - [ 16,
  362313756442624,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id44.starshinaChange',
  [],
  { KOPNIK: 43, STARSHINA: null } ]
[2016-10-21 18:31:51.807] [INFO] console - [ 16,
  4531041932935168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 43 } ]
[2016-10-21 18:31:51.929] [INFO] console - [ 16,
  497499984887808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:31:56.138] [INFO] console - Executing (94bc119d-7e64-4cc2-9ee4-b83c26c57ec2): START TRANSACTION;
[2016-10-21 18:31:56.147] [INFO] console - Executing (94bc119d-7e64-4cc2-9ee4-b83c26c57ec2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:31:56.156] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 43);
[2016-10-21 18:31:56.166] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 44);
[2016-10-21 18:31:56.175] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:31:56.185] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:32:01.264] [ERROR] Server - [Error: Копник, которого назначают стариной, в данный момент состоит в дружине]
Error: Копник, которого назначают стариной, в данный момент состоит в дружине
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:32:01.479] [INFO] console - [ 8,
  68,
  190,
  {},
  'Error',
  [ 'Копник, которого назначают стариной, в данный момент состоит в дружине' ],
  { stack: 
     [ 'Error: Копник, которого назначают стариной, в данный момент состоит в дружине',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:32:01.488] [INFO] console - Executing (94bc119d-7e64-4cc2-9ee4-b83c26c57ec2): ROLLBACK;
[2016-10-21 18:34:23.906] [INFO] console - [ 70, 192, {}, [ undefined ] ]
[2016-10-21 18:34:23.928] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:34:23.960] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:34:23.977] [INFO] console - Executing (a02cacdd-92a9-4efd-ab09-4245c7fea960): START TRANSACTION;
[2016-10-21 18:34:23.983] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:34:24.004] [INFO] console - Executing (a02cacdd-92a9-4efd-ab09-4245c7fea960): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:34:24.042] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:34:24.057] [INFO] console - Executing (a02cacdd-92a9-4efd-ab09-4245c7fea960): COMMIT;
[2016-10-21 18:34:24.060] [INFO] console - [ 70,
  193,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:34:24.093] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:34:24.101] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): START TRANSACTION;
[2016-10-21 18:34:24.105] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:34:24.128] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:34:24.108 +00:00','2016-10-21 13:34:24.108 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:34:24.139] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:34:24.150] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:34:24.160] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:34:24.166] [INFO] console - Executing (840c36a3-40ae-4a1d-bd2a-54a216e200c1): COMMIT;
[2016-10-21 18:34:24.169] [INFO] console - [ 70, 194, {}, [ '45' ] ]
[2016-10-21 18:35:25.719] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:35:28.396] [INFO] Server - starting...
[2016-10-21 18:35:28.399] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:35:28.498] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:35:28.782] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:35:28.804] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:35:28.831] [INFO] Server - connection.onopen()
[2016-10-21 18:35:28.833] [INFO] console - [ 64, 4021863512539136, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:35:28.841] [DEBUG] Server - api:model.create registered
[2016-10-21 18:35:28.843] [INFO] console - [ 64, 8165610487808000, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:35:28.849] [DEBUG] Server - api:model.get registered
[2016-10-21 18:35:28.851] [INFO] console - [ 64, 4512681165848576, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:35:28.858] [DEBUG] Server - api:model.save registered
[2016-10-21 18:35:28.858] [INFO] console - [ 64, 2903136649871360, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:35:28.864] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:35:28.865] [INFO] console - [ 64, 6295957371092992, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:35:28.871] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:35:28.872] [INFO] console - [ 64, 1894163779944448, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:35:28.879] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:35:28.880] [INFO] console - [ 64, 3434189913325568, {}, 'ru.kopa.error' ]
[2016-10-21 18:35:28.885] [DEBUG] Server - api:error registered
[2016-10-21 18:35:28.886] [INFO] console - [ 64, 8344090036928512, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:35:28.892] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:35:28.894] [INFO] console - [ 64, 5816576779485184, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:35:28.899] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:35:28.900] [INFO] console - [ 64, 1388338827231232, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:35:28.906] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:35:28.908] [INFO] console - [ 64, 4052842924998656, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:35:28.914] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:35:28.915] [INFO] console - [ 64, 3116449822408704, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:35:28.921] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:35:28.922] [INFO] console - [ 64, 8705123511435264, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:35:28.928] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:35:28.929] [INFO] console - [ 64, 8587791770320896, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:35:28.936] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:35:28.937] [INFO] console - [ 64, 2899056355442688, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:35:28.943] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:35:28.944] [INFO] console - [ 64, 6432595705331712, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:35:28.950] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:35:28.951] [INFO] console - [ 64,
  8240746643587072,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:35:28.957] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:35:28.958] [INFO] console - [ 64, 4603481266585600, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:35:28.964] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:35:28.967] [INFO] Server - started
[2016-10-21 18:37:53.212] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:37:55.787] [INFO] Server - starting...
[2016-10-21 18:37:55.790] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:37:55.886] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:37:56.150] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:37:56.180] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:37:56.225] [INFO] Server - connection.onopen()
[2016-10-21 18:37:56.228] [INFO] console - [ 64, 1389614080196608, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:37:56.238] [DEBUG] Server - api:model.create registered
[2016-10-21 18:37:56.240] [INFO] console - [ 64, 6119347594461184, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:37:56.247] [DEBUG] Server - api:model.get registered
[2016-10-21 18:37:56.248] [INFO] console - [ 64, 4339086519173120, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:37:56.254] [DEBUG] Server - api:model.save registered
[2016-10-21 18:37:56.254] [INFO] console - [ 64, 3662055747878912, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:37:56.263] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:37:56.264] [INFO] console - [ 64, 2000884972126208, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:37:56.276] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:37:56.277] [INFO] console - [ 64, 7892765824253952, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:37:56.283] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:37:56.285] [INFO] console - [ 64, 6721378503884800, {}, 'ru.kopa.error' ]
[2016-10-21 18:37:56.291] [DEBUG] Server - api:error registered
[2016-10-21 18:37:56.293] [INFO] console - [ 64, 3285476513415168, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:37:56.303] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:37:56.305] [INFO] console - [ 64, 8236447857377280, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:37:56.317] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:37:56.318] [INFO] console - [ 64, 5652639949783040, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:37:56.324] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:37:56.326] [INFO] console - [ 64, 6933304854970368, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:37:56.347] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:37:56.349] [INFO] console - [ 64, 2061273468502016, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:37:56.356] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:37:56.359] [INFO] console - [ 64, 3063773917085696, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:37:56.369] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:37:56.371] [INFO] console - [ 64, 3237099926978560, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:37:56.380] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:37:56.389] [INFO] console - [ 64, 1684920143446016, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:37:56.397] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:37:56.398] [INFO] console - [ 64, 7237677581598720, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:37:56.410] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:37:56.411] [INFO] console - [ 64,
  1693372957851648,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:37:56.416] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:37:56.419] [INFO] console - [ 64, 1294537714565120, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:37:56.427] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:37:56.429] [INFO] Server - started
[2016-10-21 18:38:14.768] [INFO] console - [ 70, 200, {}, [ undefined ] ]
[2016-10-21 18:38:16.914] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:38:17.017] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:38:17.027] [INFO] console - Executing (eeeaf6bb-4a50-45cc-ada3-5633da16c3a0): START TRANSACTION;
[2016-10-21 18:38:17.031] [INFO] console - Executing (eeeaf6bb-4a50-45cc-ada3-5633da16c3a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.040] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:38:17.059] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:38:17.082] [INFO] console - Executing (eeeaf6bb-4a50-45cc-ada3-5633da16c3a0): COMMIT;
[2016-10-21 18:38:17.086] [INFO] console - [ 70,
  201,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:38:17.128] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:38:17.138] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): START TRANSACTION;
[2016-10-21 18:38:17.143] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.170] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:38:17.148 +00:00','2016-10-21 13:38:17.148 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:38:17.181] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:38:17.190] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:38:17.198] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:38:17.203] [INFO] console - Executing (8f7b9b7f-4b00-4628-8836-db109317b68c): COMMIT;
[2016-10-21 18:38:17.206] [INFO] console - [ 70, 202, {}, [ '46' ] ]
[2016-10-21 18:38:17.224] [INFO] console - Executing (ce8e6a11-ae4d-405c-92fe-3f8a1ce84f1b): START TRANSACTION;
[2016-10-21 18:38:17.229] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:38:17.233] [INFO] console - Executing (ce8e6a11-ae4d-405c-92fe-3f8a1ce84f1b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.244] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:38:17.250] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 18:38:17.266] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:38:17.276] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:38:17.278] [INFO] console - [ 16,
  2567186904252416,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 44 } ]
[2016-10-21 18:38:17.289] [INFO] console - [ 16,
  4165423671017472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 46 } ]
[2016-10-21 18:38:17.300] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:38:17.309] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:17.317] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:38:17.332] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:38:17.319 +00:00' WHERE "id" = '46'
[2016-10-21 18:38:17.341] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '46'
                                    or path like '/46/'||'%'
[2016-10-21 18:38:17.349] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:38:17.354] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:38:17.368] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:17.377] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/46/'||'%'
                                order by 
                                    path
[2016-10-21 18:38:17.381] [INFO] console - Executing (ce8e6a11-ae4d-405c-92fe-3f8a1ce84f1b): COMMIT;
[2016-10-21 18:38:17.385] [INFO] console - [ 70, 203, {}, [ undefined ] ]
[2016-10-21 18:38:17.390] [INFO] console - [ 16,
  2494190892089344,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id46.starshinaChange',
  [],
  { KOPNIK: 46, STARSHINA: 2 } ]
[2016-10-21 18:38:17.407] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:38:17.409] [INFO] console - [ 16,
  8528864441532416,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/46/',
       id: '46',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:38:17.424] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): START TRANSACTION;
[2016-10-21 18:38:17.430] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.437] [INFO] console - [ 16,
  2407282360975360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:38:17.453] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:38:17.435 +00:00','2016-10-21 13:38:17.435 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:38:17.462] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:38:17.474] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:38:17.484] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:38:17.489] [INFO] console - Executing (7f6d0a7a-1ea1-44b1-8f9d-cf9fc872054f): COMMIT;
[2016-10-21 18:38:17.502] [INFO] console - [ 70, 204, {}, [ '47' ] ]
[2016-10-21 18:38:17.520] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:38:17.535] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:38:17.544] [INFO] console - Executing (38695f0b-15c3-4f47-9f0b-c8ed0d87d1c3): START TRANSACTION;
[2016-10-21 18:38:17.552] [INFO] console - Executing (38695f0b-15c3-4f47-9f0b-c8ed0d87d1c3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.564] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:38:17.582] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 18:38:17.584] [INFO] console - [ 16,
  6093890390065152,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 45 } ]
[2016-10-21 18:38:17.605] [INFO] console - [ 16,
  8337475248324608,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 47 } ]
[2016-10-21 18:38:17.619] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 18:38:17.631] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:38:17.647] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:17.657] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:38:17.679] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='46',"updated_at"='2016-10-21 13:38:17.666 +00:00' WHERE "id" = '47'
[2016-10-21 18:38:17.688] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/46/')
                                where
                                    id = '47'
                                    or path like '/47/'||'%'
[2016-10-21 18:38:17.695] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/46/' like path||id||'/%'
[2016-10-21 18:38:17.703] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/46/' like k.path||k.id||'/%'
[2016-10-21 18:38:17.720] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('46', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:17.733] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/46/47/'||'%'
                                order by 
                                    path
[2016-10-21 18:38:17.740] [INFO] console - Executing (38695f0b-15c3-4f47-9f0b-c8ed0d87d1c3): COMMIT;
[2016-10-21 18:38:17.749] [INFO] console - [ 70, 205, {}, [ undefined ] ]
[2016-10-21 18:38:17.755] [INFO] console - [ 16,
  2386779149697024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id47.starshinaChange',
  [],
  { KOPNIK: 47, STARSHINA: 46 } ]
[2016-10-21 18:38:17.767] [INFO] console - [ 16,
  2441403651063808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id46.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/46/47/',
       id: '47',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/46/',
       note: null,
       created_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '46' } } ]
[2016-10-21 18:38:17.789] [INFO] console - [ 16,
  2174444183224320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id46.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:38:17.805] [INFO] console - [ 16,
  7749355930910720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:38:17.834] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:38:17.847] [INFO] console - Executing (db403d1f-4c31-4b2c-b2db-fc0e2aa9e107): START TRANSACTION;
[2016-10-21 18:38:17.858] [INFO] console - Executing (db403d1f-4c31-4b2c-b2db-fc0e2aa9e107): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.891] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:38:17.902] [INFO] console - Executing (db403d1f-4c31-4b2c-b2db-fc0e2aa9e107): COMMIT;
[2016-10-21 18:38:17.905] [INFO] console - [ 70,
  206,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:38:17.928] [INFO] console - Executing (36b6cb89-a4f7-4a7b-9e24-1f78aae41f9b): START TRANSACTION;
[2016-10-21 18:38:17.931] [INFO] console - Executing (36b6cb89-a4f7-4a7b-9e24-1f78aae41f9b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:17.940] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 18:38:17.953] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:38:17.963] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:38:17.974] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:17.981] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:38:17.994] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:38:17.984 +00:00' WHERE "id" = '46'
[2016-10-21 18:38:18.001] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '46'
                                    or path like '/2/46/'||'%'
[2016-10-21 18:38:18.006] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:38:18.011] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:38:18.020] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:18.028] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/46/'||'%'
                                order by 
                                    path
[2016-10-21 18:38:18.032] [INFO] console - Executing (36b6cb89-a4f7-4a7b-9e24-1f78aae41f9b): COMMIT;
[2016-10-21 18:38:18.036] [INFO] console - [ 70, 207, {}, [ undefined ] ]
[2016-10-21 18:38:18.040] [INFO] console - [ 16,
  8039536563060736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id46.starshinaChange',
  [],
  { KOPNIK: 46, STARSHINA: 4 } ]
[2016-10-21 18:38:18.049] [INFO] console - [ 16,
  1962081779712000,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id47.starshinaChange',
  [],
  { KOPNIK: 46, STARSHINA: 4 } ]
[2016-10-21 18:38:18.056] [INFO] console - [ 16,
  578701341229056,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 46 } ]
[2016-10-21 18:38:18.065] [INFO] console - [ 16,
  4738004232962048,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/46/',
       id: '46',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:38:17 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:38:18.078] [INFO] console - [ 16,
  5980227863838720,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:38:18.086] [INFO] console - [ 16,
  7562753805910016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:38:18.127] [INFO] console - Executing (6c9fcc23-3299-4492-96d2-2e397539be99): START TRANSACTION;
[2016-10-21 18:38:18.133] [INFO] console - Executing (6c9fcc23-3299-4492-96d2-2e397539be99): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:18.153] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 18:38:18.172] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:38:18.186] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:18.196] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:38:18.213] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:38:18.201 +00:00' WHERE "id" = '46'
[2016-10-21 18:38:18.224] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '46'
                                    or path like '/4/46/'||'%'
[2016-10-21 18:38:18.230] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:38:18.236] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:38:18.249] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:18.259] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/46/'||'%'
                                order by 
                                    path
[2016-10-21 18:38:18.266] [INFO] console - Executing (6c9fcc23-3299-4492-96d2-2e397539be99): COMMIT;
[2016-10-21 18:38:18.270] [INFO] console - [ 70, 208, {}, [ undefined ] ]
[2016-10-21 18:38:18.278] [INFO] console - [ 16,
  7600682003595264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id46.starshinaChange',
  [],
  { KOPNIK: 46, STARSHINA: null } ]
[2016-10-21 18:38:18.289] [INFO] console - [ 16,
  4974052605165568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id47.starshinaChange',
  [],
  { KOPNIK: 46, STARSHINA: null } ]
[2016-10-21 18:38:18.302] [INFO] console - [ 16,
  4410193121116160,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 46 } ]
[2016-10-21 18:38:18.317] [INFO] console - [ 16,
  5075141608341504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:38:27.622] [INFO] console - Executing (66e34553-b6bb-4455-a94c-749fa92924b9): START TRANSACTION;
[2016-10-21 18:38:27.626] [INFO] console - Executing (66e34553-b6bb-4455-a94c-749fa92924b9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:38:27.641] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 46);
[2016-10-21 18:38:27.654] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 47);
[2016-10-21 18:38:27.662] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:38:27.672] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:38:34.703] [ERROR] Server - [Error: Kopnik in druzhina]
Error: Kopnik in druzhina
    at [object Object].<anonymous> (Kopnik.js:120:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:39:29.868] [INFO] console - [ 8,
  68,
  209,
  {},
  'Error',
  [ 'Kopnik in druzhina' ],
  { stack: 
     [ 'Error: Kopnik in druzhina',
       '    at [object Object].<anonymous> (Kopnik.js:120:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:39:29.906] [INFO] console - Executing (66e34553-b6bb-4455-a94c-749fa92924b9): ROLLBACK;
[2016-10-21 18:42:22.587] [INFO] console - [ 70, 211, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 18:42:22.615] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 18:42:22.625] [INFO] console - [ 70, 212, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 18:42:22.714] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 18:42:22.720] [INFO] console - [ 70, 213, {}, [ 'КОПА' ] ]
[2016-10-21 18:42:22.732] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 18:42:30.978] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:709:9)
    at fn.constructor.error.Error (Server.js:714:19)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:713:16)
    at Object.<anonymous> (Server.js:785:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:782:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
[2016-10-21 18:42:30.985] [INFO] console - [ 8,
  68,
  214,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:709:9)',
       '    at fn.constructor.error.Error (Server.js:714:19)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:713:16)',
       '    at Object.<anonymous> (Server.js:785:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:782:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)' ] } ]
[2016-10-21 18:42:40.997] [INFO] console - [ 70, 216, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 18:42:41.019] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 18:42:41.026] [INFO] console - [ 70, 217, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 18:42:41.133] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 18:42:41.138] [INFO] console - [ 70, 218, {}, [ 'КОПА' ] ]
[2016-10-21 18:42:41.149] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 18:42:41.158] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:709:9)
    at fn.constructor.error.Error (Server.js:714:19)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:713:16)
    at Object.<anonymous> (Server.js:785:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:782:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
[2016-10-21 18:42:41.169] [INFO] console - [ 8,
  68,
  219,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:709:9)',
       '    at fn.constructor.error.Error (Server.js:714:19)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:713:16)',
       '    at Object.<anonymous> (Server.js:785:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:782:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)' ] } ]
[2016-10-21 18:42:54.492] [INFO] console - [ 70, 221, {}, [ 'unittest2@domain.ru' ] ]
[2016-10-21 18:42:54.513] [DEBUG] Server - #pingPong() [ 1, 2, 3 ] { x: 1, y: 2, z: 3 }
[2016-10-21 18:42:54.540] [INFO] console - [ 70, 222, {}, [ 1, 2, 3 ], { x: 1, y: 2, z: 3 } ]
[2016-10-21 18:42:54.604] [INFO] console - Executing (default): select 'КОПА' as result
[2016-10-21 18:42:54.608] [INFO] console - [ 70, 223, {}, [ 'КОПА' ] ]
[2016-10-21 18:42:54.628] [DEBUG] Server - #error() [ 'sadkljfaskldjfs;af' ] {}
[2016-10-21 18:42:54.632] [ERROR] Server - [Error: sadkljfaskldjfs;af]
Error: sadkljfaskldjfs;af
    at MySuperError (Server.js:709:9)
    at fn.constructor.error.Error (Server.js:714:19)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Server.error (Server.js:713:16)
    at Object.<anonymous> (Server.js:785:43)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)
    at Object.<anonymous> (Server.js:782:28)
    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)
    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)
    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)
    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)
    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)
[2016-10-21 18:42:54.643] [INFO] console - [ 8,
  68,
  224,
  {},
  'MySuperError',
  [ 'sadkljfaskldjfs;af' ],
  { stack: 
     [ 'Error: sadkljfaskldjfs;af',
       '    at MySuperError (Server.js:709:9)',
       '    at fn.constructor.error.Error (Server.js:714:19)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Server.error (Server.js:713:16)',
       '    at Object.<anonymous> (Server.js:785:43)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:451',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at Object.<anonymous> (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:99)',
       '    at Object.<anonymous> (Server.js:782:28)',
       '    at tryCatchResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:46:23)',
       '    at callAndResolve (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:30:12)',
       '    at callAndResolveNext (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/apply.js:40:4)',
       '    at tryCatchReject3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:856:7)',
       '    at runContinuation3 (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/when/lib/makePromise.js:814:4)' ] } ]
[2016-10-21 18:43:09.268] [INFO] console - [ 70, 226, {}, [ undefined ] ]
[2016-10-21 18:43:09.293] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:43:09.345] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:43:09.350] [INFO] console - Executing (73643aec-e62f-436d-a772-ae9d949d7fb3): START TRANSACTION;
[2016-10-21 18:43:09.354] [INFO] console - Executing (73643aec-e62f-436d-a772-ae9d949d7fb3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:09.373] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:43:09.383] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:43:09.394] [INFO] console - Executing (73643aec-e62f-436d-a772-ae9d949d7fb3): COMMIT;
[2016-10-21 18:43:09.397] [INFO] console - [ 70,
  227,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:43:09.452] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:43:09.462] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): START TRANSACTION;
[2016-10-21 18:43:09.466] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:09.512] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:43:09.471 +00:00','2016-10-21 13:43:09.471 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:43:09.523] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:09.537] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:09.554] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:43:09.561] [INFO] console - Executing (c0dd551a-e6cc-467c-9911-355129f362d0): COMMIT;
[2016-10-21 18:43:09.567] [INFO] console - [ 70, 228, {}, [ '48' ] ]
[2016-10-21 18:43:09.614] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:09.621] [INFO] console - Executing (58dc2bb8-564d-4e4c-8a05-c83ce56dd53e): START TRANSACTION;
[2016-10-21 18:43:09.631] [INFO] console - Executing (58dc2bb8-564d-4e4c-8a05-c83ce56dd53e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:09.637] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:43:09.649] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 18:43:09.665] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:43:09.682] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:43:09.685] [INFO] console - [ 16,
  5770993568055296,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 46 } ]
[2016-10-21 18:43:09.720] [INFO] console - [ 16,
  5009207203987456,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 48 } ]
[2016-10-21 18:43:09.727] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:09.751] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:09.770] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:09.793] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:43:09.776 +00:00' WHERE "id" = '48'
[2016-10-21 18:43:09.802] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '48'
                                    or path like '/48/'||'%'
[2016-10-21 18:43:09.806] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:43:09.813] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:43:09.834] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:09.845] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/48/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:09.850] [INFO] console - Executing (58dc2bb8-564d-4e4c-8a05-c83ce56dd53e): COMMIT;
[2016-10-21 18:43:09.853] [INFO] console - [ 70, 229, {}, [ undefined ] ]
[2016-10-21 18:43:09.870] [INFO] console - [ 16,
  6626089352822784,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.starshinaChange',
  [],
  { KOPNIK: 48, STARSHINA: 2 } ]
[2016-10-21 18:43:09.895] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:43:09.900] [INFO] console - [ 16,
  7468676840161280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/48/',
       id: '48',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:09 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:09 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:43:09.952] [INFO] console - [ 16,
  87408523608064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:43:09.965] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): START TRANSACTION;
[2016-10-21 18:43:09.971] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:09.992] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:43:09.979 +00:00','2016-10-21 13:43:09.979 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:43:10.000] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:10.011] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:10.023] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:43:10.029] [INFO] console - Executing (ecae32a2-d773-4f8b-98e1-693b79abeb1a): COMMIT;
[2016-10-21 18:43:10.033] [INFO] console - [ 70, 230, {}, [ '49' ] ]
[2016-10-21 18:43:10.052] [INFO] console - Executing (b04a5aeb-24df-43de-b1b6-f1b04a4a4598): START TRANSACTION;
[2016-10-21 18:43:10.061] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:10.068] [INFO] console - Executing (b04a5aeb-24df-43de-b1b6-f1b04a4a4598): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:10.072] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:43:10.087] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 49);
[2016-10-21 18:43:10.101] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:43:10.122] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 18:43:10.124] [INFO] console - [ 16,
  4220958460084224,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 47 } ]
[2016-10-21 18:43:10.135] [INFO] console - [ 16,
  7568572232499200,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 49 } ]
[2016-10-21 18:43:10.149] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.166] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.176] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:10.191] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='48',"updated_at"='2016-10-21 13:43:10.179 +00:00' WHERE "id" = '49'
[2016-10-21 18:43:10.201] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/48/')
                                where
                                    id = '49'
                                    or path like '/49/'||'%'
[2016-10-21 18:43:10.206] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/48/' like path||id||'/%'
[2016-10-21 18:43:10.213] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/48/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.227] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('48', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.236] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/48/49/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:10.242] [INFO] console - Executing (b04a5aeb-24df-43de-b1b6-f1b04a4a4598): COMMIT;
[2016-10-21 18:43:10.246] [INFO] console - [ 70, 231, {}, [ undefined ] ]
[2016-10-21 18:43:10.254] [INFO] console - [ 16,
  3073502064148480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id49.starshinaChange',
  [],
  { KOPNIK: 49, STARSHINA: 48 } ]
[2016-10-21 18:43:10.273] [INFO] console - [ 16,
  721450388422656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/48/49/',
       id: '49',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/48/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:09 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '48' } } ]
[2016-10-21 18:43:10.291] [INFO] console - [ 16,
  3606949931253760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:43:10.299] [INFO] console - [ 16,
  7012665142542336,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:43:10.325] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:43:10.348] [INFO] console - Executing (ffd55ff3-6d66-4748-8d22-59caaad4d250): START TRANSACTION;
[2016-10-21 18:43:10.352] [INFO] console - Executing (ffd55ff3-6d66-4748-8d22-59caaad4d250): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:10.371] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:43:10.392] [INFO] console - Executing (ffd55ff3-6d66-4748-8d22-59caaad4d250): COMMIT;
[2016-10-21 18:43:10.396] [INFO] console - [ 70,
  232,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:43:10.424] [INFO] console - Executing (975b9edf-51b9-4866-8c98-9b1eb61dc584): START TRANSACTION;
[2016-10-21 18:43:10.428] [INFO] console - Executing (975b9edf-51b9-4866-8c98-9b1eb61dc584): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:10.439] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 18:43:10.450] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:43:10.458] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.471] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.480] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:43:10.495] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:43:10.484 +00:00' WHERE "id" = '48'
[2016-10-21 18:43:10.502] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '48'
                                    or path like '/2/48/'||'%'
[2016-10-21 18:43:10.507] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:43:10.513] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.528] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.539] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/48/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:10.549] [INFO] console - Executing (975b9edf-51b9-4866-8c98-9b1eb61dc584): COMMIT;
[2016-10-21 18:43:10.553] [INFO] console - [ 70, 233, {}, [ undefined ] ]
[2016-10-21 18:43:10.561] [INFO] console - [ 16,
  298314851418112,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.starshinaChange',
  [],
  { KOPNIK: 48, STARSHINA: 4 } ]
[2016-10-21 18:43:10.577] [INFO] console - [ 16,
  7306320996728832,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id49.starshinaChange',
  [],
  { KOPNIK: 48, STARSHINA: 4 } ]
[2016-10-21 18:43:10.590] [INFO] console - [ 16,
  3417950379835392,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 48 } ]
[2016-10-21 18:43:10.605] [INFO] console - [ 16,
  6913113047695360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/48/',
       id: '48',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:09 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:43:10.637] [INFO] console - [ 16,
  2942785858568192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:43:10.648] [INFO] console - [ 16,
  4074475268079616,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:43:10.693] [INFO] console - Executing (292c1a2f-5ae1-4904-bd52-d08b6640d567): START TRANSACTION;
[2016-10-21 18:43:10.706] [INFO] console - Executing (292c1a2f-5ae1-4904-bd52-d08b6640d567): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:10.736] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 18:43:10.751] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.780] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.798] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:43:10.825] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:43:10.811 +00:00' WHERE "id" = '48'
[2016-10-21 18:43:10.830] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '48'
                                    or path like '/4/48/'||'%'
[2016-10-21 18:43:10.836] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:10.840] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:10.850] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:10.857] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/48/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:10.864] [INFO] console - Executing (292c1a2f-5ae1-4904-bd52-d08b6640d567): COMMIT;
[2016-10-21 18:43:10.870] [INFO] console - [ 70, 234, {}, [ undefined ] ]
[2016-10-21 18:43:10.876] [INFO] console - [ 16,
  4413927188332544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id48.starshinaChange',
  [],
  { KOPNIK: 48, STARSHINA: null } ]
[2016-10-21 18:43:10.885] [INFO] console - [ 16,
  4383628366708736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id49.starshinaChange',
  [],
  { KOPNIK: 48, STARSHINA: null } ]
[2016-10-21 18:43:10.894] [INFO] console - [ 16,
  1252265132294144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 48 } ]
[2016-10-21 18:43:10.904] [INFO] console - [ 16,
  6039434778640384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:43:14.100] [INFO] console - Executing (153c90b1-4cf7-412f-b16b-c56411724229): START TRANSACTION;
[2016-10-21 18:43:14.105] [INFO] console - Executing (153c90b1-4cf7-412f-b16b-c56411724229): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:14.118] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 48);
[2016-10-21 18:43:14.137] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 49);
[2016-10-21 18:43:14.152] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:14.168] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:14.177] [ERROR] Server - [Error: Kopnik in druzhina]
Error: Kopnik in druzhina
    at [object Object].<anonymous> (Kopnik.js:120:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:43:14.187] [INFO] console - [ 8,
  68,
  235,
  {},
  'Error',
  [ 'Kopnik in druzhina' ],
  { stack: 
     [ 'Error: Kopnik in druzhina',
       '    at [object Object].<anonymous> (Kopnik.js:120:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:43:14.203] [INFO] console - Executing (153c90b1-4cf7-412f-b16b-c56411724229): ROLLBACK;
[2016-10-21 18:43:30.041] [INFO] console - [ 70, 237, {}, [ undefined ] ]
[2016-10-21 18:43:30.068] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:43:30.108] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:43:30.120] [INFO] console - Executing (ec56de40-1865-41ae-b97d-4c9617fa13c8): START TRANSACTION;
[2016-10-21 18:43:30.133] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:43:30.135] [INFO] console - Executing (ec56de40-1865-41ae-b97d-4c9617fa13c8): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:30.155] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:43:30.172] [INFO] console - Executing (ec56de40-1865-41ae-b97d-4c9617fa13c8): COMMIT;
[2016-10-21 18:43:30.175] [INFO] console - [ 70,
  238,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:43:30.211] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:43:30.220] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): START TRANSACTION;
[2016-10-21 18:43:30.224] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:30.241] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:43:30.228 +00:00','2016-10-21 13:43:30.228 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:43:30.258] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:30.272] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:30.281] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:43:30.288] [INFO] console - Executing (d36b75e6-e8d4-4847-807a-3ae55bbecfbe): COMMIT;
[2016-10-21 18:43:30.296] [INFO] console - [ 70, 239, {}, [ '50' ] ]
[2016-10-21 18:43:30.321] [INFO] console - Executing (fdffd482-d1aa-49bd-ac2b-d5b8cd3fc946): START TRANSACTION;
[2016-10-21 18:43:30.331] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:30.341] [INFO] console - Executing (fdffd482-d1aa-49bd-ac2b-d5b8cd3fc946): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:30.346] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:43:30.361] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 18:43:30.381] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:43:30.397] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:43:30.398] [INFO] console - [ 16,
  4793644989022208,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 48 } ]
[2016-10-21 18:43:30.415] [INFO] console - [ 16,
  540017273339904,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 50 } ]
[2016-10-21 18:43:30.427] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:30.438] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:30.448] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:30.460] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:43:30.450 +00:00' WHERE "id" = '50'
[2016-10-21 18:43:30.466] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '50'
                                    or path like '/50/'||'%'
[2016-10-21 18:43:30.472] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:43:30.478] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:43:30.501] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:30.512] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/50/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:30.517] [INFO] console - Executing (fdffd482-d1aa-49bd-ac2b-d5b8cd3fc946): COMMIT;
[2016-10-21 18:43:30.521] [INFO] console - [ 70, 240, {}, [ undefined ] ]
[2016-10-21 18:43:30.527] [INFO] console - [ 16,
  7151548176007168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.starshinaChange',
  [],
  { KOPNIK: 50, STARSHINA: 2 } ]
[2016-10-21 18:43:30.544] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:43:30.548] [INFO] console - [ 16,
  7352271178301440,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/50/',
       id: '50',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:30 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:30 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:43:30.573] [INFO] console - [ 16,
  626990925217792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:43:30.584] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): START TRANSACTION;
[2016-10-21 18:43:30.591] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:30.608] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:43:30.595 +00:00','2016-10-21 13:43:30.595 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:43:30.614] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:30.627] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:30.636] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:43:30.643] [INFO] console - Executing (7f8bea66-f867-452b-be94-c9955a3f4e02): COMMIT;
[2016-10-21 18:43:30.647] [INFO] console - [ 70, 241, {}, [ '51' ] ]
[2016-10-21 18:43:30.661] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:43:30.667] [INFO] console - Executing (5db019fa-6f12-411f-8ae2-2a5a2862d961): START TRANSACTION;
[2016-10-21 18:43:30.677] [INFO] console - Executing (5db019fa-6f12-411f-8ae2-2a5a2862d961): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:30.682] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:43:30.698] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 51);
[2016-10-21 18:43:30.708] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:43:30.720] [INFO] console - [ 16,
  1395869156900864,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 49 } ]
[2016-10-21 18:43:30.733] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 18:43:30.736] [INFO] console - [ 16,
  1186992842866688,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 51 } ]
[2016-10-21 18:43:30.752] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:30.770] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:30.788] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:30.802] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='50',"updated_at"='2016-10-21 13:43:30.791 +00:00' WHERE "id" = '51'
[2016-10-21 18:43:30.821] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/50/')
                                where
                                    id = '51'
                                    or path like '/51/'||'%'
[2016-10-21 18:43:30.827] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/50/' like path||id||'/%'
[2016-10-21 18:43:30.835] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/50/' like k.path||k.id||'/%'
[2016-10-21 18:43:30.851] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('50', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:30.862] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/50/51/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:30.868] [INFO] console - Executing (5db019fa-6f12-411f-8ae2-2a5a2862d961): COMMIT;
[2016-10-21 18:43:30.875] [INFO] console - [ 70, 242, {}, [ undefined ] ]
[2016-10-21 18:43:30.883] [INFO] console - [ 16,
  5394048911147008,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id51.starshinaChange',
  [],
  { KOPNIK: 51, STARSHINA: 50 } ]
[2016-10-21 18:43:30.895] [INFO] console - [ 16,
  1532654998519808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/50/51/',
       id: '51',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/50/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:30 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:30 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '50' } } ]
[2016-10-21 18:43:30.948] [INFO] console - [ 16,
  5787624555937792,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:43:30.961] [INFO] console - [ 16,
  5084160232259584,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:43:30.978] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:43:30.985] [INFO] console - Executing (f0a81f68-a82e-49e3-8d16-451a0dd5ec64): START TRANSACTION;
[2016-10-21 18:43:30.990] [INFO] console - Executing (f0a81f68-a82e-49e3-8d16-451a0dd5ec64): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:31.014] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:43:31.030] [INFO] console - Executing (f0a81f68-a82e-49e3-8d16-451a0dd5ec64): COMMIT;
[2016-10-21 18:43:31.033] [INFO] console - [ 70,
  243,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:43:31.059] [INFO] console - Executing (7adf3f16-3b74-45d0-ad99-ae20f92dc196): START TRANSACTION;
[2016-10-21 18:43:31.062] [INFO] console - Executing (7adf3f16-3b74-45d0-ad99-ae20f92dc196): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:31.073] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 18:43:31.087] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:43:31.096] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:43:31.109] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:31.119] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:43:31.134] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:43:31.123 +00:00' WHERE "id" = '50'
[2016-10-21 18:43:31.142] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '50'
                                    or path like '/2/50/'||'%'
[2016-10-21 18:43:31.146] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:43:31.152] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:43:31.168] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:31.178] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/50/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:31.185] [INFO] console - Executing (7adf3f16-3b74-45d0-ad99-ae20f92dc196): COMMIT;
[2016-10-21 18:43:31.192] [INFO] console - [ 70, 244, {}, [ undefined ] ]
[2016-10-21 18:43:31.199] [INFO] console - [ 16,
  5600167302529024,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.starshinaChange',
  [],
  { KOPNIK: 50, STARSHINA: 4 } ]
[2016-10-21 18:43:31.221] [INFO] console - [ 16,
  6567712943767552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id51.starshinaChange',
  [],
  { KOPNIK: 50, STARSHINA: 4 } ]
[2016-10-21 18:43:31.236] [INFO] console - [ 16,
  5495318328115200,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 50 } ]
[2016-10-21 18:43:31.250] [INFO] console - [ 16,
  5084164927782912,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/50/',
       id: '50',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:43:30 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:43:31 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:43:31.267] [INFO] console - [ 16,
  4702203052818432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:43:31.281] [INFO] console - [ 16,
  6653063460814848,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:43:31.299] [INFO] console - Executing (153a767f-d5af-4f75-9474-b3018377b645): START TRANSACTION;
[2016-10-21 18:43:31.304] [INFO] console - Executing (153a767f-d5af-4f75-9474-b3018377b645): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:31.316] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 18:43:31.327] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:43:31.353] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:31.384] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:43:31.406] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:43:31.388 +00:00' WHERE "id" = '50'
[2016-10-21 18:43:31.418] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '50'
                                    or path like '/4/50/'||'%'
[2016-10-21 18:43:31.432] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:43:31.439] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:31.454] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:31.460] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/50/'||'%'
                                order by 
                                    path
[2016-10-21 18:43:31.469] [INFO] console - Executing (153a767f-d5af-4f75-9474-b3018377b645): COMMIT;
[2016-10-21 18:43:31.474] [INFO] console - [ 70, 245, {}, [ undefined ] ]
[2016-10-21 18:43:31.482] [INFO] console - [ 16,
  1639977385459712,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id50.starshinaChange',
  [],
  { KOPNIK: 50, STARSHINA: null } ]
[2016-10-21 18:43:31.492] [INFO] console - [ 16,
  1359877251268608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id51.starshinaChange',
  [],
  { KOPNIK: 50, STARSHINA: null } ]
[2016-10-21 18:43:31.502] [INFO] console - [ 16,
  1168604236087296,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 50 } ]
[2016-10-21 18:43:31.512] [INFO] console - [ 16,
  565905543135232,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:43:31.528] [INFO] console - Executing (ed216615-ce2c-413e-bf0b-d1fa874cccb0): START TRANSACTION;
[2016-10-21 18:43:31.618] [INFO] console - Executing (ed216615-ce2c-413e-bf0b-d1fa874cccb0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:43:31.633] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 50);
[2016-10-21 18:43:31.668] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 51);
[2016-10-21 18:43:31.682] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:43:31.697] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:43:31.703] [ERROR] Server - [Error: Kopnik in druzhina]
Error: Kopnik in druzhina
    at [object Object].<anonymous> (Kopnik.js:120:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:43:31.719] [INFO] console - [ 8,
  68,
  246,
  {},
  'Error',
  [ 'Kopnik in druzhina' ],
  { stack: 
     [ 'Error: Kopnik in druzhina',
       '    at [object Object].<anonymous> (Kopnik.js:120:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:43:31.732] [INFO] console - Executing (ed216615-ce2c-413e-bf0b-d1fa874cccb0): ROLLBACK;
[2016-10-21 18:44:10.364] [INFO] console - [ 70, 248, {}, [ undefined ] ]
[2016-10-21 18:44:10.394] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:44:10.436] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:44:10.451] [INFO] console - Executing (65d04a99-9609-4cb5-aafa-83ab8ad08e4f): START TRANSACTION;
[2016-10-21 18:44:10.454] [INFO] console - Executing (65d04a99-9609-4cb5-aafa-83ab8ad08e4f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:10.458] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:44:10.478] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:44:10.493] [INFO] console - Executing (65d04a99-9609-4cb5-aafa-83ab8ad08e4f): COMMIT;
[2016-10-21 18:44:10.496] [INFO] console - [ 70,
  249,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:44:10.529] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:44:10.536] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): START TRANSACTION;
[2016-10-21 18:44:10.539] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:10.567] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:44:10.546 +00:00','2016-10-21 13:44:10.546 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:44:10.577] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:10.587] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:10.595] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:44:10.600] [INFO] console - Executing (0a83d2e5-8d48-4e4e-b9aa-25f1ee841d9d): COMMIT;
[2016-10-21 18:44:10.604] [INFO] console - [ 70, 250, {}, [ '52' ] ]
[2016-10-21 18:44:10.618] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:10.626] [INFO] console - Executing (4fa71a92-13ac-4937-a4fb-3a0e91aad1cb): START TRANSACTION;
[2016-10-21 18:44:10.635] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:44:10.641] [INFO] console - Executing (4fa71a92-13ac-4937-a4fb-3a0e91aad1cb): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:10.660] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:44:10.668] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 18:44:10.671] [INFO] console - [ 16,
  8428923717156864,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 50 } ]
[2016-10-21 18:44:10.687] [INFO] console - [ 16,
  556994696052736,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 52 } ]
[2016-10-21 18:44:10.709] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:44:10.728] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:10.745] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:10.752] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:10.770] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:44:10.755 +00:00' WHERE "id" = '52'
[2016-10-21 18:44:10.776] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '52'
                                    or path like '/52/'||'%'
[2016-10-21 18:44:10.783] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:44:10.789] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:44:10.801] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:10.810] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/52/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:10.814] [INFO] console - Executing (4fa71a92-13ac-4937-a4fb-3a0e91aad1cb): COMMIT;
[2016-10-21 18:44:10.819] [INFO] console - [ 70, 251, {}, [ undefined ] ]
[2016-10-21 18:44:10.836] [INFO] console - [ 16,
  1265262951137280,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id52.starshinaChange',
  [],
  { KOPNIK: 52, STARSHINA: 2 } ]
[2016-10-21 18:44:10.852] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:44:10.856] [INFO] console - [ 16,
  7516338390040576,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/52/',
       id: '52',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:44:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:44:10 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:44:10.877] [INFO] console - [ 16,
  8716947042598912,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:44:10.887] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): START TRANSACTION;
[2016-10-21 18:44:10.891] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:10.912] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:44:10.895 +00:00','2016-10-21 13:44:10.895 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:44:10.920] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:10.930] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:10.941] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:44:10.947] [INFO] console - Executing (e964b170-84ce-4e64-8d87-1978a2147c6f): COMMIT;
[2016-10-21 18:44:10.951] [INFO] console - [ 70, 252, {}, [ '53' ] ]
[2016-10-21 18:44:10.969] [INFO] console - Executing (028385b8-b059-4346-89a8-881906ccc09b): START TRANSACTION;
[2016-10-21 18:44:10.977] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:10.983] [INFO] console - Executing (028385b8-b059-4346-89a8-881906ccc09b): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:10.989] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:44:11.001] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 18:44:11.019] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:44:11.030] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 18:44:11.032] [INFO] console - [ 16,
  370271554895872,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 51 } ]
[2016-10-21 18:44:11.042] [INFO] console - [ 16,
  6979815334739968,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 53 } ]
[2016-10-21 18:44:11.054] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.066] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.072] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:11.088] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='52',"updated_at"='2016-10-21 13:44:11.075 +00:00' WHERE "id" = '53'
[2016-10-21 18:44:11.094] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/52/')
                                where
                                    id = '53'
                                    or path like '/53/'||'%'
[2016-10-21 18:44:11.100] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/52/' like path||id||'/%'
[2016-10-21 18:44:11.110] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/52/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.123] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('52', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.132] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/52/53/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:11.136] [INFO] console - Executing (028385b8-b059-4346-89a8-881906ccc09b): COMMIT;
[2016-10-21 18:44:11.140] [INFO] console - [ 70, 253, {}, [ undefined ] ]
[2016-10-21 18:44:11.147] [INFO] console - [ 16,
  7051457918402560,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id53.starshinaChange',
  [],
  { KOPNIK: 53, STARSHINA: 52 } ]
[2016-10-21 18:44:11.161] [INFO] console - [ 16,
  3965720259985408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id52.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/52/53/',
       id: '53',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/52/',
       note: null,
       created_at: Fri Oct 21 2016 18:44:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:44:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '52' } } ]
[2016-10-21 18:44:11.181] [INFO] console - [ 16,
  332697094324224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id52.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:44:11.190] [INFO] console - [ 16,
  6019765753610240,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:44:11.210] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:44:11.216] [INFO] console - Executing (b04723b9-b614-4b91-96ff-2d9e077611a3): START TRANSACTION;
[2016-10-21 18:44:11.220] [INFO] console - Executing (b04723b9-b614-4b91-96ff-2d9e077611a3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:11.236] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:44:11.248] [INFO] console - Executing (b04723b9-b614-4b91-96ff-2d9e077611a3): COMMIT;
[2016-10-21 18:44:11.252] [INFO] console - [ 70,
  254,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:44:11.280] [INFO] console - Executing (82963874-766a-4a26-9505-1762a4febf03): START TRANSACTION;
[2016-10-21 18:44:11.284] [INFO] console - Executing (82963874-766a-4a26-9505-1762a4febf03): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:11.294] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 18:44:11.306] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:44:11.314] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.325] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.332] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:44:11.349] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:44:11.336 +00:00' WHERE "id" = '52'
[2016-10-21 18:44:11.357] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '52'
                                    or path like '/2/52/'||'%'
[2016-10-21 18:44:11.365] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:44:11.370] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.381] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.389] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/52/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:11.394] [INFO] console - Executing (82963874-766a-4a26-9505-1762a4febf03): COMMIT;
[2016-10-21 18:44:11.397] [INFO] console - [ 70, 255, {}, [ undefined ] ]
[2016-10-21 18:44:11.403] [INFO] console - [ 16,
  6837377385365504,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id52.starshinaChange',
  [],
  { KOPNIK: 52, STARSHINA: 4 } ]
[2016-10-21 18:44:11.414] [INFO] console - [ 16,
  6446431715983360,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id53.starshinaChange',
  [],
  { KOPNIK: 52, STARSHINA: 4 } ]
[2016-10-21 18:44:11.426] [INFO] console - [ 16,
  5826548066156544,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 52 } ]
[2016-10-21 18:44:11.441] [INFO] console - [ 16,
  6737120274153472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/52/',
       id: '52',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:44:10 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:44:11 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:44:11.457] [INFO] console - [ 16,
  6137598198153216,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:44:11.468] [INFO] console - [ 16,
  5682806975889408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:44:11.485] [INFO] console - Executing (cc52f7f1-4251-4f48-8a33-d9510da5542d): START TRANSACTION;
[2016-10-21 18:44:11.492] [INFO] console - Executing (cc52f7f1-4251-4f48-8a33-d9510da5542d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:11.505] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 18:44:11.515] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.545] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.554] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:44:11.569] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:44:11.557 +00:00' WHERE "id" = '52'
[2016-10-21 18:44:11.575] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '52'
                                    or path like '/4/52/'||'%'
[2016-10-21 18:44:11.580] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:11.587] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.600] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.620] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/52/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:11.626] [INFO] console - Executing (cc52f7f1-4251-4f48-8a33-d9510da5542d): COMMIT;
[2016-10-21 18:44:11.635] [INFO] console - [ 70, 256, {}, [ undefined ] ]
[2016-10-21 18:44:11.642] [INFO] console - [ 16,
  7644593052975104,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id52.starshinaChange',
  [],
  { KOPNIK: 52, STARSHINA: null } ]
[2016-10-21 18:44:11.651] [INFO] console - [ 16,
  2284949675704320,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id53.starshinaChange',
  [],
  { KOPNIK: 52, STARSHINA: null } ]
[2016-10-21 18:44:11.663] [INFO] console - [ 16,
  7021524456308736,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 52 } ]
[2016-10-21 18:44:11.675] [INFO] console - [ 16,
  4340652372393984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:44:11.692] [INFO] console - Executing (bf2a6bb1-8f43-4a05-b179-1df71dfe53e3): START TRANSACTION;
[2016-10-21 18:44:11.695] [INFO] console - Executing (bf2a6bb1-8f43-4a05-b179-1df71dfe53e3): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:11.708] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 52);
[2016-10-21 18:44:11.722] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 53);
[2016-10-21 18:44:11.729] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:11.739] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:11.744] [ERROR] Server - [Error: Kopnik in druzhina]
Error: Kopnik in druzhina
    at [object Object].<anonymous> (Kopnik.js:120:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:44:11.751] [INFO] console - [ 8,
  68,
  257,
  {},
  'Error',
  [ 'Kopnik in druzhina' ],
  { stack: 
     [ 'Error: Kopnik in druzhina',
       '    at [object Object].<anonymous> (Kopnik.js:120:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:44:11.767] [INFO] console - Executing (bf2a6bb1-8f43-4a05-b179-1df71dfe53e3): ROLLBACK;
[2016-10-21 18:44:15.401] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:44:15.427] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): START TRANSACTION;
[2016-10-21 18:44:15.431] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:15.450] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:44:15.434 +00:00','2016-10-21 13:44:15.434 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:44:15.457] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:15.465] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:15.472] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:44:15.477] [INFO] console - Executing (7b816124-7d55-44b2-b71d-c6374a4ea841): COMMIT;
[2016-10-21 18:44:15.480] [INFO] console - [ 70, 258, {}, [ '54' ] ]
[2016-10-21 18:44:15.498] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:44:15.508] [INFO] console - Executing (f98dba2b-11d0-4eea-a5fc-bd8ada9af324): START TRANSACTION;
[2016-10-21 18:44:15.513] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:44:15.515] [INFO] console - Executing (f98dba2b-11d0-4eea-a5fc-bd8ada9af324): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:15.530] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:44:15.534] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 54);
[2016-10-21 18:44:15.545] [INFO] console - [ 16,
  5830213082546176,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 52 } ]
[2016-10-21 18:44:15.553] [INFO] console - [ 16,
  3587053346357248,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 54 } ]
[2016-10-21 18:44:15.563] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:44:15.572] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:15.585] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:15.591] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:15.607] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:44:15.593 +00:00' WHERE "id" = '54'
[2016-10-21 18:44:15.614] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '54'
                                    or path like '/54/'||'%'
[2016-10-21 18:44:15.629] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:44:15.635] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:44:15.649] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:15.661] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/54/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:15.671] [INFO] console - Executing (f98dba2b-11d0-4eea-a5fc-bd8ada9af324): COMMIT;
[2016-10-21 18:44:15.675] [INFO] console - [ 70, 259, {}, [ undefined ] ]
[2016-10-21 18:44:15.687] [INFO] console - [ 16,
  323852557090816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id54.starshinaChange',
  [],
  { KOPNIK: 54, STARSHINA: 2 } ]
[2016-10-21 18:44:15.711] [INFO] console - [ 16,
  2680471282515968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/54/',
       id: '54',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:44:15 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:44:15 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:44:15.738] [INFO] console - Executing (e364b6b5-1200-4457-87ec-26f3ae1229f7): START TRANSACTION;
[2016-10-21 18:44:15.741] [INFO] console - [ 16,
  845633816625152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:44:15.757] [INFO] console - Executing (e364b6b5-1200-4457-87ec-26f3ae1229f7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:44:15.773] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 54);
[2016-10-21 18:44:15.785] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:44:15.801] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:15.810] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:44:15.831] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:44:15.816 +00:00' WHERE "id" = '54'
[2016-10-21 18:44:15.839] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '54'
                                    or path like '/2/54/'||'%'
[2016-10-21 18:44:15.845] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:44:15.852] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:44:15.874] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:44:15.881] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/54/'||'%'
                                order by 
                                    path
[2016-10-21 18:44:15.885] [INFO] console - Executing (e364b6b5-1200-4457-87ec-26f3ae1229f7): COMMIT;
[2016-10-21 18:44:15.889] [INFO] console - [ 70, 260, {}, [ undefined ] ]
[2016-10-21 18:44:15.896] [INFO] console - [ 16,
  2767112288337920,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id54.starshinaChange',
  [],
  { KOPNIK: 54, STARSHINA: null } ]
[2016-10-21 18:44:15.906] [INFO] console - [ 16,
  6009883904180224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 54 } ]
[2016-10-21 18:44:15.928] [INFO] console - [ 16,
  3721518584430592,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:45:06.058] [INFO] console - [ 70, 262, {}, [ undefined ] ]
[2016-10-21 18:45:06.074] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:45:06.113] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:45:06.131] [INFO] console - Executing (f61160c0-6f2c-438e-94bf-08c13213c8d7): START TRANSACTION;
[2016-10-21 18:45:06.138] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:45:06.141] [INFO] console - Executing (f61160c0-6f2c-438e-94bf-08c13213c8d7): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.157] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:45:06.168] [INFO] console - Executing (f61160c0-6f2c-438e-94bf-08c13213c8d7): COMMIT;
[2016-10-21 18:45:06.171] [INFO] console - [ 70,
  263,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:45:06.231] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:45:06.238] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): START TRANSACTION;
[2016-10-21 18:45:06.241] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.255] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:45:06.245 +00:00','2016-10-21 13:45:06.245 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:45:06.265] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:06.278] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:06.293] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:45:06.299] [INFO] console - Executing (c201da8b-f279-4a3b-a137-c8fa57890360): COMMIT;
[2016-10-21 18:45:06.302] [INFO] console - [ 70, 264, {}, [ '55' ] ]
[2016-10-21 18:45:06.321] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:06.330] [INFO] console - Executing (359084d9-6990-4210-86f2-827a0e2888c9): START TRANSACTION;
[2016-10-21 18:45:06.334] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:45:06.337] [INFO] console - Executing (359084d9-6990-4210-86f2-827a0e2888c9): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.354] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:45:06.363] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 18:45:06.365] [INFO] console - [ 16,
  8235969226473472,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 53 } ]
[2016-10-21 18:45:06.397] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:45:06.416] [INFO] console - [ 16,
  1914357304786944,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 55 } ]
[2016-10-21 18:45:06.426] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:06.439] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:06.445] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:06.461] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:45:06.451 +00:00' WHERE "id" = '55'
[2016-10-21 18:45:06.466] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '55'
                                    or path like '/55/'||'%'
[2016-10-21 18:45:06.475] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:45:06.485] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:45:06.497] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:06.506] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/55/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:06.512] [INFO] console - Executing (359084d9-6990-4210-86f2-827a0e2888c9): COMMIT;
[2016-10-21 18:45:06.516] [INFO] console - [ 70, 265, {}, [ undefined ] ]
[2016-10-21 18:45:06.523] [INFO] console - [ 16,
  5921447325204480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id55.starshinaChange',
  [],
  { KOPNIK: 55, STARSHINA: 2 } ]
[2016-10-21 18:45:06.542] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:45:06.545] [INFO] console - [ 16,
  684901955272704,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/55/',
       id: '55',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:45:06 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:45:06 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:45:06.568] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): START TRANSACTION;
[2016-10-21 18:45:06.572] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.581] [INFO] console - [ 16,
  8469422937210880,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:45:06.597] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:45:06.575 +00:00','2016-10-21 13:45:06.575 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:45:06.609] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:06.618] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:06.625] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:45:06.633] [INFO] console - Executing (fa738150-3e56-4343-9387-ec418f514f87): COMMIT;
[2016-10-21 18:45:06.636] [INFO] console - [ 70, 266, {}, [ '56' ] ]
[2016-10-21 18:45:06.667] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:06.676] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:45:06.688] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:45:06.698] [INFO] console - Executing (b205ad89-fcfd-46fe-8073-f3b3908372a0): START TRANSACTION;
[2016-10-21 18:45:06.707] [INFO] console - [ 16,
  8102784834469888,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 54 } ]
[2016-10-21 18:45:06.720] [INFO] console - Executing (b205ad89-fcfd-46fe-8073-f3b3908372a0): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.733] [INFO] console - [ 16,
  7642672279846912,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 56 } ]
[2016-10-21 18:45:06.748] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 18:45:06.765] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 18:45:06.773] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:06.785] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:06.792] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:06.810] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='55',"updated_at"='2016-10-21 13:45:06.795 +00:00' WHERE "id" = '56'
[2016-10-21 18:45:06.820] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/55/')
                                where
                                    id = '56'
                                    or path like '/56/'||'%'
[2016-10-21 18:45:06.825] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/55/' like path||id||'/%'
[2016-10-21 18:45:06.831] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/55/' like k.path||k.id||'/%'
[2016-10-21 18:45:06.844] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('55', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:06.855] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/55/56/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:06.860] [INFO] console - Executing (b205ad89-fcfd-46fe-8073-f3b3908372a0): COMMIT;
[2016-10-21 18:45:06.863] [INFO] console - [ 70, 267, {}, [ undefined ] ]
[2016-10-21 18:45:06.868] [INFO] console - [ 16,
  6953652635828224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id56.starshinaChange',
  [],
  { KOPNIK: 56, STARSHINA: 55 } ]
[2016-10-21 18:45:06.880] [INFO] console - [ 16,
  2146533994659840,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id55.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/55/56/',
       id: '56',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/55/',
       note: null,
       created_at: Fri Oct 21 2016 18:45:06 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:45:06 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '55' } } ]
[2016-10-21 18:45:06.911] [INFO] console - [ 16,
  8936707068002304,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id55.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:45:06.925] [INFO] console - [ 16,
  6842220558680064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:45:06.950] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:45:06.956] [INFO] console - Executing (dbb93cc0-cca7-4baa-b873-71783e1cda4e): START TRANSACTION;
[2016-10-21 18:45:06.962] [INFO] console - Executing (dbb93cc0-cca7-4baa-b873-71783e1cda4e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:06.980] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:45:06.994] [INFO] console - Executing (dbb93cc0-cca7-4baa-b873-71783e1cda4e): COMMIT;
[2016-10-21 18:45:06.998] [INFO] console - [ 70,
  268,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:45:07.085] [INFO] console - Executing (128fdfe3-07ab-4d5c-80c7-f6afbd373cc5): START TRANSACTION;
[2016-10-21 18:45:07.089] [INFO] console - Executing (128fdfe3-07ab-4d5c-80c7-f6afbd373cc5): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:07.099] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 18:45:07.115] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:45:07.123] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:45:07.138] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:07.151] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:45:07.182] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:45:07.163 +00:00' WHERE "id" = '55'
[2016-10-21 18:45:07.188] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '55'
                                    or path like '/2/55/'||'%'
[2016-10-21 18:45:07.192] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:45:07.197] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:45:07.209] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:07.219] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/55/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:07.224] [INFO] console - Executing (128fdfe3-07ab-4d5c-80c7-f6afbd373cc5): COMMIT;
[2016-10-21 18:45:07.228] [INFO] console - [ 70, 269, {}, [ undefined ] ]
[2016-10-21 18:45:07.235] [INFO] console - [ 16,
  103111819526144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id55.starshinaChange',
  [],
  { KOPNIK: 55, STARSHINA: 4 } ]
[2016-10-21 18:45:07.255] [INFO] console - [ 16,
  684382452973568,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id56.starshinaChange',
  [],
  { KOPNIK: 55, STARSHINA: 4 } ]
[2016-10-21 18:45:07.269] [INFO] console - [ 16,
  2780769002979328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 55 } ]
[2016-10-21 18:45:07.296] [INFO] console - [ 16,
  4514976119128064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/55/',
       id: '55',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:45:06 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:45:07 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:45:07.324] [INFO] console - [ 16,
  4438581210775552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:45:07.334] [INFO] console - [ 16,
  38242745319424,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:45:07.359] [INFO] console - Executing (bc8b6cef-584b-4865-93ee-94564ab1bdde): START TRANSACTION;
[2016-10-21 18:45:07.365] [INFO] console - Executing (bc8b6cef-584b-4865-93ee-94564ab1bdde): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:07.376] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 18:45:07.386] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:45:07.401] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:07.411] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:45:07.430] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:45:07.419 +00:00' WHERE "id" = '55'
[2016-10-21 18:45:07.437] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '55'
                                    or path like '/4/55/'||'%'
[2016-10-21 18:45:07.446] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:07.450] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:07.479] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:07.487] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/55/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:07.492] [INFO] console - Executing (bc8b6cef-584b-4865-93ee-94564ab1bdde): COMMIT;
[2016-10-21 18:45:07.495] [INFO] console - [ 70, 270, {}, [ undefined ] ]
[2016-10-21 18:45:07.501] [INFO] console - [ 16,
  2984537669763072,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id55.starshinaChange',
  [],
  { KOPNIK: 55, STARSHINA: null } ]
[2016-10-21 18:45:07.512] [INFO] console - [ 16,
  4413797448024064,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id56.starshinaChange',
  [],
  { KOPNIK: 55, STARSHINA: null } ]
[2016-10-21 18:45:07.532] [INFO] console - [ 16,
  5052722736791552,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 55 } ]
[2016-10-21 18:45:07.542] [INFO] console - [ 16,
  2109648347856896,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:45:31.010] [INFO] console - Executing (0eb50e0c-51e7-4682-b0af-a66ecb6e1f8e): START TRANSACTION;
[2016-10-21 18:45:31.018] [INFO] console - Executing (0eb50e0c-51e7-4682-b0af-a66ecb6e1f8e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:31.066] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 55);
[2016-10-21 18:45:31.081] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 56);
[2016-10-21 18:45:31.090] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:31.100] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:31.107] [ERROR] Server - [Error: Kopnik in druzhina]
Error: Kopnik in druzhina
    at [object Object].<anonymous> (Kopnik.js:120:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:45:31.114] [INFO] console - [ 8,
  68,
  271,
  {},
  'Error',
  [ 'Kopnik in druzhina' ],
  { stack: 
     [ 'Error: Kopnik in druzhina',
       '    at [object Object].<anonymous> (Kopnik.js:120:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:45:31.130] [INFO] console - Executing (0eb50e0c-51e7-4682-b0af-a66ecb6e1f8e): ROLLBACK;
[2016-10-21 18:45:31.236] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:45:31.246] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): START TRANSACTION;
[2016-10-21 18:45:31.250] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:31.272] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:45:31.254 +00:00','2016-10-21 13:45:31.254 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:45:31.280] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:31.293] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:31.299] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:45:31.306] [INFO] console - Executing (a739c1b2-ba8b-4b05-907d-6e8b4c17d781): COMMIT;
[2016-10-21 18:45:31.318] [INFO] console - [ 70, 272, {}, [ '57' ] ]
[2016-10-21 18:45:31.337] [INFO] console - Executing (ec318f3b-896e-44d6-86d0-e16683fb83b2): START TRANSACTION;
[2016-10-21 18:45:31.343] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:45:31.349] [INFO] console - Executing (ec318f3b-896e-44d6-86d0-e16683fb83b2): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:31.353] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:45:31.364] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 57);
[2016-10-21 18:45:31.376] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:45:31.390] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:45:31.391] [INFO] console - [ 16,
  4398104264572928,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 55 } ]
[2016-10-21 18:45:31.409] [INFO] console - [ 16,
  6780251438841856,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 57 } ]
[2016-10-21 18:45:31.421] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:31.431] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:31.438] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:31.468] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:45:31.449 +00:00' WHERE "id" = '57'
[2016-10-21 18:45:31.473] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '57'
                                    or path like '/57/'||'%'
[2016-10-21 18:45:31.483] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:45:31.489] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:45:31.503] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:31.510] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/57/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:31.522] [INFO] console - Executing (ec318f3b-896e-44d6-86d0-e16683fb83b2): COMMIT;
[2016-10-21 18:45:31.525] [INFO] console - [ 70, 273, {}, [ undefined ] ]
[2016-10-21 18:45:31.538] [INFO] console - [ 16,
  316334214742016,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id57.starshinaChange',
  [],
  { KOPNIK: 57, STARSHINA: 2 } ]
[2016-10-21 18:45:31.552] [INFO] console - Executing (03f28651-90d4-4e89-ad4a-d41f43695351): START TRANSACTION;
[2016-10-21 18:45:31.555] [INFO] console - [ 16,
  4531287207444480,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/57/',
       id: '57',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:45:31 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:45:31 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:45:31.572] [INFO] console - Executing (03f28651-90d4-4e89-ad4a-d41f43695351): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:45:31.574] [INFO] console - [ 16,
  7572561076420608,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:45:31.589] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 57);
[2016-10-21 18:45:31.598] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:45:31.609] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:31.616] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:45:31.635] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:45:31.621 +00:00' WHERE "id" = '57'
[2016-10-21 18:45:31.642] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '57'
                                    or path like '/2/57/'||'%'
[2016-10-21 18:45:31.647] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:45:31.656] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:45:31.667] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:45:31.673] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/57/'||'%'
                                order by 
                                    path
[2016-10-21 18:45:31.678] [INFO] console - Executing (03f28651-90d4-4e89-ad4a-d41f43695351): COMMIT;
[2016-10-21 18:45:31.682] [INFO] console - [ 70, 274, {}, [ undefined ] ]
[2016-10-21 18:45:31.689] [INFO] console - [ 16,
  6717762525200384,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id57.starshinaChange',
  [],
  { KOPNIK: 57, STARSHINA: null } ]
[2016-10-21 18:45:31.701] [INFO] console - [ 16,
  5333195897700352,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 57 } ]
[2016-10-21 18:45:31.711] [INFO] console - [ 16,
  7324914428149760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:47:55.844] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:47:58.662] [INFO] Server - starting...
[2016-10-21 18:47:58.665] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:47:58.770] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:47:59.199] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:47:59.231] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:47:59.253] [INFO] Server - connection.onopen()
[2016-10-21 18:47:59.254] [INFO] console - [ 64, 6588990438244352, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:47:59.264] [DEBUG] Server - api:model.create registered
[2016-10-21 18:47:59.266] [INFO] console - [ 64, 4243725901365248, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:47:59.272] [DEBUG] Server - api:model.get registered
[2016-10-21 18:47:59.273] [INFO] console - [ 64, 1374036080721920, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:47:59.278] [DEBUG] Server - api:model.save registered
[2016-10-21 18:47:59.279] [INFO] console - [ 64, 6021572821254144, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:47:59.284] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:47:59.285] [INFO] console - [ 64, 6867429300895744, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:47:59.290] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:47:59.291] [INFO] console - [ 64, 5142246261260288, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:47:59.296] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:47:59.297] [INFO] console - [ 64, 4713333510897664, {}, 'ru.kopa.error' ]
[2016-10-21 18:47:59.302] [DEBUG] Server - api:error registered
[2016-10-21 18:47:59.303] [INFO] console - [ 64, 4778511279587328, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:47:59.309] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:47:59.309] [INFO] console - [ 64, 6074540218122240, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:47:59.315] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:47:59.315] [INFO] console - [ 64, 936638968496128, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:47:59.321] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:47:59.322] [INFO] console - [ 64, 5472306686066688, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:47:59.327] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:47:59.328] [INFO] console - [ 64, 8418912641220608, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:47:59.333] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:47:59.334] [INFO] console - [ 64, 1732863946915840, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:47:59.340] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:47:59.341] [INFO] console - [ 64, 129299682164736, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:47:59.346] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:47:59.347] [INFO] console - [ 64, 3498688569671680, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:47:59.355] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:47:59.356] [INFO] console - [ 64, 3242206049599488, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:47:59.361] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:47:59.362] [INFO] console - [ 64,
  830283999870976,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:47:59.367] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:47:59.368] [INFO] console - [ 64, 5757442459697152, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:47:59.373] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:47:59.375] [INFO] Server - started
[2016-10-21 18:48:44.566] [INFO] console - [ 70, 277, {}, [ undefined ] ]
[2016-10-21 18:48:44.594] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:48:44.729] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:48:44.745] [INFO] console - Executing (cb320088-c7bd-443c-bb72-d796782fa17f): START TRANSACTION;
[2016-10-21 18:48:44.752] [INFO] console - Executing (cb320088-c7bd-443c-bb72-d796782fa17f): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:44.757] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:48:44.792] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:48:44.820] [INFO] console - Executing (cb320088-c7bd-443c-bb72-d796782fa17f): COMMIT;
[2016-10-21 18:48:44.826] [INFO] console - [ 70,
  278,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:48:44.862] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:48:44.876] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): START TRANSACTION;
[2016-10-21 18:48:44.881] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:44.915] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:48:44.887 +00:00','2016-10-21 13:48:44.887 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:48:44.928] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:48:44.939] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:48:44.947] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:48:44.953] [INFO] console - Executing (244aa432-3991-4fdc-bd55-477a400fa278): COMMIT;
[2016-10-21 18:48:44.957] [INFO] console - [ 70, 279, {}, [ '58' ] ]
[2016-10-21 18:48:44.973] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:48:44.985] [INFO] console - Executing (9ad6ff93-7852-4d6f-90f2-5b56c372b8fc): START TRANSACTION;
[2016-10-21 18:48:44.990] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:48:44.993] [INFO] console - Executing (9ad6ff93-7852-4d6f-90f2-5b56c372b8fc): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.015] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:48:45.038] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 18:48:45.041] [INFO] console - [ 16,
  8852064515915776,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 56 } ]
[2016-10-21 18:48:45.061] [INFO] console - [ 16,
  8281361150377984,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 58 } ]
[2016-10-21 18:48:45.092] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:48:45.106] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.122] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.140] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:48:45.165] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:48:45.145 +00:00' WHERE "id" = '58'
[2016-10-21 18:48:45.179] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '58'
                                    or path like '/58/'||'%'
[2016-10-21 18:48:45.184] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:48:45.194] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.210] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.221] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/58/'||'%'
                                order by 
                                    path
[2016-10-21 18:48:45.226] [INFO] console - Executing (9ad6ff93-7852-4d6f-90f2-5b56c372b8fc): COMMIT;
[2016-10-21 18:48:45.230] [INFO] console - [ 70, 280, {}, [ undefined ] ]
[2016-10-21 18:48:45.239] [INFO] console - [ 16,
  8663788169461760,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id58.starshinaChange',
  [],
  { KOPNIK: 58, STARSHINA: 2 } ]
[2016-10-21 18:48:45.258] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:48:45.262] [INFO] console - [ 16,
  5847515618344960,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/58/',
       id: '58',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:48:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:48:45 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:48:45.345] [INFO] console - [ 16,
  6061989803589632,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:48:45.352] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): START TRANSACTION;
[2016-10-21 18:48:45.357] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.374] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:48:45.362 +00:00','2016-10-21 13:48:45.362 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:48:45.381] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:48:45.390] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:48:45.396] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:48:45.403] [INFO] console - Executing (259e89be-d5cb-4832-8b5d-517ae29d9055): COMMIT;
[2016-10-21 18:48:45.406] [INFO] console - [ 70, 281, {}, [ '59' ] ]
[2016-10-21 18:48:45.417] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:48:45.427] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:48:45.429] [INFO] console - Executing (c2150ef4-dcdf-4d23-8d4f-4f0974914362): START TRANSACTION;
[2016-10-21 18:48:45.436] [INFO] console - Executing (c2150ef4-dcdf-4d23-8d4f-4f0974914362): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.446] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:48:45.457] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 59);
[2016-10-21 18:48:45.459] [INFO] console - [ 16,
  8266329968607232,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 57 } ]
[2016-10-21 18:48:45.472] [INFO] console - [ 16,
  2726373577719808,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 59 } ]
[2016-10-21 18:48:45.495] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 18:48:45.502] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.512] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.517] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:48:45.535] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='58',"updated_at"='2016-10-21 13:48:45.522 +00:00' WHERE "id" = '59'
[2016-10-21 18:48:45.571] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/58/')
                                where
                                    id = '59'
                                    or path like '/59/'||'%'
[2016-10-21 18:48:45.580] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/58/' like path||id||'/%'
[2016-10-21 18:48:45.588] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/58/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.601] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('58', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.609] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/58/59/'||'%'
                                order by 
                                    path
[2016-10-21 18:48:45.617] [INFO] console - Executing (c2150ef4-dcdf-4d23-8d4f-4f0974914362): COMMIT;
[2016-10-21 18:48:45.622] [INFO] console - [ 70, 282, {}, [ undefined ] ]
[2016-10-21 18:48:45.629] [INFO] console - [ 16,
  3504337777065984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id59.starshinaChange',
  [],
  { KOPNIK: 59, STARSHINA: 58 } ]
[2016-10-21 18:48:45.650] [INFO] console - [ 16,
  3437931387682816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id58.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/58/59/',
       id: '59',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/58/',
       note: null,
       created_at: Fri Oct 21 2016 18:48:45 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:48:45 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '58' } } ]
[2016-10-21 18:48:45.663] [INFO] console - [ 16,
  2878799559524352,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id58.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:48:45.671] [INFO] console - [ 16,
  5983893408710656,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:48:45.686] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:48:45.693] [INFO] console - Executing (f15e839d-1cf9-4678-879e-3feced7d9484): START TRANSACTION;
[2016-10-21 18:48:45.697] [INFO] console - Executing (f15e839d-1cf9-4678-879e-3feced7d9484): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.715] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:48:45.726] [INFO] console - Executing (f15e839d-1cf9-4678-879e-3feced7d9484): COMMIT;
[2016-10-21 18:48:45.729] [INFO] console - [ 70,
  283,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:48:45.750] [INFO] console - Executing (f66218cc-4456-4669-b84e-82210ed9c22d): START TRANSACTION;
[2016-10-21 18:48:45.756] [INFO] console - Executing (f66218cc-4456-4669-b84e-82210ed9c22d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.765] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 18:48:45.776] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:48:45.783] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.796] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.806] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:48:45.818] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:48:45.809 +00:00' WHERE "id" = '58'
[2016-10-21 18:48:45.826] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '58'
                                    or path like '/2/58/'||'%'
[2016-10-21 18:48:45.831] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:48:45.836] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.849] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.858] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/58/'||'%'
                                order by 
                                    path
[2016-10-21 18:48:45.863] [INFO] console - Executing (f66218cc-4456-4669-b84e-82210ed9c22d): COMMIT;
[2016-10-21 18:48:45.866] [INFO] console - [ 70, 284, {}, [ undefined ] ]
[2016-10-21 18:48:45.871] [INFO] console - [ 16,
  7400586861346816,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id58.starshinaChange',
  [],
  { KOPNIK: 58, STARSHINA: 4 } ]
[2016-10-21 18:48:45.885] [INFO] console - [ 16,
  3812630061907968,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id59.starshinaChange',
  [],
  { KOPNIK: 58, STARSHINA: 4 } ]
[2016-10-21 18:48:45.897] [INFO] console - [ 16,
  8659968009961472,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 58 } ]
[2016-10-21 18:48:45.906] [INFO] console - [ 16,
  8608049086332928,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/58/',
       id: '58',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:48:44 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:48:45 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:48:45.920] [INFO] console - [ 16,
  1485350786564096,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:48:45.927] [INFO] console - [ 16,
  8112602183892992,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:48:45.947] [INFO] console - Executing (5f5966a5-6287-4743-ab93-1d84ff1c6c83): START TRANSACTION;
[2016-10-21 18:48:45.949] [INFO] console - Executing (5f5966a5-6287-4743-ab93-1d84ff1c6c83): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:48:45.958] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 58);
[2016-10-21 18:48:45.964] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:48:45.974] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:48:45.980] [ERROR] Server - [TypeError: Cannot read property 'id' of null]
TypeError: Cannot read property 'id' of null
    at [object Object].<anonymous> (Kopnik.js:122:35)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:48:46.648] [INFO] console - [ 8,
  68,
  285,
  {},
  'TypeError',
  [ 'Cannot read property \'id\' of null' ],
  { stack: 
     [ 'TypeError: Cannot read property \'id\' of null',
       '    at [object Object].<anonymous> (Kopnik.js:122:35)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:48:46.659] [INFO] console - Executing (5f5966a5-6287-4743-ab93-1d84ff1c6c83): ROLLBACK;
[2016-10-21 18:50:26.374] [INFO] console - AutobahnJS debug enabled
[2016-10-21 18:50:29.376] [INFO] Server - starting...
[2016-10-21 18:50:29.382] [INFO] console - trying to create WAMP transport of type: websocket
[2016-10-21 18:50:29.519] [INFO] console - using WAMP transport type: websocket
[2016-10-21 18:50:29.914] [INFO] console - [ 1,
  'kopa',
  { roles: 
     { caller: [Object],
       callee: [Object],
       publisher: [Object],
       subscriber: [Object] },
    authmethods: [ 'ticket' ],
    authid: 'server' } ]
[2016-10-21 18:50:29.943] [INFO] console - [ 5, 'server', {} ]
[2016-10-21 18:50:29.962] [INFO] Server - connection.onopen()
[2016-10-21 18:50:29.964] [INFO] console - [ 64, 2742409693757440, {}, 'ru.kopa.model.create' ]
[2016-10-21 18:50:29.973] [DEBUG] Server - api:model.create registered
[2016-10-21 18:50:29.974] [INFO] console - [ 64, 5085733668782080, {}, 'ru.kopa.model.get' ]
[2016-10-21 18:50:29.981] [DEBUG] Server - api:model.get registered
[2016-10-21 18:50:29.982] [INFO] console - [ 64, 5438706045419520, {}, 'ru.kopa.model.save' ]
[2016-10-21 18:50:29.989] [DEBUG] Server - api:model.save registered
[2016-10-21 18:50:29.990] [INFO] console - [ 64, 2985051409088512, {}, 'ru.kopa.pingPong' ]
[2016-10-21 18:50:29.999] [DEBUG] Server - api:pingPong registered
[2016-10-21 18:50:30.000] [INFO] console - [ 64, 629910649438208, {}, 'ru.kopa.discloseCaller' ]
[2016-10-21 18:50:30.006] [DEBUG] Server - api:discloseCaller registered
[2016-10-21 18:50:30.008] [INFO] console - [ 64, 6123561970302976, {}, 'ru.kopa.pingPongDatabase' ]
[2016-10-21 18:50:30.014] [DEBUG] Server - api:pingPongDatabase registered
[2016-10-21 18:50:30.015] [INFO] console - [ 64, 4420843868258304, {}, 'ru.kopa.error' ]
[2016-10-21 18:50:30.021] [DEBUG] Server - api:error registered
[2016-10-21 18:50:30.022] [INFO] console - [ 64, 3957186445180928, {}, 'ru.kopa.unitTest.cleanTempData' ]
[2016-10-21 18:50:30.027] [DEBUG] Server - api:unitTest.cleanTempData registered
[2016-10-21 18:50:30.028] [INFO] console - [ 64, 7290002952159232, {}, 'ru.kopa.model.Kopnik.setStarshina' ]
[2016-10-21 18:50:30.035] [DEBUG] Server - api:model.Kopnik.setStarshina registered
[2016-10-21 18:50:30.036] [INFO] console - [ 64, 1996413711941632, {}, 'ru.kopa.model.Kopnik.getDruzhina' ]
[2016-10-21 18:50:30.042] [DEBUG] Server - api:model.Kopnik.getDruzhina registered
[2016-10-21 18:50:30.044] [INFO] console - [ 64, 4304677143314432, {}, 'ru.kopa.model.Kopnik.vote' ]
[2016-10-21 18:50:30.049] [DEBUG] Server - api:model.Kopnik.vote registered
[2016-10-21 18:50:30.051] [INFO] console - [ 64, 8066034711920640, {}, 'ru.kopa.model.Kopa.invite' ]
[2016-10-21 18:50:30.056] [DEBUG] Server - api:model.Kopa.invite registered
[2016-10-21 18:50:30.057] [INFO] console - [ 64, 982883118350336, {}, 'ru.kopa.model.Kopa.getDialog' ]
[2016-10-21 18:50:30.063] [DEBUG] Server - api:model.Kopa.getDialog registered
[2016-10-21 18:50:30.064] [INFO] console - [ 64, 2728446817992704, {}, 'ru.kopa.model.Kopa.getResult' ]
[2016-10-21 18:50:30.072] [DEBUG] Server - api:model.Kopa.getResult registered
[2016-10-21 18:50:30.074] [INFO] console - [ 64, 3924691582451712, {}, 'ru.kopa.model.Zemla.setParent' ]
[2016-10-21 18:50:30.079] [DEBUG] Server - api:model.Zemla.setParent registered
[2016-10-21 18:50:30.080] [INFO] console - [ 64, 7847702446473216, {}, 'ru.kopa.model.Zemla.promiseKopi' ]
[2016-10-21 18:50:30.086] [DEBUG] Server - api:model.Zemla.promiseKopi registered
[2016-10-21 18:50:30.087] [INFO] console - [ 64,
  6792773057380352,
  {},
  'ru.kopa.model.Predlozhenie.getGolosa' ]
[2016-10-21 18:50:30.093] [DEBUG] Server - api:model.Predlozhenie.getGolosa registered
[2016-10-21 18:50:30.094] [INFO] console - [ 64, 459865556254720, {}, 'ru.kopa.unitTest.orderProc' ]
[2016-10-21 18:50:30.101] [DEBUG] Server - api:unitTest.orderProc registered
[2016-10-21 18:50:30.104] [INFO] Server - started
[2016-10-21 18:50:41.858] [INFO] console - [ 70, 288, {}, [ undefined ] ]
[2016-10-21 18:50:41.888] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 2 }
[2016-10-21 18:50:42.012] [INFO] console - Executing (default): delete from "Kopnik"
                where
                    name like '%temp'
                    or name like 'temp%'
[2016-10-21 18:50:42.017] [INFO] console - Executing (da651481-de33-4d1a-a284-0e3916ae1cda): START TRANSACTION;
[2016-10-21 18:50:42.021] [INFO] console - Executing (da651481-de33-4d1a-a284-0e3916ae1cda): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.027] [INFO] console - Executing (default): update "Kopnik"
                set 
                    "voiskoSize"= case id when 2 then 3 when 3 then 1 ELSE 0 END
                where
                    id>1 
                    and id<=5
[2016-10-21 18:50:42.052] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:50:42.068] [INFO] console - Executing (da651481-de33-4d1a-a284-0e3916ae1cda): COMMIT;
[2016-10-21 18:50:42.073] [INFO] console - [ 70,
  289,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/2/',
      id: '2',
      email: 'unittest2@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '2',
      voiskoSize: 3,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 16:35:26 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:50:42.107] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:50:42.122] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): START TRANSACTION;
[2016-10-21 18:50:42.125] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.158] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:50:42.130 +00:00','2016-10-21 13:50:42.130 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:50:42.168] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:42.190] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:42.200] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:50:42.206] [INFO] console - Executing (bc679691-9fa2-4184-b596-f73baca59f22): COMMIT;
[2016-10-21 18:50:42.210] [INFO] console - [ 70, 290, {}, [ '60' ] ]
[2016-10-21 18:50:42.228] [INFO] console - Executing (142eb659-60e7-47bc-b30c-fa3cffe969be): START TRANSACTION;
[2016-10-21 18:50:42.234] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:42.242] [INFO] console - Executing (142eb659-60e7-47bc-b30c-fa3cffe969be): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.247] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:50:42.259] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 18:50:42.273] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:50:42.286] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:50:42.288] [INFO] console - [ 16,
  5750185552510976,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 58 } ]
[2016-10-21 18:50:42.309] [INFO] console - [ 16,
  3946699326226432,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 60 } ]
[2016-10-21 18:50:42.314] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:42.328] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:42.335] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:42.376] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:50:42.340 +00:00' WHERE "id" = '60'
[2016-10-21 18:50:42.386] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '60'
                                    or path like '/60/'||'%'
[2016-10-21 18:50:42.406] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:50:42.422] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:50:42.454] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:42.464] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/60/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:42.468] [INFO] console - Executing (142eb659-60e7-47bc-b30c-fa3cffe969be): COMMIT;
[2016-10-21 18:50:42.471] [INFO] console - [ 70, 291, {}, [ undefined ] ]
[2016-10-21 18:50:42.486] [INFO] console - [ 16,
  8202148095459328,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id60.starshinaChange',
  [],
  { KOPNIK: 60, STARSHINA: 2 } ]
[2016-10-21 18:50:42.504] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:50:42.507] [INFO] console - [ 16,
  7734596454055936,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/60/',
       id: '60',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:50:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:50:42 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:50:42.527] [INFO] console - [ 16,
  1431068766896128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:50:42.534] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): START TRANSACTION;
[2016-10-21 18:50:42.539] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.567] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:50:42.546 +00:00','2016-10-21 13:50:42.546 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:50:42.582] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:42.593] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:42.600] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:50:42.606] [INFO] console - Executing (1a8fb17a-aab6-4771-af13-06215f50a638): COMMIT;
[2016-10-21 18:50:42.612] [INFO] console - [ 70, 292, {}, [ '61' ] ]
[2016-10-21 18:50:42.647] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:42.658] [INFO] console - Executing (11380c58-fe0f-4c51-a930-af08a8cb9cad): START TRANSACTION;
[2016-10-21 18:50:42.662] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:50:42.670] [INFO] console - Executing (11380c58-fe0f-4c51-a930-af08a8cb9cad): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.699] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:50:42.711] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 61);
[2016-10-21 18:50:42.713] [INFO] console - [ 16,
  1999242180689920,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 59 } ]
[2016-10-21 18:50:42.737] [INFO] console - [ 16,
  3353277590667264,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 61 } ]
[2016-10-21 18:50:42.752] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 18:50:42.772] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:42.784] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:42.793] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:42.807] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='60',"updated_at"='2016-10-21 13:50:42.796 +00:00' WHERE "id" = '61'
[2016-10-21 18:50:42.815] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/60/')
                                where
                                    id = '61'
                                    or path like '/61/'||'%'
[2016-10-21 18:50:42.819] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/60/' like path||id||'/%'
[2016-10-21 18:50:42.824] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/60/' like k.path||k.id||'/%'
[2016-10-21 18:50:42.838] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('60', '2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:42.847] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/60/61/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:42.853] [INFO] console - Executing (11380c58-fe0f-4c51-a930-af08a8cb9cad): COMMIT;
[2016-10-21 18:50:42.856] [INFO] console - [ 70, 293, {}, [ undefined ] ]
[2016-10-21 18:50:42.862] [INFO] console - [ 16,
  5625921765638144,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id61.starshinaChange',
  [],
  { KOPNIK: 61, STARSHINA: 60 } ]
[2016-10-21 18:50:42.877] [INFO] console - [ 16,
  6591021288783872,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id60.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/60/61/',
       id: '61',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/60/',
       note: null,
       created_at: Fri Oct 21 2016 18:50:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:50:42 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '60' } } ]
[2016-10-21 18:50:42.898] [INFO] console - [ 16,
  2271708518023168,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id60.voiskoChange',
  [],
  { voiskoSize: 1 } ]
[2016-10-21 18:50:42.918] [INFO] console - [ 16,
  8412266525360128,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 5 } ]
[2016-10-21 18:50:42.934] [DEBUG] Server - #promiseModel() [] { model: 'Kopnik', id: 4 }
[2016-10-21 18:50:42.941] [INFO] console - Executing (c9d9b94e-7c5a-4ef4-b97c-c689103b2604): START TRANSACTION;
[2016-10-21 18:50:42.947] [INFO] console - Executing (c9d9b94e-7c5a-4ef4-b97c-c689103b2604): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:42.981] [INFO] console - Executing (default): SELECT "Kopnik"."id", "Kopnik"."email", "Kopnik"."password", "Kopnik"."name", "Kopnik"."surname", "Kopnik"."patronymic", "Kopnik"."voiskoSize", "Kopnik"."birth", "Kopnik"."path", "Kopnik"."note", "Kopnik"."created_at", "Kopnik"."updated_at", "Kopnik"."deleted_at", "Kopnik"."dom_id", "Kopnik"."starshina_id", "attachments"."id" AS "attachments.id", "attachments"."path" AS "attachments.path", "attachments"."note" AS "attachments.note", "attachments"."created_at" AS "attachments.created_at", "attachments"."updated_at" AS "attachments.updated_at", "attachments"."deleted_at" AS "attachments.deleted_at", "attachments"."zemla_id" AS "attachments.zemla_id", "attachments"."kopnik_id" AS "attachments.kopnik_id", "attachments"."kopa_id" AS "attachments.kopa_id", "attachments"."slovo_id" AS "attachments.slovo_id", "attachments"."predlozhenie_id" AS "attachments.predlozhenie_id", "attachments"."golos_id" AS "attachments.golos_id" FROM "Kopnik" AS "Kopnik" LEFT OUTER JOIN "File" AS "attachments" ON "Kopnik"."id" = "attachments"."kopnik_id" AND "attachments"."deleted_at" IS NULL WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:50:42.993] [INFO] console - Executing (c9d9b94e-7c5a-4ef4-b97c-c689103b2604): COMMIT;
[2016-10-21 18:50:42.997] [INFO] console - [ 70,
  294,
  {},
  [ { fullName: 'Unit Test',
      fullPath: '/4/',
      id: '4',
      email: 'unittest4@domain.ru',
      name: 'Unit',
      surname: 'Test',
      patronymic: '4',
      voiskoSize: 0,
      birth: 1983,
      path: '/',
      note: null,
      created_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      updated_at: Fri Oct 21 2016 10:36:33 GMT+0500 (YEKT),
      deleted_at: null,
      dom_id: '2',
      starshina_id: null,
      attachments: [] } ] ]
[2016-10-21 18:50:43.036] [INFO] console - Executing (1384b75e-6cd9-4d6f-b712-de545e4ebd2e): START TRANSACTION;
[2016-10-21 18:50:43.040] [INFO] console - Executing (1384b75e-6cd9-4d6f-b712-de545e4ebd2e): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:43.060] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 18:50:43.074] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 4);
[2016-10-21 18:50:43.082] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:50:43.095] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:43.104] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:50:43.119] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='4',"updated_at"='2016-10-21 13:50:43.107 +00:00' WHERE "id" = '60'
[2016-10-21 18:50:43.125] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/4/')
                                where
                                    id = '60'
                                    or path like '/2/60/'||'%'
[2016-10-21 18:50:43.132] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:50:43.137] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:50:43.148] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:43.155] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/4/60/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:43.160] [INFO] console - Executing (1384b75e-6cd9-4d6f-b712-de545e4ebd2e): COMMIT;
[2016-10-21 18:50:43.164] [INFO] console - [ 70, 295, {}, [ undefined ] ]
[2016-10-21 18:50:43.170] [INFO] console - [ 16,
  4291354620329984,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id60.starshinaChange',
  [],
  { KOPNIK: 60, STARSHINA: 4 } ]
[2016-10-21 18:50:43.182] [INFO] console - [ 16,
  4764536838029312,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id61.starshinaChange',
  [],
  { KOPNIK: 60, STARSHINA: 4 } ]
[2016-10-21 18:50:43.190] [INFO] console - [ 16,
  8759643505426432,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 60 } ]
[2016-10-21 18:50:43.199] [INFO] console - [ 16,
  3686726675464192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/4/60/',
       id: '60',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 1,
       birth: 1900,
       path: '/4/',
       note: null,
       created_at: Fri Oct 21 2016 18:50:42 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:50:43 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '4' } } ]
[2016-10-21 18:50:43.214] [INFO] console - [ 16,
  2236584258699264,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 18:50:43.223] [INFO] console - [ 16,
  7704314162184192,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 2 } ]
[2016-10-21 18:50:43.239] [INFO] console - Executing (63125117-fc46-422a-bae5-1e7a876b059d): START TRANSACTION;
[2016-10-21 18:50:43.242] [INFO] console - Executing (63125117-fc46-422a-bae5-1e7a876b059d): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:43.251] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 18:50:43.258] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/4/' like k.path||k.id||'/%'
[2016-10-21 18:50:43.269] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('4')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:43.277] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-2
                                where
                                    '/4/' like path||id||'/%'
[2016-10-21 18:50:43.290] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:50:43.280 +00:00' WHERE "id" = '60'
[2016-10-21 18:50:43.297] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/4/', '/')
                                where
                                    id = '60'
                                    or path like '/4/60/'||'%'
[2016-10-21 18:50:43.302] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+2
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:43.306] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:43.317] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:43.323] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/60/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:43.329] [INFO] console - Executing (63125117-fc46-422a-bae5-1e7a876b059d): COMMIT;
[2016-10-21 18:50:43.332] [INFO] console - [ 70, 296, {}, [ undefined ] ]
[2016-10-21 18:50:43.337] [INFO] console - [ 16,
  6178873163120640,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id60.starshinaChange',
  [],
  { KOPNIK: 60, STARSHINA: null } ]
[2016-10-21 18:50:43.350] [INFO] console - [ 16,
  4140234535075840,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id61.starshinaChange',
  [],
  { KOPNIK: 60, STARSHINA: null } ]
[2016-10-21 18:50:43.359] [INFO] console - [ 16,
  5366563689463808,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 60 } ]
[2016-10-21 18:50:43.369] [INFO] console - [ 16,
  8337280206897152,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id4.voiskoChange',
  [],
  { voiskoSize: 0 } ]
[2016-10-21 18:50:50.099] [INFO] console - Executing (829d8a7a-0420-4273-98c6-ba82437e5ad4): START TRANSACTION;
[2016-10-21 18:50:50.104] [INFO] console - Executing (829d8a7a-0420-4273-98c6-ba82437e5ad4): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:50.115] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 60);
[2016-10-21 18:50:50.129] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 61);
[2016-10-21 18:50:50.138] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:50.150] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:50.156] [ERROR] Server - [Error: Копник, которого назначают старшиной, в данный момент состоит в дружине. Чтобы выбрать его старшиной, сначала он должен выйти из дружины]
Error: Копник, которого назначают старшиной, в данный момент состоит в дружине. Чтобы выбрать его старшиной, сначала он должен выйти из дружины
    at [object Object].<anonymous> (Kopnik.js:119:31)
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)
    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)
    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)
    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)
    at [object Object].setStarshina2 (Kopnik.js:116:17)
    at Server.js:192:26
    at [object Generator].next (native)
    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)
    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368
    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)
    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)
    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)
    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)
    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28
[2016-10-21 18:50:50.998] [INFO] console - [ 8,
  68,
  297,
  {},
  'Error',
  [ 'Копник, которого назначают старшиной, в данный момент состоит в дружине. Чтобы выбрать его старшиной, сначала он должен выйти из дружины' ],
  { stack: 
     [ 'Error: Копник, которого назначают старшиной, в данный момент состоит в дружине. Чтобы выбрать его старшиной, сначала он должен выйти из дружины',
       '    at [object Object].<anonymous> (Kopnik.js:119:31)',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:253)',
       '    at module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:513)',
       '    at new wrappedPromise (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:372:16)',
       '    at [object Object].module.exports.sequelize.define.id.type (/home/alexey2baranov/htdocs/kp-sequelizejs/src/model/Kopnik.js:1:161)',
       '    at [object Object].setStarshina2 (Kopnik.js:116:17)',
       '    at Server.js:192:26',
       '    at [object Generator].next (native)',
       '    at step (/home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:191)',
       '    at /home/alexey2baranov/htdocs/kp-sequelizejs/src/Server.js:3:368',
       '    at propagateAslWrapper (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:421:23)',
       '    at asyncWrap (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/glue.js:188:31)',
       '    at cbIdx (/home/alexey2baranov/htdocs/kp-sequelizejs/node_modules/async-listener/index.js:458:70)',
       '    at run (/usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:87:22)',
       '    at /usr/lib/node_modules/babel-cli/node_modules/core-js/modules/es6.promise.js:100:28' ] } ]
[2016-10-21 18:50:51.014] [INFO] console - Executing (829d8a7a-0420-4273-98c6-ba82437e5ad4): ROLLBACK;
[2016-10-21 18:50:51.047] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."email" = 'unittest2@domain.ru') LIMIT 1;
[2016-10-21 18:50:51.055] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): START TRANSACTION;
[2016-10-21 18:50:51.058] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:51.075] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): INSERT INTO "Kopnik" ("id","name","surname","patronymic","voiskoSize","birth","path","created_at","updated_at","dom_id","starshina_id") VALUES (DEFAULT,'temp','temp','temp',0,1900,'/','2016-10-21 13:50:51.062 +00:00','2016-10-21 13:50:51.062 +00:00',2,NULL) RETURNING *;
[2016-10-21 18:50:51.081] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:51.091] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:51.099] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): update "Zemla"
                                    set "obshinaSize"= "obshinaSize"+ 1
                                where
                                    '/1/' like path||id||'/%'
                                    or (
                                        true 
                                        and id= 2
                                    )
[2016-10-21 18:50:51.104] [INFO] console - Executing (4e00c30b-b5e7-4e90-9a3e-cb05b0618896): COMMIT;
[2016-10-21 18:50:51.106] [INFO] console - [ 70, 298, {}, [ '62' ] ]
[2016-10-21 18:50:51.124] [INFO] console - Executing (2b34a24b-8a75-422e-bb4c-dcf619eaa131): START TRANSACTION;
[2016-10-21 18:50:51.130] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" = '2');
[2016-10-21 18:50:51.137] [INFO] console - Executing (2b34a24b-8a75-422e-bb4c-dcf619eaa131): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:51.142] [INFO] console - Executing (default): select z.*
                                    from "Zemla" as z
                                where
                                    '/1/' like z.path||z.id||'/%'
[2016-10-21 18:50:51.153] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 18:50:51.164] [INFO] console - Executing (default): SELECT "id", "name", "intensity", "obshinaSize", "path", "note", "created_at", "updated_at", "deleted_at", "parent_id" FROM "Zemla" AS "Zemla" WHERE ("Zemla"."deleted_at" IS NULL AND "Zemla"."id" IN ('1')) ORDER BY "Zemla"."path" desc;
[2016-10-21 18:50:51.175] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 2);
[2016-10-21 18:50:51.176] [INFO] console - [ 16,
  6627726597292032,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id2.obshinaChange',
  [],
  { obshinaSize: 60 } ]
[2016-10-21 18:50:51.186] [INFO] console - [ 16,
  4759398039683072,
  { acknowledge: true },
  'ru.kopa.model.Zemla.id1.obshinaChange',
  [],
  { obshinaSize: 62 } ]
[2016-10-21 18:50:51.198] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:51.210] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:51.215] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:51.228] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"='2',"updated_at"='2016-10-21 13:50:51.218 +00:00' WHERE "id" = '62'
[2016-10-21 18:50:51.235] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/', '/2/')
                                where
                                    id = '62'
                                    or path like '/62/'||'%'
[2016-10-21 18:50:51.240] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:50:51.245] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:50:51.257] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:51.265] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/2/62/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:51.270] [INFO] console - Executing (2b34a24b-8a75-422e-bb4c-dcf619eaa131): COMMIT;
[2016-10-21 18:50:51.273] [INFO] console - [ 70, 299, {}, [ undefined ] ]
[2016-10-21 18:50:51.278] [INFO] console - [ 16,
  4843760175284224,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id62.starshinaChange',
  [],
  { KOPNIK: 62, STARSHINA: 2 } ]
[2016-10-21 18:50:51.288] [INFO] console - Executing (cdc0e435-fb2a-40b6-9e95-a3e90a250454): START TRANSACTION;
[2016-10-21 18:50:51.291] [INFO] console - [ 16,
  4487179304697856,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'add',
    kopnik: 
     { fullName: 'temp temp',
       fullPath: '/2/62/',
       id: '62',
       email: null,
       password: null,
       name: 'temp',
       surname: 'temp',
       patronymic: 'temp',
       voiskoSize: 0,
       birth: 1900,
       path: '/2/',
       note: null,
       created_at: Fri Oct 21 2016 18:50:51 GMT+0500 (YEKT),
       updated_at: Fri Oct 21 2016 18:50:51 GMT+0500 (YEKT),
       deleted_at: null,
       dom_id: '2',
       starshina_id: '2' } } ]
[2016-10-21 18:50:51.303] [INFO] console - Executing (cdc0e435-fb2a-40b6-9e95-a3e90a250454): SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
[2016-10-21 18:50:51.306] [INFO] console - [ 16,
  5963339161141248,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 4 } ]
[2016-10-21 18:50:51.319] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" = 62);
[2016-10-21 18:50:51.327] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/2/' like k.path||k.id||'/%'
[2016-10-21 18:50:51.338] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN ('2')) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:51.345] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"-1
                                where
                                    '/2/' like path||id||'/%'
[2016-10-21 18:50:51.359] [INFO] console - Executing (default): UPDATE "Kopnik" SET "starshina_id"=NULL,"updated_at"='2016-10-21 13:50:51.348 +00:00' WHERE "id" = '62'
[2016-10-21 18:50:51.364] [INFO] console - Executing (default): update "Kopnik"
                                set
                                    path= replace(path, '/2/', '/')
                                where
                                    id = '62'
                                    or path like '/2/62/'||'%'
[2016-10-21 18:50:51.368] [INFO] console - Executing (default): update "Kopnik"
                                    set "voiskoSize"= "voiskoSize"+1
                                where
                                    '/' like path||id||'/%'
[2016-10-21 18:50:51.372] [INFO] console - Executing (default): select k.*
                                    from "Kopnik" as k
                                where
                                    '/' like k.path||k.id||'/%'
[2016-10-21 18:50:51.382] [INFO] console - Executing (default): SELECT "id", "email", "password", "name", "surname", "patronymic", "voiskoSize", "birth", "path", "note", "created_at", "updated_at", "deleted_at", "dom_id", "starshina_id" FROM "Kopnik" AS "Kopnik" WHERE ("Kopnik"."deleted_at" IS NULL AND "Kopnik"."id" IN (NULL)) ORDER BY "Kopnik"."path" desc;
[2016-10-21 18:50:51.388] [INFO] console - Executing (default): select id
                                from
                                    "Kopnik"
                                where
                                    path like '/62/'||'%'
                                order by 
                                    path
[2016-10-21 18:50:51.392] [INFO] console - Executing (cdc0e435-fb2a-40b6-9e95-a3e90a250454): COMMIT;
[2016-10-21 18:50:51.395] [INFO] console - [ 70, 300, {}, [ undefined ] ]
[2016-10-21 18:50:51.401] [INFO] console - [ 16,
  8573381832081408,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id62.starshinaChange',
  [],
  { KOPNIK: 62, STARSHINA: null } ]
[2016-10-21 18:50:51.410] [INFO] console - [ 16,
  8207398690881536,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.druzhinaChange',
  [],
  { action: 'remove', KOPNIK: 62 } ]
[2016-10-21 18:50:51.419] [INFO] console - [ 16,
  5094839276273664,
  { acknowledge: true },
  'ru.kopa.model.Kopnik.id2.voiskoChange',
  [],
  { voiskoSize: 3 } ]
[2016-10-21 19:33:56.237] [INFO] Server - connection.onclose() lost { reason: null,
  message: null,
  retry_delay: 1.4440329142840205,
  retry_count: 1,
  will_retry: true }
